<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>GPIO</title>
    <url>/2022/09/22/GPIO/</url>
    <content><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>GPIOï¼šGeneral Purpose Input Outputï¼Œé€šç”¨è¾“å…¥è¾“å‡ºï¼Œç®€ç§°ä¸ºâ€œIOå£â€ï¼ŒèŠ¯ç‰‡ä¸å¤–å›´è®¾å¤‡äº¤äº’çš„ç¡¬ä»¶æ¥å£</p>
<h1 id="åŸºæœ¬ç»“æ„"><a href="#åŸºæœ¬ç»“æ„" class="headerlink" title="åŸºæœ¬ç»“æ„"></a>åŸºæœ¬ç»“æ„</h1><p>ä»¥ä¸‹å›¾ç‰‡æ¥è‡ªSTM32çš„GPIOç¡¬ä»¶ç”µè·¯å›¾</p>
<p><img src="/images/system/GPIO-1.png" alt="image"></p>
<p>æ–½å¯†ç‰¹è§¦å‘å™¨ï¼šåœ¨æ­£å‘é€’å¢å’Œè´Ÿå‘é€’å‡ä¸¤ä¸ªæ–¹å‘æœ‰ä¸åŒçš„é˜ˆå€¼ï¼Œæœ‰ä¸€å®šçš„æŠ—å¹²æ‰°èƒ½åŠ›ï¼Œå¤–éƒ¨çš„å°æ‰°åŠ¨ä¸ä¼šå¯¼è‡´cpuè¯¯åˆ¤ï¼Œç›´è‡³å‰§çƒˆå˜åŒ–æˆ–è€…çœŸçš„æœ‰ç”µå¹³çš„å˜åŒ–ã€‚</p>
<h1 id="å·¥ä½œæ¨¡å¼"><a href="#å·¥ä½œæ¨¡å¼" class="headerlink" title="å·¥ä½œæ¨¡å¼"></a>å·¥ä½œæ¨¡å¼</h1><h2 id="è¾“å…¥ï¼ˆ4ï¼‰"><a href="#è¾“å…¥ï¼ˆ4ï¼‰" class="headerlink" title="è¾“å…¥ï¼ˆ4ï¼‰"></a>è¾“å…¥ï¼ˆ4ï¼‰</h2><ol>
<li>æµ®ç©ºè¾“å…¥ï¼šå¤šç”¨äºå¤–éƒ¨æŒ‰é”®è¾“å…¥ï¼ŒioçŠ¶æ€ä¸ç¡®å®šå®Œå…¨ç”±å¤–éƒ¨è¾“å…¥å†³å®š</li>
<li>ä¸Šæ‹‰è¾“å…¥ï¼šIOå£è¾“å…¥è®¾å®šä¸ºé«˜ç”µå¹³è¾“å…¥ï¼ˆ1ï¼‰ï¼Œæ£€æµ‹ä½ç”µå¹³æˆ–ä¸‹é™æ²¿</li>
<li>ä¸‹æ‹‰è¾“å…¥ï¼šIOå£è¾“å…¥è®¾å®šä¸ºä½ç”µå¹³è¾“å…¥ï¼ˆ0ï¼‰</li>
<li>æ¨¡æ‹Ÿè¾“å…¥ï¼šADCæ¨¡æ‹Ÿè¾“å…¥ï¼Œæµ‹é‡å¤–éƒ¨ç”µå‹å¹…å€¼ä¸é€šè¿‡TTL</li>
</ol>
<h2 id="è¾“å‡ºï¼ˆ4ï¼‰"><a href="#è¾“å‡ºï¼ˆ4ï¼‰" class="headerlink" title="è¾“å‡ºï¼ˆ4ï¼‰"></a>è¾“å‡ºï¼ˆ4ï¼‰</h2><ol>
<li>æ¨æŒ½è¾“å‡ºï¼šè¾“å‡ºé«˜ä½ç”µå¹³</li>
<li>å¼€æ¼è¾“å‡ºï¼šåªæœ‰ä¸€ä¸ªNMOSå¯¼é€šï¼Œåªèƒ½è¾“å‡ºä½ç”µå¹³+é«˜é˜»æ€ï¼Œä¸èƒ½è¾“å‡ºé«˜ç”µå¹³ï¼›å½“NMOSå¯¼é€šè¾“å‡ºä½ç”µå¹³ï¼Œæˆªè‡³è¾“å‡ºé«˜é˜»æ€ã€‚ç”¨ä½œçº¿ä¸ï¼Œç”µå¹³ä¸åŒ¹é…çš„åœºåˆï¼Œå¤–éƒ¨ä¸Šæ‹‰</li>
<li>å¤ç”¨æ¨æŒ½è¾“å‡ºï¼šéœ€è¦è¾“å‡ºé«˜ä½ç”µå¹³çš„å…¶ä»–æ¨¡å¼ï¼Œå¦‚ï¼šspi uart</li>
<li>å¤ç”¨å¼€æ¼è¾“å‡ºï¼šæ™®é€ši2cå¤„äºè¯¥æ¨¡å¼</li>
</ol>
<h1 id="GPIOå¯„å­˜å™¨"><a href="#GPIOå¯„å­˜å™¨" class="headerlink" title="GPIOå¯„å­˜å™¨"></a>GPIOå¯„å­˜å™¨</h1><h2 id="é€šç”¨å¯„å­˜å™¨"><a href="#é€šç”¨å¯„å­˜å™¨" class="headerlink" title="é€šç”¨å¯„å­˜å™¨"></a>é€šç”¨å¯„å­˜å™¨</h2><p>ä»¥stm32ä¸ºä¾‹</p>
<ul>
<li>GPIO ç«¯å£æ¨¡å¼å¯„å­˜å™¨ (GPIOx_MODER) (x = Aâ€¦I)</li>
<li>GPIO ç«¯å£è¾“å‡ºç±»å‹å¯„å­˜å™¨ (GPIOx_OTYPER) (x = Aâ€¦I)</li>
<li>GPIO ç«¯å£è¾“å‡ºé€Ÿåº¦å¯„å­˜å™¨ (GPIOx_OSPEEDR) (x = Aâ€¦I/)</li>
<li>GPIO ç«¯å£ä¸Šæ‹‰/ä¸‹æ‹‰å¯„å­˜å™¨ (GPIOx_PUPDR) (x = Aâ€¦I/)</li>
<li>GPIO ç«¯å£è¾“å…¥æ•°æ®å¯„å­˜å™¨ (GPIOx_IDR) (x = Aâ€¦I)</li>
<li>GPIO ç«¯å£è¾“å‡ºæ•°æ®å¯„å­˜å™¨ (GPIOx_ODR) (x = Aâ€¦I)</li>
<li>GPIO ç«¯å£ç½®ä½/å¤ä½å¯„å­˜å™¨ (GPIOx_BSRR) (x = Aâ€¦I)</li>
</ul>
<h2 id="GPIO-Shadow"><a href="#GPIO-Shadow" class="headerlink" title="GPIO Shadow"></a>GPIO Shadow</h2><p>ç”±äºè®¾ç½®æŸä¸ªæ¨¡å¼çš„è¿‡ç¨‹ä¸­é…ç½®çš„ä¸åªæ˜¯ä¸€ä¸ªå¯„å­˜å™¨ï¼Œé…ç½®è¿‡ç¨‹ä¸­å°±å¯èƒ½å‡ºç°åˆ«çš„çŠ¶æ€çš„äº§ç”Ÿï¼Œå¯¼è‡´é”™è¯¯ã€‚è€Œä½¿ç”¨shadowå¯„å­˜å™¨ï¼Œå¯ä»¥å…ˆå°†æ‰€æœ‰éœ€è¦é…ç½®çš„å¯„å­˜å™¨åˆ†åˆ«è®¾ç½®è¿›å»ï¼Œä½†ä¸ç”Ÿæ•ˆï¼Œç›´è‡³å…¨éƒ¨è®¾ç½®å®Œæ¯•ï¼Œå†æŒ‡å®šGPIDå³è¦æ˜ å°„çš„ç»„ä¸Šå»ç”Ÿæ•ˆï¼é¿å…äº†ä¸­é—´éå¿…è¦çŠ¶æ€çš„äº§ç”Ÿã€‚</p>
<h1 id="ç”¨æˆ·å±‚åº”ç”¨"><a href="#ç”¨æˆ·å±‚åº”ç”¨" class="headerlink" title="ç”¨æˆ·å±‚åº”ç”¨"></a>ç”¨æˆ·å±‚åº”ç”¨</h1><h2 id="é…ç½®GPIO"><a href="#é…ç½®GPIO" class="headerlink" title="é…ç½®GPIO"></a>é…ç½®GPIO</h2><p>åœ¨å†…æ ¸å¯¼å‡º gpio èŠ‚ç‚¹çš„å‰æä¸‹ï¼Œ å¯ä»¥æ“ä½œ/sys/class/gpio èŠ‚ç‚¹ï¼Œ æ§åˆ¶ gpio è¾“å…¥è¾“å‡º</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">å¯¼å‡ºèŠ‚ç‚¹ï¼š  echo <span class="number">20</span> &gt; /sys/<span class="class"><span class="keyword">class</span>/<span class="title">gpio</span>/<span class="title">export</span></span></span><br><span class="line"><span class="class">è®¾ç½®æ–¹å‘ï¼š  <span class="title">echo</span> [<span class="title">out</span> / <span class="title">in</span>] &gt;</span> /sys/<span class="class"><span class="keyword">class</span>/<span class="title">gpio</span>/<span class="title">gpio20</span>/<span class="title">direction</span></span></span><br><span class="line"><span class="class">è®¾ç½®å€¼ï¼š    <span class="title">echo</span> [0 / 1] &gt;</span> sys/<span class="class"><span class="keyword">class</span>/<span class="title">gpio</span>/<span class="title">gpio19</span>/<span class="title">value</span></span></span><br><span class="line"><span class="class">è®¾ç½®è§¦å‘æ¨¡å¼ï¼š<span class="title">echo</span> [<span class="title">none</span> / <span class="title">rising</span> / <span class="title">falling</span> /  <span class="title">both</span>] &gt;</span> sys/<span class="class"><span class="keyword">class</span>/<span class="title">gpio</span>/<span class="title">gpio19</span>/<span class="title">edge</span></span></span><br><span class="line"><span class="class">ç¿»è½¬å±æ€§ï¼š  <span class="title">echo</span> [0 / 1] &gt;</span> sys/<span class="class"><span class="keyword">class</span>/<span class="title">gpio</span>/<span class="title">gpio19</span>/<span class="title">active_low</span></span></span><br><span class="line"><span class="class">ç§»é™¤èŠ‚ç‚¹ï¼š  <span class="title">echo</span> 20 &gt;</span> /sys/<span class="class"><span class="keyword">class</span>/<span class="title">gpio</span>/<span class="title">unexport</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>æ³¨æ„äº‹é¡¹</p>
<ul>
<li>direction<br>å¦‚æœå†…æ ¸ä¸æ”¯æŒæ”¹å˜ GPIO çš„æ–¹å‘ï¼Œæˆ–è€…åœ¨å¯¼å‡ºæ—¶å†…æ ¸ä»£ç æ²¡æœ‰æ˜ç¡®å…è®¸ç”¨æˆ·ç©ºé—´å¯ä»¥é‡æ–°é…ç½® GPIO æ–¹å‘ï¼Œ é‚£ä¹ˆè¿™ä¸ªå±æ€§å°†ä¸å­˜åœ¨ã€‚</li>
<li>value<br>è¾“å‡ºæ—¶ï¼Œæ§åˆ¶é«˜ä½ç”µå¹³ï¼›è¾“å…¥æ—¶ï¼Œè·å–é«˜ä½ç”µå¹³</li>
<li>edge<br>æ§åˆ¶ä¸­æ–­è§¦å‘æ¨¡å¼ï¼Œå¼•è„šè¢«é…ç½®ä¸ºä¸­æ–­åå¯ä»¥ä½¿ç”¨poll() å‡½æ•°ç›‘å¬å¼•è„š<br>éä¸­æ–­å¼•è„šã€ä¸Šå‡æ²¿è§¦å‘ã€ä¸‹é™æ²¿è§¦å‘ã€è¾¹æ²¿è§¦å‘</li>
<li>active_low<br>ç”¨äºç¿»è½¬ç”µå¹³ï¼Œå½“å¤–éƒ¨æœ‰æ•ˆä¿¡å·ä¸GPIOæœ‰æ•ˆä¿¡å·ä¸ä¸€è‡´ï¼ˆå³0å¯èƒ½è¡¨ç¤ºæœ‰æ•ˆï¼Œ1ä¹Ÿæœ‰å¯èƒ½è¡¨ç¤ºæœ‰æ•ˆï¼‰</li>
</ul>
<h2 id="æŸ¥çœ‹GPIOé…ç½®"><a href="#æŸ¥çœ‹GPIOé…ç½®" class="headerlink" title="æŸ¥çœ‹GPIOé…ç½®"></a>æŸ¥çœ‹GPIOé…ç½®</h2><p>ä¸åŒçš„å‚å•†å¯¹äºGPIOé…ç½®ç»“æœçš„æŸ¥çœ‹æ–¹å¼æœ‰æ‰€ä¸åŒï¼Œä»¥ä¸‹ä»¥Ingenic-x2000ä¸ºä¾‹å¯¹åº”ç›¸å…³çš„æ‰‹å†Œå¯ä»¥ç¡®å®šç›¸åº”çš„IOçŠ¶æ€</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">/<span class="meta"># cat /sys/devices/platform/apb/10010000.pinctrl/dump_gpio</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœå¦‚ä¸‹å›¾, ä¸‹é¢ä¼šæœ‰æ¯ä¸€ä¸ªGPIOçŠ¶æ€</span></span><br><span class="line">REG 	|+++GPA++|+++GPB++|+++GPC++|+++GPD++|</span><br><span class="line"></span><br><span class="line">INL 	|<span class="number">0</span>c3fffff|<span class="number">67f</span>6036f|<span class="number">0110f</span>ef4|<span class="number">0f</span>7fffff|</span><br><span class="line">INT 	|<span class="number">02b</span>00000|<span class="number">30440000</span>|<span class="number">00000081</span>|<span class="number">00000100</span>|</span><br><span class="line">MSK 	|<span class="number">194f</span>cfff|ce0a0040|<span class="number">74f</span>f0076|<span class="number">003f</span>feff|</span><br><span class="line">PAT1 	|<span class="number">0265</span>cfff|f6440000|<span class="number">77</span>efc0fb|<span class="number">003f</span>fbff|</span><br><span class="line">PAT0 	|<span class="number">0f</span>8a3000|<span class="number">1033</span>efc0|<span class="number">88100005</span>|<span class="number">00000400</span>|</span><br><span class="line">EDG 	|<span class="number">3f</span>ffff00|f6037f00|<span class="number">10f</span>ff400|<span class="number">7f</span>ffff00|</span><br><span class="line">PLUP 	|<span class="number">14000000</span>|<span class="number">41800000</span>|<span class="number">00200001</span>|<span class="number">00000100</span>|</span><br><span class="line">PLDWN 	|<span class="number">00000000</span>|<span class="number">800000</span>c0|<span class="number">00100002</span>|<span class="number">00000000</span>|</span><br><span class="line">FLAG 	|<span class="number">00000000</span>|<span class="number">00000000</span>|<span class="number">00000000</span>|<span class="number">00000000</span>|</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h1 id="ç›¸å…³åŠŸèƒ½"><a href="#ç›¸å…³åŠŸèƒ½" class="headerlink" title="ç›¸å…³åŠŸèƒ½"></a>ç›¸å…³åŠŸèƒ½</h1><p>åœ¨ä½åŠŸè€—åœºæ™¯ä¸‹ï¼Œç³»ç»Ÿä¼‘çœ ä»¥åéƒ¨åˆ†ç¡¬ä»¶æ—¶é’Ÿå¯èƒ½å…³é—­ã€‚ä½†æ˜¯GPIOä¸ä¾èµ–å§‹ç»ˆï¼Œæ•…å¯ä»¥é…ç½®IOä½œä¸ºä¸­æ–­æºå¯¹CPUè¿›è¡Œå”¤é†’</p>
]]></content>
      <categories>
        <category>Computure System</category>
        <category>GPIO</category>
      </categories>
  </entry>
  <entry>
    <title>Hello New World</title>
    <url>/2022/08/22/hello-world/</url>
    <content><![CDATA[<blockquote>
<p>Be all you can be!</p>
</blockquote>
<p>Hello World æ˜¯ç¨‹åºå‘˜è¿›å…¥ç¼–ç¨‹ä¸–ç•Œåçœ‹åˆ°çš„ç¬¬ä¸€é“é£æ™¯ï¼Œæˆ‘ä¹Ÿååˆ†ä¹æ„è¿™ä½œä¸ºç¬¬ä¸€ç¯‡åšæ–‡çš„æ ‡é¢˜ï¼Œå¯¹æˆ‘æ¥è®²å¯èƒ½æ˜¯ï¼šä½ å¥½æ–°ä¸–ç•Œï¼</p>
<p>ç¬”è€…æ˜¯ä¸€ååµŒå…¥å¼è½¯ä»¶å·¥ç¨‹å¸ˆï¼Œæœªæ¥æ›´å¤šçš„å†…å®¹å°†ä¼šæ˜¯å…³äºLinuxã€Androidç­‰ç›¸å…³å†…å®¹ï¼Œç¼–ç¨‹è¯­è¨€æ–¹é¢å°†ä¼šæ˜¯ä»¥C / C++ä¸ºä¸»ã€‚åšè¿™ä¸ªåšå®¢æœ‰ä¸‰ä¸ªç›®çš„ï¼š</p>
<ol>
<li>è®°å½•è‡ªå·±åœ¨å·¥ä½œä¸­é‡åˆ°çš„é—®é¢˜åŠç›¸å…³è§£å†³åŠæ³•ã€‚å¸®åŠ©è‡ªå·±ç§¯ç´¯è°ƒè¯•ç»éªŒåŒæ—¶å¸®åŠ©å…¶ä»–å¯èƒ½é‡åˆ°åŒæ ·é—®é¢˜çš„æœ‹å‹ï¼Œé¿å…è¸©å¾ˆå¤šå‘ï¼›</li>
<li>æ€»ç»“è‡ªå·±è¿‘æœŸå­¦åˆ°çš„æ–°çš„çŸ¥è¯†å’Œå†…å®¹ã€‚è¿™éƒ¨åˆ†ä¸ä¸€å®šæ˜¯æœ€å…¨é¢çš„ä½†å¯¹äºå¤„äºç›¸åŒé˜¶æ®µçš„æˆ‘ä»¬ä¸€å®šæ˜¯æœ€å®ç”¨çš„ï¼Œåé¢å†ä¸æ–­çš„å®Œå–„æ›´æ–°ï¼›</li>
<li>æœ€åå¯èƒ½å°±æ˜¯ç®€å•çš„è®°å½•å¹¶å®‰åˆ©ä¸€äº›å®ç”¨çš„å·¥å…·æˆ–è€…æ¯”è¾ƒå¥½çš„æ–‡ç« ï¼Œèƒ½å¤Ÿä»¥é€šä¿—çš„è¯­è¨€å¸®åŠ©æˆ‘ä»¬ç†è§£æŸä¸€ä¸ªç‚¹æˆ–è€…çœ‹æ¸…æ¥šæŸä¸€ä¸ªé¢ã€‚</li>
</ol>
<p>ç›®å‰æˆ‘åªæ­å»ºäº†ä¸»é¡µåŸºç¡€æ¨¡å—ï¼Œåé¢éšç€æ–‡ç« çš„ä¸æ–­è¾“å‡ºä¹Ÿä¼šæ·»ç –åŠ ç“¦çš„ã€‚æˆ‘ä¹Ÿå¸Œæœ›åç»­èƒ½å†™ä¸€äº›è¯»ä¹¦ç¬”è®°æˆ–è€…ç”Ÿæ´»ç»éªŒæ¥åšè®°å½•åšåˆ†äº«ï¼åšå®¢æ›´æ–°é¢‘ç‡æš‚å®š1~2å‘¨è‡³å°‘ä¸€ç¯‡å†…å®¹ä¹Ÿä¸€å®šæ˜¯å’Œå·¥ä½œç”Ÿæ´»ç›¸å…³çš„ã€‚å¦‚æœæœ‰é”™è¯¯è¿˜è¯·æŒ‡æ­£å…±åŒè¿›æ­¥å‘€<span class="github-emoji" style="display:inline;vertical-align:middle"><span>ğŸ˜ƒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>!</p>
<p align="right">2022-8-22/23.38</p>

<p align="right">Lee</p>

]]></content>
      <categories>
        <category>Personal</category>
      </categories>
      <tags>
        <tag>å¼€ç¯‡</tag>
      </tags>
  </entry>
  <entry>
    <title>ç†è§£c/c++ Volatileå…³é”®å­—</title>
    <url>/2022/11/15/Volatile/</url>
    <content><![CDATA[<p>ç½‘ç»œä¸Šå¯¹äºvolatileçš„è§£è¯»ä¼—è¯´çº·çº­ï¼Œè€Œä¸”å…¶ä¸­è¾ƒå¤šçš„æ˜¯javaå†…å­˜æ¨¡å‹ã€‚</p>
<p>æœ¬ç¯‡æ–‡ç« å°†åŸºäºè‡ªå·±çš„å­¦ä¹ å’Œå®éªŒï¼Œé’ˆå¯¹C/C++è¯­è¨€åµŒå…¥å¼å¼€å‘åœºæ™¯è¿›è¡Œvolatileå…³é”®å­—çš„åˆ†æ</p>
<h1 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h1><p>volatile å…³é”®å­—æ˜¯ C /C++ ç¼–ç¨‹è¯­è¨€çš„ä¸€éƒ¨åˆ†ï¼Œä½œä¸ºä¸€ç§ç±»å‹ä¿®é¥°ç¬¦ã€‚æˆ‘å°†å…¶ä½œç”¨æ€»ç»“ä¸º<em><strong>å‘Šè¯‰ç¼–è¯‘å™¨ç¦æ­¢ä¼˜åŒ–å…¶æ‰€ä¿®é¥°å¯¹è±¡çš„è¯»å†™è®¿å­˜æ“ä½œåŠæŒ‡ä»¤é¡ºåºï¼Œä¿è¯å˜é‡çš„å¯è§æ€§</strong></em></p>
<blockquote>
<p>å¯è§æ€§ï¼šå½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†å…±äº«å˜é‡åï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³å¾—çŸ¥è¿™ä¸ªä¿®æ”¹ã€‚</p>
<p>æœ‰åºæ€§ï¼šç¨‹åºæ‰§è¡Œçš„é¡ºåºæŒ‰ç…§ä»£ç çš„å…ˆåé¡ºåºæ‰§è¡Œã€‚</p>
<p>åŸå­æ€§ï¼šä¸€ä¸ªæ“ä½œæˆ–å¤šä¸ªæ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œä¸”æ‰§è¡Œçš„è¿‡ç¨‹ä¸ä¼šè¢«ä»»ä½•å› ç´ æ‰“æ–­ï¼Œè¦ä¹ˆå°±éƒ½ä¸æ‰§è¡Œã€‚</p>
</blockquote>
<p>åœ¨ã€Šç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»ã€‹è¿™æœ¬ä¹¦ä¸­è®²åˆ°ï¼ŒvolatileåŸºæœ¬å¯ä»¥åšåˆ°ä¸¤ä¸ªäº‹æƒ…ï¼š</p>
<ol>
<li>é˜»æ­¢ç¼–è¯‘å™¨ä¸ºäº†æé«˜é€Ÿåº¦å°†ä¸€ä¸ªå˜é‡ç¼“å­˜åˆ°å¯„å­˜å™¨å†…è€Œä¸å†™å›</li>
<li>é˜»æ­¢ç¼–è¯‘å™¨è°ƒæ•´æ“ä½œvolatileå˜é‡çš„æŒ‡ä»¤é¡ºåº</li>
</ol>
<p>å¯¹äºç¬¬ä¸€ä¸ªä½œç”¨volatileæ˜¯å¯ä»¥å¾ˆå¥½çš„åšåˆ°ï¼Œè€Œå¯¹äºç¬¬äºŒä¸ªä½œç”¨ç¼–è¯‘å™¨å±‚é¢å¯ä»¥ä¿è¯æŒ‡ä»¤æœ‰åºä½†æ˜¯æˆ‘ä»¬æ— æ³•é˜»æ­¢cpuåŠ¨æ€è°ƒæ•´é¡ºåºã€‚çœŸæ­£ä¿è¯æœ‰åºæ€§æ˜¯éœ€è¦é€šè¿‡å†…å­˜å±éšœå®Œæˆçš„ï¼Œè€Œvolatileå¹¶æ²¡æœ‰å†…å­˜å±éšœçš„åŠŸèƒ½ï¼Œgcc æä¾›äº†ä¸€ä¸ªå†…è”å‡½æ•° <em><strong>asm volatile (â€œâ€ : : : â€œmemoryâ€</strong>)</em> ç¼–è¯‘å™¨å±éšœï¼Œå…·ä½“å¹³å°ç›¸å…³å†…å­˜å±éšœéœ€è¦åˆ°å…·ä½“çš„ç»“æ„å¹³å°å»å‚è€ƒ</p>
<h1 id="ç†è§£volatile"><a href="#ç†è§£volatile" class="headerlink" title="ç†è§£volatile"></a>ç†è§£volatile</h1><blockquote>
<p>Collinså¯¹äºVolatileé‡Šä¹‰ï¼šA situation that is volatile is <strong>likely</strong> to change <strong>suddenly</strong> and <strong>unexpectedly</strong>.</p>
</blockquote>
<p><strong>volatile</strong> æœ¬èº«é‡Šä¹‰ä¸º <strong>æ˜“å¤±çš„ã€æ˜“å˜çš„</strong></p>
<p>å¯¹äºç”¨volatileæ‰€ä¿®é¥°çš„å¯¹è±¡ï¼Œåœ¨å…¶è‡ªèº«çš„å«ä¹‰åŸºç¡€ä¸Šï¼Œæœ‰ä¸‰ä¸ªå‰¯è¯å¯ä»¥å¾ˆå¥½çš„å¯¹å…¶æ€§è´¨è¿›è¡Œè¯ é‡Šï¼š</p>
<ul>
<li><p>likely   å¯èƒ½åœ°ï¼ŒæŒ‡å¯¹è±¡çš„çŠ¶æ€å¯èƒ½å˜åŒ–ã€ä¹Ÿå¯èƒ½ä¸å˜ä¿æŒçŠ¶æ€ï¼Œå¼ºè°ƒç»“æœï¼›</p>
</li>
<li><p>suddenly:   çªç„¶åœ°ï¼ŒæŒ‡å¯¹è±¡çŠ¶æ€çš„ç¬æ—¶å˜åŒ–ï¼Œå¼ºè°ƒè¿‡ç¨‹ï¼›</p>
</li>
<li><p>unexpectedly:  ä¸å¯é¢„æœŸåœ°ï¼ŒæŒ‡å¯¹è±¡å˜åŒ–çš„æ—¶é—´ç»“æœéƒ½ä¸å¯é¢„æœŸï¼›</p>
</li>
</ul>
<h1 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h1><p>æ ¹æ®å«ä¹‰æ€§è´¨ï¼Œåœ¨åµŒå…¥å¼å¼€å‘ä¸­ä»¥ä¸‹ä¸‰ç§åœºæ™¯æ˜¯ä¸€å®šè¦è€ƒè™‘ä½¿ç”¨volatileå…³é”®å­—çš„ï¼ˆå¤§å¤šæ•°æƒ…å†µä¸€å®šä½¿ç”¨ï¼ï¼ï¼ï¼‰</p>
<ol>
<li>å¤šçº¿ç¨‹ä»»åŠ¡è¯»å†™åŒä¸€å…¨å±€å˜é‡ï¼Œ</li>
<li>ä¸­æ–­æœåŠ¡ç¨‹åºä¿®æ”¹çš„å…¨å±€å˜é‡</li>
<li>å†…å­˜æ˜ å°„å¤–è®¾å¯„å­˜å™¨</li>
</ol>
<h1 id="æµ‹è¯•ç”¨ä¾‹"><a href="#æµ‹è¯•ç”¨ä¾‹" class="headerlink" title="æµ‹è¯•ç”¨ä¾‹"></a>æµ‹è¯•ç”¨ä¾‹</h1><h2 id="ä¸­æ–­åœºæ™¯"><a href="#ä¸­æ–­åœºæ™¯" class="headerlink" title="ä¸­æ–­åœºæ™¯"></a>ä¸­æ–­åœºæ™¯</h2><p>ä¸‹é¢ä¸€æ®µä»£ç ï¼Œæˆ‘ä»¬æ‰€æœŸå¾…çš„ç»“æœæ˜¯ä¸»ç¨‹åºè¿è¡Œï¼Œç›´åˆ°crtl+cæŒ‰é”®æŒ‰ä¸‹ç¨‹åºé€€å‡ºï¼Œä»£ç ç¼–è¯‘æ‰§è¡Œä¹‹åå¹¶ä¸æ˜¯æˆ‘ä»¬æ‰€é¢„æœŸçš„æ ·å­ã€‚å¦‚æœsig_doneå˜é‡ä¸é€šè¿‡volatileä¿®é¥°ç¨‹åºå°†æ°¸è¿œä¸ä¼šé€€å‡ºï¼Œè€Œvolatileå…³é”®å­—å¾ˆå¥½çš„è§£å†³äº†è¿™ä¸€ä¸ªé—®é¢˜</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;signal.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdbool.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">bool</span> sig_done = <span class="literal">false</span>;</span><br><span class="line"><span class="comment">//static volatile bool sig_done = false;</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">handler</span><span class="params">(<span class="type">int</span> sig)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span>(sig == SIGINT)</span><br><span class="line">    â”†   sig_done = <span class="literal">true</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc , <span class="type">char</span> *argv[])</span></span><br><span class="line">{</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"main start, press ctrl+c go on\n"</span>);</span><br><span class="line">    signal(SIGINT, handler);</span><br><span class="line">    <span class="keyword">while</span>(!sig_done) {</span><br><span class="line">    }   </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"main exit\n"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘å‘½ä»¤</span></span><br><span class="line">gcc main.c <span class="number">-02</span></span><br><span class="line">objdump -d a.out &gt; a.s</span><br></pre></td></tr></tbody></table></figure>

<p>é€šè¿‡åæ±‡ç¼–æ¯”è¾ƒä¸¤ä¸ªç¨‹åºçš„å¼‚åŒï¼ˆå·¦ä¾§volatileï¼Œå³ä¾§æ— volatileï¼‰</p>
<p><img src="/images/coding/meld.png" alt="image"></p>
<p>æ²¡æœ‰voaltileçš„whileå®ç°æ–¹å¼ä¸ºï¼š</p>
<ol>
<li>æ¯”è¾ƒripå¯„å­˜å™¨+0x2f65åœ°å€å¤„çš„å€¼ï¼ˆsig_doneï¼‰ä¸ 0 æ˜¯å¦ç›¸ç­‰</li>
<li>ä¸ç›¸ç­‰è·³è½¬åˆ°main+0x30å³ä¸Šä¸€æ¡æŒ‡ä»¤å¤„</li>
<li>è·³è½¬</li>
</ol>
<p>æœ‰volatileçš„whileå®ç°æ–¹å¼ï¼š</p>
<ol>
<li><p>nopl (%rax) ç¼–è¯‘å™¨å¼€å¯ä¼˜åŒ–åä½¿æŒ‡ä»¤æŒ‰å­—å¯¹é½,å‡å°‘å–æŒ‡ä»¤çš„æ—¶é’Ÿå‘¨æœŸã€‚</p>
</li>
<li><p>å°† ripå¯„å­˜å™¨+0x2f65åœ°å€å¤„çš„å€¼æ”¾åˆ°eaxå¯„å­˜å™¨ä¸­</p>
<blockquote>
<p>movzblæŒ‡ä»¤è´Ÿè´£æ‹·è´ä¸€ä¸ªå­—èŠ‚ï¼Œå¹¶ç”¨0å¡«å……å…¶ç›®çš„æ“ä½œæ•°ä¸­çš„å…¶ä½™å„ä½ï¼Œè¿™ç§æ‰©å±•æ–¹å¼å«â€œé›¶æ‰©å±•â€ã€‚</p>
<p>movsblæŒ‡ä»¤è´Ÿè´£æ‹·è´ä¸€ä¸ªå­—èŠ‚ï¼Œå¹¶ç”¨æºæ“ä½œæ•°çš„æœ€é«˜ä½å¡«å……å…¶ç›®çš„æ“ä½œæ•°ä¸­çš„å…¶ä½™å„ä½ï¼Œè¿™ç§æ‰©å±•æ–¹å¼å«â€œç¬¦å·æ‰©å±•â€ã€‚</p>
</blockquote>
</li>
<li><p>test   %al,%al å¯¹eaxå¯„å­˜å™¨ä½ä½é€»è¾‘ä¸</p>
<blockquote>
<p>Testå‘½ä»¤ï¼šå°†ä¸¤ä¸ªæ“ä½œæ•°è¿›è¡Œé€»è¾‘ä¸è¿ç®—ï¼Œå¹¶æ ¹æ®è¿ç®—ç»“æœè®¾ç½®ç›¸å…³çš„æ ‡å¿—ä½ï¼ˆze: zero flagï¼‰ã€‚ä½†æ˜¯ï¼ŒTestå‘½ä»¤çš„ä¸¤ä¸ªæ“ä½œæ•°ä¸ä¼šè¢«æ”¹å˜ã€‚è¿ç®—ç»“æœåœ¨è®¾ç½®è¿‡ç›¸å…³æ ‡è®°ä½åä¼šè¢«ä¸¢å¼ƒã€‚</p>
</blockquote>
</li>
<li><p>je   å¦‚æœZFï¼ˆé›¶æ ‡å¿—ä½ï¼‰=1ï¼Œé›¶æ ‡å¿—ä½ä¸º1ï¼ˆçœŸå€¼ï¼‰è¯´æ˜ç»“æœä¸º0ï¼Œåˆ™è½¬åˆ°labelæ‰€æŒ‡çš„æŒ‡ä»¤è¯­å¥ï¼›å¦åˆ™è·³è¿‡è¿™æ¡è¯­å¥ï¼Œæ‰§è¡Œä¸‹æ¡è¯­å¥</p>
</li>
</ol>
<h2 id="å¤šçº¿ç¨‹åœºæ™¯"><a href="#å¤šçº¿ç¨‹åœºæ™¯" class="headerlink" title="å¤šçº¿ç¨‹åœºæ™¯"></a>å¤šçº¿ç¨‹åœºæ™¯</h2><figure class="highlight cpp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">bool</span> mstop = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">//static volatile bool mstop = true;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">first_thread</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s start\n"</span>, __func__);</span><br><span class="line">    <span class="keyword">while</span>(mstop) {</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s exit\n"</span>, __func__);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">second_thread</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">sleep</span>(<span class="number">3</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s start\n"</span>, __func__);</span><br><span class="line">    mstop = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s exit\n"</span>, __func__);</span><br><span class="line">}                                                                                                                                                                     </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    std::thread fthread{first_thread};</span><br><span class="line">    std::thread sthread{second_thread};</span><br><span class="line">    fthread.<span class="built_in">join</span>();</span><br><span class="line">	sthread.<span class="built_in">join</span>();</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="å¤–è®¾å¯„å­˜å™¨"><a href="#å¤–è®¾å¯„å­˜å™¨" class="headerlink" title="å¤–è®¾å¯„å­˜å™¨"></a>å¤–è®¾å¯„å­˜å™¨</h2><p>å¯¹äºå¤–è®¾é€šå¸¸è®¾ç½®æœ‰çŠ¶æ€å¯„å­˜å™¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¾ªç¯è¯»å–çŠ¶æ€å¯„å­˜å™¨çš„å€¼æ¥æŸ¥çœ‹å¯¹åº”å¤–è®¾çš„çŠ¶æ€ã€‚å¯¹äºå¦‚ä¸‹ç¤ºä¾‹ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨volatileå…³é”®å­—ï¼Œç¼–è¯‘å™¨å¯èƒ½ç”Ÿæˆçš„ä»£ç æ˜¯è¯»å–ä¸€ä¸ªå›ºå®šåœ°å€çš„å€¼è€Œä¸ä¼šæ¯æ¬¡éƒ½ä»ä¸»å­˜ä¸­è¯»å–æ–°çš„å€¼ï¼ˆæˆ–è€…è¯»å–næ¬¡çŠ¶æ€ï¼Œç”Ÿæˆçš„ä»£ç åªè¯»å–äº†ä¸€æ¬¡ï¼Œç„¶åä½¿ç”¨næ¬¡ç›¸åŒçš„å€¼ï¼‰</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//è®¾ç½®å¯„å­˜å™¨</span></span><br><span class="line">*(<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> *) STATUS_BASE_ADDR = <span class="number">1</span> &lt;&lt; <span class="number">24</span>; </span><br><span class="line"><span class="comment">//è¯»å¯„å­˜å™¨</span></span><br><span class="line"><span class="keyword">while</span>(!(*(<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> *) STATUS_BASE_ADDR)) {</span><br><span class="line">    <span class="comment">// do action</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h1 id="çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼"><a href="#çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼" class="headerlink" title="çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼"></a>çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼</h1><p>è¯¥éƒ¨åˆ†ä¸æ˜¯volatileçš„ä½¿ç”¨ï¼Œè€Œæ˜¯å¯¹å†…å±å±éšœçš„ç†è§£</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//mp3decoder.h</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">mp3decoder</span> :</span> public decoderImp </span><br><span class="line">{</span><br><span class="line">    public:</span><br><span class="line">    	<span class="type">static</span> mp3decoder* <span class="title function_">getInstance</span><span class="params">()</span>;</span><br><span class="line">    private:</span><br><span class="line">    	mp3decoder();</span><br><span class="line">    	~mp3decoder();</span><br><span class="line">    	<span class="type">static</span> mp3decoder* mdecoder;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="comment">//mp3decoder.cpp</span></span><br><span class="line"><span class="comment">//çº¿ç¨‹ä¸å®‰å…¨ï¼Œé€‚ç”¨äºå•çº¿ç¨‹</span></span><br><span class="line">mp3decoder* mp3decoder::mdecoder = <span class="literal">NULL</span>;</span><br><span class="line">mp3decoder* <span class="title function_">mp3decoder::getInstance</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span>(mdecoder == <span class="literal">NULL</span>)</span><br><span class="line">        mdecoder = new mp3decoder();</span><br><span class="line">    <span class="keyword">return</span> mdecoder;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//çº¿ç¨‹å®‰å…¨ï¼Œä½†é”çš„ä»£ä»·å¤ªé«˜</span></span><br><span class="line">mp3decoder* <span class="title function_">mp3decoder::getInstance</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    lock();</span><br><span class="line">    <span class="keyword">if</span>(mdecoder == <span class="literal">NULL</span>)</span><br><span class="line">        mdecoder = new mp3decoder();</span><br><span class="line">    <span class="keyword">return</span> mdecoder;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//çº¿ç¨‹å®‰å…¨ï¼Œé”çš„ä»£ä»·å¤ªé«˜</span></span><br><span class="line">mp3decoder* <span class="title function_">mp3decoder::getInstance</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    lock();</span><br><span class="line">    <span class="keyword">if</span>(mdecoder == <span class="literal">NULL</span>)</span><br><span class="line">        mdecoder = new mp3decoder();</span><br><span class="line">    <span class="keyword">return</span> mdecoder;</span><br><span class="line">    unlock();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//Double-Checked Locking Pattern (DCLP åŒæ£€æŸ¥é”)ï¼ŒæŒ‡ä»¤é‡æ’åºreorderä¸å®‰å…¨</span></span><br><span class="line">mp3decoder* <span class="title function_">mp3decoder::getInstance</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (mdecoder == <span class="literal">NULL</span>) {</span><br><span class="line">        lock();</span><br><span class="line">    	<span class="keyword">if</span>(mdecoder == <span class="literal">NULL</span>)</span><br><span class="line">       		mdecoder = new mp3decoder();</span><br><span class="line">         unlock();</span><br><span class="line">    	<span class="keyword">return</span> mdecoder;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//å†…å­˜å±éšœ</span></span><br><span class="line">mp3decoder* <span class="title function_">mp3decoder::getInstance</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (mdecoder == <span class="literal">NULL</span>) {</span><br><span class="line">    	<span class="keyword">if</span>(mdecoder == <span class="literal">NULL</span>) {</span><br><span class="line">            mp3decoder *tmp = new mp3decoder();</span><br><span class="line">            MemoryBarrier();</span><br><span class="line">            mdecoder = tmp;</span><br><span class="line">        }</span><br><span class="line">    	<span class="keyword">return</span> mdecoder;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// mdecoder = new mp3decoder()åœ¨cpuå±‚é¢åŠ¨ä½œï¼š</span></span><br><span class="line"><span class="comment">// 1. åˆ†é…å†…å­˜</span></span><br><span class="line"><span class="comment">// 2. è°ƒç”¨æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="comment">// 3. å°†å†…å­˜åœ°å€èµ‹å€¼ç»™mdecoderæŒ‡é’ˆ</span></span><br><span class="line"><span class="comment">// ç”±äº2ã€3å¯¹äºç¼–è¯‘å™¨æ¥è®²æ˜¯æœ‰å¯èƒ½è¿›è¡Œä¼˜åŒ–çš„ï¼Œå³å…ˆå°†æŒ‡é’ˆèµ‹å€¼å†è°ƒç”¨æ„é€ å‡½æ•°ï¼Œå¯¼è‡´çº¿ç¨‹ä¸å®‰å…¨ï¼ï¼</span></span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>å‚è€ƒæ–‡ç« ï¼š</p>
<ul>
<li><a href="https://barrgroup.com/embedded-systems/how-to/c-volatile-keyword">How to Use Câ€™s volatile Keyword</a></li>
<li><a href="https://barrgroup.com/tech-talks/volatile-c">Pro Tips for Using Câ€™s volatile Keyword</a></li>
<li><a href="https://liam.page/2018/01/18/volatile-in-C-and-Cpp/">è°ˆè°ˆ c / c++ ä¸­çš„volatile</a></li>
</ul>
</blockquote>
]]></content>
      <categories>
        <category>c/c++</category>
      </categories>
      <tags>
        <tag>volatile</tag>
      </tags>
  </entry>
  <entry>
    <title>init.rcè¯­æ³•åŠè§£æ</title>
    <url>/2022/11/16/init.rc/</url>
    <content><![CDATA[<p>åœ¨linuxè®¾å¤‡ä¸Šè¾“å…¥â€œpstreeâ€å‘½ä»¤æˆ‘ä»¬ä¾¿ä¼šçœ‹åˆ°ä¸€æ£µè¿›ç¨‹æ ‘ï¼Œä¸åŒçŠ¶æ€ä¸åŒè®¾å¤‡æ ‘ä¸Šè¿›ç¨‹åå­—è¿›ç¨‹å·å¯èƒ½ä¸å®Œå…¨ä¸€è‡´ï¼Œä½†è¿›ç¨‹å·pid=1çš„è¿›ç¨‹ä¸€å®šæ˜¯initè¿›ç¨‹ï¼å¯¹äºAndroidç³»ç»Ÿæ¥è®²ï¼Œå…¶å®é™…æ˜¯è¿è¡ŒäºLinuxå†…æ ¸ä¹‹ä¸Šçš„ä¸€ç³»åˆ—â€œæœåŠ¡è¿›ç¨‹â€ï¼Œè€Œè¿™äº›æœåŠ¡è¿›ç¨‹çš„â€œè€ç¥–å®—â€å°±æ˜¯initï¼Œå®ƒæ˜¯Androidä¸­ç¬¬ä¸€ä¸ªè¢«å¯åŠ¨çš„è¿›ç¨‹ï¼Œæ‰€æœ‰æœåŠ¡éƒ½æ˜¯é€šè¿‡è§£æinit.rcæ–‡ä»¶å¾—åˆ°çš„ï¼ˆéƒ¨åˆ†å¯ä»¥æ‰§è¡Œç¨‹åºé€šè¿‡init.d/æ–‡ä»¶å¤¹ä¸‹çš„è„šæœ¬å¯åŠ¨ï¼‰</p>
<p>æœ¬ç¯‡æ–‡ç« å°†å¯¹init.rcæ–‡ä»¶è¯­æ³•è¿›è¡Œè§£æ</p>
<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><blockquote>
<p>æŸ¥çœ‹andriodæºç ï¼š<a href="http://androidxref.com/">http://androidxref.com/</a></p>
</blockquote>
<p>init.rcæ˜¯ç³»ç»Ÿå¯åŠ¨çš„ç¬¬ä¸€ä¸ªç¨‹åºæ‰€åŠ è½½çš„è¯­æ³•æ–‡ä»¶ã€‚init.rcæ–‡ä»¶æ˜¯ä»¥â€œå—â€(section)ä¸ºå•ä½æœåŠ¡çš„ï¼Œä¸€ä¸ªâ€œå—â€(section)å¯ä»¥åŒ…å«å¤šè¡Œï¼Œè€Œä¸€è¡Œä¸­åŒ…å«å¤šä¸ªtokens(ç¬¦å·)ã€‚â€œå—â€(section)åˆ†æˆä¸¤å¤§ç±»ï¼šä¸€ç±»ç§°ä¸ºâ€åŠ¨ä½œ(action)â€ï¼Œå¦ä¸€ç±»ç§°ä¸ºâ€œæœåŠ¡(service)â€ã€‚è€Œä¸€ä¸ªinit.rcè„šæœ¬ç”±å››ä¸ªç±»å‹çš„å£°æ˜ç»„æˆï¼š</p>
<ol>
<li>åŠ¨ä½œ ï¼šActionsï¼Œä»¥å…³é”®å­—â€œonâ€å¼€å§‹</li>
<li>å‘½ä»¤ ï¼šCommandsï¼Œä»¥å…³é”®å­—â€œstartâ€â€œrestartâ€â€œstopâ€å¼€å§‹</li>
<li>æœåŠ¡ ï¼šServices</li>
<li>é€‰é¡¹ ï¼šOptions</li>
</ol>
<h1 id="Actions"><a href="#Actions" class="headerlink" title="Actions"></a>Actions</h1><p>Actionså°±æ˜¯å“åº”æŸä¸ªäº‹ä»¶çš„è¿‡ç¨‹ã€‚å¦‚ä¸‹æ‰€ç¤ºå½“æ»¡è¶³triggerè§¦å‘æ¡ä»¶æ—¶ä¾æ¬¡æ‰§è¡ŒCommandså‘½ä»¤ã€‚æºç ä¼šä¾æ¬¡å°†è¿™äº›å‘½ä»¤æ·»åŠ åˆ°â€œå‘½ä»¤æ‰§è¡Œé˜Ÿåˆ—å°¾éƒ¨â€ï¼Œç³»ç»Ÿå¯¹è¿™äº›å‘½ä»¤é¡ºåºæ‰§è¡Œã€‚æ‰€ä»¥æœåŠ¡å¯åŠ¨çš„æ ¹æœ¬å°±æ˜¯onç±»å‹çš„sectionè¢«æ‰§è¡Œçš„è¿‡ç¨‹</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">on &lt;trigger&gt;        //è§¦å‘æ¡ä»¶</span><br><span class="line">    &lt;command1&gt;      //å‘½ä»¤1</span><br><span class="line">    &lt;command2&gt;      //å‘½ä»¤2</span><br><span class="line">    &lt;command3&gt;      //å‘½ä»¤3</span><br></pre></td></tr></tbody></table></figure>

<p>å¯¹äºtriggerï¼ˆè§¦å‘å™¨ï¼‰æ¥è®²ï¼Œå¸¸è§çš„æœ‰ä¸¤ç§å½¢å¼ï¼š</p>
<ol>
<li>å•çº¯çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼šon boot</li>
<li>é”®å€¼åŒ¹é…ï¼Œæ ¼å¼ä¸ºâ€œ on property <key> = <value> â€ã€‚ä¾‹å¦‚ï¼šon property:init.svc.wifi = stopped</value></key></li>
</ol>
<p>æ­¤å¤–è¿˜æœ‰ä¸¤ç§å½¢å¼ï¼š</p>
<ol>
<li>device-added/removed-<patch> å½“è®¾å¤‡èŠ‚ç‚¹æ·»åŠ /åˆ é™¤æ—¶è§¦å‘æ­¤äº‹ä»¶</patch></li>
<li>sevice-exited-<name> å½“æŒ‡å®šæœåŠ¡<name> å­˜åœ¨æ—¶è§¦å‘</name></name></li>
</ol>
<h2 id="Actionsè§£æåæ‰§è¡Œé¡ºåº"><a href="#Actionsè§£æåæ‰§è¡Œé¡ºåº" class="headerlink" title="Actionsè§£æåæ‰§è¡Œé¡ºåº"></a>Actionsè§£æåæ‰§è¡Œé¡ºåº</h2><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">on early-init           #åœ¨åˆå§‹åŒ–æ—©æœŸé˜¶æ®µè§¦å‘</span><br><span class="line">on init                 #åˆå§‹åŒ–é˜¶æ®µè§¦å‘ã€‚è¿™é‡Œä¼šæ‰§è¡Œå®Œå±æ€§æœåŠ¡ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥è®¾ç½®å±æ€§äº†</span><br><span class="line">on late-init            #åœ¨åˆå§‹åŒ–æ™šæœŸè§¦å‘ã€‚åœ¨è¿™é‡Œä¼šé€šè¿‡triggeræ¥æ‰§è¡Œå…¶ä»–çš„action,ä»¥ä¸‹å‡æ˜¯</span><br><span class="line">on early-fs</span><br><span class="line">on fs</span><br><span class="line">on post-fs</span><br><span class="line">on post-fs-data</span><br><span class="line">on firmware_mounts_complete</span><br><span class="line">on early-boot</span><br><span class="line">on boot`</span><br></pre></td></tr></tbody></table></figure>

<h1 id="Commands"><a href="#Commands" class="headerlink" title="Commands"></a>Commands</h1><table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>start <service></service></td>
<td>å¯åŠ¨ä¸€ä¸ªæœåŠ¡ï¼Œå¦‚æœå®ƒæ²¡æœ‰å¤„äºè¿è¡ŒçŠ¶æ€çš„è¯</td>
</tr>
<tr>
<td>stop <service></service></td>
<td>åœæ­¢ä¸€ä¸ªæœåŠ¡ï¼Œå¦‚æœå½“å‰å®ƒå¤„äºè¿è¡ŒçŠ¶æ€çš„è¯</td>
</tr>
<tr>
<td>restart <service></service></td>
<td></td>
</tr>
<tr>
<td>setprop <name> <value></value></name></td>
<td>è®¾ç½®<name>çš„å±æ€§å€¼ä¸º<value></value></name></td>
</tr>
<tr>
<td>trigger <event></event></td>
<td>è§¦å‘ä¸€ä¸ªäº‹ä»¶</td>
</tr>
<tr>
<td>export <name> <value></value></name></td>
<td>è®¾ç½®<name>ç¯å¢ƒå˜é‡çš„å€¼ä¸º<value>ï¼Œå…¨å±€æœ‰æ•ˆ</value></name></td>
</tr>
<tr>
<td>mount <type> <device> <dir> [<mountoption>]*</mountoption></dir></device></type></td>
<td>å°è¯•åœ¨æŒ‡å®šè·¯å¾„ä¸ŠæŒ‚è½½ä¸€ä¸ªè®¾å¤‡</td>
</tr>
</tbody></table>
<h1 id="Services"><a href="#Services" class="headerlink" title="Services"></a>Services</h1><p>å®é™…ä¸Šæ¯ä¸€ä¸ªserviceå°±æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºï¼Œå®ƒä»¬åœ¨ç‰¹å®šé€‰é¡¹çš„çº¦æŸä¸‹æ˜¯è¢«initç¨‹åºè¿è¡Œæˆ–è€…é‡å¯(serviceå¯ä»¥åœ¨é…ç½®ä¸­æŒ‡å®šæ˜¯å¦éœ€è¦é€€å‡ºé‡å¯ï¼Œè¿™æ ·å½“serviceå‡ºç°å¼‚å¸¸crashæ—¶å°±å¯ä»¥æœ‰æœºä¼šå¤åŸ)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">service &lt;name&gt; &lt;pathname&gt; [ &lt;argument&gt; ]*</span><br><span class="line">        &lt;option&gt;</span><br><span class="line">        &lt;option&gt;</span><br><span class="line">        ...</span><br><span class="line"># &lt;name&gt;       serviceæœåŠ¡çš„åå­—</span><br><span class="line"># &lt;pathname&gt;   serviceè·¯å¾„ï¼Œä¸€èˆ¬å¯¹åº”å¯æ‰§è¡Œç¨‹åºæˆ–è€…è„šæœ¬</span><br><span class="line"># &lt;argument&gt;   å¯åŠ¨pathnameä¸‹çš„serviceæ‰€éœ€è¦çš„å‚æ•°</span><br><span class="line"># &lt;option&gt;     serviceçš„çº¦æŸé¡¹</span><br></pre></td></tr></tbody></table></figure>

<h1 id="Options"><a href="#Options" class="headerlink" title="Options"></a>Options</h1><table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>disable</td>
<td>éšå¼å£°æ˜ï¼Œé»˜è®¤ä¸ä¼šè‡ªåŠ¨å¯åŠ¨è¯¥æœåŠ¡ï¼Œéœ€è¦æ˜¾å¼è°ƒç”¨</td>
</tr>
<tr>
<td>oneshot</td>
<td>å­—é¢æ„æ€ä¸€æ¬¡æ€§ï¼Œå³æœåŠ¡é€€å‡ºæ—¶ï¼Œä¸è¦ä¸»åŠ¨é‡å¯è¯¥æœåŠ¡</td>
</tr>
<tr>
<td>onrestart</td>
<td>å½“æœåŠ¡é‡å¯æ—¶ï¼Œæ‰§è¡ŒæŸäº›å‘½ä»¤ï¼ˆéœ€è¦ç†è§£ï¼‰</td>
</tr>
<tr>
<td>class <name></name></td>
<td>æŒ‡å®šè¯¥æœåŠ¡å±äº<name>classç±»ï¼Œé»˜è®¤classåä¸ºdefaultï¼ˆæ³¨ï¼šåŒä¸€ä¸ªclassæ‰€æœ‰æœåŠ¡å¿…é¡»æ˜¯åŒæ—¶å¯åŠ¨æˆ–åœæ­¢ï¼‰</name></td>
</tr>
<tr>
<td>socket <name> <type> <perm> [<user> [<group>] ]</group></user></perm></type></name></td>
<td>åˆ›å»ºä¸€ä¸ªåä¸ºdev/socket/<name>çš„ socketï¼Œç„¶åå°†å®ƒçš„fdå€¼ä¼ ç»™å¯åŠ¨å®ƒçš„è¿›ï¼Œæœ‰æ•ˆçš„<type>å€¼åŒ…æ‹¬dgram,stream å’Œseqpacketã€‚ueser å’Œgroup çš„é»˜è®¤å€¼ä¸º0ã€‚</type></name></td>
</tr>
<tr>
<td>critical</td>
<td>è¡¨æ˜è¿™æ˜¯å¯¹è®¾å¤‡è‡³å…³é‡è¦çš„æœåŠ¡ï¼›å¦‚æœå®ƒåœ¨å››åˆ†é’Ÿå†…é€€å‡ºè¶…è¿‡å››æ¬¡ï¼Œåˆ™è®¾å¤‡å°†è¿›å…¥Recovery æ¨¡å¼</td>
</tr>
<tr>
<td>group <groupname> [<groupname>]*</groupname></groupname></td>
<td>åœ¨å¯åŠ¨æœåŠ¡å‰å°†ç”¨æˆ·ç»„åˆ‡æ¢è‡³<groupname></groupname></td>
</tr>
<tr>
<td>setenv <name> <value></value></name></td>
<td>è®¾ç½®ç¯å¢ƒå˜é‡<name> ä¸ºå€¼<value></value></name></td>
</tr>
</tbody></table>
<h1 id="Notice"><a href="#Notice" class="headerlink" title="Notice"></a>Notice</h1><ol>
<li>serviceå’ŒActionséƒ½æ˜¯æœ‰å”¯ä¸€çš„åå­—çš„ã€‚å¦‚æœæœ‰é‡åçš„æƒ…å†µä¼šä½œä¸ºé”™è¯¯å¿½ç•¥ã€‚</li>
<li>æ— è®ºæ˜¯åŠ¨ä½œè¿˜æ˜¯æœåŠ¡ï¼Œå¹¶ä¸æ˜¯æŒ‰ç…§æ–‡ä»¶çš„ç¼–æ’é¡ºåºæ‰§è¡Œçš„ã€‚</li>
<li>è¯¥æ–‡ä»¶ä¸­æ³¨é‡Šä»¥â€œ#â€å¼€å§‹ï¼›åæ–œæ â€œ\â€åœ¨è¡Œå°¾è¡¨ç¤ºä¸‹é¢ä¸€è¡Œæ˜¯åŒä¸€è¡Œ</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">/* </span><br><span class="line"> * copy from http://androidxref.com/6.0.0_r5/xref/bootable/recovery/etc/init.rc</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">import /init.recovery.${ro.hardware}.rc</span><br><span class="line"></span><br><span class="line">on early-init</span><br><span class="line">    start ueventd</span><br><span class="line">    start healthd</span><br><span class="line"></span><br><span class="line">on init</span><br><span class="line">    export PATH /sbin:/system/bin</span><br><span class="line">    export ANDROID_ROOT /system</span><br><span class="line">    export ANDROID_DATA /data</span><br><span class="line">    export EXTERNAL_STORAGE /sdcard</span><br><span class="line"></span><br><span class="line">    symlink /system/etc /etc</span><br><span class="line"></span><br><span class="line">    mkdir /sdcard</span><br><span class="line">    mkdir /system</span><br><span class="line">    mkdir /data</span><br><span class="line">    mkdir /cache</span><br><span class="line">    mkdir /sideload</span><br><span class="line">    mount tmpfs tmpfs /tmp</span><br><span class="line"></span><br><span class="line">    chown root shell /tmp</span><br><span class="line">    chmod 0775 /tmp</span><br><span class="line"></span><br><span class="line">    write /proc/sys/kernel/panic_on_oops 1</span><br><span class="line">    write /proc/sys/vm/max_map_count 1000000</span><br><span class="line"></span><br><span class="line">on fs</span><br><span class="line">    mkdir /dev/usb-ffs 0770 shell shell</span><br><span class="line">    mkdir /dev/usb-ffs/adb 0770 shell shell</span><br><span class="line">    mount functionfs adb /dev/usb-ffs/adb uid=2000,gid=2000</span><br><span class="line"></span><br><span class="line">    write /sys/class/android_usb/android0/enable 0</span><br><span class="line">    write /sys/class/android_usb/android0/idVendor 18D1</span><br><span class="line">    write /sys/class/android_usb/android0/idProduct D001</span><br><span class="line">    write /sys/class/android_usb/android0/f_ffs/aliases adb</span><br><span class="line">    write /sys/class/android_usb/android0/functions adb</span><br><span class="line">    write /sys/class/android_usb/android0/iManufacturer ${ro.product.manufacturer}</span><br><span class="line">    write /sys/class/android_usb/android0/iProduct ${ro.product.model}</span><br><span class="line">    write /sys/class/android_usb/android0/iSerial ${ro.serialno}</span><br><span class="line"></span><br><span class="line">on boot</span><br><span class="line">    ifup lo</span><br><span class="line">    hostname localhost</span><br><span class="line">    domainname localdomain</span><br><span class="line"></span><br><span class="line">    class_start default</span><br><span class="line"></span><br><span class="line"># Load properties from /system/ + /factory after fs mount.</span><br><span class="line">on load_all_props_action</span><br><span class="line">    load_all_props</span><br><span class="line"></span><br><span class="line">on firmware_mounts_complete</span><br><span class="line">   rm /dev/.booting</span><br><span class="line"></span><br><span class="line"># Mount filesystems and start core system services.</span><br><span class="line">on late-init</span><br><span class="line">    trigger early-fs</span><br><span class="line">    trigger fs</span><br><span class="line">    trigger post-fs</span><br><span class="line">    trigger post-fs-data</span><br><span class="line"></span><br><span class="line">    # Load properties from /system/ + /factory after fs mount. Place</span><br><span class="line">    # this in another action so that the load will be scheduled after the prior</span><br><span class="line">    # issued fs triggers have completed.</span><br><span class="line">    trigger load_all_props_action</span><br><span class="line"></span><br><span class="line">    # Remove a file to wake up anything waiting for firmware</span><br><span class="line">    trigger firmware_mounts_complete</span><br><span class="line"></span><br><span class="line">    trigger early-boot</span><br><span class="line">    trigger boot</span><br><span class="line"></span><br><span class="line">on property:sys.powerctl=*</span><br><span class="line">   powerctl ${sys.powerctl}</span><br><span class="line"></span><br><span class="line">service ueventd /sbin/ueventd</span><br><span class="line">    critical</span><br><span class="line">    seclabel u:r:ueventd:s0</span><br><span class="line"></span><br><span class="line">service healthd /sbin/healthd -r</span><br><span class="line">    critical</span><br><span class="line">    seclabel u:r:healthd:s0</span><br><span class="line"></span><br><span class="line">service recovery /sbin/recovery</span><br><span class="line">    seclabel u:r:recovery:s0</span><br><span class="line"></span><br><span class="line">service adbd /sbin/adbd --root_seclabel=u:r:su:s0 --device_banner=recovery</span><br><span class="line">    disabled</span><br><span class="line">    socket adbd stream 660 system system</span><br><span class="line">    seclabel u:r:adbd:s0</span><br><span class="line"></span><br><span class="line"># Always start adbd on userdebug and eng builds</span><br><span class="line">on property:ro.debuggable=1</span><br><span class="line">    write /sys/class/android_usb/android0/enable 1</span><br><span class="line">    start adbd</span><br><span class="line"></span><br><span class="line"># Restart adbd so it can run as root</span><br><span class="line">on property:service.adb.root=1</span><br><span class="line">    write /sys/class/android_usb/android0/enable 0</span><br><span class="line">    restart adbd</span><br><span class="line">    write /sys/class/android_usb/android0/enable 1</span><br></pre></td></tr></tbody></table></figure>]]></content>
      <categories>
        <category>Linux</category>
        <category>Andriod</category>
      </categories>
  </entry>
  <entry>
    <title>æ­å»ºUbuntuè™šæ‹Ÿæœº</title>
    <url>/2022/10/22/ubuntu-create/</url>
    <content><![CDATA[<h1 id="Linux-ç®€ä»‹"><a href="#Linux-ç®€ä»‹" class="headerlink" title="Linux ç®€ä»‹"></a>Linux ç®€ä»‹</h1><p>linusè‡ªä¼ ã€Šåªæ˜¯ä¸ºäº†å¥½ç©ã€‹ä¸­è¿™æ ·å®šä¹‰ï¼š</p>
<ul>
<li><p>ç±»Unixæ“ä½œç³»ç»Ÿ</p>
</li>
<li><p>å¼€æ”¾æºä»£ç æ–¹å¼åä½œå¼€å‘</p>
</li>
<li><p>é‡‡ç”¨GPLé€šç”¨è®¸å¯è¯ç»´æƒ</p>
</li>
<li><p>ä¸»è¦ç”¨äºè¶…çº§ç”µè„‘ã€ä¼ä¸šçº§æœåŠ¡å™¨ã€åµŒå…¥å¼è®¾å¤‡ç­‰</p>
</li>
</ul>
<h1 id="Ubuntu-ç®€ä»‹"><a href="#Ubuntu-ç®€ä»‹" class="headerlink" title="Ubuntu ç®€ä»‹"></a>Ubuntu ç®€ä»‹</h1><ul>
<li>æ¡Œé¢åº”ç”¨ä¸ºä¸»çš„Linuxæ“ä½œç³»ç»Ÿ</li>
<li>æ“ä½œç®€å•ã€æ–¹ä¾¿ä½¿ç”¨</li>
<li>ç³»ç»Ÿå®‰å…¨æ€§é«˜ï¼Œé»˜è®¤useræƒé™ç™»å½•</li>
<li>Ubuntuä¸­æ–‡ç½‘ç«™ï¼š<a href="http://www.wubantu.co/">http://www.wubantu.co</a></li>
<li>Ubuntuä¸­æ–‡ç¤¾åŒºï¼š<a href="http://www.ubuntu.org.cn/">http://www.ubuntu.org.cn</a></li>
<li>UbuntuæŠ€æœ¯ï¼š<a href="http://wiki.ubuntu.org.cn/">http://wiki.ubuntu.org.cn</a></li>
</ul>
<h1 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h1><ul>
<li>ç‰©ç†ä¸»æœº</li>
<li>isoé•œåƒ</li>
<li>vmware / VirtualBox</li>
</ul>
<p>ç½‘ç›˜ä¸­æˆ‘å‡†å¤‡äº†ubuntu20.04.4-isoã€ubuntu16.04.7-isoã€Vmware-16.2.3å®‰è£…åŒ…åŠå¯†é’¥å’Œä¸€ä»½linuxå‘½ä»¤å¤§å…¨ï¼</p>
<p>å¯†é’¥å¯¹äºä¸åŒç‰ˆæœ¬å¯èƒ½æœ‰å·®å¼‚å¯ä»¥éƒ½è¿›è¡Œå°è¯•ï¼Œå…¶åªæ˜¯å¯¹äºä¸ªäººå­¦ä¹ ä½¿ç”¨ï¼Œå»ºè®®è´­ä¹°æ­£ç‰ˆï¼</p>
<p>åŒæ—¶é™„ä¸Šç›¸å…³å®˜ç½‘é“¾æ¥ï¼š</p>
<ul>
<li>ubuntuå„ç‰ˆæœ¬é•œåƒï¼š<a href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu-releases/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu-releases/</a></li>
<li>vmwareå®˜ç½‘ï¼š<a href="https://www.vmware.com/cn/products/workstation-pro.html">https://www.vmware.com/cn/products/workstation-pro.html</a></li>
<li>VirtualBoxï¼š<a href="https://www.virtualbox.org/">https://www.virtualbox.org</a></li>
<li>èµ„æºç½‘ç›˜é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/18vxScuvFp2Vf4g28nRSC5w">https://pan.baidu.com/s/18vxScuvFp2Vf4g28nRSC5w</a><br>æå–ç ï¼šf8uo</li>
</ul>
<h1 id="å®‰è£…è¿‡ç¨‹"><a href="#å®‰è£…è¿‡ç¨‹" class="headerlink" title="å®‰è£…è¿‡ç¨‹"></a>å®‰è£…è¿‡ç¨‹</h1><p>å‚è€ƒè§†é¢‘ï¼š<a href="https://www.bilibili.com/video/BV1hd4y127HY">https://www.bilibili.com/video/BV1hd4y127HY</a></p>
]]></content>
      <categories>
        <category>Linux</category>
        <category>æ­å»ºè™šæ‹Ÿæœº</category>
      </categories>
  </entry>
  <entry>
    <title>Libmadè¯¦è§£</title>
    <url>/2022/11/05/Audio/Audio-libmad/</url>
    <content><![CDATA[<p>ç®€å•æ¥è®²ï¼Œlibmadå°±æ˜¯ä¸€ä¸ªMP3æ–‡ä»¶çš„è§£ç åº“ã€‚å¦‚æœæƒ³è¦æ·±å…¥ç†è§£å…¶ä¸­çš„å®ç°éœ€è¦å¯¹MP3æ–‡ä»¶æ ¼å¼æœ‰è¯¦ç»†çš„äº†è§£ï¼Œå…³äºMP3æ–‡ä»¶æ ¼å¼çš„å†…å®¹åœ¨è¿™é‡Œæˆ‘ä¸èµ˜è¿°ï¼Œä¹‹å‰çš„æ–‡ç« å½“ä¸­æœ‰è¿‡è¯¦ç»†çš„è®²è§£ <a href="https://yanglieee.com/2022/09/05/Audio-meet-1/">click here</a></p>
<h1 id="What"><a href="#What" class="headerlink" title="What"></a>What</h1><blockquote>
<p>Libmad è¯¦è§£ï¼š<a href="https://www.underbit.com/products/mad/">https://www.underbit.com/products/mad/</a></p>
</blockquote>
<p> libmad æ˜¯ä¸€ä¸ªé«˜è´¨é‡çš„ MPEG éŸ³é¢‘è§£ç å™¨ã€‚ç›®å‰æ”¯æŒ  MPEG-1 å’Œ MPEG-2 å¯¹è¾ƒä½é‡‡æ ·é¢‘ç‡çš„æ‰©å±•ï¼Œä»¥åŠæ‰€è°“çš„ MPEG 2.5 æ ¼å¼ï¼Œä¸‰ä¸ªéŸ³é¢‘å±‚éƒ½åœ¨ä»£ç ä¸Šåšäº†å®ç°ã€‚ä¼˜åŠ¿ï¼š</p>
<ul>
<li>24 ä½ PCM è¾“å‡º</li>
<li>100% å®šç‚¹ï¼ˆæ•´æ•°ï¼‰è®¡ç®—</li>
<li>åŸºäº ISO/IEC æ ‡å‡†çš„å…¨æ–°å®æ–½</li>
<li>æ ¹æ® GNU é€šç”¨å…¬å…±è®¸å¯è¯ (GPL) çš„æ¡æ¬¾åˆ†å‘</li>
</ul>
<h1 id="How"><a href="#How" class="headerlink" title="How"></a>How</h1><h2 id="ä»£ç ä¸‹è½½"><a href="#ä»£ç ä¸‹è½½" class="headerlink" title="ä»£ç ä¸‹è½½"></a>ä»£ç ä¸‹è½½</h2><p><a href="https://sourceforge.net/projects/mad/files/">https://sourceforge.net/projects/mad/files/</a></p>
<p><a href="https://www.linuxfromscratch.org/blfs/view/svn/multimedia/libmad.html">https://www.linuxfromscratch.org/blfs/view/svn/multimedia/libmad.html</a></p>
<h2 id="ä»£ç ç»“æ„"><a href="#ä»£ç ç»“æ„" class="headerlink" title="ä»£ç ç»“æ„"></a>ä»£ç ç»“æ„</h2><p>&lt; åŸºäº libmad-0.15.1b ç‰ˆæœ¬&gt;</p>
<table>
<thead>
<tr>
<th>æºæ–‡ä»¶</th>
<th>bit.c</th>
<th>decoder.c</th>
<th>fixed.c</th>
<th>frame.c</th>
<th>huffman.c</th>
<th>layer12.c</th>
<th>layer3.c</th>
<th>stream.c</th>
<th>synth.c</th>
<th>timer.c</th>
<th>version.c</th>
<th>minimad.c(demo)</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>å¤´æ–‡ä»¶</td>
<td>bit.h</td>
<td>decoder.h</td>
<td>fixed.h</td>
<td>frame.h</td>
<td>huffman.h</td>
<td>layer12.h</td>
<td>layer3.h</td>
<td>stream.h</td>
<td>synth.h</td>
<td>timer.h</td>
<td>version.h</td>
<td>global.h</td>
<td>mad.hï¼ˆAPIï¼‰</td>
</tr>
<tr>
<td>datæ–‡ä»¶</td>
<td>sf_table.dat</td>
<td>imdct_s.dat</td>
<td>qc_table.dat</td>
<td>D.dat</td>
<td>rq_table.dat</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>å…¶ä»–æ–‡ä»¶</td>
<td>Makefile</td>
<td>config</td>
<td>â€¦â€¦</td>
<td></td>
<td>å¤§éƒ¨åˆ†å†…å®¹ä¸å‚ä¸ç¼–è¯‘</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>å…·ä½“ä½¿ç”¨æ–¹æ³•å¯ä»¥å‚è€ƒminimad.cæ–‡ä»¶ï¼Œè¿™é‡Œé¢å¯¹apiçš„ä½¿ç”¨æœ‰è¿›ä¸€æ­¥çš„è¯´æ˜</p>
<p>åŒæ—¶ä¹Ÿå¯ä»¥å‚è€ƒæˆ‘åŸºäºLinux libmadå†™å‡ºæ¥çš„ä¸€ä¸ªéŸ³é¢‘æ’­æ”¾å™¨ï¼Œæºç é“¾æ¥ <a href="https://github.com/yangLieee/audioplayer">click here</a></p>
<h1 id="ç¼–è¯‘æ–¹æ³•"><a href="#ç¼–è¯‘æ–¹æ³•" class="headerlink" title="ç¼–è¯‘æ–¹æ³•"></a>ç¼–è¯‘æ–¹æ³•</h1><p>&lt; ä»…ä»‹ç»linuxç¯å¢ƒä¸‹ç¼–è¯‘æ–¹æ³• &gt; </p>
<ol>
<li>æ‰‹å†™Makefile / CMakeLists.txt</li>
<li>ç³»ç»Ÿæä¾›çš„config<ul>
<li>æ‰§è¡Œ <strong>sed -i â€˜/-fforce-mem/dâ€™ configure</strong> ï¼Œ è¿™æ¡å‘½ä»¤æ˜¯ä¸ºäº†é€‚é…é«˜ç‰ˆæœ¬çš„gccï¼Œå› ä¸ºé«˜ç‰ˆæœ¬çš„gccå·²ç»å°†-fforce-memå»é™¤äº†</li>
<li>æ‰§è¡Œ <strong>./configure ,</strong> æ–‡ä»¶å¤¹ä¸‹ä¼šç”ŸæˆMakefile</li>
<li>æ‰§è¡Œ <strong>sudo make; sudo install;</strong> </li>
<li>è‡³æ­¤é™æ€åº“å’ŒåŠ¨æ€åº“å·²ç»ç”Ÿæˆï¼Œç›®å½•åœ¨/usr/local/lib</li>
</ul>
</li>
</ol>
<h1 id="æ ¸å¿ƒAPI"><a href="#æ ¸å¿ƒAPI" class="headerlink" title="æ ¸å¿ƒAPI"></a>æ ¸å¿ƒAPI</h1><ol>
<li><p>mad_decoder_init( )</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//mad.h</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">mad_decoder_init</span><span class="params">(<span class="keyword">struct</span> mad_decoder *, <span class="type">void</span> *,   </span></span><br><span class="line"><span class="params">           <span class="comment">/* input func  */</span>  <span class="keyword">enum</span> mad_flow (*)(<span class="type">void</span> *, <span class="keyword">struct</span> mad_stream *), </span></span><br><span class="line"><span class="params">           <span class="comment">/* header func */</span>  <span class="keyword">enum</span> mad_flow (*)(<span class="type">void</span> *, <span class="keyword">struct</span> mad_header <span class="type">const</span> *),                   </span></span><br><span class="line"><span class="params">           <span class="comment">/* filter func */</span>  <span class="keyword">enum</span> mad_flow (*)(<span class="type">void</span> *, <span class="keyword">struct</span> mad_stream <span class="type">const</span> *, <span class="keyword">struct</span> mad_frame *), </span></span><br><span class="line"><span class="params">           <span class="comment">/* output func */</span>  <span class="keyword">enum</span> mad_flow (*)(<span class="type">void</span> *, <span class="keyword">struct</span> mad_header <span class="type">const</span> *, <span class="keyword">struct</span> mad_pcm *), </span></span><br><span class="line"><span class="params">           <span class="comment">/* error func  */</span>  <span class="keyword">enum</span> mad_flow (*)(<span class="type">void</span> *, <span class="keyword">struct</span> mad_stream *, <span class="keyword">struct</span> mad_frame *), </span></span><br><span class="line"><span class="params">           <span class="comment">/* message func*/</span>  <span class="keyword">enum</span> mad_flow (*)(<span class="type">void</span> *, <span class="type">void</span> *, <span class="type">unsigned</span> <span class="type">int</span> *))</span>; </span><br></pre></td></tr></tbody></table></figure>

<p>mad_decoder_init( )æ˜¯libmadä¸­æœ€ç»ˆé‡è¦çš„å‡½æ•°ä¹‹ä¸€ï¼Œå…¶ä½œç”¨æ˜¯å°†line3~line8çš„å…­ä¸ªå›è°ƒå‡½æ•°æ³¨å†Œåˆ°mad_decoderå®ä¾‹å‡ºæ¥çš„decoderä¸­ã€‚</p>
<ul>
<li><p><strong>å¿…é¡»è‡ªå®šä¹‰çš„å‚æ•°ï¼š</strong>å‚æ•°1ï¼šç”¨æˆ·è‡ªå·±å®ä¾‹çš„ä¸€ä¸ªè§£ç å™¨ç»“æ„ä½“ï¼›å‚æ•°2ï¼šç”¨æˆ·è‡ªå®šä¹‰çš„ç»“æ„ä½“æŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆå°†ç”¨äºæ•´ä¸ªè§£ç çš„è¿‡ç¨‹åœ¨å›è°ƒå‡½æ•°ä¹‹é—´è¿›è¡Œæ•°æ®çš„ä¼ è¾“ï¼›å‚æ•°3ï¼šè¾“å…¥çš„å›è°ƒå‡½æ•°ï¼Œè¯¥å›è°ƒç”¨äºç”¨æˆ·è‡ªå®šä¹‰å°†æ•°æ®è¾“å…¥ç¼–ç å™¨çš„é€»è¾‘ï¼›å‚æ•°6ï¼šè¾“å‡ºçš„å›è°ƒå‡½æ•°ï¼ŒåŒinput callback funcã€‚è‡ªå®šä¹‰è¾“å‡ºçš„åˆ†è¾¨ç‡å§ï¼š24bit / 16bitï¼Œå¯ä»¥å­˜æˆæ–‡ä»¶äº¦å¯ä»¥ç›´æ¥é€šè¿‡pcmæ¥å£æ’­æ”¾ã€‚Outputå›è°ƒå‡½æ•°åœ¨madlibæ¯è§£ç å®Œæˆä¸€ä¸ªå¸§åè¢«è°ƒç”¨ï¼Œç›´åˆ°å…¨éƒ¨è§£ç å®Œæˆæˆ–å‡ºé”™ã€‚å‚æ•°8ï¼ˆå¼‚æ­¥å·¥ä½œæ¨¡å¼ä¸‹å¿…é€‰ï¼‰ï¼šè¾“å‡ºä¿¡æ¯ã€‚</p>
</li>
<li><p><strong>é€‰æ‹©æ€§å®šä¹‰å‚æ•°ï¼š</strong>å…¶ä»–å‚æ•°å±äºè‡ªå®šä¹‰å‚æ•°æ¯”å¦‚è¿›è¡Œå¤´è§£æã€è¿‡æ»¤ç­›é€‰çš„å›è°ƒå‡½æ•°ç­‰ç­‰ï¼Œå¦‚æœè‡ªå·±æ²¡æœ‰éœ€æ±‚ç½®0å³å¯ã€‚</p>
</li>
</ul>
</li>
<li><p>mad_decoder_run( )</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//mad.h</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">mad_decoder_run</span><span class="params">(<span class="keyword">struct</span> mad_decoder *, <span class="keyword">enum</span> mad_decoder_mode)</span>; </span><br></pre></td></tr></tbody></table></figure>

<p>è¯¥å‡½æ•°æ˜¯è§£ç çš„ä¸»æµç¨‹å‡½æ•°ï¼Œå³è§£ç å™¨çš„å…¥å£å‡½æ•°ï¼Œå¦‚æœè¦è¿½ä»£ç å¯ä»¥ä»æ­¤å¤„å¼€å§‹è¿›è¡Œå‰–æã€‚</p>
<ul>
<li>å‚æ•°1ï¼šç”¨æˆ·è‡ªå®šä¹‰å®ä¾‹åŒ–å¹¶åˆå§‹åŒ–çš„è§£ç å™¨decoderï¼›</li>
<li>å‚æ•°2ï¼šé€‰æ‹©è§£ç æ¨¡å¼ï¼ˆSYNC / ASYNCï¼‰æ·±å…¥ä»£ç å¯ä»¥å‘ç°è¿™ä¸ªé€‰æ‹©ä½¿å¾—è§£ç å™¨è¿›å…¥ä¸åŒçš„å‡½æ•°è¿›è¡Œå·¥ä½œã€‚</li>
</ul>
<p>æ‰€è°“åŒæ­¥æ–¹å¼æ˜¯æŒ‡è§£ç å‡½æ•°åœ¨è§£ç å®Œä¸€å¸§åæ‰è¿”å›å¹¶å¸¦å›å‡ºé”™ä¿¡æ¯ï¼Œå¼‚æ­¥æ–¹å¼æ˜¯æŒ‡è§£ç å‡½æ•°åœ¨è°ƒç”¨åç«‹å³è¿”å›ï¼Œé€šè¿‡æ¶ˆæ¯ä¼ é€’è§£ç çŠ¶æ€ä¿¡æ¯ã€‚(æ•…å¼‚æ­¥æ–¹å¼å¿…é¡»å®šä¹‰messageå›è°ƒå‡½æ•°)</p>
</li>
<li><p>mad_decoder_finish( )</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//mad.h</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">mad_decoder_finish</span><span class="params">(<span class="keyword">struct</span> mad_decoder *)</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>è§£ç ç»“æŸï¼Œç”¨äºæ¸…ç†å·¥ä½œï¼Œé‡Šæ”¾ä¸æµç›¸å…³çš„ä»»ä½•åŠ¨æ€å†…å­˜ã€‚</p>
</li>
<li><p>mad_stream_buffer( )</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//mad.h</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">mad_stream_buffer</span><span class="params">(<span class="keyword">struct</span> mad_stream *, <span class="type">unsigned</span> <span class="type">char</span> <span class="type">const</span> *, <span class="type">unsigned</span> <span class="type">long</span>)</span>; </span><br></pre></td></tr></tbody></table></figure>

<p>è¯¥å‡½æ•°æ˜¯inputå›è°ƒå‡½æ•°ä¸­æœ€é‡è¦çš„å‡½æ•°ï¼Œå…¶ä½œç”¨æ˜¯æŒ‰ç…§å‚æ•°2ã€å‚æ•°3å³MP3æ–‡ä»¶åœ¨å†…å­˜æ˜ åƒçš„èµ·å§‹åœ°å€å’Œæœ¬æ¬¡è¦ä¼ é€’çš„æ–‡ä»¶é•¿åº¦ä¸mad_streamè¿›è¡Œå…³è”ï¼Œå½¢æˆlibmadå¯è¯†åˆ«çš„streamæµ</p>
<p>éœ€è¦æ³¨æ„ï¼Œè¿™é‡Œä¼ é€’å¤šå°‘æ•°æ®å®Œå…¨æ˜¯è‡ªå®šä¹‰çš„ã€‚å¦‚æœä¸€æ¬¡æ€§é€å…¥åˆ™æ•´ä¸ªè§£ç è¿‡ç¨‹è°ƒç”¨ä¸€æ¬¡inputï¼›å¦‚æœä¸€æ¬¡æ€§ä¼ é€’è‹¥å¹²ï¼Œoutputæ ¹æ®ä¼ é€’çš„æ•°æ®è¿›è¡Œè§£ç ï¼Œå¦‚æœæ²¡æœ‰æ•°æ®å¯è§£ç»§ç»­è°ƒç”¨inputã€‚æ‰€ä»¥è‡ªå·±å®šä¹‰å¥½è¾“å…¥é€»è¾‘å³å¯ã€‚</p>
</li>
</ol>
<h1 id="é‡ç‚¹æ•°æ®ç»“æ„"><a href="#é‡ç‚¹æ•°æ®ç»“æ„" class="headerlink" title="é‡ç‚¹æ•°æ®ç»“æ„"></a>é‡ç‚¹æ•°æ®ç»“æ„</h1><ol>
<li><p>mad_stream</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//mad.h &amp;&amp; stream.h</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">mad_stream</span> {</span>           </span><br><span class="line">  <span class="type">unsigned</span> <span class="type">char</span> <span class="type">const</span> *buffer;          <span class="comment">/* input bitstream buffer */</span>                                       <span class="type">unsigned</span> <span class="type">char</span> <span class="type">const</span> *bufend;          <span class="comment">/* end of buffer */</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">long</span> skiplen;                <span class="comment">/* bytes to skip before next frame */</span></span><br><span class="line">  <span class="type">int</span> sync;                             <span class="comment">/* stream sync found */</span>        </span><br><span class="line">  <span class="type">unsigned</span> <span class="type">long</span> freerate;               <span class="comment">/* free bitrate (fixed) */</span>     </span><br><span class="line">  <span class="type">unsigned</span> <span class="type">char</span> <span class="type">const</span> *this_frame;      <span class="comment">/* start of current frame */</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">char</span> <span class="type">const</span> *next_frame;      <span class="comment">/* start of next frame */</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mad_bitptr</span> <span class="title">ptr</span>;</span>                <span class="comment">/* current processing bit pointer */</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mad_bitptr</span> <span class="title">anc_ptr</span>;</span>            <span class="comment">/* ancillary bits pointer */</span>   </span><br><span class="line">  <span class="type">unsigned</span> <span class="type">int</span> anc_bitlen;              <span class="comment">/* number of ancillary bits */</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="title function_">char</span> <span class="params">(*main_data)</span>[MAD_BUFFER_MDLEN];                  <span class="comment">/* Layer III main_data() */</span>    </span><br><span class="line">  <span class="type">unsigned</span> <span class="type">int</span> md_len;                  <span class="comment">/* bytes in main_data */</span>  </span><br><span class="line">  <span class="type">int</span> options;                          <span class="comment">/* decoding options (see below) */</span></span><br><span class="line">  <span class="class"><span class="keyword">enum</span> <span class="title">mad_error</span> <span class="title">error</span>;</span>                 <span class="comment">/* error code (see above) */</span>   </span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>

<p>è¯¥ç»“æ„ä½“è®°å½•äº†æ–‡ä»¶çš„åœ°å€ã€å½“å‰æ‰€å¤„ç†çš„ä½ç½®å’Œè§£ç å‰çš„Bitstreamæ•°æ®</p>
<p>mad_stream.bufend â€“ mad_stream.next_frameå°±æ˜¯å‰©ä½™çš„æœªè¢«è§£ç çš„ MPEG å¸§çš„æ•°æ®çš„å­—èŠ‚æ•°é‡ï¼ˆå‡è®¾æ­¤å¸§åœ¨ç¼“å†²åŒºä¸­ä¸å®Œæ•´)</p>
</li>
<li><p>mad_header</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">mad_header</span> {</span></span><br><span class="line">  <span class="class"><span class="keyword">enum</span> <span class="title">mad_layer</span> <span class="title">layer</span>;</span>             <span class="comment">/* audio layer (1, 2, or 3) */</span></span><br><span class="line">  <span class="class"><span class="keyword">enum</span> <span class="title">mad_mode</span> <span class="title">mode</span>;</span>               <span class="comment">/* channel mode (see above) */</span></span><br><span class="line">  <span class="type">int</span> mode_extension;               <span class="comment">/* additional mode info */</span>                                             <span class="class"><span class="keyword">enum</span> <span class="title">mad_emphasis</span> <span class="title">emphasis</span>;</span>       <span class="comment">/* de-emphasis to use (see above) */</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">long</span> bitrate;            <span class="comment">/* stream bitrate (bps) */</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">int</span> samplerate;          <span class="comment">/* sampling frequency (Hz) */</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">short</span> crc_check;         <span class="comment">/* frame CRC accumulator */</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">short</span> crc_target;        <span class="comment">/* final target CRC checksum */</span></span><br><span class="line">  <span class="type">int</span> flags;                        <span class="comment">/* flags (see below) */</span></span><br><span class="line">  <span class="type">int</span> private_bits;                 <span class="comment">/* private bits (see below) */</span></span><br><span class="line">  <span class="type">mad_timer_t</span> duration;             <span class="comment">/* audio playing time of frame */</span></span><br><span class="line">};    </span><br></pre></td></tr></tbody></table></figure>

<p>é€šè¿‡æ³¨é‡Šå¾ˆå®¹æ˜“çœ‹å‡ºï¼Œè¯¥ç»“æ„ä½“è®°å½•äº†MPEG å¸§çš„åŸºæœ¬ä¿¡æ¯ï¼Œæ¯”å¦‚MPEG å±‚æ•°ã€å£°é“æ¨¡å¼ã€æµæ¯”ç‰¹ç‡ã€é‡‡æ ·ç‡ã€æ¯”ç‰¹ç‡ä»¥åŠæŸäº›æ ¡éªŒä½ç­‰ç­‰ã€‚</p>
<blockquote>
<p>Tipsï¼šï¼ˆbitrate % 32ï¼‰ å¦‚æœæ˜¯æ•´æ•°è¯´æ˜è¯¥æ–‡ä»¶æ ¼å¼æ˜¯CBRï¼ˆconstant bitrateï¼Œæ’å®šæ¯”ç‰¹ç‡ï¼‰ï¼Œå¦åˆ™æ˜¯VBRï¼ˆvariable bitrateï¼Œå¯å˜æ¯”ç‰¹ç‡ï¼‰ï¼Œè¿™å¯¹æ–‡ä»¶æ’­æ”¾æ—¶é•¿æ˜¯æœ‰å½±å“çš„ã€‚</p>
</blockquote>
</li>
<li><p>mad_pcm</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">mad_pcm</span> {</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">int</span> samplerate;          <span class="comment">/* sampling frequency (Hz) */</span>                                           <span class="type">unsigned</span> <span class="type">short</span> channels;          <span class="comment">/* number of channels */</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">short</span> length;            <span class="comment">/* number of samples per channel */</span></span><br><span class="line">  <span class="type">mad_fixed_t</span> samples[<span class="number">2</span>][<span class="number">1152</span>];     <span class="comment">/* PCM output samples [ch][sample] */</span></span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>

<p>madlibè§£ç å™¨æ˜¯ä»¥å¸§ä¸ºå•ä½è¿›è¡Œè§£ç çš„ï¼Œmad_pcmæ¯æ¬¡æœ€å¤šè§£ç å‡ºï¼ˆ1152 * channelsï¼‰ä¸ªPCMæ•°æ®ï¼Œæ¯ä¸ªé‡‡æ ·ç‚¹ç”¨intï¼ˆ32bitï¼‰è¡¨å¾ä½†æ˜¯åªç”¨äº†å…¶ä¸­çš„24bitï¼Œè‡³æ­¤å¯ä»¥ç›´æ¥è¾“å‡ºæ•°æ®ä¿å­˜æ–‡ä»¶æˆ–è€…ç›´æ¥è°ƒç”¨éŸ³é¢‘æ’­æ”¾çš„APIè¿›è¡Œæ’­æ”¾ã€‚ä½†ç›®å‰å¤§å¤šæ•°codecæ”¯æŒçš„æ˜¯16bité‡åŒ–åˆ†è¾¨ç‡ï¼Œæ‰€ä»¥åœ¨è¾“å‡ºæ—¶å°†æ•°æ®é¥±å’Œåˆ°16bitè¿›è¡Œè¾“å‡ºã€‚</p>
</li>
<li><p>mad_flow</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">mad_flow</span> {</span></span><br><span class="line">  MAD_FLOW_CONTINUE = <span class="number">0x0000</span>,   <span class="comment">/* continue normally */</span>                                                     MAD_FLOW_STOP     = <span class="number">0x0010</span>,   <span class="comment">/* stop decoding normally */</span></span><br><span class="line">  MAD_FLOW_BREAK    = <span class="number">0x0011</span>,   <span class="comment">/* stop decoding and signal an error */</span></span><br><span class="line">  MAD_FLOW_IGNORE   = <span class="number">0x0020</span>    <span class="comment">/* ignore the current frame */</span></span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>

<p>æ‰€æœ‰å›è°ƒå‡½æ•°çš„è¿”å›å€¼å‡ä¸ºè¯¥æšä¸¾ç±»å‹ï¼Œåœ¨è§£ç çš„ä¸»æµç¨‹ä¸­ä¼šé€šè¿‡ä¸æ–­åˆ¤æ–­è§£ç å™¨æ‰€è°ƒç”¨çš„å›è°ƒå‡½æ•°çš„çŠ¶æ€æ¥ç¡®è®¤ä¸‹ä¸€æ­¥çš„åŠ¨ä½œ</p>
</li>
</ol>
<h1 id="ç›¸å…³è°ƒè¯•ç»éªŒ"><a href="#ç›¸å…³è°ƒè¯•ç»éªŒ" class="headerlink" title="ç›¸å…³è°ƒè¯•ç»éªŒ"></a>ç›¸å…³è°ƒè¯•ç»éªŒ</h1><ol>
<li><p>é…ç½®å‚æ•°æœªé€‰æ‹©</p>
<p>Qï¼šç¼–è¯‘æ­£å¸¸é€šè¿‡ï¼Œæµç¨‹æ­£ç¡®ï¼Œä½†æ˜¯è¾“å‡ºçš„å£°éŸ³èƒ½å¬å‡ºæ˜¯æ‰€éœ€è¦çš„éŸ³é¢‘ä½†æ˜¯æ•´ä½“æ•°æ®å¹¶ä¸æ­£ç¡®ï¼Ÿ</p>
<p>Aï¼šåœ¨mad.hä¸­æœ‰è‹¥å¹²çš„å‡½æ•°æ˜¯æ ¹æ®å¹³å°çš„ä¸åŒæœ‰ä¸åŒçš„å®ç°ï¼Œç”±äºç¼–è¯‘è¿‡ç¨‹ä¸­æ²¡æœ‰æ³¨æ„è­¦å‘Šç›´æ¥å°†å…¶æ³¨é‡Šå¯¼è‡´æ²¡æœ‰é€‰æ‹©æ­£ç¡®å‡½æ•°å®ç°ï¼Œå¯¼è‡´æœ€ç»ˆçš„æ•°æ®éƒ½æ˜¯é”™è¯¯çš„ã€‚ç¼–è¯‘æ—¶æ·»åŠ ç›¸åº”çš„å¹³å°çš„å‚æ•°å³å¯ï¼Œå¦‚æœæ‰‹åŠ¨å†™cmakeï¼Œå‚è€ƒç»™å‡ºçš„Makefileåšå‚æ•°é€‰æ‹©ï¼</p>
</li>
<li><p>çº¿ç¨‹æ ˆç©ºé—´å¤§å°åˆ†é…ä¸è¶³</p>
<p>Qï¼šåœ¨PCä¸Šæµ‹è¯•æ­£å¸¸æ’­æ”¾ï¼Œä½†æ˜¯ç§»æ¤åˆ°å°ç³»ç»Ÿä¸­ç»å¸¸å‡ºç°stack overflowï¼Ÿ</p>
<p>Aï¼šç”±äºMP3ä¸€å¸§æ•°æ®çš„é‡‡æ ·ç‚¹æ•°ä¸º1152ï¼Œä½¿ç”¨ int ç±»å‹è¿›è¡Œå­˜å‚¨ï¼Œæ‰€ä»¥æ ¸å¿ƒå‡½æ•° â€œ â…¢_decodeâ€ è‡³å°‘éœ€è¦6kçš„æ ˆç©ºé—´ï¼Œå¦‚æœæ˜¯å•ç‹¬ä¸€ä¸ªçº¿ç¨‹çš„è¯å†åŠ ä¸Šå…¶ä»–çš„å±€éƒ¨å˜é‡ã€å‡½æ•°è·³è½¬ç­‰ç­‰å¯èƒ½å°±è¶…è¿‡8kã€‚</p>
<p>â€‹	  å½“æ—¶ä½¿ç”¨c++ çš„threadè¿›è¡Œçš„çº¿ç¨‹åˆ›å»ºå¹¶ä¸èƒ½é…ç½®æ ˆç©ºé—´å¤§å°ï¼Œç»è¿‡ä¸¤å¤©å·¦å³çš„debugæŸ¥åˆ°æ˜¯æ ¸å¿ƒå‡½æ•°æ ˆç©ºé—´çš„æº¢å‡ºï¼Œæœ€ç»ˆä½¿ç”¨pthreadåŠ å¤§æ ˆç©ºé—´çš„å¤§å°è¿è¡Œå³å¯ã€‚</p>
</li>
<li><p>åŠ¨æ€è§£ç çš„å®ç°</p>
<p>Qï¼šåˆšå¼€å§‹ç™¾åº¦libmadçš„åº“ï¼Œå¾ˆå¤šåšå®¢è¯´åªèƒ½è°ƒç”¨ä¸€æ¬¡inputå›è°ƒå‡½æ•°å³ä¸€æ¬¡åŠ è½½æ‰€æœ‰çš„æºæ•°æ®ï¼Œè¿™å¯¹äºå®æ—¶æ§åˆ¶é€ æˆä¸ä¾¿ï¼Ÿ</p>
<p>Aï¼š æ·±å…¥æºç å¯ä»¥çœ‹å‡ºè¾“å…¥çš„çš„æ•°æ®è§£ç å®Œæˆåªè¦ä¸è¿”å›STOPæ˜¯å¯ä»¥ç»§ç»­å¡«å……æ•°æ®çš„ï¼Œè¿™æ ·ä¸´æ—¶çš„bufferå°±å°ä¸€äº›å¹¶ä¸”å¯ä»¥è¯•è¯•æ§åˆ¶å®Œæˆæ’­æ”¾å™¨çš„åŠŸèƒ½ã€‚ï¼ˆéœ€è¦æ³¨æ„å¦‚æœä¸€æ¬¡è¾“å…¥çš„æ•°æ®æ˜¯å‡ å¸§å¤šä¸€ç‚¹ï¼Œè€Œå¤šå‡ºæ¥çš„éœ€è¦æ”¾ä¿å­˜ä¸‹æ¬¡å†æ­¤è¿›è¡Œè§£ç ï¼‰</p>
</li>
<li><p>è·å¾—éŸ³é¢‘å‚æ•°</p>
<p>Qï¼šèƒ½å¤Ÿå¾ˆå¿«çš„è·å¾—éŸ³é¢‘ä¿¡æ¯ï¼Ÿ</p>
<p>Aï¼š å¯¹äºwavå¤´å¾ˆå®¹æ˜“çš„å¯ä»¥æ‰¾åˆ°éŸ³é¢‘çš„å‚æ•°ï¼Œä½†æ˜¯MP3æ–‡ä»¶çš„ä¿¡æ¯ä¿å­˜åœ¨å¸§å¤´ä¸­ï¼Œæ‰€ä»¥å¯ä»¥è¿›è¡Œä¸€æ­¥é¢„è§£ç ã€‚å³è¯»å…¥è‹¥å¹²ï¼ˆ512å³å¯ï¼‰byteæ•°æ®è§£ä¸€å¸§çš„å¤´å°±å¯ä»¥è·å¾—å…¨éƒ¨ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼šé‡‡æ ·ç‡ã€æ¯”ç‰¹ç‡ã€å£°é“ã€éŸ³é¢‘æ—¶é•¿ç­‰ç­‰ã€‚</p>
</li>
<li><p>è·å¾—æ’­æ”¾è¿›åº¦ / æ—¶é•¿å‡ºç°å¼‚å¸¸</p>
<p>Qï¼šä½¿ç”¨å…¬å¼ï¼šå½“å‰æ–‡ä»¶ä½ç½® / æ–‡ä»¶å¤§å° Ã— æ–‡ä»¶æ€»æ—¶é•¿ï¼Œè·å¾—å½“å‰æ’­æ”¾æ—¶é—´å‡ºç°å¼‚å¸¸ï¼Ÿ</p>
<p>Aï¼š å¯¹äºduration å’Œ fposæ˜¯ç”¨intçš„æ•°æ®ç±»å‹è¿›è¡Œä¿å­˜çš„ï¼Œä½†æ˜¯å¯¹äºwavæ–‡ä»¶ä¸€èˆ¬æ¯”è¾ƒå¤§åœ¨è®¡ç®—çš„æ—¶å€™è¶…å‡ºäº†æ•°æ®ç±»å‹æ‰€èƒ½å­˜å‚¨çš„æœ€å¤§é•¿åº¦ã€‚</p>
</li>
</ol>
]]></content>
      <categories>
        <category>Linux</category>
        <category>Audio</category>
      </categories>
      <tags>
        <tag>libmad</tag>
      </tags>
  </entry>
  <entry>
    <title>Audio-å†é‡</title>
    <url>/2022/09/05/Audio/Audio-meet-1/</url>
    <content><![CDATA[<p>æœ¬ç¯‡å†…å®¹å¯¹ä¸€èŠ‚æåˆ°çš„ç¼–ç è¿›è¡Œæ‰©å±•ï¼Œå°†é‡ç‚¹å¯¹PCMæ ¼å¼ã€WAVEæ ¼å¼ã€MP3æ ¼å¼è¿›è¡Œè¯¦ç»†è§£æã€‚</p>
<h1 id="PCM"><a href="#PCM" class="headerlink" title="PCM"></a>PCM</h1><p>PCM : Pulse-Code Modulation è„‰å†²è°ƒåˆ¶ç¼–ç </p>
<p>PCM æœ¬æ˜¯ä¸€ç§è°ƒåˆ¶æ–¹æ³•çš„åç§°ï¼Œè¿›è€Œé€šè¿‡è¯¥æ–¹æ³•å¾—åˆ°çš„éŸ³é¢‘æ•°æ®ä¹Ÿç§°ä½œPCMæ•°æ®ï¼Œå³è£¸æ•°æ®ã€‚è¯¥æ•°æ®æ˜¯æˆ‘ä»¬é€šè¿‡codecå¾—åˆ°çš„æœ€åŸå§‹çš„æ•°æ®ï¼</p>
<p>â€‹    <img src="/images/linux/Audio/Audio-remeet-1.png" alt="pic"></p>
<h1 id="WAVE"><a href="#WAVE" class="headerlink" title="WAVE"></a>WAVE</h1><p>WAVE : Waveform Audio File Format æ³¢å½¢éŸ³é¢‘æ–‡ä»¶æ ¼å¼, å³æˆ‘ä»¬å¹³æ—¶æ‰€è¯´çš„waveæ–‡ä»¶</p>
<p>å¾ˆç®€å•ï¼ŒWAVæ–‡ä»¶æ ¼å¼ç»“æ„ä½“é€šå¸¸æ˜¯ç”¨æ¥ä¿å­˜PCMæ ¼å¼çš„åŸå§‹æ•°æ®ï¼ŒåŸºäºæ­¤æ·»åŠ ä¸€ä¸ªæ–‡ä»¶å¤´æ„æˆäº†WAVæ–‡ä»¶ï¼Œå³wave = waveå¤´ + PCMæ•°æ®ã€‚å› æ­¤å®ƒé€šå¸¸ä¹Ÿè¢«ç§°ä¸ºæ— æŸéŸ³é¢‘ï¼Œä½†æ˜¯ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è®²ï¼ŒWAVä¹Ÿå¯ä»¥å­˜å‚¨å…¶å®ƒå‹ç¼©æ ¼å¼çš„éŸ³é¢‘æ•°æ®ã€‚</p>
<h2 id="wavå¤´"><a href="#wavå¤´" class="headerlink" title="wavå¤´"></a>wavå¤´</h2><table>
<thead>
<tr>
<th><strong>åç§»åœ°å€</strong></th>
<th><strong>æ•°æ®ç±»å‹</strong></th>
<th><strong>å¤§å°</strong></th>
<th><strong>åç§°</strong></th>
<th><strong>å†…å®¹</strong></th>
</tr>
</thead>
<tbody><tr>
<td>00H~03H</td>
<td>char</td>
<td>4</td>
<td>èµ„æºäº¤æ¢æ–‡ä»¶æ ‡å¿— ( RIFF )</td>
<td>52 49 46 46 å›ºå®šå†™æ³•</td>
</tr>
<tr>
<td>04H~07H</td>
<td>long int ï¼ˆ4ï¼‰</td>
<td>1</td>
<td>æ–‡ä»¶å¤§å°size</td>
<td>ä»ä¸‹ä¸ªåœ°å€ (08) å¼€å§‹åˆ° WAV æ–‡ä»¶ç»“å°¾çš„æ€»å­—èŠ‚æ•°æ•´ä¸ª WAV æ–‡ä»¶çš„å¤§å°å°±æ˜¯è¯¥æ•°å€¼ + 8</td>
</tr>
<tr>
<td>08H~0BH</td>
<td>char</td>
<td>4</td>
<td>WAVæ–‡ä»¶æ ‡å¿— WAVE</td>
<td>57 41 56 45 , æ˜¯ WAVE å››ä¸ªå­—æ¯çš„ ASCII ç ï¼Œå›ºå®šå†™æ³•</td>
</tr>
<tr>
<td>0CH~0FH</td>
<td>char</td>
<td>4</td>
<td>æ³¢å½¢æ ¼å¼æ ‡å¿—ï¼ˆfmt ï¼‰</td>
<td>æœ€åä¸€ä½0x20 å¯¹åº”çš„å­—ç¬¦æ˜¯ç©ºæ ¼</td>
</tr>
<tr>
<td>10H~13H</td>
<td>int</td>
<td>1</td>
<td>è¿‡æ»¤å­—èŠ‚</td>
<td>ä¸€èˆ¬ä¸º00000010H</td>
</tr>
<tr>
<td>14H~15H</td>
<td>short int ï¼ˆ2ï¼‰</td>
<td>1</td>
<td><strong>æ ¼å¼ç§ç±»audioformat</strong></td>
<td>å€¼ä¸º1æ—¶ï¼Œè¡¨ç¤ºæ•°æ®ä¸ºçº¿æ€§PCMç¼–ç </td>
</tr>
<tr>
<td>16H~17H</td>
<td>short int</td>
<td>1</td>
<td><strong>é€šé“æ•° channnels</strong></td>
<td>1 è¡¨ç¤ºå•å£°é“ , 2 è¡¨ç¤ºç«‹ä½“å£°</td>
</tr>
<tr>
<td>18H~1BH</td>
<td>long int</td>
<td>1</td>
<td><strong>é‡‡æ ·é¢‘ç‡ sampleRate</strong></td>
<td>80 BB 00 00 â€“ &gt; 48000 Hz ;</td>
</tr>
<tr>
<td>1CH~1FH</td>
<td>long int</td>
<td>1</td>
<td>æ³¢å½¢æ•°æ®ä¼ è¾“é€Ÿç‡ï¼ˆæ¯ç§’å¹³å‡å­—èŠ‚æ•°ï¼‰</td>
<td>é‡‡æ ·ç‡Ã—é€šé“æ•°Ã—é‡‡æ ·ä½æ•° / 8</td>
</tr>
<tr>
<td>20H~21H</td>
<td>short int</td>
<td>1</td>
<td>DATAæ•°æ®å—è°ƒæ•´é•¿åº¦ï¼Œå­—èŠ‚ã€‚</td>
<td>é€šé“æ•°Ã—æ ·æœ¬æ•°æ®ä½æ•° / 8</td>
</tr>
<tr>
<td>22H~23H</td>
<td>short int</td>
<td>1</td>
<td>PCMä½å®½</td>
<td>10 00 â€”-&gt; 16 ä½, 2 å­—èŠ‚</td>
</tr>
<tr>
<td>24H~27H</td>
<td>char</td>
<td>4</td>
<td>æ•°æ®æ ‡è®°</td>
<td>64 61 74 61 dataçš„ASCIIçš„å€¼</td>
</tr>
<tr>
<td>28H~2BH</td>
<td>long int</td>
<td>1</td>
<td>PCM æ•°æ®æ€»é•¿åº¦</td>
<td></td>
</tr>
</tbody></table>
<h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><p>Qï¼šwaveæ–‡ä»¶çš„æ–‡ä»¶å¤´ä¸€å®šæ˜¯44Byteså—ï¼Ÿ</p>
<p>Aï¼šä¸ä¸€å®šï¼ä»¥ä¸Šæ ¼å¼åªæ˜¯waveæ–‡ä»¶çš„æ ‡å‡†ï¼Œå±äºé€šç”¨æ ‡å‡†ã€‚ä½†æ˜¯å°†å…¶ä»–æ ¼å¼æ–‡ä»¶é€šè¿‡ffmpegè½¬ç ä¹‹åçš„wavæ–‡ä»¶å¤´ä¼šå¤§äº44ä¸ªå­—èŠ‚ï¼ˆ115Bytesï¼‰ï¼Œåœ¨æ–‡ä»¶å¤´å’Œæ•°æ®å—ä¹‹é—´æ·»åŠ äº†ä¸€äº›ffmpegçš„ä¿¡æ¯ï¼Œéƒ¨åˆ†è¡¨å¾çš„æ„ä¹‰ä¸åŒï¼ç½‘ä¸Šå¾ˆå¤šæ ¼å¼è½¬æ¢å·¥å…·éƒ½æ˜¯è°ƒç”¨çš„ffmpegè½¬ç çš„ï¼Œå¯¼è‡´æ–‡ä»¶å¤´å¤§å°ä¸å®Œå…¨ç›¸åŒã€‚</p>
<blockquote>
<p>â€‹     -map_metadata -1 -fflags +bitexact å¯ä»¥å»é™¤æ ‡æ³¨ä¿¡æ¯ï¼Œä½¿æ–‡ä»¶å¤´ç¬¦åˆæ ‡å‡†</p>
<p>â€‹     ffmpeg -y -i music.mp3 -map_metadata -1 -fflags +bitexact -f wav -ac 1 -ar 16000 -ab 16k music.wav</p>
</blockquote>
<h2 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h2><p>Ffmpegä¸å»æ ‡å‡†ä¿¡æ¯è½¬ç waveä¹‹åçš„æ–‡ä»¶æ ¼å¼ï¼š</p>
<table>
<thead>
<tr>
<th>åç§»åœ°å€</th>
<th>å­—èŠ‚æ•°</th>
<th>æ•°æ®ç±»å‹</th>
<th>å†…å®¹</th>
</tr>
</thead>
<tbody><tr>
<td>00H ~ 23H</td>
<td>36</td>
<td>åŒä¸Šè¡¨çš„00H~23Hä¸€è‡´</td>
<td></td>
</tr>
<tr>
<td>24H ~ 27H</td>
<td>4</td>
<td>char</td>
<td>â€œLISTâ€, LISTå—æ ‡å¿—ï¼Œå›ºå®šä¸å˜</td>
</tr>
<tr>
<td>28H ~ 2BH</td>
<td>4</td>
<td>long</td>
<td>LISTå—å ç”¨çš„å­—èŠ‚æ•°ï¼Œåœ¨è¿™é‡Œä¸º26å­—èŠ‚</td>
</tr>
<tr>
<td>2CH ~ 45H</td>
<td>26</td>
<td>char</td>
<td>LISTå—å†…å®¹</td>
</tr>
<tr>
<td>46H ~ 49H</td>
<td>4</td>
<td>char</td>
<td>â€œdataâ€, dataæ•°æ®å—æ ‡å¿—ï¼Œå›ºå®šä¸å˜</td>
</tr>
<tr>
<td>4AH ~ 4DH</td>
<td>4</td>
<td>long</td>
<td>wavæ–‡ä»¶éŸ³é¢‘æ•°æ®æ‰€å å¤§å°</td>
</tr>
</tbody></table>
<h1 id="MP3"><a href="#MP3" class="headerlink" title="MP3"></a>MP3</h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>MP3ï¼šMoving Picture Experts Group Audio Layer III, åŠ¨æ€å½±åƒä¸“å®¶å‹ç¼©æ ‡å‡†éŸ³é¢‘å±‚é¢3</p>
<p>é¦–å…ˆç§‘æ™®ä¸‹éƒ¨åˆ†æ¦‚å¿µï¼šMPEGï¼ˆMoving Pictures Experts Group ï¼ŒåŠ¨æ€å›¾åƒä¸“å®¶ç»„ï¼‰ï¼Œç®€å•ç†è§£å°±æ˜¯ä¸€äº›ç ”ç©¶éŸ³è§†é¢‘çš„ä¸“å®¶å‘å¸ƒçš„ç›¸å…³æ ‡å‡†ï¼Œå…¶å‘½åä¸ºMPEG-*ï¼ˆå…¶ä¸­*ä»£è¡¨æ•°å­—æˆ–å­—æ¯ï¼‰ï¼Œä¾‹å¦‚MPEG-1ã€MPEG-2.5ã€MPEG-Eç­‰ç­‰ã€‚</p>
<p>å¯èƒ½æœ‰äººä¼šæƒ³MPEG-3æ˜¯ä¸æ˜¯å°±æ˜¯MP3å‘¢ï¼ŸMPEGæ˜¯é’ˆå¯¹éŸ³è§†é¢‘åŠç³»ç»Ÿæµ‹è¯•çš„ä¸€æ•´å¥—çš„æ ‡å‡†è§„èŒƒï¼Œå…¶ä¸­å¯¹äºMPEG1æ¥è®²ï¼Œå…¶part3éŸ³é¢‘éƒ¨åˆ†è§„å®šäº†3ä¸ªç‹¬ç«‹åˆ†å±‚çš„éŸ³é¢‘ç¼–ç æ ¼å¼ï¼Œåˆ†åˆ«ä¸ºlayer â… ã€layer â…¡ã€layer â…¢ï¼Œè€Œlayer â…¢ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„MP3ï¼ˆMEPEG1 Layer â…¢ï¼‰ï¼Œè¿™ä¸‰å±‚çš„åŒºåˆ«ä¸»è¦åœ¨äºç¼–ç çš„ç®—æ³•åŠè¾“å‡ºé€Ÿç‡çš„åŒºåˆ«ã€‚åŒæ ·çºµå‘æ¥çœ‹ï¼ŒMPEG2ã€MPEG2.5åŒæ ·æœ‰ä¸‰ä¸ªç‹¬ç«‹çš„layerï¼ŒåŒºåˆ«åœ¨äºå®ƒä»¬æ‰€ä½¿ç”¨çš„é‡‡æ ·ç‡æ›´ä½äº†ã€‚</p>
<h2 id="æ–‡ä»¶ç»“æ„"><a href="#æ–‡ä»¶ç»“æ„" class="headerlink" title="æ–‡ä»¶ç»“æ„"></a>æ–‡ä»¶ç»“æ„</h2><p>ç›®å‰å¤§å¤šæ•°æ ‡å‡†MP3æ–‡ä»¶éƒ½æ”¯æŒID3V2æ ‡å‡†ã€‚å…·ä½“ç»„æˆæ ¼å¼ä¸ºï¼šID3V2.3æ ‡ç­¾å¸§ï¼ˆ1ä¸ªï¼‰+ æ•°æ®å¸§ï¼ˆè‹¥å¹²ï¼‰+ ID3V1å¸§ï¼ˆ1ä¸ªï¼‰ï¼Œå…¶ä¸­ID3V2.3 = æ ‡ç­¾å¤´ï¼ˆ1ä¸ªï¼Œå¿…é¡»ï¼‰ + æ ‡ç­¾å¸§ï¼ˆè‹¥å¹²ï¼Œä¸å¿…é¡»ï¼‰ + æ‰©å±•æ ‡ç­¾å¤´ï¼ˆä¸å¿…é¡»ï¼‰</p>
<p>ç»„æˆéƒ¨åˆ†æˆ‘ç”»äº†ä¸€å¼ ç¤ºæ„å›¾å¯ä»¥å‚è€ƒï¼Œæ¯ä¸€éƒ¨åˆ†ä¸‹é¢å°†åšè¯¦ç»†è§£æ</p>
<p>â€‹    <img src="/images/linux/Audio/Audio-remeet-2.png" alt="pic"></p>
<h2 id="ID3æ ‡å‡†"><a href="#ID3æ ‡å‡†" class="headerlink" title="ID3æ ‡å‡†"></a>ID3æ ‡å‡†</h2><p>MP3å¸§å¤´ä¸­é™¤äº†å­˜å‚¨ä¸€äº›è±¡privateã€copyrightã€originalçš„ç®€å•éŸ³ä¹è¯´æ˜ä¿¡æ¯ä»¥å¤–ï¼Œæ²¡æœ‰è€ƒè™‘å­˜æ”¾æ­Œåã€ä½œè€…ã€ä¸“è¾‘åã€å¹´ä»½ ç­‰å¤æ‚ä¿¡æ¯ï¼Œè€Œè¿™äº›ä¿¡æ¯åœ¨MP3åº”ç”¨ä¸­éå¸¸å¿…è¦ã€‚1996å¹´ï¼ŒFricKempåœ¨â€œStudio 3â€é¡¹ç›®ä¸­æå‡ºäº†åœ¨MP3æ–‡ä»¶å°¾å¢åŠ ä¸€å—ç”¨äºå­˜æ”¾æ­Œæ›²çš„è¯´æ˜ä¿¡æ¯ï¼Œå½¢æˆäº†ID3æ ‡å‡†</p>
<h2 id="æ ‡ç­¾å¤´"><a href="#æ ‡ç­¾å¤´" class="headerlink" title="æ ‡ç­¾å¤´"></a>æ ‡ç­¾å¤´</h2><p>æ ‡ç­¾å¤´æ˜¯ç”±10Byteç»„æˆçš„ï¼Œå…·ä½“å«ä¹‰å¦‚ä¸‹</p>
<table>
<thead>
<tr>
<th>å®šä¹‰</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>char Header[3];</td>
<td>å¿…é¡»ä¸ºâ€ID3â€å¦åˆ™è®¤ä¸ºæ ‡ç­¾ä¸å­˜åœ¨ï¼Œå¦‚ä¸Šå›¾åœ°å€00â€”02éƒ¨åˆ†ä¸ºâ€49 44 33â€ï¼Œæ–‡æœ¬ä¸ºâ€œID3â€</td>
</tr>
<tr>
<td>char Ver;</td>
<td>ç‰ˆæœ¬å· ID3V2.3 å°±è®°å½• 3ï¼Œå¦‚ä¸Šå›¾åœ°å€03å¤„è®°å½•ä¸ºâ€03â€</td>
</tr>
<tr>
<td>char Revision;</td>
<td>å‰¯ç‰ˆæœ¬å·æ­¤ç‰ˆæœ¬è®°å½•ä¸º 0</td>
</tr>
<tr>
<td>char Flag;</td>
<td>æ”¾æ ‡å¿—çš„å­—èŠ‚ï¼Œä¸€èˆ¬ä¸º00abc00000a â€“ è¡¨ç¤ºæ˜¯å¦ä½¿ç”¨ Unsynchronisationb â€“ è¡¨ç¤ºæ˜¯å¦æœ‰æ‰©å±•å¤´éƒ¨,ä¸€èˆ¬æ²¡æœ‰(è‡³å°‘ Winamp æ²¡æœ‰è®°å½•),æ‰€ä»¥ä¸€èˆ¬ä¹Ÿä¸è®¾ç½®c â€“ è¡¨ç¤ºæ˜¯å¦ä¸ºæµ‹è¯•æ ‡ç­¾(99.99%çš„æ ‡ç­¾éƒ½ä¸æ˜¯æµ‹è¯•ç”¨çš„ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¹Ÿä¸è®¾ç½®)</td>
</tr>
<tr>
<td>char Size[4];</td>
<td>æ ‡ç­¾å¤§å°,åŒ…æ‹¬æ ‡ç­¾å¤´çš„ 10 ä¸ªå­—èŠ‚å’Œæ‰€æœ‰çš„æ ‡ç­¾å¸§çš„å¤§å°</td>
</tr>
</tbody></table>
<p>æ•´ä¸ªæ ‡ç­¾å¤§å° :</p>
<p>ID3V2_frame_size = (int)(Size[0] &amp; 0x7F) &lt;&lt; 21 | (int)(Size[1] &amp; 0x7F) &lt;&lt; 14 | (int)(Size[2] &amp; 0x7F) &lt;&lt; 7 | (int)(Size[3] &amp; 0x7F) + 10;</p>
<h2 id="æ ‡ç­¾å¸§"><a href="#æ ‡ç­¾å¸§" class="headerlink" title="æ ‡ç­¾å¸§"></a>æ ‡ç­¾å¸§</h2><p>æ¯ä¸ªæ ‡ç­¾å¸§éƒ½æœ‰ä¸€ä¸ª 10 ä¸ªå­—èŠ‚çš„å¸§å¤´ï¼ˆè™½ç„¶éƒ½æ˜¯10å­—èŠ‚ï¼Œä½†æ˜¯ä¸æ ‡ç­¾å¤´ä¸æ˜¯ä¸€ä¸ªä¸œè¥¿ã€‚æ ‡ç­¾å¤´æœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼Œè€Œæ ‡ç­¾å¤´æ¯ä¸€ä¸ªæ ‡ç­¾å¸§éƒ½æœ‰ä¸€ä¸ªå¸§å¤´ï¼‰å’Œè‡³å°‘ä¸€ä¸ªå­—èŠ‚çš„ä¸å›ºå®šé•¿åº¦çš„å†…å®¹ç»„æˆã€‚</p>
<table>
<thead>
<tr>
<th>å®šä¹‰</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>char FrameID[4]</td>
<td>ç”¨å››ä¸ªå­—ç¬¦æ ‡è¯†ä¸€ä¸ªå¸§ï¼Œè¯´æ˜å…¶å†…å®¹</td>
</tr>
<tr>
<td>char Size[4]</td>
<td>å¸§å†…å®¹çš„å¤§å°ï¼Œä¸åŒ…æ‹¬å¸§å¤´ï¼Œä¸å¾—å°äº1</td>
</tr>
<tr>
<td>char Flags[2]</td>
<td>å­˜æ”¾æ ‡å¿—ï¼Œåªå®šä¹‰äº†6 ä½ï¼Œæ­¤å¤„ä¸å†è¯´æ˜</td>
</tr>
</tbody></table>
<p>å¸¸ç”¨å¸§æ ‡è¯†ï¼š</p>
<p>TIT2ï¼šæ ‡é¢˜<br>TPE1ï¼šä½œè€…<br>TALBï¼šä¸“è¾‘<br>TRCKï¼š éŸ³è½¨ï¼Œæ ¼å¼ï¼šN/Mï¼ŒNè¡¨ç¤ºä¸“è¾‘ä¸­ç¬¬å‡ é¦–ï¼ŒMä¸ºä¸“è¾‘ä¸­æ­Œæ›²æ€»æ•°<br>TYERï¼šå¹´ä»½<br>TCONï¼šç±»å‹<br>COMMï¼šå¤‡æ³¨ï¼Œæ ¼å¼ï¼šâ€œeng\0å¤‡æ³¨å†…å®¹â€ï¼Œå…¶ä¸­engè¡¨ç¤ºæ‰€ä½¿ç”¨çš„è¯­è¨€<br>å¸§å¤§å°ä¸ºå››ä¸ªå­—èŠ‚æ‰€è¡¨ç¤ºçš„æ•´æ•°å¤§å°ã€‚</p>
<h2 id="æ•°æ®å¸§"><a href="#æ•°æ®å¸§" class="headerlink" title="æ•°æ®å¸§"></a>æ•°æ®å¸§</h2><p>æ•°æ®å¸§ç”±å¸§å¤´å’Œæ•°æ®å¸§ç»„æˆï¼Œå¯¹äºæ¯ä¸€å¸§æ•°æ®éƒ½æœ‰ä¸€ä¸ªå¸§å¤´ã€‚</p>
<p>å¸§å¤´é•¿4å­—èŠ‚ï¼Œå¯¹äºå›ºå®šä½ç‡çš„MP3æ–‡ä»¶ï¼Œæ‰€æœ‰å¸§çš„å¸§å¤´æ ¼å¼ä¸€æ ·å…¶æ•°æ®ç»“æ„å¦‚ä¸‹</p>
<p>typedef struct frameHeader<br>{<br>unsigned int sync1:8; //åŒæ­¥ä¿¡æ¯ 1<br>unsigned int error_protection:1; //CRC æ ¡éªŒ<br>unsigned int layer:2; //å±‚<br>unsigned int version:2; //ç‰ˆæœ¬<br>unsigned int sync2:3; //åŒæ­¥ä¿¡æ¯ 2<br>unsigned int extension:1; //ç‰ˆæƒ<br>unsigned int padding:1; //å¡«å……ç©ºç™½å­—<br>unsigned int sample_rate_index:2; //é‡‡æ ·ç‡ç´¢å¼•<br>unsigned int bit_rate_index:4; //ä½ç‡ç´¢å¼•<br>unsigned int emphasis:2; //å¼ºè°ƒæ–¹å¼<br>unsigned int original:1; //åŸå§‹åª’ä½“<br>unsigned int copyright:1; //ç‰ˆæƒæ ‡å¿—<br>unsigned int mode_extension:2; //æ‰©å±•æ¨¡å¼,ä»…ç”¨äºè”åˆç«‹ä½“å£°<br>unsigned int channel_mode:2; //å£°é“æ¨¡å¼<br>}FHEADER;</p>
<p>æ¯”ç‰¹ç‡ä¸º32çš„æ•´æ•°å€ä¸€èˆ¬å°±æ˜¯æ’å®šç¼–ç ï¼Œå¦åˆ™å°±æ˜¯å¯å˜ç¼–ç ï¼›å¯å˜ç¼–ç å¸§å¤´ä¸€èˆ¬ä¼šæœ‰ä¸åŒ</p>
<h2 id="ID3V1æ ‡ç­¾å¸§"><a href="#ID3V1æ ‡ç­¾å¸§" class="headerlink" title="ID3V1æ ‡ç­¾å¸§"></a>ID3V1æ ‡ç­¾å¸§</h2><p>æ ‡ç­¾å¤´æ˜¯ç”±128Byteç»„æˆçš„ï¼Œå…·ä½“å«ä¹‰å¦‚ä¸‹</p>
<table>
<thead>
<tr>
<th>å®šä¹‰</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>char Header[3]</td>
<td>æ ‡ç­¾å¤´å¿…é¡»æ˜¯â€TAGâ€å¦åˆ™è®¤ä¸ºæ²¡æœ‰æ ‡ç­¾</td>
</tr>
<tr>
<td>char Title[30]</td>
<td>æ ‡é¢˜</td>
</tr>
<tr>
<td>char Artist[30]</td>
<td>ä½œè€…</td>
</tr>
<tr>
<td>char Album[30]</td>
<td>ä¸“é›†</td>
</tr>
<tr>
<td>char Year[4]</td>
<td>å‡ºå“å¹´ä»£</td>
</tr>
<tr>
<td>char Comment[28]</td>
<td>å¤‡æ³¨</td>
</tr>
<tr>
<td>char reserve</td>
<td>ä¿ç•™</td>
</tr>
<tr>
<td>char track</td>
<td>éŸ³è½¨</td>
</tr>
<tr>
<td>char Genre;</td>
<td>ç±»å‹</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Linux</category>
        <category>Audio</category>
      </categories>
  </entry>
  <entry>
    <title>Audio-åˆè¯†</title>
    <url>/2022/08/31/Audio/Audio-meet/</url>
    <content><![CDATA[<p>è·³åŠ¨çš„éŸ³ç¬¦ï¼Œå©‰è½¬çš„èŠ‚å¥ï¼Œæ‚ æ‰¬çš„æ­Œå£°â€¦â€¦</p>
<p>éŸ³ä¹æ— ç–‘æ˜¯æœ€èƒ½æ„‰æ‚¦èº«å¿ƒçš„æ–¹å¼ä¹‹ä¸€ï¼Œé‚£ä¹ˆæ­Œæ‰‹çš„éŸ³è°ƒã€éŸ³è‰²æ˜¯å¦‚ä½•å­˜å‚¨åˆ°æ‰‹æœºä¸­ï¼Œåˆæ˜¯å¦‚ä½•é€šè¿‡å–‡å­æ’­æ”¾å‡ºæ¥çš„å‘¢ï¼Ÿ</p>
<p>ä¸‹é¢æˆ‘å°†é€šè¿‡å‡ ç¯‡åšå®¢é˜è¿°æˆ‘å¯¹éŸ³é¢‘çš„ç†è§£åŠéƒ¨åˆ†è°ƒè¯•ç»éªŒï¼Œæœ¬ç« ä¸»è¦ä»‹ç»éŸ³é¢‘çš„çš„åŸºç¡€çŸ¥è¯†</p>
<h1 id="ä¿¡å·åˆ†ç±»"><a href="#ä¿¡å·åˆ†ç±»" class="headerlink" title="ä¿¡å·åˆ†ç±»"></a>ä¿¡å·åˆ†ç±»</h1><p>å£°éŸ³ä¸¥æ ¼æ„ä¹‰æ¥è®²åº”è¯¥è¢«å«åšå£°éŸ³ä¿¡å·ï¼Œè€Œåœ¨ç»´åŸºç™¾ç§‘ä¸­å¯¹äº<strong>ä¿¡å·</strong>çš„å®šä¹‰æ˜¯<a href="https://baike.baidu.com/item/%E7%89%A9%E7%90%86%E9%87%8F/9984692">è¡¨ç¤ºæ¶ˆæ¯çš„ç‰©ç†é‡</a>ï¼Œè¿™æ ·å°±å¾ˆå¥½ç†è§£äº†å£°éŸ³ä¿¡å·å°±æ˜¯ä»¥å£°éŸ³ä¸ºè½½ä½“çš„ä¸€ä¸ªç‰©ç†é‡ã€‚è€Œè‡ªç„¶ç•Œä¸­ä¿¡å·å¯ä»¥æœ‰å¦‚ä¸‹çš„åˆ†ç±»</p>
<p><img src="/images/linux/Audio/Audio-meet-1.png" alt="signal"></p>
<p>å› æ­¤ï¼ŒæŒ‰ç…§ä¿¡å·å˜åŒ–åˆ†ç±»å£°éŸ³ä¿¡å·å±äºéšæœºä¿¡å·ï¼›æŒ‰ç…§ä¿¡å·ç‰¹å¾åˆ†ç±»å£°éŸ³ä¿¡å·å±äºæ¨¡æ‹Ÿä¿¡å·</p>
<h1 id="æ¨¡æ•°è½¬æ¢"><a href="#æ¨¡æ•°è½¬æ¢" class="headerlink" title="æ¨¡æ•°è½¬æ¢"></a>æ¨¡æ•°è½¬æ¢</h1><p>ä¸Šä¸€éƒ¨åˆ†äº†è§£åˆ°å£°éŸ³æ˜¯æ¨¡æ‹Ÿä¿¡å·ï¼Œè€Œå¯¹äºè®¡ç®—æœºæ¥è®²å…¶åªèƒ½å¤„ç†æ•°å­—ä¿¡å·å³0å’Œ1ï¼Œæ‰€ä»¥å¿…é¡»éœ€è¦å°†å£°éŸ³æ¨¡æ‹Ÿä¿¡å·è½¬æ¢æˆæ•°å­—ä¿¡å·ï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹å«åšæ¨¡æ•°è½¬æ¢ï¼ˆAnalog Digital Conversionï¼‰ï¼Œç›¸åº”çš„å®Œæˆè¯¥åŠŸèƒ½çš„ç¡¬ä»¶å•å…ƒå°±å«åšæ¨¡æ•°è½¬æ¢å™¨(ADC)</p>
<p>å®Œæˆè¯¥è¿‡ç¨‹éœ€è¦ä¸‰éƒ¨æ›²åˆ†åˆ«æ˜¯ï¼šé‡‡æ ·ã€é‡åŒ–ã€ç¼–ç ï¼Œæ•´ä½“è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/images/linux/Audio/Audio-meet-2.png" alt="ADC"></p>
<h2 id="é‡‡æ ·"><a href="#é‡‡æ ·" class="headerlink" title="é‡‡æ ·"></a>é‡‡æ ·</h2><p><em>é‡è¦å‚æ•°ï¼šé‡‡æ ·ç‡</em></p>
<ul>
<li>å®šä¹‰ï¼šåœ¨æ—¶é—´è½´ä¸Šå¯¹ä¿¡å·è¿›è¡Œç¦»æ•£åŒ–</li>
<li>åŸç†ï¼šæŒ‰ç…§ä¸€å®šçš„é¢‘ç‡å¯¹æ¨¡æ‹Ÿä¿¡å·çš„ç¬æ—¶æ—¶åˆ»è¿›è¡Œæ ·æœ¬é‡‡é›†</li>
</ul>
<p>å…¶å®é‡‡æ ·ä½œç”¨é€šä¿—ç†è§£å°±æ˜¯æ˜¯é‡‡é›†æ ·æœ¬ã€‚ç”±äºæ¨¡æ‹Ÿä¿¡å·æ˜¯è¿ç»­çš„ï¼Œç†è®ºä¸Šæˆ‘ä»¬éœ€è¦é‡‡é›†æ— æ•°ä¸ªç‚¹æ‰èƒ½å®Œæ•´çš„è¿˜åŸè¯¥ä¿¡å·ï¼Œä½†æ˜¯ä¸€æ¥æ— ç©·çš„æ¦‚å¿µæ˜¯ä¸å¯èƒ½æ»¡è¶³çš„ï¼ŒäºŒæ¥æˆ‘ä»¬å…¶å®å¹¶ä¸éœ€è¦è¿™ä¹ˆé«˜çš„é‡‡æ ·ç‡ã€‚æˆ‘ä»¬å¬è§‰æ˜¯æœ‰å»¶è¿Ÿçš„å°±å’Œè§†é¢‘å¸§ä¸åœçš„åˆ·æ–°æ¬ºéª—æˆ‘ä»¬çš„çœ¼ç›æ˜¯ç”»é¢è¿ç»­çš„æ˜¯ä¸€ä¸ªé“ç†ã€‚</p>
<p>æ‰€ä»¥é‡‡æ ·ç‡è¶Šé«˜ï¼Œå£°éŸ³çš„è¿˜åŸå°±è¶ŠçœŸå®è¶Šè‡ªç„¶ï¼Œäººå¯¹é¢‘ç‡çš„è¯†åˆ«èŒƒå›´æ˜¯ 20HZ - 22000HZ, å¦‚æœæ¯ç§’é’Ÿèƒ½å¯¹å£°éŸ³åš 22000 ä¸ªé‡‡æ ·, å›æ”¾æ—¶å°±è¶³å¯ä»¥æ»¡è¶³äººè€³çš„éœ€æ±‚. æ‰€ä»¥ 22050 çš„é‡‡æ ·é¢‘ç‡æ˜¯å¸¸ç”¨çš„, 44100å·²æ˜¯CDéŸ³è´¨, è¶…è¿‡48000çš„é‡‡æ ·å¯¹äººè€³å·²ç»æ²¡æœ‰æ„ä¹‰ã€‚è¿™å’Œç”µå½±çš„æ¯ç§’ 24 å¸§å›¾ç‰‡çš„é“ç†å·®ä¸å¤šã€‚</p>
<h2 id="é‡åŒ–"><a href="#é‡åŒ–" class="headerlink" title="é‡åŒ–"></a>é‡åŒ–</h2><p><em>ç›¸å…³å‚æ•°ï¼šé‡‡æ ·ä½æ•°</em></p>
<ul>
<li><p>å®šä¹‰ï¼šåœ¨å¹…åº¦è½´ä¸Šå¯¹ä¿¡å·è¿›è¡Œæ•°å­—åŒ–</p>
</li>
<li><p>åŸç†ï¼šå¯¹é‡‡æ ·ç‚¹çš„å¹…åº¦èµ‹äºˆå…·ä½“çš„æ•°å€¼ï¼Œè¯¥æ•°å€¼ç”±nä½äºŒè¿›åˆ¶è¡¨å¾ï¼ˆn = 8 / 16 / 32ï¼‰</p>
</li>
</ul>
<p>é‡‡æ ·ä½æ•°è¶Šé«˜è¯´æ˜åˆ’åˆ†çš„ç­‰çº§è¶Šç²¾ç»†ã€‚è¾ƒä½çš„é‡‡æ ·ä½æ•°æŸå¤±ç²¾åº¦ï¼Œè¾ƒé«˜çš„é‡‡æ ·ä½æ•°å¯èƒ½é€ æˆè½¯ç¡¬ä»¶èµ„æºçš„æµªè´¹</p>
<blockquote>
<p>å°å¸¸è¯†ï¼šæ ‡å‡†CDéŸ³ä¹çš„è´¨é‡å°±æ˜¯16bitã€44.1KHzé‡‡æ ·</p>
</blockquote>
<h2 id="ç¼–ç "><a href="#ç¼–ç " class="headerlink" title="ç¼–ç "></a>ç¼–ç </h2><p>å®šä¹‰ï¼šæŒ‰ç…§ä¸€å®šçš„æ ¼å¼è®°å½• é‡‡æ · å’Œ é‡åŒ– åçš„æ•°æ®ã€‚åç»­ä¼šå¯¹éƒ¨åˆ†æ ¼å¼çš„å­˜å‚¨æ ¼å¼è¿›è¡Œåˆ†æ</p>
<h3 id="ç¼–ç åˆ†ç±»"><a href="#ç¼–ç åˆ†ç±»" class="headerlink" title="ç¼–ç åˆ†ç±»"></a>ç¼–ç åˆ†ç±»</h3><blockquote>
<p> è¯¥éƒ¨åˆ†å†…å®¹è½¬è‡ª <a href="https://www.jianshu.com/p/28d3f108ef63">https://www.jianshu.com/p/28d3f108ef63</a></p>
</blockquote>
<h4 id="æ³¢å½¢ç¼–ç "><a href="#æ³¢å½¢ç¼–ç " class="headerlink" title="æ³¢å½¢ç¼–ç "></a>æ³¢å½¢ç¼–ç </h4><ul>
<li>å®šä¹‰ï¼šä¸åˆ©ç”¨ç”ŸæˆéŸ³é¢‘ä¿¡å·çš„ä»»ä½•å‚æ•°ï¼Œç›´æ¥å°† <strong>æ—¶é—´åŸŸä¿¡å·</strong> å˜æ¢ä¸º <strong>æ•°å­—ä»£ç </strong>ï¼Œä½¿é‡æ„çš„è¯­éŸ³æ³¢å½¢å°½å¯èƒ½åœ°ä¸åŸå§‹è¯­éŸ³ä¿¡å·çš„ æ³¢å½¢å½¢çŠ¶ ä¿æŒä¸€è‡´ã€‚</li>
<li>åŸç†ï¼šåœ¨ <strong>æ—¶é—´è½´</strong> ä¸Šå¯¹æ¨¡æ‹Ÿè¯­éŸ³ä¿¡å·æŒ‰ä¸€å®šçš„é€Ÿç‡æŠ½æ ·ï¼Œç„¶åå°†å¹…åº¦æ ·æœ¬åˆ†å±‚é‡åŒ–ï¼Œå¹¶ç”¨ä»£ç è¡¨ç¤ºã€‚</li>
</ul>
<h4 id="å‚æ•°ç¼–ç "><a href="#å‚æ•°ç¼–ç " class="headerlink" title="å‚æ•°ç¼–ç "></a>å‚æ•°ç¼–ç </h4><p>ä»è¯­éŸ³ <strong>æ³¢å½¢ä¿¡å·</strong> ä¸­æå–ç”Ÿæˆè¯­éŸ³çš„å‚æ•°ï¼Œä½¿ç”¨è¿™äº›å‚æ•°é€šè¿‡è¯­éŸ³ç”Ÿæˆæ¨¡å‹é‡æ„å‡ºè¯­éŸ³ï¼Œä½¿é‡æ„çš„è¯­éŸ³ä¿¡å·å°½å¯èƒ½åœ°ä¿æŒåŸå§‹è¯­éŸ³ä¿¡å·çš„è¯­æ„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‚æ•°ç¼–ç æ˜¯æŠŠè¯­éŸ³ä¿¡å·äº§ç”Ÿçš„æ•°å­—æ¨¡å‹ä½œä¸ºåŸºç¡€ï¼Œç„¶åæ±‚å‡ºæ•°å­—æ¨¡å‹çš„æ¨¡å‹å‚æ•°ï¼Œå†æŒ‰ç…§è¿™äº›å‚æ•°è¿˜åŸæ•°å­—æ¨¡å‹ï¼Œè¿›è€Œåˆæˆè¯­éŸ³ã€‚</p>
<h4 id="æ··åˆç¼–ç "><a href="#æ··åˆç¼–ç " class="headerlink" title="æ··åˆç¼–ç "></a>æ··åˆç¼–ç </h4><p>æ··åˆç¼–ç æ˜¯æŒ‡åŒæ—¶ä½¿ç”¨ä¸¤ç§æˆ–ä¸¤ç§ä»¥ä¸Šçš„ç¼–ç æ–¹æ³•è¿›è¡Œç¼–ç ã€‚è¿™ç§ç¼–ç æ–¹æ³•å…‹æœäº†æ³¢å½¢ç¼–ç å’Œå‚æ•°ç¼–ç çš„å¼±ç‚¹ï¼Œå¹¶ç»“åˆäº†æ³¢å½¢ç¼–ç é«˜è´¨é‡å’Œå‚æ•°ç¼–ç çš„ä½ç¼–ç ç‡ï¼Œèƒ½å¤Ÿå–å¾—æ¯”è¾ƒå¥½çš„æ•ˆæœã€‚</p>
<ul>
<li><p>WAVç¼–ç ï¼ˆæ³¢å½¢ç¼–ç ï¼‰</p>
<p>WAVæ˜¯ç¼–ç çš„ä¸€ç§å®ç°æ–¹å¼ï¼ˆå…¶å®å®ƒæœ‰éå¸¸å¤šå®ç°æ–¹å¼ï¼Œä½†éƒ½æ˜¯ä¸ä¼šè¿›è¡Œå‹ç¼©æ“ä½œï¼‰ã€‚å°±æ˜¯åœ¨æº <strong>PCM</strong> æ•°æ®æ ¼å¼çš„å‰é¢åŠ ä¸Š44ä¸ªå­—èŠ‚ã€‚åˆ†åˆ«ç”¨æ¥æè¿° <strong>PCM</strong> çš„é‡‡æ ·ç‡ã€å£°é“æ•°ã€æ•°æ®æ ¼å¼ç­‰ä¿¡æ¯ã€‚</p>
</li>
<li><p>MP3ç¼–ç </p>
<p>MP3ç¼–ç å…·æœ‰ä¸é”™çš„å‹ç¼©æ¯”ï¼Œè€Œä¸”å¬æ„Ÿä¹Ÿæ¥è¿‘äºWAVæ–‡ä»¶ï¼Œå½“ç„¶åœ¨ä¸åŒçš„ç¯å¢ƒä¸‹ï¼Œåº”è¯¥è°ƒæ•´åˆé€‚çš„å‚æ•°æ¥è¾¾åˆ°æ›´å¥½çš„æ•ˆæœã€‚</p>
</li>
<li><p>AACç¼–ç </p>
</li>
</ul>
<p>  AACæ˜¯ç›®å‰æ¯”è¾ƒçƒ­é—¨çš„æœ‰æŸå‹ç¼©ç¼–ç æŠ€æœ¯ï¼Œå¹¶ä¸”è¡ç”Ÿäº†LC-AACã€HE-AACã€HE-AAC v2 ä¸‰ç§ä¸»è¦ç¼–ç æ ¼å¼ã€‚</p>
<p>  <strong>LC-AACï¼š</strong>æ˜¯æ¯”è¾ƒä¼ ç»Ÿçš„AAC,ä¸»è¦åº”ç”¨äºä¸­é«˜ç ç‡çš„åœºæ™¯ç¼–ç (&gt;= 80Kbit/s)<br>   <strong>HE-AACï¼š</strong> ä¸»è¦åº”ç”¨äºä½ç ç‡åœºæ™¯çš„ç¼–ç (&lt;= 48Kbit/s)</p>
<ul>
<li><p>Oggç¼–ç ï¼ˆæœ‰æŸï¼‰</p>
<p>Oggç¼–ç æ˜¯ä¸€ç§éå¸¸æœ‰æ½œåŠ›çš„ç¼–ç ï¼Œåœ¨å„ç§ç ç‡ä¸‹éƒ½æœ‰æ¯”è¾ƒä¼˜ç§€çš„è¡¨ç°ã€‚å°¤å…¶åœ¨ä½ç ç‡åœºæ™¯ä¸‹ã€‚Oggé™¤äº†éŸ³è´¨å¥½ä¹‹å¤–ï¼ŒOggçš„ç¼–ç ç®—æ³•ä¹Ÿæ˜¯éå¸¸å‡ºè‰²ã€‚å¯ä»¥ç”¨æ›´å°çš„ç ç‡è¾¾åˆ°æ›´å¥½çš„éŸ³è´¨ã€‚128Kbit/sçš„Oggæ¯”192Kbit/sç”šè‡³æ›´é«˜ç ç‡çš„MP3æ›´ä¼˜è´¨.ä½†ç›®å‰ç”±è½¯ä»¶è¿˜æ˜¯ç¡¬ä»¶æ”¯æŒé—®é¢˜,éƒ½æ²¡æ³•è¾¾åˆ°ä¸MP3çš„ä½¿ç”¨å¹¿åº¦.</p>
</li>
</ul>
<h1 id="éŸ³é¢‘å‚æ•°"><a href="#éŸ³é¢‘å‚æ•°" class="headerlink" title="éŸ³é¢‘å‚æ•°"></a>éŸ³é¢‘å‚æ•°</h1><p>ä¸€æ®µæ‚ æ‰¬çš„éŸ³ä¹ç»è¿‡é‡‡æ ·ã€é‡åŒ–ã€ç¼–ç å°±ä¿å­˜æ•°å­—ä¿¡å·æ–‡ä»¶ï¼Œè€Œæˆ‘ä»¬æœ€ç»ˆçš„ç›®çš„ä¸€å®šä¸æ˜¯åªå­˜æˆæ–‡ä»¶è€Œæ˜¯é€šè¿‡æ–‡ä»¶å½¢å¼ä¼ æ’­è®©æ›´å¤šäººå¬åˆ°è¯¥éŸ³ä¹ï¼Œå› æ­¤ä¸€å®šå­˜åœ¨DAè½¬æ¢ï¼Œå³è¿˜åŸæ•°å­—ä¿¡å·ä¸ºæ¨¡æ‹Ÿä¿¡å·çš„è¿‡ç¨‹ã€‚é‚£ä¹ˆåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­æœ‰å“ªäº›å‚æ•°è¡¨å¾äº†éŸ³é¢‘é‡è¦çš„ä¿¡æ¯å‘¢ï¼Ÿ</p>
<p>ä¸ä»…é™äºwebrtcã€ffmpegã€libmadç­‰ç­‰éŸ³é¢‘ç¼–è§£ç åº“ï¼Œå¯¹äºæ‰€æœ‰ç¼–è§£ç å™¨å’Œcodecæ¥è®²ï¼ŒéŸ³é¢‘æºæ•°æ®çš„ä¸‰ä¸ªå‚æ•°è‡³å…³é‡è¦ï¼š<strong>å£°é“channelã€é‡‡æ ·ç‡sampleRateã€é‡‡æ ·ä½æ•°sampleBit</strong>ã€‚è¿™ä¸‰ä¸ªå‚æ•°ä¹‹æ‰€ä»¥é‡è¦æ˜¯å› ä¸ºæœ‰è¿™å‡ ä¸ªå‚æ•°å°±å¯ä»¥å‡†ç¡®çš„çŸ¥é“ä¸€ä¸ªè£¸çš„éŸ³é¢‘æ•°æ®ï¼ˆPCMï¼‰çš„å…¨éƒ¨ä¿¡æ¯äº†ã€‚</p>
<h2 id="å£°é“"><a href="#å£°é“" class="headerlink" title="å£°é“"></a>å£°é“</h2><p>å£°é“æ˜¯æŒ‡éŸ³é¢‘æ–‡ä»¶åœ¨å½•åˆ¶æ—¶éŸ³æºçš„æ•°é‡ä½ç½®å’Œæ’­æ”¾æ—¶ç›¸åº”çš„æ‰¬å£°å™¨çš„æ•°é‡ï¼ˆç™¾åº¦ç™¾ç§‘ï¼‰ã€‚æ‰€ä»¥å¯æƒ³è€ŒçŸ¥ï¼Œå…¶ä»–å‚æ•°ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œå£°é“æ•°è¶Šå¤šå®šä½è¶Šç²¾å‡†ï¼ŒåŒæ ·æ‰€éœ€æ‰¬å£°å™¨å’ŒåŠŸæ”¾ç»„ä»¶è¶Šå¤šã€‚</p>
<ul>
<li>å•å£°é“ï¼ˆmonoï¼‰</li>
<li>åŒå£°é“ï¼ˆstereo ç«‹ä½“å£°ï¼‰ï¼šå·¦å£°é“ + å³å£°é“ï¼Œä½éŸ³ä¸åˆ†ç¦»ï¼Œåº”ç”¨äºéŸ³ä¹æ’­æ”¾è¾ƒå¤š</li>
<li>2.1å£°é“ ï¼šå·¦å£°é“ + å³å£°é“ï¼Œ ä½éŸ³åˆ†ç¦»</li>
<li>5.1å£°é“ ï¼šå·¦å£°é“ + å³å£°é“ + ä½éŸ³å£°é“ + ä¸­å¤®å£°é“ + å·¦ç¯ç»• + å³ç¯ç»•ï¼Œåº”ç”¨äºç±»ä¼ ç»Ÿå½±é™¢å’Œå®¶åº­å½±é™¢ä¸­</li>
<li>7.1å£°é“ ï¼šå·¦å£°é“ + å³å£°é“ + ä½éŸ³å£°é“ + ä¸­å¤®å£°é“ + å·¦ç¯ç»• + å³ç¯ç»• + å·¦åç¯ + å³åç¯ï¼Œå¸¸è§çš„åŒ…æ‹¬ï¼šDolby Surround 7.1æœæ¯”7.1ç¯ç»•å£°</li>
</ul>
<h2 id="é‡‡æ ·ç‡"><a href="#é‡‡æ ·ç‡" class="headerlink" title="é‡‡æ ·ç‡"></a>é‡‡æ ·ç‡</h2><p>é‡‡æ ·ç‡å¯ä»¥ç†è§£ä¸ºé‡‡é›†æ ·æœ¬çš„é€Ÿç‡ï¼ˆæ•…ä¹Ÿå¯ä»¥ç§°ä¸ºé‡‡æ ·é€Ÿåº¦æˆ–è€…é‡‡æ ·é¢‘ç‡ï¼‰ï¼Œå®ƒå®šä¹‰äº†æ¯ç§’ä»è¿ç»­ä¿¡å·ä¸­æå–å¹¶ç»„æˆç¦»æ•£ä¿¡å·çš„é‡‡æ ·ä¸ªæ•°ï¼Œå®ƒç”¨èµ«å…¹ï¼ˆHzï¼‰æ¥è¡¨ç¤ºã€‚</p>
<p>ä¾‹å¦‚ï¼šé‡‡æ ·ç‡ä¸º44100ï¼Œæ„å‘³ç€æ¯ç§’é’Ÿå¯¹è¿ç»­çš„å£°éŸ³ä¿¡å·é‡‡é›†44100æ¬¡ï¼ŒåŒæ ·å¯¹åº”å¾—åˆ°çš„æ•°å­—ä¿¡å·æ¯ç§’çš„æ ·æœ¬æ•°é‡ï¼ˆå…·ä½“å¯ä»¥å‚è€ƒé‡‡æ ·è¿‡ç¨‹ï¼‰</p>
<h2 id="é‡‡æ ·ä½æ•°"><a href="#é‡‡æ ·ä½æ•°" class="headerlink" title="é‡‡æ ·ä½æ•°"></a>é‡‡æ ·ä½æ•°</h2><p>é‡‡æ ·ä½æ•°å°±æ˜¯æŒ‡æŸä¸€ç¬æ—¶æ—¶åˆ»ï¼Œé‡åŒ–å£°éŸ³å¤§å°ï¼ˆç²¾ç»†ç¨‹åº¦ï¼‰çš„è®¡é‡å•ä½</p>
<ul>
<li>8bit ( 1Byte ) å¯¹åº”0~255ï¼Œå°†æŒ¯å¹…åˆ’åˆ†ä¸º256ä¸ªç­‰çº§</li>
<li>16bit (2Byte) å¯¹åº”0~65535ï¼Œå°†æŒ¯å¹…åˆ’åˆ†ä¸º65536ä¸ªç­‰çº§</li>
</ul>
<h2 id="æ ·æœ¬æ ¼å¼"><a href="#æ ·æœ¬æ ¼å¼" class="headerlink" title="æ ·æœ¬æ ¼å¼"></a>æ ·æœ¬æ ¼å¼</h2><h3 id="æ ·æœ¬ç»„åˆå½¢å¼"><a href="#æ ·æœ¬ç»„åˆå½¢å¼" class="headerlink" title="æ ·æœ¬ç»„åˆå½¢å¼"></a>æ ·æœ¬ç»„åˆå½¢å¼</h3><ul>
<li>äº¤é”™æ¨¡å¼ï¼šæ¯ä¸ªå£°é“çš„æ ·æœ¬æ•°æ®äº¤é”™å­˜å‚¨æ’å¸ƒ</li>
<li>å¹³é¢æ¨¡å¼ï¼šæ¯ä¸ªå£°é“çš„æ ·æœ¬æ•°æ®åˆ†å¼€å­˜å‚¨</li>
</ul>
<p>ä¸‹é¢ä»¥stereoæ¨¡å¼è¿›è¡Œå›¾ç¤ºè§£é‡Šï¼ˆCä»£è¡¨Channelï¼‰ï¼š</p>
<p>â€‹    <img src="/images/linux/Audio/Audio-meet-3.png" alt="sample"></p>
<h3 id="FFmpeg-æ ·æœ¬ç»„ç»‡å½¢å¼ä»‹ç»"><a href="#FFmpeg-æ ·æœ¬ç»„ç»‡å½¢å¼ä»‹ç»" class="headerlink" title="FFmpeg æ ·æœ¬ç»„ç»‡å½¢å¼ä»‹ç»"></a>FFmpeg æ ·æœ¬ç»„ç»‡å½¢å¼ä»‹ç»</h3><ul>
<li>Packedæ ¼å¼ï¼Œframe.data[0]åŒ…å«æ‰€æœ‰çš„éŸ³é¢‘æ•°æ®ã€‚</li>
<li>Planaræ ¼å¼ï¼Œframe.data[i]è¡¨ç¤ºç¬¬iä¸ªå£°é“çš„æ•°æ®ï¼ˆå‡è®¾å£°é“0æ˜¯ç¬¬ä¸€ä¸ªï¼‰</li>
</ul>
<h3 id="FFmpeg-ä¸»è¦æ ·æœ¬æ ¼å¼"><a href="#FFmpeg-ä¸»è¦æ ·æœ¬æ ¼å¼" class="headerlink" title="FFmpeg ä¸»è¦æ ·æœ¬æ ¼å¼"></a>FFmpeg ä¸»è¦æ ·æœ¬æ ¼å¼</h3><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">AVSampleFormat</span> {</span></span><br><span class="line">    AV_SAMPLE_FMT_NONE = <span class="number">-1</span>,</span><br><span class="line">    AV_SAMPLE_FMT_U8,          <span class="comment">///&lt; unsigned 8 bits</span></span><br><span class="line">    AV_SAMPLE_FMT_S16,         <span class="comment">///&lt; signed 16 bits</span></span><br><span class="line">    AV_SAMPLE_FMT_S32,         <span class="comment">///&lt; signed 32 bits</span></span><br><span class="line">    AV_SAMPLE_FMT_FLT,         <span class="comment">///&lt; float</span></span><br><span class="line">    AV_SAMPLE_FMT_DBL,         <span class="comment">///&lt; double</span></span><br><span class="line"> </span><br><span class="line">    AV_SAMPLE_FMT_U8P,         <span class="comment">///&lt; unsigned 8 bits, planar</span></span><br><span class="line">    AV_SAMPLE_FMT_S16P,        <span class="comment">///&lt; signed 16 bits, planar</span></span><br><span class="line">    AV_SAMPLE_FMT_S32P,        <span class="comment">///&lt; signed 32 bits, planar</span></span><br><span class="line">    AV_SAMPLE_FMT_FLTP,        <span class="comment">///&lt; float, planar</span></span><br><span class="line">    AV_SAMPLE_FMT_DBLP,        <span class="comment">///&lt; double, planar</span></span><br><span class="line">    AV_SAMPLE_FMT_S64,         <span class="comment">///&lt; signed 64 bits</span></span><br><span class="line">    AV_SAMPLE_FMT_S64P,        <span class="comment">///&lt; signed 64 bits, planar</span></span><br><span class="line"> </span><br><span class="line">    AV_SAMPLE_FMT_NB           <span class="comment">///&lt; Number of sample formats. DO NOT USE if linking dynamically</span></span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>

<p>è¯´æ˜ï¼šä»¥Pä¸ºç»“å°¾çš„æ˜¯planarç»“æ„ï¼›Planaræ¨¡å¼æ˜¯FFmpegå†…éƒ¨å­˜å‚¨æ¨¡å¼ï¼Œæˆ‘ä»¬å®é™…ä½¿ç”¨çš„éŸ³é¢‘æ–‡ä»¶éƒ½æ˜¯Packedæ¨¡å¼çš„ã€‚</p>
<h2 id="æ¯”ç‰¹ç‡"><a href="#æ¯”ç‰¹ç‡" class="headerlink" title="æ¯”ç‰¹ç‡"></a>æ¯”ç‰¹ç‡</h2><p>æ¯”ç‰¹ç‡æŒ‡çš„æ˜¯å•ä½æ—¶é—´æ’­æ”¾è¿ç»­çš„åª’ä½“å¦‚å‹ç¼©åçš„éŸ³é¢‘æˆ–è§†é¢‘çš„æ¯”ç‰¹æ•°é‡ï¼Œåœ¨è¿™ä¸ªæ„ä¹‰ä¸Šè®²ï¼Œå®ƒç›¸å½“äºæœ¯è¯­æ•°å­—å¸¦å®½æ¶ˆè€—é‡ï¼Œæˆ–ååé‡ã€‚å•ä½bps / Kbpsï¼ˆbit per secondï¼‰è¿™é‡Œæ˜¯bitè€Œä¸æ˜¯Byteï¼ˆ1Byte = 8bitï¼‰</p>
<p>è™½ç„¶ç»å¸¸ä½œä¸ºâ€œé€Ÿåº¦â€çš„å‚è€ƒï¼Œæ¯”ç‰¹ç‡å¹¶ä¸æµ‹é‡â€œâ€˜è·ç¦»â€™/æ—¶é—´â€ï¼Œè€Œæ˜¯è¢«ä¼ è¾“æˆ–è€…è¢«å¤„ç†çš„â€œâ€˜äºŒè¿›åˆ¶ç æ•°é‡â€™/æ—¶é—´â€ï¼Œæ‰€ä»¥åº”è¯¥æŠŠå®ƒå’Œä¼ æ’­é€Ÿåº¦åŒºåˆ†å¼€æ¥ï¼Œä¼ æ’­é€Ÿåº¦ä¾èµ–äºä¼ è¾“çš„ä»‹è´¨å¹¶ä¸”æœ‰é€šå¸¸çš„ç‰©ç†æ„ä¹‰ã€‚ï¼ˆæ¥è‡ªç»´åŸºç™¾ç§‘ï¼‰</p>
<h2 id="å‚æ•°å…³ç³»"><a href="#å‚æ•°å…³ç³»" class="headerlink" title="å‚æ•°å…³ç³»"></a>å‚æ•°å…³ç³»</h2><p>å¯¹äºPCMè£¸æ•°æ®ï¼š æ–‡ä»¶æ—¶é•¿ â‰ˆï¼ˆæ–‡ä»¶æ€»å¤§å° - å¤´ä¿¡æ¯ï¼‰/ (é‡‡æ ·ç‡ * é‡‡æ ·ä½æ•° * é€šé“æ•° / 8) [ä¹Ÿå°±æ˜¯æ¯”ç‰¹ç‡]</p>
]]></content>
      <categories>
        <category>Linux</category>
        <category>Audio</category>
      </categories>
  </entry>
  <entry>
    <title>Opus Oggè¯¦è§£</title>
    <url>/2023/01/04/Audio/Audio-opus/</url>
    <content><![CDATA[<h1 id="opusæ˜¯ä»€ä¹ˆ"><a href="#opusæ˜¯ä»€ä¹ˆ" class="headerlink" title="opusæ˜¯ä»€ä¹ˆ"></a>opusæ˜¯ä»€ä¹ˆ</h1><blockquote>
<p>ä»¥ä¸‹å†…å®¹å–è‡ªopuså®˜ç½‘ï¼š<a href="https://www.opus-codec.org/">https://www.opus-codec.org</a></p>
</blockquote>
<h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>Opus æ˜¯ä¸€ç§å®Œå…¨å¼€æ”¾ã€å…ç‰ˆç¨ã€ç”¨é€”å¹¿æ³›çš„éŸ³é¢‘ç¼–è§£ç å™¨ã€‚ Opus åœ¨ Internet ä¸Šçš„äº¤äº’å¼è¯­éŸ³å’ŒéŸ³ä¹ä¼ è¾“æ–¹é¢æ— ä¸ä¼¦æ¯”ï¼Œä½†ä¹Ÿé€‚ç”¨äºå­˜å‚¨å’Œæµåª’ä½“åº”ç”¨ã€‚å®ƒè¢«äº’è”ç½‘å·¥ç¨‹ä»»åŠ¡ç»„ (IETF) æ ‡å‡†åŒ–ä¸º RFC 6716ï¼Œå®ƒç»“åˆäº† Skype çš„ SILK ç¼–è§£ç å™¨å’Œ Xiph.Org çš„ CELT ç¼–è§£ç å™¨çš„æŠ€æœ¯ã€‚</p>
<h2 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h2><p>Opus å¯ä»¥å¤„ç†èŒƒå›´å¹¿æ³›çš„éŸ³é¢‘åº”ç”¨ï¼ŒåŒ…æ‹¬ IP è¯­éŸ³ã€è§†é¢‘ä¼šè®®ã€æ¸¸æˆå†…èŠå¤©ï¼Œç”šè‡³è¿œç¨‹ç°åœºéŸ³ä¹è¡¨æ¼”ã€‚å®ƒå¯ä»¥ä»ä½æ¯”ç‰¹ç‡çª„å¸¦è¯­éŸ³æ‰©å±•åˆ°éå¸¸é«˜è´¨é‡çš„ç«‹ä½“å£°éŸ³ä¹ã€‚æ”¯æŒçš„åŠŸèƒ½æœ‰ï¼š</p>
<ul>
<li>æ¯”ç‰¹ç‡ä» 6 kb/s åˆ° 510 kb/s</li>
<li>é‡‡æ ·ç‡ä» 8 kHzï¼ˆçª„å¸¦ï¼‰åˆ° 48 kHzï¼ˆå…¨å¸¦ï¼‰</li>
<li>å¸§å¤§å°ä» 2.5 ms åˆ° 60 ms</li>
<li>æ”¯æŒæ’å®šæ¯”ç‰¹ç‡ (CBR) å’Œå¯å˜æ¯”ç‰¹ç‡ (VBR)</li>
<li>ä»çª„å¸¦åˆ°å…¨å¸¦çš„éŸ³é¢‘å¸¦å®½</li>
<li>æ”¯æŒè¯­éŸ³å’ŒéŸ³ä¹</li>
<li>æ”¯æŒå•å£°é“å’Œç«‹ä½“å£°</li>
<li>æ”¯æŒå¤šè¾¾ 255 ä¸ªé€šé“ï¼ˆå¤šæµå¸§ï¼‰</li>
<li>åŠ¨æ€å¯è°ƒæ¯”ç‰¹ç‡ã€éŸ³é¢‘å¸¦å®½å’Œå¸§å¤§å°</li>
<li>è‰¯å¥½çš„ä¸¢åŒ…é²æ£’æ€§å’Œä¸¢åŒ…éšè— (PLC)</li>
<li>æµ®ç‚¹å’Œå®šç‚¹å®ç°</li>
</ul>
<h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul>
<li><p>éŸ³é¢‘å¸¦å®½ã€‚Opusç¼–ç å™¨è¦†ç›–äº†ä½é¢‘æ®µåˆ°é«˜é¢‘æ®µçš„å…¨å¸¦éŸ³é¢‘</p>
</li>
<li><p>ä½å»¶è¿Ÿã€‚å»¶è¿Ÿä¾èµ–äºå¸§è§„æ ¼ï¼ŒOpusæœ€ä½å¸§è§„æ ¼2.5msï¼Œéå¸¸é€‚åˆå®æ—¶éŸ³è§†é¢‘åœºæ™¯</p>
</li>
</ul>
<h1 id="opusåº“"><a href="#opusåº“" class="headerlink" title="opusåº“"></a>opusåº“</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><blockquote>
<p>ç¼–è§£ç å™¨libopus: <a href="https://www.opus-codec.org/docs/opus_api-1.2/index.html">https://www.opus-codec.org/docs/opus_api-1.2/index.html</a></p>
<p>å°è£…å™¨opusfileï¼š<a href="https://www.opus-codec.org/docs/opusfile_api-0.7/index.html">https://www.opus-codec.org/docs/opusfile_api-0.7/index.html</a></p>
</blockquote>
<p>opusåº“åŒ…æ‹¬ä¸‰éƒ¨åˆ†ï¼šlibopusã€opus-toolsã€opusfile</p>
<ul>
<li>libopusï¼šopusç¼–è§£ç çš„æºç å’Œå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆæ³¨æ„ï¼šè¿™é‡Œç¼–ç å‡ºæ¥çš„opusæ–‡ä»¶æ˜¯æ’­æ”¾ä¸äº†çš„ï¼Œå¹¶ä¸”è§£ç ä¹Ÿå¿…é¡»ç”¨é‚£ç§æ’­æ”¾ä¸äº†çš„opusæ–‡ä»¶,åé¢è§£é‡Šä¸ºä»€ä¹ˆï¼‰</li>
<li>opus-toolsï¼šå·¥å…·åŒ…ï¼Œå…¶ä¸­åŒ…å«äº†liboggï¼ˆ.wav2.opus  /  .opus2.wavï¼‰</li>
<li>opusfileï¼šå°†å¯æ’­æ”¾çš„opusæ–‡ä»¶è§£ç æˆwavçš„å·¥å…·ï¼Œå¯åˆ†æå‡ºè¿™ä¸ªå¯æ’­æ”¾çš„opusæ–‡ä»¶çš„ä¿¡æ¯ï¼Œå…¶ä¸­åŒ…å«äº†libogg</li>
</ul>
<h2 id="å¯æ’­æ”¾opusä¸ä¸å¯æ’­æ”¾opusæ–‡ä»¶"><a href="#å¯æ’­æ”¾opusä¸ä¸å¯æ’­æ”¾opusæ–‡ä»¶" class="headerlink" title="å¯æ’­æ”¾opusä¸ä¸å¯æ’­æ”¾opusæ–‡ä»¶"></a>å¯æ’­æ”¾opusä¸ä¸å¯æ’­æ”¾opusæ–‡ä»¶</h2><p>oggæ–‡ä»¶é‡Œé¢åŒ…å«äº†opusç¼–ç çš„éŸ³é¢‘ï¼Œç›¸å½“äºMP4æ–‡ä»¶ä¸­åŒ…å«äº†aac</p>
<ul>
<li>ä¸å¯æ’­æ”¾opusï¼šåªæœ‰ç¼–ç å±‚opusæ•°æ®çš„éŸ³é¢‘ï¼ˆæ²¡æœ‰oggçš„å°è£…åªç»è¿‡libopusç¼–ç ï¼‰ï¼Œåç¼€åæ˜¯.opus</li>
<li>å¯æ’­æ”¾çš„opusï¼šopusç¼–ç çš„éŸ³é¢‘å¤–éƒ¨å¥—ç”¨äº†ä¸€å±‚oggçš„å°è£…ï¼ˆç»è¿‡oggçš„å°è£…ï¼Œopus-toolsç¼–ç çš„æ–‡ä»¶ï¼‰ï¼Œåç¼€åå¯ä»¥æ˜¯.opusä¹Ÿå¯ä»¥æ˜¯.ogg</li>
</ul>
<h1 id="opusç»“æ„"><a href="#opusç»“æ„" class="headerlink" title="opusç»“æ„"></a>opusç»“æ„</h1><p>æ¯ä¸ª Opus åŒ…ä»¥ä¸€ä¸ª TOC ï¼ˆTable of Contentsï¼‰å­—èŠ‚å¼€å¤´</p>
<table>
<thead>
<tr>
<th>é…ç½®æ•°ï¼ˆconfigï¼‰</th>
<th>ç¼–ç æ¨¡å¼</th>
<th>éŸ³é¢‘å¸¦å®½</th>
<th>å¸§é•¿åº¦</th>
</tr>
</thead>
<tbody><tr>
<td>0â€¦3</td>
<td>SILK-only</td>
<td>NB</td>
<td>10, 20, 40, 60 ms</td>
</tr>
<tr>
<td>4â€¦7</td>
<td>SILK-only</td>
<td>MB</td>
<td>10, 20, 40, 60 ms</td>
</tr>
<tr>
<td>8â€¦11</td>
<td>SILK-only</td>
<td>WB</td>
<td>10, 20, 40, 60 ms</td>
</tr>
<tr>
<td>12â€¦13</td>
<td>Hybrid</td>
<td>SWB</td>
<td>10, 20 ms</td>
</tr>
<tr>
<td>14â€¦15</td>
<td>Hybrid</td>
<td>FB</td>
<td>10, 20 ms</td>
</tr>
<tr>
<td>16â€¦19</td>
<td>CELT-only</td>
<td>NB</td>
<td>2.5, 5, 10, 20 ms</td>
</tr>
<tr>
<td>20â€¦23</td>
<td>CELT-only</td>
<td>WB</td>
<td>2.5, 5, 10, 20 ms</td>
</tr>
<tr>
<td>24â€¦27</td>
<td>CELT-only</td>
<td>SWB</td>
<td>2.5, 5, 10, 20 ms</td>
</tr>
<tr>
<td>28â€¦31</td>
<td>CELT-only</td>
<td>FB</td>
<td>2.5, 5, 10, 20 ms</td>
</tr>
</tbody></table>
<p>ç«‹ä½“å£°æ ‡å¿—ä½ï¼ˆsï¼‰å–å€¼ 0 è¡¨ç¤ºå•å£°é“ï¼Œ1 è¡¨ç¤ºå¤šå£°é“ç«‹ä½“å£°ã€‚</p>
<p>TOC ä¸­æœ€åä¸¤ä½ï¼ˆcï¼‰è¡¨ç¤ºï¼š</p>
<ul>
<li>0ï¼šä¸€ä¸ªåŒ…ä¸­åªæœ‰ä¸€å¸§éŸ³é¢‘ã€‚</li>
<li>1ï¼šä¸€ä¸ªåŒ…ä¸­æœ‰ä¸¤å¸§éŸ³é¢‘ï¼Œå¹¶ä¸”å¤§å°ç›¸åŒã€‚</li>
<li>2ï¼šä¸€ä¸ªåŒ…ä¸­æœ‰ä¸¤å¸§éŸ³é¢‘ï¼Œä½†æ˜¯å¤§å°ä¸åŒã€‚</li>
</ul>
<h1 id="opusfile-API"><a href="#opusfile-API" class="headerlink" title="opusfile API"></a>opusfile API</h1><blockquote>
<p>opusfileé«˜çº§APIå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://opus-codec.org/docs/opusfile_api-0.12/">https://opus-codec.org/docs/opusfile_api-0.12/</a></p>
<p>å‚è€ƒæ–‡æ¡£ï¼š</p>
<p>â€‹	<a href="https://juejin.cn/post/6844903998831460360">https://juejin.cn/post/6844903998831460360</a></p>
<p>â€‹	<a href="https://chenliang.org/2020/04/17/ogg-encapsulation-for-opus/">https://chenliang.org/2020/04/17/ogg-encapsulation-for-opus/</a></p>
</blockquote>
<ol>
<li><p><strong>op_open_file() / op_free()</strong></p>
<p>æ‰“å¼€/å…³é—­ä¸€ä¸ªè§£ç å™¨</p>
</li>
<li><p><strong>op_head() / op_tags()</strong></p>
</li>
</ol>
<ul>
<li><p>op_headå‡½æ•°å¯ç”¨äºè·å–channelsã€samplerateç­‰å‚æ•°</p>
</li>
<li><p>op_tagså‡½æ•°å¯è·å¾—ç”¨æˆ·è‡ªå®šä¹‰å‚æ•°ï¼Œä¾‹å¦‚ï¼šæ ‡é¢˜ã€æ­Œæ‰‹ã€ç¼–ç æ–¹å¼æ ‡å‡†ç­‰ç­‰ï¼Œå…¶ä¸­tags-&gt;user_comments[i]å¯è·å–ç”¨æˆ·è‡ªå®šä¹‰çš„ä¿¡æ¯</p>
</li>
</ul>
<ol start="3">
<li><strong>op_pcm_total() / op_pcm_tell() / op_pcm_seek()</strong></li>
</ol>
<ul>
<li>op_pcm_total å¯ä»¥è¿”å›è¯¥opusæ–‡ä»¶è½¬æ¢æˆpcmæ–‡ä»¶åçš„æ€»çš„pcmé•¿åº¦</li>
<li>op_pcm_tell å¯ä»¥æ”¾å›ç›®å‰æ–‡ä»¶å·²ç»æ’­æ”¾çš„pcmçš„é•¿åº¦</li>
<li>op_pcm_seek å¯ä»¥é€šè¿‡å‚æ•°æŒ‡å®šè®©éŸ³é¢‘è¿›è¡Œè·³è½¬æ’­æ”¾</li>
</ul>
<ol start="4">
<li><strong>op_pcm_read()</strong></li>
</ol>
<p>   ä»op_open_fileæ‰“å¼€çš„æ–‡ä»¶æµä¸­è¯»å–pcmæ•°æ®è¿›è¡Œæ’­æ”¾ã€‚æ³¨æ„è§£ç çš„æ•°é‡å¹¶ä¸ç­‰äºä¼ å…¥bufferçš„å¤§å°ï¼Œéœ€è¦ä½¿ç”¨åˆ°è¯¥å‡½æ•°çš„è¿”å›å€¼</p>
<h1 id="Ogg"><a href="#Ogg" class="headerlink" title="Ogg"></a>Ogg</h1><blockquote>
<p> å‚è€ƒ : <a href="https://juejin.cn/post/6844904016254599175">https://juejin.cn/post/6844904016254599175</a></p>
</blockquote>
<p>å…¨ç§°ï¼šOGGVobis(oggVorbis) ä¸€ä¸ªè‡ªç”±ä¸”å¼€æ”¾æ ‡å‡†çš„å®¹å™¨æ ¼å¼ï¼Œâ€œ.oggâ€ç»“å°¾å‘½å</p>
<p>OGGæ˜¯ä»¥é¡µï¼ˆpageï¼‰ä¸ºå•ä½å°†é€»è¾‘æµç»„ç»‡é“¾æ¥èµ·æ¥ï¼Œæ¯ä¸ªé¡µéƒ½æœ‰pageheaderå’Œpagedataã€‚</p>
<ol>
<li>capture_patterné¡µæ ‡è¯†ï¼šASCIIå­—ç¬¦ï¼Œ0x4f â€˜Oâ€™ 0x67 â€˜gâ€™ 0x67 â€˜gâ€™ 0x53 â€˜Sâ€™ï¼Œ4ä¸ªå­—èŠ‚å¤§å°ï¼Œå®ƒæ ‡è¯†ç€ä¸€ä¸ªé¡µçš„å¼€å§‹ã€‚</li>
<li>stream_structure_versionç‰ˆæœ¬idï¼šä¸€èˆ¬å½“å‰ç‰ˆæœ¬é»˜è®¤ä¸º0ï¼Œ1ä¸ªå­—èŠ‚ã€‚</li>
<li>header_type_flagç±»å‹æ ‡è¯†ï¼šæ ‡è¯†å½“å‰çš„é¡µçš„ç±»å‹ï¼Œ1ä¸ªå­—èŠ‚ï¼Œ - 0x01ï¼šæœ¬é¡µåª’ä½“ç¼–ç æ•°æ®ä¸å‰ä¸€é¡µå±äºåŒä¸€ä¸ªé€»è¾‘æµçš„åŒä¸€ä¸ªpacketï¼Œè‹¥æ­¤ä½æ²¡æœ‰è®¾ï¼Œè¡¨ç¤ºæœ¬é¡µæ˜¯ä»¥ä¸€ä¸ªæ–°çš„packetå¼€å§‹çš„ï¼› - 0x02ï¼šè¡¨ç¤ºè¯¥é¡µä¸ºé€»è¾‘æµçš„ç¬¬ä¸€é¡µï¼Œbosæ ‡è¯†ï¼Œå¦‚æœæ­¤ä½æœªè®¾ç½®ï¼Œé‚£è¡¨ç¤ºä¸æ˜¯ç¬¬ä¸€é¡µï¼› - 0x04ï¼šè¡¨ç¤ºè¯¥é¡µä½é€»è¾‘æµçš„æœ€åä¸€é¡µï¼Œeosæ ‡è¯†ï¼Œå¦‚æœæ­¤ä½æœªè®¾ç½®ï¼Œé‚£è¡¨ç¤ºæœ¬é¡µä¸æ˜¯æœ€åä¸€é¡µã€‚</li>
<li>granule_positionï¼šåª’ä½“ç¼–ç ç›¸å…³çš„å‚æ•°ä¿¡æ¯ï¼Œ8ä¸ªå­—èŠ‚ï¼Œå¯¹äºéŸ³é¢‘æµæ¥è¯´ï¼Œå®ƒå­˜å‚¨ç€åˆ°æœ¬é¡µä¸ºæ­¢é€»è¾‘æµåœ¨PCMè¾“å‡ºä¸­é‡‡æ ·ç çš„æ•°ç›®ï¼Œå¯ä»¥ç”±å®ƒæ¥ç®—å¾—æ—¶é—´æˆ³ã€‚å¯¹äºè§†é¢‘æµæ¥è¯´ï¼Œå®ƒå­˜å‚¨ç€åˆ°æœ¬é¡µä¸ºæ­¢è§†é¢‘å¸§ç¼–ç çš„æ•°ç›®ã€‚è‹¥æ­¤å€¼ä¸º-1ï¼Œé‚£è¡¨ç¤ºæˆªæ­¢åˆ°æœ¬é¡µï¼Œé€»è¾‘æµçš„packetæœªç»“æŸã€‚(å°ç«¯)</li>
<li>serial_numberï¼šå½“å‰é¡µä¸­çš„æµçš„idï¼Œ4ä¸ªå­—èŠ‚ï¼Œå®ƒæ˜¯åŒºåˆ†æœ¬é¡µæ‰€å±é€»è¾‘æµä¸å…¶ä»–é€»è¾‘æµçš„åºå·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªå€¼æ¥åˆ’åˆ†æµã€‚(å°ç«¯)</li>
<li>page_seguence_numberï¼šæœ¬é¡µåœ¨é€»è¾‘æµçš„åºå·ï¼Œ4ä¸ªå­—èŠ‚ã€‚</li>
<li>CRC_cbecksumï¼šå¾ªç¯å†—ä½™æ•ˆéªŒç æ•ˆéªŒï¼Œ4ä¸ªå­—èŠ‚ï¼Œç”¨æ¥æ•ˆéªŒæ¯é¡µçš„æœ‰æ•ˆæ€§ã€‚</li>
<li>number_page_segmentsï¼šç»™å®šæœ¬é¡µåœ¨segment_tableåŸŸä¸­å‡ºç°çš„segementä¸ªæ•°ï¼Œ1ä¸ªå­—èŠ‚ã€‚</li>
<li>segment_tableï¼šä»å­—é¢çœ‹å®ƒå°±æ˜¯ä¸€ä¸ªè¡¨ï¼Œè¡¨ç¤ºç€æ¯ä¸ªsegmentçš„é•¿åº¦ï¼Œå–å€¼èŒƒå›´æ˜¯0~255ã€‚ç”±segmentï¼ˆ1ä¸ªsegmentå°±æ˜¯1ä¸ªå­—èŠ‚ï¼‰å¯ä»¥å¾—åˆ°packetçš„å€¼ï¼Œæ¯ä¸ªpacketçš„å¤§å°æ˜¯ä»¥æœ€åä¸€ä¸ªä¸ç­‰äº255çš„segmentç»“æŸçš„ï¼Œä»é¡µå¤´ä¸­çš„segment_tableå¯ä»¥å¾—åˆ°æ¯ä¸ªpacketé•¿åº¦ï¼Œä¸¾ä¾‹ï¼šå¦‚æœä¸€ç»„segmentä¾æ¬¡é¡ºåºä¸ºFF 45 FF FF FF 40FF 05FF FF FF 66ï¼ˆå…±4ä¸ªpacketï¼Œå«12ä¸ªsegmentï¼Œæ¯ä¸ªpacketçš„é•¿åº¦æ˜¯ï¼šFF 45ã€324ã€‘ï¼›FF FF FF 40ã€829ã€‘ï¼›FF 05ã€260ã€‘ï¼›FF FF FF 66ã€847ã€‘ï¼‰ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªpacketçš„é•¿åº¦ä¸º255+69 = 324,ç¬¬äºŒä¸ªpacketå¤§å°829ï¼ŒåŒç†ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>Linux</category>
        <category>Audio</category>
      </categories>
      <tags>
        <tag>opus</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Šæ›¾å›½è—©ä¼ ã€‹</title>
    <url>/2022/12/11/Reading/%E6%9B%BE%E5%9B%BD%E8%97%A9%E4%BC%A0/</url>
    <content><![CDATA[<p><img src="/images/reading/zengGuoFan.jpg" alt="img"></p>
<p>è¿‘å‡ å¹´ï¼Œæ›¾å›½è—©å€å—æˆåŠŸå­¦çš„æ¨å´‡ï¼Œå…³äºä»–çš„ä¹¦ä¹Ÿæ˜¯é“ºå¤©ç›–åœ°ã€‚å¶ç„¶é—´çœ‹åˆ°è€ä¿ï¼ˆä¿æ•æ´ªï¼‰åœ¨æ¨èè¿™æœ¬ä¹¦ï¼Œå¸¦ç€æµ“åšçš„å…´è¶£å¼€å§‹å¯¹è¿™æœ¬ä¹¦çš„æ¢ç´¢ã€‚ã€Šæ›¾å›½è—©ä¼ ã€‹æ˜¯ä¸­å›½çŸ¥åå†å²å­¦å®¶å¼ å®æ°å…ˆç”Ÿçš„ä½œå“ï¼Œé™¤äº†è¿™æœ¬ã€Šæ›¾å›½è—©ä¼ ã€‹ä»–è¿˜è‘—æœ‰ã€Šæ›¾å›½è—©çš„æ­£é¢ä¸ä¾§é¢ã€‹ã€Šé¥¥é¥¿çš„ç››ä¸–ã€‹ã€Šå¤§æ˜ç‹æœçš„ä¸ƒå¼ é¢å­”ã€‹ç­‰ç­‰ã€‚æ•´æœ¬ä¹¦é€šè¯»ä¸‹æ¥ï¼Œä½œè€…æŒ‰ç…§æ—¶é—´é¡ºåºï¼Œä»¥æ›¾å›½è—©æ—¥è®°åŠå„ç§å†å²å‚è€ƒæ–‡çŒ®ä¸ºå²å®åŸºç¡€è¿›è¡Œäº†æ·±åº¦è§£è¯»ï¼Œå°†æ›¾å›½è—©å›½ä¹‹é‡è‡£çš„å½¢è±¡ç«‹ä½“çš„å±•ç°åœ¨äº†æˆ‘ä»¬çš„çœ¼å‰ã€‚</p>
<p>æœ¬ç¯‡ä¹Ÿæ— æ‰€è°“æ˜¯è¯»ä¹¦ç¬”è®°ã€è¯»åæ„Ÿäº¦æˆ–è€…æ˜¯ä¹¦è¯„äº†ï¼Œä¾¿æƒ³åˆ°å“ªé‡Œå†™åˆ°å“ªé‡Œå§ã€‚</p>
<h1 id="æ•…äº‹è‡ªè¿°"><a href="#æ•…äº‹è‡ªè¿°" class="headerlink" title="æ•…äº‹è‡ªè¿°"></a>æ•…äº‹è‡ªè¿°</h1><p>æ›¾å›½è—©å†ä»»æ™šæ¸…å››æœï¼Œç”Ÿäºå˜‰åº†ã€æ–‡äºé“å…‰ã€æ­¦äºå’¸ä¸°ã€å’äºåŒæ²»ï¼Œæˆ‘è¿™é‡Œçš„æ–‡ã€æ­¦åˆ†åˆ«æŒ‡å…¶äº¬å®˜æ—¶ä»£å’Œé¢†å¯¼æ¹˜å†›é˜¶æ®µã€‚</p>
<p>è€æ›¾å®¶æœ¬æ˜¯ä¸€ä¸ªæ®·å®çš„å°åœ°ä¸»å®¶åº­ï¼Œå¥ˆä½•ç¥–åŸä¸€ç›´æ²¡å†’é’çƒŸï¼Œç¥–è¾ˆä¸Šæ²¡æœ‰ä¸€ä¸ªè¯»ä¹¦äººã€‚åœ¨çˆ·çˆ·æ›¾ç‰å±çš„å½±å“ä¸‹ï¼Œå°å°çš„æ›¾å­åŸï¼ˆè¯¥æ—¶æœŸæ›¾å›½è—©æœªæ”¹åï¼‰å¼€å¯äº†ä»–çš„è¯»ä¹¦ç”Ÿæ¶¯ã€‚å±¡æˆ˜å±¡è´¥ã€å±¡è´¥å±¡æˆ˜ï¼Œè½æ¦œå…­æ¬¡ä¹‹åï¼Œé™¢è¯•ä¸­ç§€æ‰ã€ä¹¡è¯•ä¸­ä¸¾äººã€ä¼šè¯•ä¸­è¿›å£«ï¼Œä¹Ÿå°±æ˜¯åœ¨æ­¤æ­£å¼æ›´åä¸ºæ›¾å›½è—©ï¼Œå¯„ä»¥â€œå›½ä¹‹è—©ç¯±â€œä¹‹æ„ï¼Œæ­¤æ—¶ä»–æ‰äºŒåå…«å²ã€‚åœ¨æ­¤ä¹‹ååœ¨äº¬åå¹´ä¸­ï¼Œæ›¾å›½è—©ç«‹ä¸‹å­¦åšåœ£äººçš„å®æ„¿å¹¶åšéŸ§ä¸æ‹”åœ°æ²¿ç€è¿™æ¡ä»•é€”ä¹‹é“å‰è¿›ï¼Œæ­¥æ­¥å‡è¿åˆ°äºŒå“å®˜ä½ã€‚åå¹´ä¸ƒè¿ï¼Œè¿è·ƒåçº§ã€‚ç›´è‡³1852å¹´å……ä»»æ±Ÿè¥¿ä¹¡è¯•æ­£è€ƒå®˜æ‰ç»“æŸäº†ä»–çš„äº¬å®˜ç”Ÿæ¶¯ã€‚</p>
<p>åœ¨æ›¾å›½è—©æ˜¥é£å¾—æ„ä¹‹é™…ï¼Œå´çªç„¶æ”¶åˆ°æ¯äº²å»ä¸–çš„å™©è€—ï¼Œè‡´ä½¿ä»–ä¸å¾—ä¸æ”¹å˜è‡ªå·±çš„è¡Œç¨‹å›å®¶å®ˆå­ã€‚æ­¤æ—¶å¤ªå¹³å¤©å›½è¿åŠ¨è½°è½°çƒˆçƒˆå¸­å·åŠä¸ªä¸­å›½ï¼Œè€Œæ¸…å†›ä¸»åŠ›å…«æ——å’Œç»¿è¥æ—©å·²è…è´¥ä¸å ªï¼Œå’¸ä¸°çš‡å¸ä¸å¾—ä¸é¢å¸ƒå…´åŠå›¢ç»ƒçš„è¯ä¹¦ã€‚æ›¾å›½è—©èµ·åˆå†…å¿ƒæ˜¯æ‹’ç»çš„ï¼Œä½†æ˜¯å¿ƒç³»å›½å®¶çš„ä»–æœ€ç»ˆè¿˜æ˜¯å†³å®šåº”è¯ï¼Œä»¥å›¢ä¸ºè¡¨ï¼Œä»¥å†›ä¸ºé‡Œç»„å»ºèµ·äº†æ¹˜å†›ï¼Œæ®Šä¸çŸ¥è¿™æ”¯å†›é˜Ÿæˆäº†æ—¥åæŠµæŠ—å¤ªå¹³å†›çš„ä¸»åŠ›ã€‚æ²¡æœ‰ä»»ä½•å†›äº‹ç»éªŒã€åˆæ¥ä¹åˆ°å†åŠ ä¸Šæ›¾å›½è—©æ­¤æ—¶ç›´ç‡çš„æ€§æ ¼ç‰¹å¾ï¼Œç»„å»ºä¸€æ”¯åƒæ ·ä¸”æœ‰æˆ˜æ–—åŠ›çš„å†›é˜Ÿçš„éš¾åº¦å¯æƒ³è€ŒçŸ¥ï¼Œå…‹æœé‡é‡å›°éš¾æ¹˜å†›ç®—æ˜¯å»ºç«‹èµ·æ¥äº†ã€‚æŠ±ç€é¦–æˆ˜å¿…èƒœçš„å¿ƒç†æ›¾å›½è—©å†³å®šå‡ºå…µé–æ¸¯ï¼Œæœªæ›¾å¯çŸ¥è¿æ¥ä¸€åœºå¤§è´¥ï¼Œè¿™ä¹Ÿè®©ä»–çš„ä¿¡å¿ƒè·Œè½è°·åº•ä¸€åº¦è·³æ±Ÿè‡ªæ€ï¼Œå¹¸è¢«æ•‘ä¸‹ã€‚éšåå¤§å¤§å°å°æˆ˜æ–—ç»å†æ— æ•°ï¼Œæ¹˜æ½­å¤§æ·ã€ä¹æ±Ÿå¤§è´¥â€¦â€¦ 1857å¹´çˆ¶äº²å»ä¸–ï¼Œä»–å‘çš‡å¸è¯·æ±‚å›å®¶å¥”ä¸§ä¸‰ä¸ªæœˆï¼Œæœªæ›¾æƒ³å†æƒ³å¤å‡ºå´è¢«çš‡å¸è§£é™¤äº†å…µæƒã€‚</p>
<p>å¡ç¿å¤±é©¬ç„‰çŸ¥éç¦ï¼Ÿä¹Ÿæ­£æ˜¯æ¥ä¸‹æ¥ä¸¤å¹´çš„è›°ä¼è®©æ›¾å›½è—©å®Œæˆäº†è„±èƒæ¢éª¨çš„å˜åŒ–ï¼Œä»–å¼€å§‹å˜å¾—é€šäººæƒ…ä¸–æ•…ï¼Œé€‚åº”æ™šæ¸…å®˜åœºçš„ç¯å¢ƒï¼Œä½†é¢å¯¹è‡ªå·±æ—¶ä»ç„¶é€‰æ‹©åšåœ£äººã€‚è¶ç€å¤ªå¹³å†›å†…è®§çŸ³è¾¾å¼€çš„å‡ºèµ°ï¼Œå¥½å…„å¼Ÿèƒ¡æ—ç¿¼ç»™æ›¾å›½è—©äº‰å–æ¥äº†å†åº¦å‡ºå±±çš„æœºä¼šï¼Œä¹‹åä¸¤äººè”æ‰‹æ”»å…‹äº†å®‰åº†ï¼ŒæœŸé—´ä½•æ¡‚æ¸…å¼ƒåŸé€ƒè·‘ä¹Ÿæˆå°±äº†æ›¾å›½è—©å¾—åˆ°äº†æ¢¦å¯ä»¥æ±‚çš„ä¸¤æ±Ÿæ€»ç£çš„èŒä½ã€‚æ°´åˆ°æ¸ æˆåœ°1864å¹´æ­£æœˆï¼Œæ”»ç ´å¤©äº¬ï¼Œç»“æŸå›ä¹±ã€‚</p>
<p>æ­¤æ—¶æ›¾å›½è—©ä»»ä¸¤æ±Ÿæ€»ç£ï¼Œåé¢åº”è¯¥å°±æ˜¯è¢«å¤§ä¼—æ‰€ç†ŸçŸ¥çš„éƒ¨åˆ†â€”â€”ä¸»åŠæ´‹åŠ¡ã€‚é¦–å…ˆä»–å’Œè‡ªå·±çš„æ¥ç­äººæé¸¿ç« è”æ‰‹å‰¿ç­äº†åŒ—æ–¹é»„æ·®ä¸€å¸¦çš„æ»å†›èµ·ä¹‰ï¼Œéšåä¾¿æ˜¯å…´åŠæ´‹åŠ¡ï¼Œå»ºç«‹å®‰åº†å†›æ¢°æ‰€ã€æ±Ÿå—åˆ¶é€ æ€»å±€ï¼Œç¿»è¯‘å¤§é‡å¤–æ–‡ä¹¦ç±ç­‰ç­‰ã€‚1868å¹´å‡ä»»ç›´éš¶æ€»ç£å¤„ç†å®Œå¤©æ´¥æ•™æ¡ˆäº‹ä»¶å› å¤‡å—æŒ‡è´£å†æ¬¡æ‹…ä»»ä¸¤æ±Ÿæ€»ç£ï¼Œå››å¹´åä¸­å›½ä¼ ç»Ÿæ–‡åŒ–æœ€åä¸€ä¸ªå¶åƒæ›¾å›½è—©å»ä¸–ã€‚</p>
<h1 id="æ„Ÿæ‚Ÿ"><a href="#æ„Ÿæ‚Ÿ" class="headerlink" title="æ„Ÿæ‚Ÿ"></a>æ„Ÿæ‚Ÿ</h1><h2 id="è¶ŠåŠªåŠ›è¶Šå¹¸è¿"><a href="#è¶ŠåŠªåŠ›è¶Šå¹¸è¿" class="headerlink" title="è¶ŠåŠªåŠ›è¶Šå¹¸è¿"></a>è¶ŠåŠªåŠ›è¶Šå¹¸è¿</h2><p>æ›¾å›½è—©ä¸èƒ½è¯´æ˜¯å¤©èµ„å“è¶Šçš„äººï¼Œä»ä»–è¯»ä¹¦ã€æ²»å†›ç»å†ä¸éš¾çœ‹å‡ºè¿™ä¸€ç‚¹ã€‚å…³äºè¿™ä¸€ç‚¹è¿˜æœ‰ä¸€ä¸ªå¹¿ä¸ºæµä¼ çš„å°æ•…äº‹ï¼Œä¸€æ—¥é»„æ˜ï¼Œä»–åœ¨ä¹¦æ¡Œå‰èƒŒè¯µã€Šå²³é˜³æ¥¼è®°ã€‹ï¼Œä¸€ä¸ªå°å·å·å·æ½œå…¥ä»–å®¶çˆ¬åˆ°æˆ¿æ¢ä¸Šï¼Œç­‰å¾…è¿™ä¸€å®¶äººéƒ½å…¥ç¡åå·ä¸œè¥¿ã€‚å¥ˆä½•å°å·ç¡äº†å¥½å‡ è§‰ï¼Œæ›¾å›½è—©è¿˜æ²¡æœ‰èƒŒä¸‹æ¥ï¼Œå°å·æ°”æ€¥è´¥åè·³ä¸‹æˆ¿æ¢è¯´ï¼šå°±ä½ è¿™ä¸ªç¬¨æ ·è¯»ä»€ä¹ˆä¹¦ï¼Ÿéšåä»–å®Œå®Œæ•´æ•´èƒŒäº†ä¸€éï¼Œç”©é—¨è€Œå»ï¼Œç•™ä¸‹çš„æ›¾å›½è—©ç›®çªå£å‘†ä¸€äººå‡Œä¹±ã€‚çœŸå®æ€§æ— ä»è€ƒè¯ï¼Œä½†æ˜¯ç”±æ­¤å¯è§ä»–æ˜¯çœŸæŒºç¬¨çš„ï¼Œè€Œä»–æœªæ¥çš„æˆå°±æ›´å¤šæ¥è‡ªäºåŠªåŠ›ã€‚ä»–çš„äººç”Ÿå“²å­¦ä¾¿æ˜¯â€å°šæ‹™â€œï¼Œå´‡å°šç¬¨æ‹™ã€‚æ›¾å›½è—©æ›¾è¯´ï¼šâ€œå¤©ä¸‹ä¹‹è‡³æ‹™ï¼Œèƒ½èƒœå¤©ä¸‹ä¹‹ä¹‹å·§â€ã€‚ä¸€å‘³çš„è¿½æ±‚é«˜æ•ˆç‡è€Œä¸æ‹©æ‰‹æ®µã€æŠ•æœºå–å·§ç»ˆä¸èƒ½æˆå¤§æ‰ã€‚å¤©èµ‹ä¸å¤Ÿï¼ŒåŠªåŠ›æ¥å‡‘ï¼Œè€Œè¶ŠåŠªåŠ›æ‰ä¼šè¶Šå¹¸è¿ã€‚</p>
<h2 id="å†å²æ€»æ˜¯æœ‰è¿¹å¯å¾ª"><a href="#å†å²æ€»æ˜¯æœ‰è¿¹å¯å¾ª" class="headerlink" title="å†å²æ€»æ˜¯æœ‰è¿¹å¯å¾ª"></a>å†å²æ€»æ˜¯æœ‰è¿¹å¯å¾ª</h2><p>åœ¨æœ¬ä¹¦ä¸­æ›¾æœ‰è¿‡è¿™æ ·ä¸¤ä¸ªç‰‡æ®µã€‚</p>
<p>å…¶ä¸€ï¼Œåœ¨æ›¾å›½è—©å®ˆåˆ¶æœŸé—´å¤§å½»å¤§æ‚Ÿå®Œæˆèœ•å˜ï¼Œä»–çªç„¶æ„è¯†åˆ°æ‰€è°“â€å¤©ä¸‹ä¹‹è‡³æŸ”ï¼Œé©°éª‹å¤©ä¸‹ä¹‹å¿—åšâ€œã€â€å¤§æŸ”éæŸ”ï¼Œè‡³åˆšæ— åˆšâ€œçœŸæ­£çš„å«ä¹‰ã€‚è¡Œäº‹è¿‡äºæ–¹åˆšè€…ï¼Œè¡¨é¢ä¼¼ä¹æ˜¯å¼ºè€…ï¼Œå®é™…ä¸Šç¡®æ˜¯å¼±è€…ã€‚è€Œä»–ä¹‹å‰çœ‹ä¸èµ·çš„éº»æœ¨ã€åœ†æ»‘ã€æœºè¯ˆæœ‰æ—¶å€™æ‰æ˜¯è§£å†³é—®é¢˜çš„æœ€å¥½æ–¹æ³•ã€‚</p>
<p>å…¶äºŒï¼Œåœ¨æ”»æ‰“å®‰åº†æœŸé—´ï¼Œèƒ¡æ—ç¿¼åˆ›é€ å‡ºâ€å›´åŸæ‰“æ´â€œçš„æˆ˜æœ¯ï¼Œç»™åœ¨æ¹–åŒ—ä½œæˆ˜çš„æ¹˜å†›ç»Ÿå¸…å¤šéš†é˜¿çš„ä¿¡ä¸­è¯´é“ï¼Œæˆ˜äº‰çš„ç›®çš„ä¸åœ¨äºä¸€åŸä¸€æ± çš„å¾—å¤±ï¼Œè€Œåœ¨äºæ¶ˆç­å¯¹æ–¹çš„æœ‰ç”ŸåŠ›é‡ã€‚</p>
<p>è¯»åˆ°ç¬¬ä¸€ä¸ªç‰‡æ®µï¼Œè„‘æµ·ä¸­ä¸ç”±å¾—æµ®ç°å‡ºè€å­â€ä»¥æŸ”å…‹åˆšâ€œçš„æ€æƒ³ï¼Œè€Œæ›¾å›½è—©å¤§å½»å¤§æ‚Ÿåçš„æ€æƒ³ä½•å°ä¸æ˜¯å¯¹å…ˆè´¤æ€æƒ³çš„è¿›ä¸€æ­¥é˜è¿°å’Œå‡åã€‚è€Œè¯»åˆ°ç¬¬äºŒä¸ªç‰‡æ®µæ—¶ï¼Œè„‘æµ·é‡Œæµ®ç°çš„æ˜¯è§£æ”¾æˆ˜äº‰æœŸé—´ï¼Œæ¯›ä¸»å¸­åœ¨å»¶å®‰é¢å¯¹èƒ¡å®—å—äºŒåäº”ä¸‡å¤§å†›ä¸»åŠ¨æ’¤ç¦»ï¼Œå†³å®šâ€æ‹¿ä¸€ä¸ªå»¶å®‰æ¢å–ä¸€ä¸ªå…¨ä¸­å›½â€œã€‚å½“æ—¶ä¾¿æå‡ºï¼šå­˜åœ°å¤±äººï¼Œäººåœ°çš†å¤±ï¼›å­˜äººå¤±åœ°ï¼Œäººåœ°çš†å­˜ã€‚è¿™ä¸èƒ¡æ—ç¿¼è®²è¿°çš„æˆ˜äº‰ç›®çš„å¯è°“æ˜¯å¦‚å‡ºä¸€è¾™ã€‚</p>
<h2 id="å°½äººäº‹ï¼Œå¬å¤©å‘½"><a href="#å°½äººäº‹ï¼Œå¬å¤©å‘½" class="headerlink" title="å°½äººäº‹ï¼Œå¬å¤©å‘½"></a>å°½äººäº‹ï¼Œå¬å¤©å‘½</h2><p>åœ¨æ›¾å›½è—©èµ‹é—²åœ¨å®¶ä¸ºçˆ¶äº²æ²»ä¸§ä¸‰ä¸ªæœˆæœŸæ»¡ä¹‹æ—¶ï¼Œä»–å‘çš‡å¸ç”³è¯·ç»§ç»­å®ˆåˆ¶ä¸‰å¹´ï¼Œå¤ªå¹³å¤©å›½æœªç­çš‡å¸å½“ç„¶ä¸ä¼šæ‰¹å‡†è¿™ä¸ªè¯·æ±‚ã€‚äºæ˜¯æ›¾å›½è—©è¯´å‡ºäº†å®æƒ…ï¼šå“­è¯‰äº†ä¸€ç•ªè‡ªå·±çš„å§”å±ˆå’Œå›°éš¾ï¼Œå¹¶å¯¹çš‡å¸è¯´å¦‚æœä½ ä¸ç»™æˆ‘ç£æŠšå¤§æƒï¼Œæˆ‘å°±åªèƒ½åœ¨ç±ç»ˆåˆ¶ã€‚è¿™æ˜æ˜¾æ˜¯èµ¤è£¸è£¸çš„è¦æŒŸï¼Œå‡ºä¹æ›¾å›½è—©çš„é¢„æ–™ï¼Œå’¸ä¸°çš‡å¸å±…ç„¶ç­”åº”äº†ä»–çš„å®ˆåˆ¶è¯·æ±‚ï¼Œå½»å½»åº•åº•æ²¡æ”¶äº†å†›æƒã€‚è€Œåœ¨ä¸å¤ªå¹³å¤©å›½çš„å†³æˆ˜å½“ä¸­ï¼Œä½•æ¡‚æ¸…å¼ƒåŸé€ƒè·‘ï¼Œæ›¾å›½è—©æ²¡æœ‰ç´¢è¦çš‡å¸ä¾¿æŠŠä½•æ¡‚æ¸…ä¸¤æ±Ÿæ€»ç£èŒä½ç»™åˆ°äº†ä»–ã€‚</p>
<p>ä¸€æ—¦åœ¨åšä¸€ä»¶äº‹æƒ…æ—¶æœ‰äº†æå¼ºçš„åŠŸåˆ©å¿ƒï¼Œå®ç°çš„è¿‡ç¨‹å¯èƒ½å°†ä¸æ‹©æ‰‹æ®µï¼Œç›®æ ‡ä¹Ÿå¯èƒ½ä¼šèƒŒé“è€Œé©°ï¼Œæœ€ç»ˆä¸€å®šä¸ä¼šè¾¾åˆ°æœ€å®Œç¾çš„çŠ¶æ€ã€‚è€Œæœ€å¥½çš„æ–¹å¼åˆ™æ˜¯åšåˆ°â€å°½äººäº‹å¬å¤©å‘½â€œï¼Œå°½å¿ƒå°½åŠ›çš„å»åšäº‹æƒ…ï¼Œè€Œèƒ½å¦æˆåŠŸï¼Œåˆ™éœ€è¦é¡ºå…¶è‡ªç„¶ã€‚</p>
<h2 id="è„šè¸å®åœ°ï¼Œå¸¸äºåæ€"><a href="#è„šè¸å®åœ°ï¼Œå¸¸äºåæ€" class="headerlink" title="è„šè¸å®åœ°ï¼Œå¸¸äºåæ€"></a>è„šè¸å®åœ°ï¼Œå¸¸äºåæ€</h2><p>åœ¨å…«æ——å…µå’Œç»¿è¥å…µæˆ˜æ–—åŠ›å¦‚æ­¤ä½ä¸‹çš„æƒ…å†µä¸‹ï¼Œä¸€ä»‹ä¹¦ç”Ÿæ›¾å›½è—©ä¸ºä»€ä¹ˆåˆ›å»ºå‡ºæˆ˜æ–—åŠ›æ»¡æ»¡çš„æ¹˜å†›å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯åæ€çš„åŠ›é‡ï¼Œä»–è¿½æ ¹æº¯æºæ‰¾åˆ°å…«æ——ç»¿è¥çœŸæ­£ç—‡ç»“æ‰€åœ¨å¹¶åœ¨æ¹˜å†›ä¸­åŠæ—¶è°ƒæ•´å®ŒæˆåŠŸä¸šã€‚è€Œå»ºç«‹èµ·æ¥çš„æ¹˜å†›åœ¨æˆ˜æ–—æ—¶å¥‰è¡Œçš„æ—¶æ›¾å›½è—©â€ç»“ç¡¬å¯¨ï¼Œæ‰“å‘†ä»—â€œçš„æˆ˜æœ¯ï¼Œå…·ä½“æ¥è®²å°±æ˜¯â€ä»¥é™åˆ¶åŠ¨ï¼Œåå®¢ä¸ºä¸»â€œï¼ŒæŠŠè‡ªå·±çš„è¥å¯¨ç›˜ç»“å®ç­‰å¾…æ•Œäººå‰æ¥è¿›æ”»ï¼Œç­‰å¾…ä»–ä»¬éœ²å‡ºé©¬è„šæ¹˜å†›å†åæ”»ï¼Œè¿™ä¾¿æ˜¯æ•´ä¸ªé€»è¾‘ã€‚</p>
<p>ç»†ç»†çœ‹ä¸‹æ¥æ›¾å›½è—©çš„æˆ˜æœ¯ä¸€å®šä¸æ˜¯æœ€å…ˆè¿›çš„ä½†ä¸€å®šæ˜¯æœ€ç¨³å¦¥çš„ã€‚ä¸è®ºèµ°å¤šè¿œçš„è·¯ï¼Œä½†ä¸€å®šè¦ç¡®ä¿èµ°è¿‡çš„æ¯ä¸€æ­¥è·¯éƒ½æœ‰è‡ªå·±çš„è„šå°ã€‚</p>
<h2 id="ä¿æŒå¿§æ‚£æ„è¯†"><a href="#ä¿æŒå¿§æ‚£æ„è¯†" class="headerlink" title="ä¿æŒå¿§æ‚£æ„è¯†"></a>ä¿æŒå¿§æ‚£æ„è¯†</h2><p>åœ¨å¤ªå¹³å¤©å›½è¿åŠ¨è¢«å¹³å®šä¹‹åï¼Œæ¹˜å†›æ— ç–‘æˆäº†æ•´ä¸ªæ¸…ç‹æœæœ€å¼ºå¤§çš„æˆ˜æ–—åŠ›ã€‚æ›¾å›½è—©ç†Ÿè¯»å²ä¹¦ï¼Œã€Šæ˜“ä¼ ã€‹ä¸­è®²ï¼šæ—¥ä¸­åˆ™æ˜ƒï¼Œæœˆç›ˆåˆ™äºã€‚è¶Šæ˜¯è¾‰ç…Œçš„æ—¶å€™è¶Šåº”è¯¥ä¿æŒæ¸…é†’çš„å¤´è„‘ï¼Œæ‡‚å¾—è¶‹ç¦é¿ç¥¸ã€‚ä»–æ€ä¹ˆèƒ½ä¸æ˜ç™½æœå»·çš„å¿ƒæ€å‘¢ï¼Œä¸ºäº†ä¸è®©æœå»·çŒœå¿Œå†³å®šè‡ªå‰ªç¾½æ¯›è£æ’¤æ¹˜å†›ã€‚ä¸æ­¤åŒæ—¶ï¼Œä»–é»˜é»˜çš„å°†éƒ¨åˆ†ä¸»åŠ›äº¤ç»™æé¸¿ç« çš„æ·®å†›å½“ä¸­ã€‚è¿™ä¸€æ‰‹â€è£æ¹˜ç•™æ·®â€œçš„æ“ä½œå¯è°“çœŸçš„æ˜¯ç²—ä¸­æœ‰ç»†ï¼Œè¿™ä¹Ÿä¿è¯äº†å®ƒåé¢å®˜åœºç”Ÿæ¶¯çš„å»¶ç»­ã€‚</p>
<h2 id="è¯»ä¹¦æ°¸è¿œå¯ä»¥ä¿æŒç«äº‰åŠ›"><a href="#è¯»ä¹¦æ°¸è¿œå¯ä»¥ä¿æŒç«äº‰åŠ›" class="headerlink" title="è¯»ä¹¦æ°¸è¿œå¯ä»¥ä¿æŒç«äº‰åŠ›"></a>è¯»ä¹¦æ°¸è¿œå¯ä»¥ä¿æŒç«äº‰åŠ›</h2><p>é€‰å£«äººï¼Œé¢†å±±å†œã€‚æ¹˜å†›å¤§éƒ¨åˆ†äººéƒ½æ˜¯å±±å†œå³å†œæ°‘å‡ºèº«ã€‚ä½†æ˜¯æ¹˜å†›é‡è§†æ”¿æ²»æ•™è‚²ï¼Œç½—æ³½å—éƒ¨åˆ™ç´¢æ€§ç™½å¤©æ‰“ä»—ï¼Œæ™šä¸ŠæŠŠéƒ¨ä¸‹å¬é›†åˆ°ä¸€èµ·ï¼Œæ•™ä»–ä»¬è¯»ä¹¦ï¼Œå­¦ä¹ ç†å­¦ã€‚æµæ°“ä¸å¯æ€•ï¼Œå°±æ€•æµæ°“æœ‰æ–‡åŒ–ï¼Œè¿™å¥è¯å¯èƒ½ä¸æ˜¯å¾ˆæ°å½“ï¼Œä½†æ˜¯æœ‰äº†çŸ¥è¯†çš„å†œæ°‘éƒ¨é˜Ÿæˆ˜æ–—åŠ›ã€æˆ˜æ–—ç´ å…»æå‡äº†å¯ä¸æ˜¯ä¸€ä¸ªç­‰çº§ã€‚</p>
<h2 id="æ¡ƒææ»¡å¤©ä¸‹"><a href="#æ¡ƒææ»¡å¤©ä¸‹" class="headerlink" title="æ¡ƒææ»¡å¤©ä¸‹"></a>æ¡ƒææ»¡å¤©ä¸‹</h2><p>è¿™ä¸€é¡¹ä¸èƒ½ç®—ä½œæ˜¯æ„Ÿæ‚Ÿï¼Œç§°å¾—ä¸Šæ˜¯æ›¾å›½è—©çš„æˆå°±ã€‚æ™šæ¸…å¤§å¤šæ•°é‡è‡£éƒ½å¤šå¤šå°‘å°‘éƒ½å—åˆ°è¿‡æ›¾å›½è—©çš„æç‚¹ï¼Œæé¸¿ç« ã€å·¦å®—æ£ ã€æ²ˆè‘†æ¡¢ã€å½­ç‰éºŸã€èƒ¡æ—ç¿¼ç­‰ç­‰ï¼Œå°¤å…¶æ˜¯æé¸¿ç« å¯è°“æ˜¯ä¸€æ‰‹ææ‹”èµ·æ¥çš„ã€‚è‹±å›½ä¸€ä½å†å²å­¦å®¶è¯´ï¼šæ›¾å›½è—©æ˜¯ä¸­å›½æœ€æœ‰åŠ¿åŠ›çš„äººï¼Œä½†ä»–æ­»å»çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„æ€»ç£ï¼ˆç±»ä¼¼äºç°åœ¨çš„çœå§”ä¹¦è®°ï¼‰éƒ½æ›¾åšè¿‡ä»–çš„éƒ¨ä¸‹ï¼Œå¹¶ä¸”éƒ½æ˜¯ç”±ä»–æåçš„ã€‚å¦‚æœä»–å¸Œå†€ï¼Œä»–å¯èƒ½å·²ç»æˆä¸ºçš‡å¸ã€‚çœŸå®æ€§æ— ä»è€ƒè¯ï¼Œä½†ç”±æ­¤ä¹Ÿå¯çœ‹å‡ºä»–çš„å½±å“åŠ›ä¹‹å¤§</p>
<h1 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h1><p>æ›¾å›½è—©è¿™ä¸€ç”Ÿæ˜¯å¤±è´¥çš„ã€‚ä¸ºå¤©åœ°ç«‹å¿ƒã€ä¸ºç”Ÿæ°‘ç«‹å‘½ã€ä¸ºå¾€åœ£ç»§ç»å­¦ã€ä¸ºä¸‡ä¸–å¼€å¤ªå¹³ã€‚æ›¾å›½è—©ç”¨ä»–çš„ä¸€ç”Ÿæ¥è·µè¡Œå¼ è½½çš„æ¨ªæ¸ å››å¥ï¼Œä½†å¯æƒœç”Ÿä¸é€¢æ—¶ç»ˆç©¶æ˜¯æ²¡æœ‰å®Œæˆå…¨éƒ¨çš„ç†æƒ³ï¼Œæ— å¥ˆæˆä¸ºè¿½æ—¥çš„å¤¸çˆ¶ã€å¡«æµ·çš„ç²¾å«ã€‚åœ¨è¿™é‡Œå¼•ç”¨ä¸€ä¸‹æ¨è€€åœ¨â€å¾—åˆ°â€œAPPè§£è¯»æé¸¿ç« ä¸€ä¹¦ä¸­æåˆ°çš„ï¼šæ—¶åŠ¿èƒ½å¤Ÿé€ è‹±é›„ï¼Œè€Œè‹±é›„ä¹Ÿå¯ä»¥æ”¹å˜æ—¶åŠ¿ã€‚è€Œæ˜¾ç„¶ä¼ ç»Ÿä¿å®ˆçš„æ€æƒ³è®©æ›¾å›½è—©æ³¨å®šåªèƒ½æˆä¸ºæ—¶åŠ¿é€ çš„è‹±é›„ï¼Œè€Œä¸èƒ½æˆä¸ºæ”¹å˜æ—¶åŠ¿çš„è‹±é›„ã€‚è¿™ä¸æ˜¯ä»–ä¸€ä¸ªäººçš„å¤±è´¥ï¼Œè€Œæ˜¯æ•´ä¸ªè…æœ½æ”¿æƒçš„å¤±è´¥ï¼</p>
<p>æ›¾å›½è—©è¿™ä¸€ç”Ÿåˆæ˜¯æˆåŠŸçš„ã€‚ç«‹åŠŸã€ç«‹å¾·ã€ç«‹è¨€ä¸‰ä¸æœ½çš„å¢ƒç•Œä»–å…¨éƒ¨åšåˆ°äº†ã€‚ç«‹åŠŸè€Œè¨€ï¼Œä»–ä»ä¸€ä»‹ä¹¦ç”Ÿèµ·å®¶ï¼Œåˆ›å»ºå†›é˜Ÿï¼ŒæŒ½ç‹‚æ¾œäºæ—¢å€’ï¼Œæ‰¶å¤§å¦ä¹‹å°†å€¾ï¼Œä½¿ä¸­å›½ä¼ ç»Ÿæ–‡åŒ–å…é­æ¯ç­ä¹‹ç¾ï¼Œè®©æ¸…æœåˆå¯ä»¥åœ¨å†å²ä¸Šæµ“å¢¨é‡å½©çš„å¤šå†™å‡ ç¬”ï¼›ç«‹å¾·è€Œè¨€ï¼Œä»–ä»¥åœ£è´¤ä¸ºæ ‡å‡†è¦æ±‚è‡ªå·±ï¼Œé“å¾·ä¿®å…»è¿‘ä¹çº¯ç²¹ï¼›ç«‹è¨€è€Œè¨€ï¼Œæˆ‘ä¸€ä¸ªæ™®é€šäººèƒ½åœ¨è¿™é‡Œå†™è¿™ç¯‡æ–‡ç« æ„Ÿå—æ›¾å›½è—©çš„é£é‡‡ï¼Œå…¶å½±å“åŠ›ä¾¿ä¸è¨€è€Œå–»ï¼Œæ´‹æ´‹æ´’æ´’æ•°ç™¾ä¸‡å­—å…¨é›†è®©äººå—ç›ŠåŒªæµ…ã€‚</p>
<p>ä¸€ä¸‡ä¸ªäººæœ‰ä¸€ä¸‡ä¸ªå“ˆå§†é›·ç‰¹ï¼ŒåŒæ ·ä¹Ÿä¼šæœ‰ä¸€ä¸‡ä¸ªæ›¾å›½è—©ï¼Œæ¯ä¸ªäººåˆ‡å…¥è§’åº¦ä¸åŒè¯»å‡ºçš„äººç‰©è‡ªç„¶ä¸åŒï¼Œä½†å¸¦ç»™æˆ‘ä»¬æ¯ä¸ªäººçš„åŠ›é‡å´æ˜¯æ°¸æ’ä¸”ç›¸åŒçš„ï¼</p>
]]></content>
      <categories>
        <category>Reading</category>
      </categories>
      <tags>
        <tag>è¯»ä¹¦ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Šæ ¼å±€ã€‹</title>
    <url>/2023/01/04/Reading/%E6%A0%BC%E5%B1%80/</url>
    <content><![CDATA[<p><img src="/images/reading/GeJu.jpg" alt="img"></p>
<h1 id="å¯¼è¯­"><a href="#å¯¼è¯­" class="headerlink" title="å¯¼è¯­"></a>å¯¼è¯­</h1><p>ã€Šæ ¼å±€ã€‹ä¸€ä¹¦æ˜¯å´å†›åšå£«2019å¹´å‡ºç‰ˆçš„ã€‚å´å†›åšå£«å¤´è¡”å¯è°“ä¼—å¤šï¼Œâ€œæ–‡æ´¥å›¾ä¹¦å¥–â€å¾—ä¸»ã€ç¡…è°·æŠ•èµ„äººã€çº¦ç¿°Â·éœæ™®é‡‘æ–¯å¤§å­¦å·¥å­¦é™¢è‘£äº‹ã€åŸè…¾è®¯å‰¯æ€»è£ï¼Œå‡ºç‰ˆè¿‡ã€Šæ•°å­¦ä¹‹ç¾ã€‹ã€Šæµªæ½®ä¹‹å·…ã€‹ã€Šæ–‡æ˜ä¹‹å…‰ã€‹ã€Šç¡…è°·ä¹‹è°œã€‹ç­‰ç­‰ä¸åŒå“ç±»çš„ä¹¦ç±ã€‚</p>
<p>æˆ‘è‡ªå·±å¯¹äºâ€æ ¼å±€â€œä¸€è¯çš„ç†è§£æ˜¯ä¸€ä¸ªäººå¯¹äºä¸–ç•Œè®¤çŸ¥çš„è¾¹ç•Œä»¥åŠå¯¹äº‹ç‰©è®¤çŸ¥çš„èŒƒå›´ã€‚æ•´ä¹¦é€šè¯»ä¸‹æ¥ç»™æˆ‘çš„æ„Ÿè§‰æ›´åƒæ˜¯å´å†›åšå£«å¯¹äºè‡ªå·±ç”Ÿæ´»ç»éªŒåŠåŸºäºæŸäº›å†å²äº‹ä»¶çš„è§„å¾‹æ€»ç»“ï¼Œç”šè‡³æœ‰äº›ç« èŠ‚çš„å†…å®¹å‰åéƒ½æ²¡æœ‰å¾ˆå…³è”ï¼Œå¯¹äºæœ¬ä¹¦å¤§éƒ¨åˆ†å†…å®¹æ— æ„Ÿçš„æœ¬è´¨åŸå› æˆ‘è®¤ä¸ºæ˜¯è‡ªå·±çš„ç»å†æ²¡æœ‰é‚£ä¹ˆä¸°å¯Œæ— æ³•åšåˆ°æ„ŸåŒèº«å—äº¦æˆ–è€…æ˜¯è‡ªå·±å¯¹äºè¿™æœ¬ä¹¦æ²¡æœ‰å®Œå…¨è¯»æ‡‚ã€‚é‚£ä¾¿å†™ä¸‹è‡ªå·±æ„Ÿå…´è¶£çš„éƒ¨åˆ†çš„å¿ƒå¾—å§</p>
<h1 id="æ„Ÿæ‚Ÿ"><a href="#æ„Ÿæ‚Ÿ" class="headerlink" title="æ„Ÿæ‚Ÿ"></a>æ„Ÿæ‚Ÿ</h1><h2 id="æŠ€æœ¯æ˜¯æ‰‹æ®µ-ä¸æ˜¯ç›®çš„"><a href="#æŠ€æœ¯æ˜¯æ‰‹æ®µ-ä¸æ˜¯ç›®çš„" class="headerlink" title="æŠ€æœ¯æ˜¯æ‰‹æ®µ ä¸æ˜¯ç›®çš„"></a>æŠ€æœ¯æ˜¯æ‰‹æ®µ ä¸æ˜¯ç›®çš„</h2><p>äº’è”ç½‘é£é€Ÿå‘å±•ï¼Œæ–°çš„æŠ€æœ¯ç†è®ºå¾—åˆ°è¿…é€Ÿä¸”å¹¿æ³›çš„ä¼ æ’­ã€‚å¯¹äºä¸€åæŠ€æœ¯ä»ä¸šè€…æ¥è®²ï¼Œè¦æƒ³åœ¨èŒåœºè¡Œä¸šå†…å§‹ç»ˆä¿æŒç«äº‰åŠ›ï¼Œéœ€è¦ä¸æ–­çš„å»å­¦ä¹ æ–°çš„å†…å®¹æ¥ä¿è¯è‡ªå·±ä¸ä¼šè¢«æ—¶ä»£æ‰€æ·˜æ±°ã€‚ä½†å®é™…ä¸Šï¼ŒæŠ€æœ¯ä»æ¥éƒ½æ˜¯æ‰‹æ®µè€Œä¸æ˜¯ç›®çš„ï¼Œå¦‚æœæä¸æ¸…æ¥šè¿™ä¸€ç‚¹ï¼Œå°±ä¼šä¸ºäº†æŠ€æœ¯è€Œç ”å‘æŠ€æœ¯ã€‚2022å¹´AIã€IOTå¯èƒ½æ˜¯æ—¶ä»£çš„æ½®æµï¼Œä½†10å¹´åä¸€åˆ‡éƒ½æœªæ›¾å¯çŸ¥è€Œå¯ä»¥è‚¯å®šçš„æ˜¯è®¡ç®—æœºçš„åº•å±‚åŸç†åŠçŸ¥è¯†ä»ç„¶ä¸ä¼šè½ä¼ã€‚å¯è§æ´å¯Ÿä¸€ä»¶äº‹æƒ…çš„æœ¬è´¨å¹¶å»å­¦ä¹ æ¢ç´¢æ‰æ˜¯çœŸæ­£çš„ç¡¬é“ç†ã€‚</p>
<h2 id="æœªæ¥çš„ç‰¹å¾"><a href="#æœªæ¥çš„ç‰¹å¾" class="headerlink" title="æœªæ¥çš„ç‰¹å¾"></a>æœªæ¥çš„ç‰¹å¾</h2><ul>
<li>ä¸å¯¹ç§°æ€§ã€‚æ–°æŠ€æœ¯çš„äº§ç”Ÿï¼Œæœ€æ—©æŒæ¡æ–°æŠ€æœ¯çš„å°‘æ•°äººå¯ä»¥åˆ©ç”¨æ–°æŠ€æœ¯é¢ è¦†è¿‡å»åœ¨ç›¸å…³é¢†åŸŸä¸­å æ®ç»Ÿæ²»åœ°ä½çš„ç»„ç»‡æˆ–æœºæ„ï¼›</li>
<li>å¤æ‚æ€§ã€‚å½“ä¸‹çš„çŸ¥è¯†ä½“ç³»éå¸¸å¤æ‚ï¼Œé€šå¸¸éƒ½æ˜¯è·¨å­¦ç§‘çš„è€Œä¸æ˜¯å•ä¸€ç»´åº¦çš„ï¼›</li>
<li>ä¸ç¡®å®šæ€§ã€‚æ²¡æœ‰äººèƒ½å¤Ÿé¢„æµ‹æœªæ¥</li>
</ul>
<ol>
<li>ä¸è¿‡åº¦ä¾èµ–è¿‡å»çš„æƒå¨</li>
<li>æ‹‰åŠ›ç”±äºæ¨åŠ›ï¼ˆä¸»åŠ¨è·å–è€Œä¸æ˜¯è¢«åŠ¨æ¥æ”¶ï¼‰</li>
<li>æŒ‡å—é’ˆä¼˜äºåœ°å›¾ï¼ˆæ”¹å˜ä¸€ç›´å­˜åœ¨ï¼ŒæŒæ¡æœ¬è´¨ï¼Œæ±‚æ¸”ä¸æ±‚é±¼ï¼‰</li>
<li>æ‹¥æŠ±é£é™©</li>
<li>å›é€†ç²¾ç¥ï¼ˆæ‰“ç ´è§„åˆ™ï¼‰</li>
<li>é€šæ‰èƒœäºä¸“æ‰ï¼ˆå‰æä¸€å®šæ˜¯å·²ç»åœ¨æŸä¸€æ–¹é¢å·²ç»æ˜¯ä¸“æ‰ï¼‰</li>
<li>éŸ§æ€§ä¼˜äºåŠ›é‡</li>
<li>å¼ºè°ƒæ•´ä½“æ€§</li>
</ol>
<h2 id="ä»¥æ­£å’Œï¼Œä»¥å¥‡èƒœ"><a href="#ä»¥æ­£å’Œï¼Œä»¥å¥‡èƒœ" class="headerlink" title="ä»¥æ­£å’Œï¼Œä»¥å¥‡èƒœ"></a>ä»¥æ­£å’Œï¼Œä»¥å¥‡èƒœ</h2><p>é¢å¯¹ä¸æ–­å˜åŒ–çš„æœªæ¥ï¼ŒæŠŠæ¡å¥½å¸¸æ€æ˜¯å…³é”®ï¼Œè€Œæ­£æ˜¯å¸¸æ€ï¼Œå¥‡æ˜¯éå¸¸æ€ã€‚ã€Šå­™å­å…µæ³• å…µåŠ¿ç¯‡ã€‹ä¸­å†™åˆ°ï¼šå‡¡æˆ˜è€…ï¼Œä»¥æ­£å’Œï¼Œä»¥å¥‡èƒœã€‚è¿™å¥è¯çš„æ„æ€æ˜¯ï¼šä½œæˆ˜ï¼Œè¦å…ˆæŠŠæ­£é¢çš„å…µæ’å¥½ï¼Œæ’çš„ä¸åæ–œåˆä¹æ³•åˆ™ï¼Œæ­¤ä¸ºæ­£ï¼›å¦‚æœè¿™æ—¶å€™è¿˜æœ‰å¤šä½™çš„å…µåŠ›ä½ å°±èµ¢äº†ï¼Œåœ¨ç°ä»£æ±‰è¯­å­—å…¸ä¸­ä¹Ÿå¯ä»¥ç†è§£ä¸ºï¼šå‡ºå¥‡åˆ¶èƒœã€‚â€ä»¥æ­£å’Œï¼Œä»¥å¥‡èƒœâ€æ›´åº”è¯¥æ˜¯ä¸€ä¸ªäººåšäº‹çš„å‡†åˆ™ï¼Œåœ¨åšå¥½æ­£çš„åŸºç¡€ä¸Šå‡ºå¥‡åˆ¶èƒœï¼Œä¸è¦ç›¸ä¿¡æ‰€è°“çš„å¼¯é“è¶…è½¦ï¼Œè¿™ä¸€å®šæ˜¯ä¸ç¨³å®šçš„ã€‚</p>
<h2 id="è¢«ä¿¡æ¯æ”¾å¤§çš„æ‚²è§‚"><a href="#è¢«ä¿¡æ¯æ”¾å¤§çš„æ‚²è§‚" class="headerlink" title="è¢«ä¿¡æ¯æ”¾å¤§çš„æ‚²è§‚"></a>è¢«ä¿¡æ¯æ”¾å¤§çš„æ‚²è§‚</h2><p>æˆ‘ä»¬æ˜æ˜¾èƒ½å¤Ÿæ„Ÿè§‰åˆ°ç°åœ¨çš„å¹´è½»äººæ™®éä¼šæ›´ç„¦è™‘ï¼Œä»–ä»¬ä»¿ä½›å¯¹è¿™ä¸ªä¸–ç•Œå……æ»¡æ‚²è§‚æƒ…ç»ªã€‚xxxé£æœºå¤±äº‹ã€xxxå…¬å¸å¤§è§„æ¨¡è£å‘˜ã€xxxåœ°åŒºæ´ªæ°´æˆ–ç«å±±çˆ†å‘ï¼Œè¿™äº›æ–°é—»åœ¨ç°åœ¨çœŸçš„æ˜¯å±¡è§ä¸é²œï¼Œä¹Ÿæ­£æ˜¯è¿™äº›æ–°é—»çš„å¹¿æ³›ä¼ æ’­ç»™æˆ‘ä»¬é€ æˆäº†å¾ˆå¤§çš„ç„¦è™‘æƒ…ç»ªã€‚ä½†å®é™…ä¸Šé£æœºå…¶å®æ˜¯æ¯”æ±½è½¦æ›´å®‰å…¨ã€åœ¨å¤§èŒƒå›´å†…å°±ä¸šå½¢å¼æ˜¯å‘å¥½çš„ã€ç«å±±å–·å‘åœ°æ­£æ˜¯å¤„äºæ¿å—äº¤ç•Œåœ°å¸¦ã€‚å¯ä»¥å‘ç°çœŸæ­£å¹¿æ³›ä¼ æ’­çš„è¨€è®ºå®é™…ä¸Šå¤§å¤šæ˜¯æ‚²è§‚çš„ï¼Œä»ä¿¡æ¯è®ºçš„è§’åº¦æ¥è®²ï¼Œè¶Šæ˜¯ä¸ä¼—ä¸åŒçš„è¯´æ³•ä¿¡æ¯é‡è¶Šå¤§ã€‚ç›¸åå®£ä¼ ä¹è§‚ä¸»ä¹‰çš„è§‚ç‚¹è®ºæ–‡ä¸ä»…æ²¡æœ‰äººçœ‹ç”šè‡³æ˜¯æ— æ³•å‘è¡¨çš„ã€‚å› ä¸ºæ²¡æœ‰äººä¼šå…³å¿ƒä¸€ç¯‡â€ä»Šå¹´ç»æµæŒç»­å‘å¥½â€œçš„æ–‡ç« ï¼Œå¤§å®¶éƒ½çŸ¥é“ä¹Ÿè‡ªç„¶å°±ä¸ä¼šè¿‡å¤šå…³æ³¨ã€‚é¢å¯¹å„ç§å„æ ·çš„æ–°é—»ï¼Œé€‚å½“ä¿æŒå¿§æ‚£æ„è¯†æ˜¯å¿…è¦çš„ï¼Œä½†è¯·ä¸åº”è¿‡åº¦çš„æ‚²è§‚ï¼</p>
<h2 id="äººç«‹äºå¤©åœ°ä¹‹é—´å¿…æœ‰å‡ºè·¯"><a href="#äººç«‹äºå¤©åœ°ä¹‹é—´å¿…æœ‰å‡ºè·¯" class="headerlink" title="äººç«‹äºå¤©åœ°ä¹‹é—´å¿…æœ‰å‡ºè·¯"></a>äººç«‹äºå¤©åœ°ä¹‹é—´å¿…æœ‰å‡ºè·¯</h2><p>é¢å¯¹ç”Ÿæ´»ã€å·¥ä½œã€å®¶åº­çš„å‹åŠ›ï¼Œæˆ‘ä»¬æ€»æ˜¯ä½¿è‡ªå·±å¤„äºä¸€ä¸ªå¾ˆå¿™ç¢Œçš„çŠ¶æ€ä¹‹ä¸­ï¼Œé¢å¯¹æœªæ¥å¯èƒ½å‘ç”Ÿçš„é—®é¢˜æˆ‘ä»¬ä¹Ÿå¸¸è¯´ï¼šè½¦åˆ°å±±å‰å¿…æœ‰è·¯ã€èˆ¹åˆ°æ¡¥å¤´è‡ªç„¶ç›´ã€‚ç¡®å®ï¼Œå¯¹äºæœªæ¥çš„ä¸ç¡®å®šæ€§ï¼Œæˆ‘ä»¬å§‹ç»ˆè¦åšä¿¡äººç«‹ä¸å¤©åœ°ä¹‹å‰å¿…æœ‰å‡ºè·¯ã€‚</p>
<h1 id="è¯­å½•"><a href="#è¯­å½•" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h1><p>è‡ªå·±èŠ±äº†ç²¾åŠ›åšçš„äº‹æƒ…è¦å°½å¯èƒ½çš„å¯¹è‡ªå·±æœªæ¥æœ‰å¸®åŠ©ã€‚</p>
<p>è¿‡åˆ†è¿½æ±‚ç‰©è´¨å¯èƒ½ä¼šæˆä¸ºç”Ÿæ´»çš„è´Ÿæ‹…ã€‚</p>
]]></content>
      <categories>
        <category>Reading</category>
      </categories>
      <tags>
        <tag>è¯»ä¹¦ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>51jobçˆ¬è™«é¡¹ç›®</title>
    <url>/2022/12/03/item/51job/</url>
    <content><![CDATA[<h1 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h1><p>ç´§æ¥ç€è±†ç“£çˆ¬è™«çš„é¡¹ç›®ï¼Œè¯¥é¡¹ç›®ä½œä¸ºå…¶åçš„ç»ƒä¹ å’Œæ‰©å±•ï¼Œç®—æ˜¯ä¸€ä¸ªè¾ƒä¸ºä¸é”™çš„ä¸Šæ‰‹ç»ƒä¹ ã€‚æœ¬æ–‡æ‰€æ¶‰åŠçš„æ˜¯å¯¹äº51jobæ•°æ®çš„çˆ¬å–ã€è§£æå’Œä¿å­˜ã€‚å¯¹äºæ•°æ®å¯è§†åŒ–æ“ä½œï¼Œåœ¨åç»­ä¼šæŒç»­æ›´æ–°ï¼Œè¯·å…³æ³¨ï¼<br>åœ¨ä¸‹é¢ä»£ç ä¸­æœ‰äº›å‡½æ•°å†…éƒ¨è°ƒç”¨äº†å…¶ä»–å‡½æ•°ï¼Œéœ€è¦è¡¥å…¨å„ä¸ªéƒ¨åˆ†çš„å‡½æ•°ã€‚å¦‚æœéœ€è¦æºç è¯·ç§ä¿¡æˆ–è€…è¯„è®ºã€‚</p>
<blockquote>
<p>å…·ä½“å…³äºåº“çš„æ“ä½œæˆ‘é€‰æ‹©äº†ä¸€äº›å®˜æ–¹æ–‡æ¡£å’Œè¾ƒå¥½ç†è§£çš„è§£è¯»æ–‡ç« åšé“¾æ¥ï¼ŒçŸ¥è¯†ç‚¹æ¯”è¾ƒå…¨é¢è¯·å‚è€ƒä¸‹åˆ—è¡¨ã€‚</p>
</blockquote>
<ul>
<li><p><a href="https://python-selenium-zh.readthedocs.io/zh_CN/latest/">è¯¦æƒ…é¡µURLè·å–æ¨¡å—ï¼šselenium</a></p>
</li>
<li><p><a href="https://requests.readthedocs.io/zh_CN/latest/">URLå¤„ç†ç¬¬ä¸‰æ–¹æ¨¡å—ï¼šrequests</a></p>
</li>
<li><p><a href="https://www.jianshu.com/p/9135d7833d6d">æ•°æ®æå–etreeæ¨¡å—ï¼šlxml</a></p>
</li>
<li><p><a href="https://docs.python.org/zh-cn/3.7/library/sqlite3.html">æ•°æ®åº“ä¿å­˜æ¨¡å—ï¼šsqlite3</a></p>
</li>
<li><p><a href="https://www.cnblogs.com/python-robot/p/9958352.html">æœ¬åœ°æ–‡ä»¶ä¿å­˜æ¨¡å—ï¼šxlwt</a></p>
</li>
</ul>
<h1 id="æ•°æ®çˆ¬å–ä¸è§£æ"><a href="#æ•°æ®çˆ¬å–ä¸è§£æ" class="headerlink" title="æ•°æ®çˆ¬å–ä¸è§£æ"></a>æ•°æ®çˆ¬å–ä¸è§£æ</h1><h2 id="è¯¦æƒ…é¡µé“¾æ¥çš„è·å–ï¼šselenium"><a href="#è¯¦æƒ…é¡µé“¾æ¥çš„è·å–ï¼šselenium" class="headerlink" title="è¯¦æƒ…é¡µé“¾æ¥çš„è·å–ï¼šselenium"></a>è¯¦æƒ…é¡µé“¾æ¥çš„è·å–ï¼šselenium</h2><p>seleniumä½œä¸ºwebè‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ï¼Œç›®å‰åœ¨pythonçˆ¬è™«ä¸­åº”ç”¨ä¹Ÿè¶Šæ¥è¶Šå¹¿æ³›ã€‚å…¶ä¸»è¦åº”ç”¨åŸç†æ˜¯ï¼šé€šè¿‡å®Œå…¨æ¨¡æ‹Ÿæµè§ˆå™¨çš„æ“ä½œï¼Œæ¯”å¦‚è¾“å…¥æ¡†è¾“å…¥ã€ç‚¹å‡»è¶…é“¾æ¥å…ƒç´ ã€ä¸‹æ‹‰æ»šåŠ¨æ¡ç­‰ç­‰æ¥æ‹¿åˆ°jsæ¸²æŸ“ä¹‹åçš„ä»£ç ã€‚<br>å¿…è¦æ€§ï¼šä¹‹å‰ç”¨çš„requestsæ˜¯å¯¹ä¸€ä¸ªé¡µé¢å‘é€è¯·æ±‚ï¼Œåªèƒ½è·å¾—å½“å‰åŠ è½½å‡ºæ¥çš„éƒ¨åˆ†é¡µé¢å³æœ€åˆçš„æºä»£ç ï¼ŒåŠ¨æ€åŠ è½½çš„æ•°æ®æ˜¯è·å–ä¸åˆ°çš„ï¼Œæ¯”å¦‚jsæ¸²æŸ“åçš„ä»£ç ã€ä¸‹æ‹‰æ»šè½®å¾—åˆ°çš„æ•°æ®å’Œä¸€äº›æ¡†å†…éšè—å…ƒç´ ç­‰ç­‰ã€‚<br>å¯¹äºseleniumçš„è§£è¯»ï¼Œ<a href="https://blog.csdn.net/heartbeat196/article/details/113831482">è¯·ç‚¹å‡»click</a>ï¼</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#è·å¾—æ‰€æœ‰ç½‘é¡µè¯¦æƒ…é¡µé“¾æ¥</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_link</span>():</span><br><span class="line">    linklist = []</span><br><span class="line">    <span class="comment">#åˆ›å»ºé©±åŠ¨å™¨å¯¹è±¡</span></span><br><span class="line">    wd = webdriver.Chrome(<span class="string">r'C:\Program Files\Google\Chrome\Application\chromedriver.exe'</span>)</span><br><span class="line">    wd.implicitly_wait(<span class="number">5</span>)</span><br><span class="line">    <span class="comment">#è®¿é—®51jobç½‘ç«™</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">21</span>):</span><br><span class="line">        wd.get(<span class="string">f"https://search.51job.com/list/010000,000000,0000,00,9,99,keyword,2,<span class="subst">{i}</span>.html?"</span>)</span><br><span class="line">        <span class="comment">#æŸ¥æ‰¾æ¯æ¯ä¸€æ¡ä¿¡æ¯é“¾æ¥è¿›å…¥è¯¦æƒ…é¡µ</span></span><br><span class="line">        joblists = wd.find_elements_by_xpath(<span class="string">'//div[@class="j_joblist"]/div/a'</span>)</span><br><span class="line">        <span class="keyword">for</span> joblist <span class="keyword">in</span> joblists:</span><br><span class="line">            con_link = joblist.get_attribute(<span class="string">"href"</span>)</span><br><span class="line">            linklist.append(con_link)</span><br><span class="line">    wd.quit()</span><br><span class="line">    <span class="keyword">return</span> linklist</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ³¨é‡Šï¼š</p>
<ol>
<li>ä»£ç ä¸­çš„ webdriver.Chromeï¼Œåé¢æ˜¯è‡ªå·±æ‰€ç”¨çš„é©±åŠ¨å™¨çš„æœ¬åœ°åœ°å€ã€‚</li>
<li>webdriverå¯¹è±¡wdï¼Œè°ƒç”¨ getæ–¹æ³•ï¼Œåé¢æ‹¬å·å†…ä¸ºè‡ªå·±æ‰€è¦è®¿é—®çš„ç½‘é¡µé“¾æ¥åœ°å€ã€‚</li>
</ol>
</blockquote>
<h2 id="æ•°æ®çˆ¬å–ä¸è§£æï¼šxpath"><a href="#æ•°æ®çˆ¬å–ä¸è§£æï¼šxpath" class="headerlink" title="æ•°æ®çˆ¬å–ä¸è§£æï¼šxpath"></a>æ•°æ®çˆ¬å–ä¸è§£æï¼šxpath</h2><p>ç”±äºè‡ªå·±ä¹ æƒ¯äºä½¿ç”¨xpathæ–¹æ³•è§£æï¼Œåœ¨æ­¤åªåšxpathè§£æçš„æ–¹æ³•ï¼Œå¦‚æœéœ€è¦reæ­£åˆ™è¡¨è¾¾å¼æˆ–è€…BeautifulSoupè§£æï¼Œè¯„è®ºåç»­ä¼šæ›´æ–°ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_data</span>():</span><br><span class="line">    job_information = []</span><br><span class="line">    url_lists = get_link()</span><br><span class="line">    <span class="keyword">for</span> i,url <span class="keyword">in</span> <span class="built_in">enumerate</span>(url_lists):</span><br><span class="line">        datalist=[]</span><br><span class="line">        header = {</span><br><span class="line">            <span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0(Windows NT 10.0;Win64;x64)AppleWebKit/537.36(KHTML,likeGecko)Chrome/88.0.4324.150Safari/537.36"</span></span><br><span class="line">        }</span><br><span class="line">        response = requests.get(url, headers=header)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            html = response.content.decode(<span class="string">"gbk"</span>)</span><br><span class="line">            data = etree.HTML(html)</span><br><span class="line">            link = url</span><br><span class="line">            datalist.append(link)		<span class="comment">#å­˜å…¥å²—ä½é“¾æ¥</span></span><br><span class="line">            title = data.xpath(<span class="string">r'//div[@class="cn"]/h1/@title'</span>)[<span class="number">0</span>]</span><br><span class="line">            datalist.append(title)		<span class="comment">#å­˜å…¥å²—ä½åç§°</span></span><br><span class="line">            salary = data.xpath(<span class="string">r'//div[@class="cn"]/strong/text()'</span>)[<span class="number">0</span>]</span><br><span class="line">            datalist.append(salary)</span><br><span class="line">            information = data.xpath(<span class="string">r'//p[@class="msg ltype"]/@title'</span>)[<span class="number">0</span>]</span><br><span class="line">            information = re.sub(<span class="string">r"\s+"</span>, <span class="string">""</span>, information)  <span class="comment"># å»é™¤ç©ºç™½æ ¼</span></span><br><span class="line">            experience = information.split(<span class="string">"|"</span>)[<span class="number">1</span>]</span><br><span class="line">            datalist.append(experience)</span><br><span class="line">            education = information.split(<span class="string">"|"</span>)[<span class="number">2</span>]</span><br><span class="line">            datalist.append(education)</span><br><span class="line">            num = information.split(<span class="string">"|"</span>)[<span class="number">3</span>]</span><br><span class="line">            datalist.append(num)</span><br><span class="line">            place = data.xpath(<span class="string">r'//p[@class="fp"]/text()'</span>)[<span class="number">0</span>]</span><br><span class="line">            datalist.append(place)</span><br><span class="line">            treatment = data.xpath(<span class="string">r'//span[@class="sp4"]/text()'</span>)</span><br><span class="line">            treatment = <span class="string">" "</span>.join(treatment)</span><br><span class="line">            datalist.append(treatment)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"-----ç¬¬{}æ¡------"</span>.<span class="built_in">format</span>(i))</span><br><span class="line">            job_information.append(datalist)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"-----ç¬¬{}æ¡å‡ºé”™ï¼ŒåŸå› æ˜¯{}------"</span>.<span class="built_in">format</span>(i,e))</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="comment">#print(job_information)		#æµ‹è¯•</span></span><br><span class="line">    <span class="keyword">return</span> job_information</span><br></pre></td></tr></tbody></table></figure>
<h1 id="æ•°æ®å­˜å‚¨"><a href="#æ•°æ®å­˜å‚¨" class="headerlink" title="æ•°æ®å­˜å‚¨"></a>æ•°æ®å­˜å‚¨</h1><h2 id="Excelæœ¬åœ°ä¿å­˜"><a href="#Excelæœ¬åœ°ä¿å­˜" class="headerlink" title="Excelæœ¬åœ°ä¿å­˜"></a>Excelæœ¬åœ°ä¿å­˜</h2><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">save_data_excel</span>(<span class="params">datalist</span>):</span><br><span class="line">    workbook = xlwt.Workbook(encoding=<span class="string">"gbk"</span>, style_compression=<span class="number">0</span>)</span><br><span class="line">    worksheet = workbook.add_sheet(<span class="string">"python"</span>)</span><br><span class="line">    col = [<span class="string">"é“¾æ¥"</span>, <span class="string">"å²—ä½åç§°"</span>, <span class="string">"è–ªèµ„"</span>, <span class="string">"å·¥ä½œç»éªŒ"</span>, <span class="string">"å­¦å†"</span>, <span class="string">"æ‹›è˜äººæ•°"</span>, <span class="string">"å·¥ä½œåœ°ç‚¹"</span>, <span class="string">"ç¦åˆ©"</span>]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">8</span>):</span><br><span class="line">        worksheet.write(<span class="number">0</span>, i, col[i])</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(datalist)):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">8</span>):</span><br><span class="line">            worksheet.write(i+<span class="number">1</span>,j,datalist[i][j])</span><br><span class="line">    workbook.save(<span class="string">"åŒ—äº¬-pythonå·¥ä½œ.xls"</span>)</span><br></pre></td></tr></tbody></table></figure>
<h2 id="Excelæ•°æ®ä¿å­˜ç»“æœå±•ç¤º"><a href="#Excelæ•°æ®ä¿å­˜ç»“æœå±•ç¤º" class="headerlink" title="Excelæ•°æ®ä¿å­˜ç»“æœå±•ç¤º"></a>Excelæ•°æ®ä¿å­˜ç»“æœå±•ç¤º</h2><p><img src="/images/item/51job-1.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="sqliteæ•°æ®åº“ä¿å­˜"><a href="#sqliteæ•°æ®åº“ä¿å­˜" class="headerlink" title="sqliteæ•°æ®åº“ä¿å­˜"></a>sqliteæ•°æ®åº“ä¿å­˜</h2><p>åœ¨æ­¤éƒ¨åˆ†åªå†™äº†æ•°æ®åº“ä¿å­˜çš„å·¥ä½œï¼Œæ•°æ®åº“çš„åˆå§‹åŒ–åˆ›å»ºéœ€å‡½æ•°sql_initéœ€è¦æ·»åŠ å³å¯ä½¿ç”¨ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">save_data_sql</span>(<span class="params">datalist,dbpath</span>):</span><br><span class="line">    sql_init(dbpath)</span><br><span class="line">    conn = sqlite3.connect(dbpath)</span><br><span class="line">    cur = conn.cursor()</span><br><span class="line">    <span class="keyword">for</span> data <span class="keyword">in</span> datalist:</span><br><span class="line">        <span class="keyword">for</span> index <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(data)):</span><br><span class="line">            data[index] = <span class="string">'"'</span> + data[index] + <span class="string">'"'</span></span><br><span class="line">        sql = <span class="string">'''</span></span><br><span class="line"><span class="string">        insert into job_information(</span></span><br><span class="line"><span class="string">            link,title,salary,experience,education,num,place,treatment)</span></span><br><span class="line"><span class="string">            values(%s)'''</span>%<span class="string">","</span>.join(data)</span><br><span class="line">        <span class="comment">#print(sql)     #æµ‹è¯•sqlè¯­å¥æ˜¯å¦æ­£ç¡®</span></span><br><span class="line">        cur.execute(sql)</span><br><span class="line">        conn.commit()</span><br><span class="line">    cur.close()</span><br><span class="line">    conn.close()</span><br></pre></td></tr></tbody></table></figure>
<h2 id="sqliteæ•°æ®åº“ä¿å­˜ç»“æœå±•ç¤º"><a href="#sqliteæ•°æ®åº“ä¿å­˜ç»“æœå±•ç¤º" class="headerlink" title="sqliteæ•°æ®åº“ä¿å­˜ç»“æœå±•ç¤º"></a>sqliteæ•°æ®åº“ä¿å­˜ç»“æœå±•ç¤º</h2><p><img src="/images/item/51job-2.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h1 id="æ•°æ®å¯è§†åŒ–"><a href="#æ•°æ®å¯è§†åŒ–" class="headerlink" title="æ•°æ®å¯è§†åŒ–"></a>æ•°æ®å¯è§†åŒ–</h1><p>null</p>
]]></content>
      <categories>
        <category>Item</category>
      </categories>
  </entry>
  <entry>
    <title>è±†ç“£ç”µå½±Top250æ•°æ®çˆ¬å–ã€æ•°æ®åˆ†æåŠæ•°æ®å¯è§†åŒ–</title>
    <url>/2022/12/03/item/doubanTop250Spider/</url>
    <content><![CDATA[<h1 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h1><p>åœ¨çˆ¬è™«å­¦ä¹ ä¸­ï¼Œä¸€å¥—å®Œæ•´çš„é¡¹ç›®å®æˆ˜å¯¹äºä»£ç å’Œè®¡ç®—æœºæ€ç»´èƒ½åŠ›æœ‰å¾ˆå¤§çš„æå‡ã€‚æœ¬æ–‡åŸºäºBç«™è§†é¢‘<a href="https://www.bilibili.com/video/BV12E411A7ZQ?from=search&amp;seid=4741588992451392787">ã€ŠPythonçˆ¬è™«åŸºç¡€5å¤©é€Ÿæˆï¼ˆ2021å…¨æ–°åˆé›†ï¼‰Pythonå…¥é—¨+æ•°æ®å¯è§†åŒ–ã€‹</a>å…³äº â€œè±†ç“£ç”µå½±Top250â€ é¡¹ç›®åšå‡ºçš„æ€»ç»“ã€æ‹“å±•ä¸åˆ†äº«ã€‚<br>åœ¨æœ¬æ–‡ä¸­ï¼Œåªå±•ç¤ºæ•°æ®çˆ¬å–åˆ°æ•°æ®ä¿å­˜çš„å·¥ä½œï¼Œæ•°æ®å¯è§†åŒ–éƒ¨åˆ†åªåšéƒ¨åˆ†åˆ†æå’Œç»“æœå±•ç¤ºã€‚å…·ä½“å…³äºåº“çš„æ“ä½œæˆ‘é€‰æ‹©äº†ä¸€äº›å®˜æ–¹æ–‡æ¡£åšé“¾æ¥ï¼ŒçŸ¥è¯†ç‚¹æ¯”è¾ƒå…¨é¢è¯·å‚è€ƒä¸‹åˆ—è¡¨ã€‚å¦‚æœæƒ³è¦é¡¹ç›®æºä»£ç ï¼Œè¯·è¯„è®ºæˆ–ç§ä¿¡ã€‚</p>
<ul>
<li><a href="https://docs.python.org/zh-cn/3.7/library/urllib.html?highlight=urllib">URLå¤„ç†ç³»ç»Ÿæ¨¡å—ï¼šurllib</a></li>
<li><a href="https://requests.readthedocs.io/zh_CN/latest/">URLå¤„ç†ç¬¬ä¸‰æ–¹æ¨¡å—ï¼šrequests</a></li>
<li><a href="https://beautifulsoup.readthedocs.io/zh_CN/v4.4.0/">æ•°æ®æå–bs4æ¨¡å—ï¼šBeautifulSoup</a></li>
<li><a href="https://docs.python.org/zh-cn/3.7/library/re.html">æ•°æ®æå–æ­£åˆ™è¡¨è¾¾å¼æ¨¡å—ï¼šre</a></li>
<li><a href="https://www.jianshu.com/p/9135d7833d6d">æ•°æ®æå–æ¨¡å— ï¼šlxml</a></li>
<li><a href="https://docs.python.org/zh-cn/3.7/library/sqlite3.html">æ•°æ®åº“ä¿å­˜æ¨¡å—ï¼šsqlite3</a></li>
<li><a href="https://www.cnblogs.com/python-robot/p/9958352.html">æœ¬åœ°æ–‡ä»¶ä¿å­˜æ¨¡å—ï¼šxlwt</a></li>
</ul>
<h1 id="æ•°æ®çˆ¬å–ä¸è§£æ"><a href="#æ•°æ®çˆ¬å–ä¸è§£æ" class="headerlink" title="æ•°æ®çˆ¬å–ä¸è§£æ"></a>æ•°æ®çˆ¬å–ä¸è§£æ</h1><h2 id="æ•°æ®çˆ¬å–"><a href="#æ•°æ®çˆ¬å–" class="headerlink" title="æ•°æ®çˆ¬å–"></a>æ•°æ®çˆ¬å–</h2><p>æ•°æ®çˆ¬å–å·¥ä½œæ˜¯æ•´ä¸ªå·¥ç¨‹çš„ç¬¬ä¸€æ­¥ï¼Œè¿™ä¸€é˜¶æ®µæ‰€è¦åšçš„å·¥ä½œæ˜¯å°†ç½‘é¡µä¸Šå¸¦æœ‰æˆ‘ä»¬éœ€è¦çš„ä¿¡æ¯çš„ç½‘é¡µæºç æŠ“å–ä¸‹æ¥ã€‚<strong>å»ºè®®åœ¨æ­¤æ­¥éª¤æ—¶ï¼Œå¦‚æœæ•°æ®é‡ä¸å¤§å…¨éƒ¨æŠ“å–ä¿å­˜åˆ°æœ¬åœ°ï¼›å¦‚æœæ•°æ®é‡å¾ˆå¤§ï¼Œåˆ™å…ˆä¿å­˜ä¸€ç»„åˆ°å¤šç»„æ•°æ®åˆ°æœ¬åœ°</strong>ã€‚åœ¨æ¥ä¸‹çš„æ•°æ®è§£ææ—¶é€šè¿‡æœ¬åœ°æ–‡ä»¶è§£æï¼Œè¿™æ ·åšä¼šé¿å…åé¢å¤šæ¬¡è®¿é—®ç½‘ç«™è€Œè¢«å°ipï¼Œå½“ç„¶é’ˆå¯¹è¢«å°ipæœ‰ç›¸åº”çš„è§£å†³åŠæ³•ï¼Œä½†æ˜¯è¿™äº›å†…å®¹æ¶‰åŠåˆ°ç½‘ç»œçŸ¥è¯†ï¼Œå»ºè®®åé¢å†å­¦ã€‚</p>
<h3 id="urllibæ–¹æ³•"><a href="#urllibæ–¹æ³•" class="headerlink" title="urllibæ–¹æ³•"></a>urllibæ–¹æ³•</h3><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line">base_url = <span class="string">"https://movie.douban.com/top250?start="</span></span><br><span class="line">header = {</span><br><span class="line">    <span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.150 Safari/537.36"</span></span><br><span class="line">}</span><br><span class="line"><span class="comment">#æ„å»ºè¯·æ±‚</span></span><br><span class="line">req = urllib.request.Request(url=base_url,headers=header)</span><br><span class="line"><span class="comment">#å¾—åˆ°å“åº”</span></span><br><span class="line">response = urllib.request.urlopen(req)</span><br><span class="line">html = response.read().decode(<span class="string">"utf-8"</span>)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">"top250_first_page.html"</span>,<span class="string">"w"</span>,encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(html)</span><br></pre></td></tr></tbody></table></figure>
<h3 id="requestsæ–¹æ³•"><a href="#requestsæ–¹æ³•" class="headerlink" title="requestsæ–¹æ³•"></a>requestsæ–¹æ³•</h3><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">base_url = <span class="string">"https://movie.douban.com/top250?start="</span></span><br><span class="line">header = {</span><br><span class="line">    <span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.150 Safari/537.36"</span></span><br><span class="line">}</span><br><span class="line">response = requests.get(url=base_url,headers=header)</span><br><span class="line">data = response.content.decode()</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">"top250_first_page.html"</span>,<span class="string">"w"</span>,encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(data)</span><br></pre></td></tr></tbody></table></figure>
<h2 id="æ•°æ®è§£æ"><a href="#æ•°æ®è§£æ" class="headerlink" title="æ•°æ®è§£æ"></a>æ•°æ®è§£æ</h2><p>æ•°æ®è§£æä½œä¸ºç¬¬äºŒæ­¥æ˜¯æ•´ä¸ªå·¥ç¨‹çš„æ ¸å¿ƒï¼Œè¿™ä¸€æ­¥ç›´æ¥å†³å®šäº† æˆ‘ä»¬æ˜¯å¦èƒ½å¤Ÿåœ¨æµ·é‡çš„æ•°æ®ä¸­åªå¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„æ•°æ®ã€‚çˆ¬è™«ä¸­ä¸‰ç§é‡è¦çš„æ•°æ®è§£æçš„æ–¹æ³•åˆ†åˆ«æ˜¯ï¼šBeautifulSoupã€reæ­£åˆ™è¡¨è¾¾å¼å’Œxpathï¼Œä¸‰ç§æ–¹æ³•æ²¡æœ‰ä¼˜åŠ£å¥½åï¼ŒæŒ‰ç…§æˆ‘å‰é¢ç»™å‡ºçš„æ–‡æ¡£ï¼Œè‡ªå·±ç”¨å¥½ä¸€ç§å³å¯æ»¡è¶³éœ€æ±‚ï¼Œå½“ç„¶ä¸‰ç§æ–¹æ³•æ ¹æ®åœºæ™¯ä½¿ç”¨æ˜¯æœ€é«˜æ•ˆçš„ï¼Œå¦‚æœä½ æ˜¯å¤§ä½¬çš„è¯ğŸ‘ã€‚<br>æˆ‘è‡ªå·±å¸¸ç”¨çš„æ˜¯xpathæ–¹æ³•ã€‚ç¬¬ä¸€ï¼Œxpathè·¯å¾„å¯ä»¥ç›´æ¥åœ¨ç½‘é¡µä¸Šè¿›è¡Œå¤åˆ¶ï¼›ç¬¬äºŒï¼Œå¯ä»¥é€šè¿‡<a href="https://blog.csdn.net/heartbeat196/article/details/113790232">XPath Helperå·¥å…·</a>è¿›è¡Œæ›´å¥½çš„æµ‹è¯•ï¼Œæˆ‘åœ¨ä¹‹å‰çš„åšå®¢æœ‰æåˆ°å¯ä»¥<a href="https://blog.csdn.net/heartbeat196/article/details/113790232">ç‚¹å‡»</a>æŸ¥çœ‹ã€‚ä¸‹é¢æˆ‘ç”¨ä¸‰ç§ä¸åŒçš„æ–¹æ³•å¯¹ä¿å­˜åˆ°æœ¬åœ°çš„ä¸€é¡µä¸Šçš„æ•°æ®è¿›è¡Œäº†è§£æã€‚</p>
<h3 id="BeaufifulSoup"><a href="#BeaufifulSoup" class="headerlink" title="BeaufifulSoup"></a>BeaufifulSoup</h3><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="comment">#å°†è¦è§£æçš„ç½‘ç«™æ‰“å¼€</span></span><br><span class="line">html = <span class="built_in">open</span>(<span class="string">"top250_first_page.html"</span>,<span class="string">"rb"</span>)</span><br><span class="line"><span class="comment">#æ„å»ºBeautifulSoupå¯¹è±¡</span></span><br><span class="line">soup = BeautifulSoup(html,<span class="string">"html.parser"</span>)</span><br><span class="line"><span class="comment">#å¾—åˆ°æ¯ä¸€å—çš„å†…å®¹</span></span><br><span class="line">blocks = soup.select(<span class="string">".grid_view .item"</span>)</span><br><span class="line"><span class="comment">#æ„å»ºç”µå½±åˆ—è¡¨</span></span><br><span class="line">movie_list = []</span><br><span class="line"><span class="comment">#ç”µå½±é“¾æ¥å’Œç”µå½±å›¾ç‰‡é“¾æ¥</span></span><br><span class="line"><span class="keyword">for</span> index,block <span class="keyword">in</span> <span class="built_in">enumerate</span>(blocks):</span><br><span class="line">    movie_dict = {}</span><br><span class="line">    movie_dict[<span class="string">"movie_href"</span>] = block.select(<span class="string">"a"</span>)[<span class="number">0</span>].get(<span class="string">"href"</span>)       <span class="comment">#ç”µå½±è¯¦æƒ…é¡µé“¾æ¥</span></span><br><span class="line">    movie_dict[<span class="string">"pic_href"</span>] = block.select(<span class="string">"img"</span>)[<span class="number">0</span>].get(<span class="string">"src"</span>)        <span class="comment">#ç”µå½±é“¾æ¥</span></span><br><span class="line">    title = block.select(<span class="string">".title"</span>)                      <span class="comment">#ç”µå½±åå­—</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(title)==<span class="number">2</span>:</span><br><span class="line">        movie_dict[<span class="string">"c_title"</span>] = block.select(<span class="string">".title"</span>)[<span class="number">0</span>].text            <span class="comment">#ç”µå½±ä¸­æ–‡åå­—</span></span><br><span class="line">        o_title = block.select(<span class="string">".title"</span>)[<span class="number">1</span>].text            <span class="comment"># ç”µå½±ä¸­æ–‡åå­—</span></span><br><span class="line">        movie_dict[<span class="string">"o_title"</span>] = o_title.replace(<span class="string">"/"</span>,<span class="string">""</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        movie_dict[<span class="string">"c_title"</span>] = block.select(<span class="string">".title"</span>)[<span class="number">0</span>].text            <span class="comment">#ç”µå½±ä¸­æ–‡åå­—</span></span><br><span class="line">        movie_dict[<span class="string">"o_title"</span>] = <span class="string">" "</span>                                       <span class="comment">#ç”µå½±å¤–æ–‡åå­—</span></span><br><span class="line">    movie_dict[<span class="string">"rate"</span>] = block.select(<span class="string">".star .rating_num"</span>)[<span class="number">0</span>].text        <span class="comment">#ç”µå½±è¯„åˆ†</span></span><br><span class="line">    movie_dict[<span class="string">"judge"</span>] = block.select(<span class="string">".star span"</span>)[<span class="number">3</span>].text[:-<span class="number">3</span>]         <span class="comment">#è¯„åˆ†äººæ•°</span></span><br><span class="line">    bd = block.select(<span class="string">".bd p"</span>)[<span class="number">0</span>].text</span><br><span class="line">    movie_dict[<span class="string">"bd"</span>] = re.sub(<span class="string">" "</span>,<span class="string">""</span>,bd)</span><br><span class="line">    movie_dict[<span class="string">"inq"</span>] = block.select(<span class="string">".quote .inq"</span>)[<span class="number">0</span>].text.replace(<span class="string">"ã€‚"</span>,<span class="string">""</span>)</span><br><span class="line">    movie_list.append(movie_dict)</span><br><span class="line"><span class="comment">#æ‰“å°æµ‹è¯•</span></span><br><span class="line"><span class="built_in">print</span>(movie_list)</span><br></pre></td></tr></tbody></table></figure>
<h3 id="xpath"><a href="#xpath" class="headerlink" title="xpath"></a>xpath</h3><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="comment">#å°†è¦è§£æçš„ç½‘ç«™æ‰“å¼€</span></span><br><span class="line">html = <span class="built_in">open</span>(<span class="string">"top250_first_page.html"</span>,<span class="string">"rb"</span>)</span><br><span class="line">content = html.read().decode(<span class="string">"utf-8"</span>)</span><br><span class="line"><span class="comment">#æ„å»ºetreeå¯¹è±¡</span></span><br><span class="line">data = etree.HTML(content)</span><br><span class="line"><span class="comment">#è·å–å¤šä¸ªç”µå½±ä¿¡æ¯åˆ—è¡¨</span></span><br><span class="line">divs = data.xpath(<span class="string">'//div[@class="item"]'</span>)</span><br><span class="line"><span class="keyword">for</span> div <span class="keyword">in</span> divs:</span><br><span class="line">    movie_dict = { }</span><br><span class="line">    movie_dict[<span class="string">"movie_href"</span>] = div.xpath(<span class="string">'div[@class="pic"]/a/@href'</span>)</span><br><span class="line">    <span class="comment">#print(movie_href)          #æµ‹è¯•</span></span><br><span class="line">    movie_dict[<span class="string">"pic_href"</span>] = div.xpath(<span class="string">'div[@class="pic"]//img/@src'</span>)</span><br><span class="line">    <span class="comment">#print(pic_href)           #æµ‹è¯•</span></span><br><span class="line">    title = div.xpath(<span class="string">'div[@class="info"]//a/span[@class="title"]/text()'</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(title)==<span class="number">2</span>:</span><br><span class="line">        movie_dict[<span class="string">"c_title"</span>] = title[<span class="number">0</span>]</span><br><span class="line">        o_title = title[<span class="number">1</span>].replace(<span class="string">"/"</span>,<span class="string">""</span>)</span><br><span class="line">        movie_dict[<span class="string">"o_title"</span>] = <span class="string">""</span>.join(o_title.split())</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        movie_dict[<span class="string">"c_title"</span>] = title[<span class="number">0</span>]</span><br><span class="line">        movie_dict[<span class="string">"o_title"</span>] = <span class="string">" "</span></span><br><span class="line">    <span class="comment">#print(c_title,o_title)      #æµ‹è¯•</span></span><br><span class="line">    movie_dict[<span class="string">"rate"</span>] = div.xpath(<span class="string">'div//div[2]/div/span[2]/text()'</span>)</span><br><span class="line">    <span class="comment">#print(rate)                #æµ‹è¯•</span></span><br><span class="line">    judge = div.xpath(<span class="string">'div//div[2]/div/span[4]/text()'</span>)</span><br><span class="line">    movie_dict[<span class="string">"judge"</span>] = (<span class="built_in">str</span>(judge))[<span class="number">2</span>:-<span class="number">5</span>]</span><br><span class="line">    <span class="comment">#print(judge)                #æµ‹è¯•</span></span><br><span class="line">    bd = <span class="built_in">str</span>(div.xpath(<span class="string">'div//div[@class="bd"]/p[1]/text()'</span>))</span><br><span class="line">    movie_dict[<span class="string">"bd"</span>] = bd.replace(<span class="string">" "</span>,<span class="string">""</span>).replace(<span class="string">r"\xa0"</span>,<span class="string">""</span>).replace(<span class="string">r"\r"</span>,<span class="string">""</span>).replace(<span class="string">r"\n"</span>,<span class="string">""</span>)</span><br><span class="line">    <span class="comment">#print(bd)                   #æµ‹è¯•</span></span><br><span class="line">    <span class="built_in">print</span>(movie_dict)</span><br></pre></td></tr></tbody></table></figure>
<h3 id="reæ­£åˆ™è¡¨è¾¾å¼"><a href="#reæ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="reæ­£åˆ™è¡¨è¾¾å¼"></a>reæ­£åˆ™è¡¨è¾¾å¼</h3><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="comment">#å½±ç‰‡è¯¦æƒ…é“¾æ¥è§„åˆ™</span></span><br><span class="line">findLink = re.<span class="built_in">compile</span>(<span class="string">r'&lt;a href="(.*?)"&gt;'</span>)        <span class="comment">#åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œè¡¨ç¤ºè§„åˆ™ï¼ˆå­—ç¬¦ä¸²çš„æ¨¡å¼ï¼‰</span></span><br><span class="line"><span class="comment">#å½±ç‰‡å›¾ç‰‡è§„åˆ™</span></span><br><span class="line">findSrclink = re.<span class="built_in">compile</span>(<span class="string">r'&lt;img.*src="(.*?)"'</span>,re.S)</span><br><span class="line"><span class="comment">#å½±ç‰‡ç‰‡åè§„åˆ™</span></span><br><span class="line">findTitle = re.<span class="built_in">compile</span>(<span class="string">r'&lt;span class="title"&gt;(.*)&lt;/span&gt;'</span>)</span><br><span class="line"><span class="comment">#å½±ç‰‡çš„è¯„åˆ†è§„åˆ™</span></span><br><span class="line">findGrade = re.<span class="built_in">compile</span>(<span class="string">r'&lt;span class="rating_num" property="v:average"&gt;(.*)&lt;/span&gt;'</span>)</span><br><span class="line"><span class="comment">#è¯„ä»·äººæ•°è§„åˆ™</span></span><br><span class="line">findJud = re.<span class="built_in">compile</span>(<span class="string">r'&lt;span&gt;(.*)äººè¯„ä»·&lt;/span&gt;'</span>)</span><br><span class="line"><span class="comment">#æ‰¾åˆ°æ¦‚å†µ</span></span><br><span class="line">findInq = re.<span class="built_in">compile</span>(<span class="string">r'&lt;span class="inq"&gt;(.*)&lt;/span&gt;'</span>)</span><br><span class="line"><span class="comment">#å½±ç‰‡ç›¸å…³å†…å®¹</span></span><br><span class="line">findBd = re.<span class="built_in">compile</span>(<span class="string">r'&lt;p class=""&gt;(.*?)&lt;/p&gt;'</span>,re.S)</span><br><span class="line"><span class="comment">#å°†è¦è§£æçš„ç½‘ç«™æ‰“å¼€</span></span><br><span class="line">html = <span class="built_in">open</span>(<span class="string">"top250_first_page.html"</span>,<span class="string">"rb"</span>)</span><br><span class="line">content = html.read().decode(<span class="string">"utf-8"</span>)</span><br><span class="line">datalist = []</span><br><span class="line">soup = BeautifulSoup(content, <span class="string">"html.parser"</span>)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> soup.find_all(<span class="string">"div"</span>,class_ = <span class="string">"item"</span>):</span><br><span class="line">    item = <span class="built_in">str</span>(item)</span><br><span class="line">    <span class="comment">#print(html)                                             #æµ‹è¯•ç”µå½±ä¿¡æ¯çš„ä¸€å°æ®µæœ‰æ²¡æœ‰å†…è§£ææ‹¿åˆ°</span></span><br><span class="line">    data = [ ]</span><br><span class="line">    title = re.findall(findTitle,item)</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">len</span>(title)==<span class="number">2</span>):</span><br><span class="line">        Ctitle = title[<span class="number">0</span>]</span><br><span class="line">        data.append(Ctitle)</span><br><span class="line">        Ftitle = title[<span class="number">1</span>]</span><br><span class="line">        Ftitle = title[<span class="number">1</span>].replace(<span class="string">"/"</span>, <span class="string">""</span>)</span><br><span class="line">        Ftitle = <span class="string">""</span>.join(Ftitle.split())</span><br><span class="line">        data.append(Ftitle)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        Ctitle = title[<span class="number">0</span>]</span><br><span class="line">        data.append(Ctitle)</span><br><span class="line">        Ftitle = <span class="string">" "</span></span><br><span class="line">        data.append(Ftitle)</span><br><span class="line">    link = re.findall(findLink,item)[<span class="number">0</span>]</span><br><span class="line">    data.append(link)</span><br><span class="line">    srclink = re.findall(findSrclink,item)[<span class="number">0</span>]</span><br><span class="line">    data.append(srclink)</span><br><span class="line">    grade = re.findall(findGrade,item)[<span class="number">0</span>]</span><br><span class="line">    data.append(grade)</span><br><span class="line">    judge = re.findall(findJud,item)[<span class="number">0</span>]</span><br><span class="line">    data.append(judge)</span><br><span class="line">    inq = re.findall(findInq,item)[<span class="number">0</span>]</span><br><span class="line">    data.append(inq)</span><br><span class="line">    bd = re.findall(findBd,item)[<span class="number">0</span>]</span><br><span class="line">    bd = re.sub(<span class="string">'&lt;br(\s+)?/&gt;(\s+)?'</span>,<span class="string">" "</span>,bd)</span><br><span class="line">    bd = re.sub(<span class="string">"/"</span>,<span class="string">" "</span>,bd)</span><br><span class="line">    bd = <span class="string">""</span>.join(bd.split())</span><br><span class="line">    data.append(bd)</span><br><span class="line">    datalist.append(data)</span><br><span class="line"><span class="built_in">print</span>(datalist)            <span class="comment">#æµ‹è¯•æ‰€æœ‰åˆ—è¡¨æ˜¯å¦è¢«æ‰“å°</span></span><br></pre></td></tr></tbody></table></figure>
<h1 id="æ•°æ®å­˜å‚¨"><a href="#æ•°æ®å­˜å‚¨" class="headerlink" title="æ•°æ®å­˜å‚¨"></a>æ•°æ®å­˜å‚¨</h1><h2 id="æœ¬åœ°excelä¿å­˜"><a href="#æœ¬åœ°excelä¿å­˜" class="headerlink" title="æœ¬åœ°excelä¿å­˜"></a>æœ¬åœ°excelä¿å­˜</h2><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> xlwt</span><br><span class="line">workbook = xlwt.Workbook(encoding=<span class="string">"utf-8"</span>, style_compression=<span class="number">0</span>)</span><br><span class="line">worksheet = workbook.add_sheet(<span class="string">"è±†ç“£ç”µå½±250"</span>)</span><br><span class="line">col = [<span class="string">"ä¸­æ–‡å"</span>, <span class="string">"å¤–æ–‡å"</span>, <span class="string">"ç”µå½±é“¾æ¥"</span>, <span class="string">"å›¾ç‰‡é“¾æ¥"</span>, <span class="string">"è¯„åˆ†"</span>, <span class="string">"è¯„ä»·äººæ•°"</span>, <span class="string">"æ¦‚è¯„"</span>, <span class="string">"æ¦‚è¿°"</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">8</span>):</span><br><span class="line">    worksheet.write(<span class="number">0</span>, i, col[i])</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(datalist)):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">8</span>):</span><br><span class="line">        worksheet.write(i + <span class="number">1</span>, j, datalist[i][j])</span><br><span class="line">workbook.save(<span class="string">"è±†ç“£top250_firstPage.xls"</span>)</span><br></pre></td></tr></tbody></table></figure>
<h2 id="sqliteæ•°æ®åº“ä¿å­˜"><a href="#sqliteæ•°æ®åº“ä¿å­˜" class="headerlink" title="sqliteæ•°æ®åº“ä¿å­˜"></a>sqliteæ•°æ®åº“ä¿å­˜</h2><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sqlite3</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">init_db</span>(<span class="params">dbpath</span>):</span><br><span class="line">    sql = <span class="string">'''</span></span><br><span class="line"><span class="string">        create table movie250 </span></span><br><span class="line"><span class="string">        (</span></span><br><span class="line"><span class="string">        id integer primary key autoincrement,</span></span><br><span class="line"><span class="string">        info_link text,</span></span><br><span class="line"><span class="string">        pic_link text,</span></span><br><span class="line"><span class="string">        cname varchar,</span></span><br><span class="line"><span class="string">        ename varchar,</span></span><br><span class="line"><span class="string">        score numeric ,</span></span><br><span class="line"><span class="string">        rated numeric ,</span></span><br><span class="line"><span class="string">        instroduction text,</span></span><br><span class="line"><span class="string">        info text</span></span><br><span class="line"><span class="string">        )</span></span><br><span class="line"><span class="string">    '''</span>  <span class="comment"># åˆ›å»ºæ•°æ®è¡¨</span></span><br><span class="line">    conn = sqlite3.connect(dbpath)</span><br><span class="line">    cursor = conn.cursor()</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    conn.commit()</span><br><span class="line">    conn.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">saveData2DB</span>(<span class="params">datalist, dbpath</span>):</span><br><span class="line">    <span class="comment">#init_db(dbpath)</span></span><br><span class="line">    conn = sqlite3.connect(dbpath)</span><br><span class="line">    cur = conn.cursor()</span><br><span class="line">    <span class="keyword">for</span> data <span class="keyword">in</span> datalist:</span><br><span class="line">        <span class="keyword">for</span> index <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(data)):</span><br><span class="line">        	data[index] = <span class="string">'"'</span> + data[index] + <span class="string">'"'</span></span><br><span class="line">        sql = <span class="string">'''</span></span><br><span class="line"><span class="string">                insert into movie250 (</span></span><br><span class="line"><span class="string">                info_link,pic_link,cname,ename,score,rated,instroduction,info) </span></span><br><span class="line"><span class="string">                values(%s)'''</span> % <span class="string">","</span>.join(data)</span><br><span class="line">        cur.execute(sql)</span><br><span class="line">        conn.commit()</span><br><span class="line">    cur.close()</span><br><span class="line">    conn.close()</span><br><span class="line">saveData2DB(datalist,<span class="string">"movie.db"</span>)</span><br></pre></td></tr></tbody></table></figure>
<h3 id="ç»“æœå±•ç¤º"><a href="#ç»“æœå±•ç¤º" class="headerlink" title="ç»“æœå±•ç¤º"></a>ç»“æœå±•ç¤º</h3><p><img src="/images/item/douban-1.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="/images/item/douban-2.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h1 id="æ•°æ®å¯è§†åŒ–"><a href="#æ•°æ®å¯è§†åŒ–" class="headerlink" title="æ•°æ®å¯è§†åŒ–"></a>æ•°æ®å¯è§†åŒ–</h1><h2 id="Flask"><a href="#Flask" class="headerlink" title="Flask"></a><a href="https://dormousehole.readthedocs.io/en/latest/">Flask</a></h2><p>Flask æ˜¯ä¸€ä¸ªå¾®å‹çš„ Python å¼€å‘çš„ Web æ¡†æ¶ï¼ŒåŸºäºWerkzeug WSGIå·¥å…·ç®±å’ŒJinja2 æ¨¡æ¿å¼•æ“ã€‚ Flaskä½¿ç”¨BSDæˆæƒã€‚ Flaskä¹Ÿè¢«ç§°ä¸ºâ€œmicroframeworkâ€ï¼Œå› ä¸ºå®ƒä½¿ç”¨ç®€å•çš„æ ¸å¿ƒï¼Œç”¨extensionå¢åŠ å…¶ä»–åŠŸèƒ½ã€‚Flaskæ²¡æœ‰é»˜è®¤ä½¿ç”¨çš„æ•°æ®åº“ã€çª—ä½“éªŒè¯å·¥å…·ã€‚<br>ç®€å•æ¥è¯´åœ¨æ­¤é¡¹ç›®ä¸­ï¼ŒFlaskæ¡†æ¶ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæœ¬åœ°ç½‘é¡µå¹³å°å±•ç¤ºæ•°æ®ã€‚æˆ‘ä»¬æ ¹æ®ä¸åŒçš„è·¯ç”±åœ°å€è¿›è¡Œåˆ°ä¸åŒçš„é¡µé¢è®¿é—®ã€‚å¦‚ä¸‹å›¾æ˜¯é¦–ç•Œé¢ï¼Œé€šè¿‡ä¸åŒçš„é“¾æ¥åœ°å€å¯ä»¥å®ç°é¡µé¢è·³è½¬ï¼Œå½“ç„¶åªæ˜¯æœ¬åœ°ï¼<br><img src="/images/item/douban-3.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="Echarts"><a href="#Echarts" class="headerlink" title="Echarts"></a><a href="https://echarts.apache.org/en/index.html">Echarts</a></h2><p>Echartsæ˜¯ä¸€ä¸ªçº¯åŸºäºjsçš„å›¾è¡¨åº“ï¼Œå¯ä»¥æµç•…çš„è¿è¡Œåœ¨ PC å’Œç§»åŠ¨è®¾å¤‡ä¸Šã€‚åœ¨æœ¬é¡¹ç›®ä¸­å¯ä»¥å°†æ•°æ®è¿›è¡Œç»Ÿè®¡åˆ†ç±»ä»è€Œç”¨ä¸åŒçš„å±•ç¤ºæ–¹æ³•è¿›è¡Œå±•ç°ã€‚åœ¨Echartsä¸­å¯ä»¥æ”¯æŒçš„å›¾è¡¨ç±»å‹æœ‰å¾ˆå¤šï¼ŒåŒæ—¶å…¶æœ‰ä¸€ä¸ªå¾ˆå¥½çš„ç‚¹åœ¨äºå®ƒèƒ½æ»¡è¶³æˆ‘ä»¬å®æ—¶ä¿®æ”¹æŸ¥çœ‹ï¼Œæœ€ç»ˆå½¢æˆè‡ªå·±æƒ³è¦çš„å›¾ï¼Œä¾¿å°†jsä»£ç å¤åˆ¶ç²˜è´´åˆ°æˆ‘ä»¬æ‰€éœ€è¦çš„ç½‘é¡µä»£ç çš„åœ°æ–¹ã€‚<br>ç”±äºåœ¨é¡µé¢å†…æœ‰åŠ¨æ€æ˜¾ç¤ºï¼Œæ‰€ä»¥ä¸åœ¨è¿›è¡Œå±•ç¤ºã€‚</p>
<h2 id="WordCloud"><a href="#WordCloud" class="headerlink" title="WordCloud"></a>WordCloud</h2><p>è¯äº‘å±•ç¤ºæ–¹æ³•æ˜¯è¿‘äº›å¹´æ¥è¾ƒä¸ºå¸¸ç”¨çš„æ•°æ®å¯è§†åŒ–æ–¹æ³•ã€‚å…¶ä¸»è¦æ˜¯é€šè¿‡åˆ†è¯æŠ€æœ¯å°†ä¸€ç¯‡æ–‡ç« æˆ–è€…ä¸€æ®µè¯åˆ†æˆè‹¥å¹²å•è¯ï¼Œç„¶åç»Ÿè®¡è¿™äº›è¯å‡ºç°çš„é¢‘ç‡ï¼Œæˆ‘ä»¬æ ¹æ®è‡ªå®šä¹‰åŒ–è®¾ç½®ç”»å¸ƒå’Œè¿™äº›è¯å‡ºç°çš„é¢œè‰²å¤§å°ç­‰ç­‰æ¥å¾—åˆ°æŸä¸ªè¯äº‘ã€‚è¯äº‘ä¸­é‡è¦çš„æ˜¯ç”»å¸ƒçš„é…ç½®ã€è‡ªå·±æ‰€è¦å®šä¹‰çš„å½¢å¼æ˜¯ä»€ä¹ˆæ ·å­ï¼Œå…¶ä»–æ›´å¤šçš„æ˜¯æŸäº›å›ºå®šçš„æ–¹æ³•ã€‚ä¸‹å›¾ä¸ºæˆ‘é€šè¿‡çˆ¬å–æ¯›ä¸æ˜“çš„æ­Œè¯å†…å®¹è·å¾—æ¯›ä¸æ˜“çš„æ­Œè¯è¯äº‘å›¾ï¼Œå¦‚æœéœ€è¦æ­¤é¡¹ç›®æºç æˆ–è€…æ–¹æ³•è¯·ç§ä¿¡ã€‚<br><img src="/images/item/douban-4.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h1 id="æ–°æ‰‹é—®é¢˜æ€»ç»“ä¸è§£å†³æ–¹æ³•"><a href="#æ–°æ‰‹é—®é¢˜æ€»ç»“ä¸è§£å†³æ–¹æ³•" class="headerlink" title="æ–°æ‰‹é—®é¢˜æ€»ç»“ä¸è§£å†³æ–¹æ³•"></a>æ–°æ‰‹é—®é¢˜æ€»ç»“ä¸è§£å†³æ–¹æ³•</h1><h2 id="ipè¢«å°"><a href="#ipè¢«å°" class="headerlink" title="ipè¢«å°"></a>ipè¢«å°</h2><p>ipè¢«å°å¯èƒ½æ˜¯æ–°æ‰‹åœ¨çˆ¬è™«å­¦ä¹ é˜¶æ®µé‡åˆ°çš„æœ€å¤§çš„é—®é¢˜ã€‚é¦–å…ˆå¦‚æœæ˜¯åˆå­¦æƒ³è¦å°½å¿«å®ç°ä¸€äº›æˆæœæ—¶ï¼Œå»ºè®®åœ¨åˆç†èŒƒå›´å†…å‡å°‘çˆ¬å–æ¬¡æ•°ï¼Œå¦‚æœæˆ‘ä»¬èƒ½è·å¾—ç½‘é¡µå†…å®¹äº†é¦–å…ˆå°†å…¶å­˜åˆ°æœ¬åœ°æ–‡ä»¶å¤¹ä¸‹è¿›è¡Œåç»­çš„æµ‹è¯•å’Œè§£æã€‚ä¿—è¯è¯´ï¼šä¸Šæœ‰æ”¿ç­–ä¸‹æœ‰å¯¹ç­–ï¼Œé¢å¯¹ipè¢«å°ï¼šåŸºç¡€é˜¶æ®µæˆ‘ä»¬å¯ä»¥æ·»åŠ è¯·æ±‚å¤´ï¼Œå°½å¯èƒ½çš„è¿›è¡Œä¼ªè£…åƒä¸€ä¸ªæµè§ˆå™¨åœ¨è®¿é—®ï¼›å†è¿›ä¸€æ­¥æˆ‘ä»¬å¯ä»¥è‡ªå·±æ„å»ºä»£ç†ipå‡½æ•°ï¼Œä»¿ç…§æºç æ·»åŠ å…è´¹ipï¼Œæ„å»ºhandlerå¤„ç†å™¨ä½¿ç”¨openeræ–¹æ³•ä¹Ÿå¯ä»¥ï¼›å¦‚æœæœ‰èƒ½åŠ›çš„è¯ï¼Œå¯ä»¥å­¦ä¹ ä»£ç†ipæ± çš„æ–¹æ³•æ¥è§£å†³è¯¥é—®é¢˜ã€‚<br>å½“ç„¶ï¼Œçˆ¬è™«æˆ‘ä»¬æ˜¯è¦åœ¨åˆæ³•èŒƒå›´å†…è¿›è¡ŒæŠ“å–ï¼Œå¦‚æœæŸäº›æ•°æ®æ˜¯æœºå¯†æˆ–è€…ä¸èƒ½è®¿é—®çš„ï¼Œæˆ‘ä»¬è¿˜ä¸€ç›´è®¿é—®å¯èƒ½å°±å¾ˆå¿«æœ‰è‡ªå·±çš„å°æ‰‹é•¯å­äº†ğŸ”“ã€‚æˆ‘ä»¬åªçˆ¬å–æˆ‘ä»¬å¯ä»¥è®¿é—®åˆ°çš„ï¼Œçˆ¬è™«åªæ˜¯æé«˜æ•ˆç‡ï¼Œä¸æ˜¯ç¿»è¿‡ç¦å¢™ã€‚</p>
<h2 id="æŸ¥çœ‹ç½‘é¡µæºç å’Œâ€F12-Elementsâ€åä¸ä¸€è‡´"><a href="#æŸ¥çœ‹ç½‘é¡µæºç å’Œâ€F12-Elementsâ€åä¸ä¸€è‡´" class="headerlink" title="æŸ¥çœ‹ç½‘é¡µæºç å’Œâ€F12 Elementsâ€åä¸ä¸€è‡´"></a>æŸ¥çœ‹ç½‘é¡µæºç å’Œâ€F12 Elementsâ€åä¸ä¸€è‡´</h2><p>è¯¥é—®é¢˜å¯ä»¥æ€»ç»“ä¸ºç”¨ä¸€èˆ¬æ–¹æ³•æœ‰äº›éœ€è¦çš„å…ƒç´ æŠ“å–ä¸åˆ°ã€‚åœ¨æœ¬æ¬¡é¡¹ç›®ä¸­æˆ‘ä»¬çˆ¬å–çš„é¡µé¢æ˜¯é™æ€ç½‘é¡µæ‰€ä»¥å¯ä»¥ç›´æ¥æŠ“å–ï¼Œä½†æ˜¯å¯¹äºåŠ¨æ€ç½‘é¡µå°±ä¼šæ— èƒ½ä¸ºåŠ›ã€‚<br>æŸ¥çœ‹ç½‘é¡µæºç ï¼šæœ€åŸå§‹çš„ä»£ç ï¼ŒæŒ‡çš„æ˜¯æœåŠ¡å™¨ç›´æ¥å‘é€åˆ°æµè§ˆå™¨çš„ä»£ç ã€‚<br>F12æ£€æŸ¥å…ƒç´ ï¼šjsæ¸²æŸ“åçš„ä»£ç ã€‚è€Œç¡®å®çš„éƒ¨åˆ†å°±æ˜¯jsæ‰€æ¸²æŸ“çš„ã€‚<br>å¦‚æœæˆ‘ä»¬æƒ³è¦æŠ“å–è¿™éƒ¨åˆ†ä»£ç å¯ä»¥é‡‡å–ä»¥ä¸‹ä¸¤ç§æ–¹æ³•ï¼š</p>
<ol>
<li>åœ¨é¡µé¢ä¸Šè¿›è¡ŒæŠ“åŒ…ï¼Œè·å–è¡¨å•çš„å…ƒç´ å’Œjsé“¾æ¥æäº¤è¯·æ±‚</li>
<li>é€šè¿‡seleniumæŠ€æœ¯ï¼Œæ¨¡æ‹Ÿç”¨æˆ·æ‰“å¼€ç½‘é¡µï¼Œè¿›è¡Œè‡ªåŠ¨åŒ–çš„æŠ“å–ã€‚</li>
</ol>
<h2 id="å…¶ä»–é—®é¢˜"><a href="#å…¶ä»–é—®é¢˜" class="headerlink" title="å…¶ä»–é—®é¢˜"></a>å…¶ä»–é—®é¢˜</h2><p>ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜æ˜¯æˆ‘åœ¨è¿™ä¸ªé¡¹ç›®ä¸­æ‰€é‡åˆ°çš„ï¼Œå½“ç„¶åœ¨é¢å¯¹æ›´å¤æ‚çš„çˆ¬è™«å·¥ä½œæ—¶ï¼Œä¼šæœ‰æ›´åŠ ç¹ççš„é—®é¢˜å‡ºç°ã€‚è¿˜æœ‰ä¸€äº›å…¶ä»–é—®é¢˜ï¼Œæˆ‘å°†å…¶æ€»ç»“ä¸ºåŸºç¡€çŸ¥è¯†é—®é¢˜ã€‚åœ¨å¾ˆå¤šåˆå­¦çš„æ—¶å€™ï¼Œæˆ‘ä»¬è·å¾—çš„æ•°æ®å¾€å¾€ä»¥ä¸åŒçš„æ ¼å¼è¿›è¡Œå­˜å‚¨ï¼Œä½†æ˜¯æŸäº›æ–¹æ³•åªèƒ½é’ˆå¯¹æŸäº›å›ºå®šæ•°æ®æ ¼å¼ï¼Œè¿™äº›éœ€è¦æˆ‘ä»¬æèµ·æ³¨æ„ï¼›è¿˜æœ‰å°±æ˜¯æˆ‘ä»¬ä¸å¯é¿å…çš„é©¬è™é—®é¢˜ï¼Œå…³é”®è¯æ‹¼å†™é”™è¯¯ï¼Œå˜é‡ä¹¦å†™é”™è¯¯ç­‰ç­‰ï¼Œè¿™äº›æœ€å¥½çš„è§£å†³åŠæ³•å°±æ˜¯å­°èƒ½ç”Ÿå·§ã€‚<br>æœ€åå°±æ˜¯å»ºè®®å¤§å®¶åœ¨å®Œæˆä¸€ä¸ªé¡¹ç›®æ—¶é€‰æ‹©åˆ†å—æŒ‰ç…§ä¸åŒçš„æ¨¡å—å»ç»ƒä¹ æµ‹è¯•ï¼Œæœ€ç»ˆå®Œæˆé¡¹ç›®ã€‚</p>
]]></content>
      <categories>
        <category>Item</category>
      </categories>
  </entry>
  <entry>
    <title>æ™ºèƒ½å®¶å±…æ¨¡å‹è®¾è®¡</title>
    <url>/2022/12/03/item/smartHome/</url>
    <content><![CDATA[<h1 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h1><p>ä¼´éšç€é€šä¿¡æŠ€æœ¯çš„ä¸æ–­å‘å±•å’Œç¤¾ä¼šç¯å¢ƒçš„è¿›æ­¥ï¼Œäººä»¬å¯¹æ›´æ™ºèƒ½åŒ–çš„ç”Ÿæ´»æœ‰äº†æ›´é«˜çš„è¿½æ±‚ã€‚ç‰©è”ç½‘æ™ºèƒ½å®¶å±…å·²ç»ä¸èƒ½ç®—æ˜¯æ–°é²œçš„åè¯äº†ï¼Œå…¶å•å“åŠäº’è”åº”ç”¨ä¹Ÿéƒ½å·²ç»éå¸¸å¹¿æ³›äº†ã€‚æœ¬è®¾è®¡åŸºäºSTM32å•ç‰‡æœºï¼Œé€šè¿‡ESP8266æ— çº¿é€šä¿¡æ¨¡å—ä»¥åŠè¿æ¥ç›¸åº”çš„ä¼ æ„Ÿå™¨åŠå¤–è®¾å¯¹æ™ºèƒ½å®¶å±…çš„åœºæ™¯è¿›è¡Œæ¨¡æ‹Ÿã€‚æœ¬æ–‡æœ€åˆå†™äºä»Šå¹´6æœˆï¼Œç°åœ¨ä»äº‹åµŒå…¥å¼å·¥ä½œä¸€æ®µæ—¶é—´åç°åœ¨å†æ¬¡å°†æˆ‘çš„æ¯•ä¸šè®¾è®¡é‡æ–°è¿›è¡Œæ•´ç†å’Œæ€è€ƒï¼Œå¸Œæœ›èƒ½å¯¹è¯»è€…æœ‰æ‰€å¸®åŠ©ï¼</p>
<h1 id="è®¾è®¡æ€è·¯"><a href="#è®¾è®¡æ€è·¯" class="headerlink" title="è®¾è®¡æ€è·¯"></a>è®¾è®¡æ€è·¯</h1><p>å¯¹äºä»»ä½•ä¸€ä¸ªé¡¹ç›®æˆ–è€…å·¥ç¨‹çš„å¼€å§‹ç¬¬ä¸€æ­¥æ°¸è¿œæ˜¯å…ˆæ˜ç¡®éœ€æ±‚ï¼ŒçŸ¥é“è‡ªå·±åšæˆä»€ä¹ˆæ ·å­çš„ä¸œè¥¿ã€‚åœ¨æˆ‘å‚è€ƒäº†ä¸€äº›èµ„æ–™å¹¶é˜…è¯»äº†å‡ ç¯‡æ–‡çŒ®åï¼Œå¯¹å…¶æœ‰äº†åˆè®¤è¯†ã€‚æˆ‘ç†è§£çš„æ™ºèƒ½å®¶å±…å°±æ˜¯ä»æ„ŸçŸ¥å±‚å‡ºå‘å¯¹ç¯å¢ƒè¿›è¡Œç›‘æµ‹ï¼Œé€šè¿‡ä¼ è¾“å±‚éµä»ä¸€å®šçš„ç½‘ç»œåè®®å¯¹æ•°æ®è¿›è¡Œä¼ è¾“åŒæ—¶é€šè¿‡è½¯ä»¶å¯¹æ•°æ®è¿›è¡Œæ•´ç†åˆ†æï¼Œå¹¶åœ¨åº”ç”¨å±‚ï¼ˆå®¶å…·çŠ¶æ€ï¼‰åšå‡ºç›¸åº”çš„åŠ¨ä½œã€‚æœ€ç»ˆæˆ‘å°†è¯¥æµç¨‹æ•´ç†æˆä¸‹å›¾æ‰€ç¤ºçš„å®ç‰©æ¨¡æ‹Ÿï¼Œè¿›è€Œå¯¹å…¶è¿›è¡Œæ¨¡å—çš„æŠ½è±¡ã€‚åŸºäºæ­¤ï¼Œè¿›è¡Œä¸‹é¢çš„ç¡¬ä»¶è®¾è®¡é€‰å‹åŠè½¯ä»¶å®ç°ç­‰ç­‰ã€‚<br><img src="/images/item/smarthome-1.png"></p>
<h1 id="ç¡¬ä»¶è®¾è®¡"><a href="#ç¡¬ä»¶è®¾è®¡" class="headerlink" title="ç¡¬ä»¶è®¾è®¡"></a>ç¡¬ä»¶è®¾è®¡</h1><h2 id="ç¡¬ä»¶é€‰å‹åŸåˆ™"><a href="#ç¡¬ä»¶é€‰å‹åŸåˆ™" class="headerlink" title="ç¡¬ä»¶é€‰å‹åŸåˆ™"></a>ç¡¬ä»¶é€‰å‹åŸåˆ™</h2><p>ç”±äºè¯¥é¡¹ç›®æ˜¯æ¨¡å‹è®¾è®¡ï¼Œå¯¹äºç¡¬ä»¶çš„é€‰å‹æ•´ä½“ä¸Šæ˜¯ä»¥==ä½æˆæœ¬ã€ä½åŠŸè€—ã€é«˜é›†æˆã€é«˜ä»¿çœŸåº¦==ä¸ºåŸåˆ™çš„ã€‚</p>
<ul>
<li>æ»¡è¶³åŠŸèƒ½åŠæ€§èƒ½éœ€æ±‚ã€‚æœ¬è®¾è®¡çš„ä¾§é‡ç‚¹ä¸åœ¨äºæ•°æ®çš„ç²¾ç¡®å’Œæ§åˆ¶çš„çµæ•ï¼Œæ•…æ²¡æœ‰ä¸¥æ ¼å‚æ•°è¦æ±‚ã€‚</li>
<li>æ˜“ä¸Šæ‰‹çš„â€œå¤§ä¼—â€äº§å“ã€‚å¯¹äºè¿™äº›å…ƒä»¶æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„æ‰¾åˆ°ç›¸å…³èµ„æ–™ï¼Œè€Œä¸”é¿å…è¸©å‘ã€‚</li>
<li>å…¼å®¹æ€§ã€‚ç”±äºæ˜¯æ¨¡å—åŒ–è®¾è®¡ï¼Œå¯¹äºéƒ¨åˆ†æ¨¡å—çš„å…¼å®¹æ€§æ˜¯è¦æœ‰ä¸€å®šçš„è¦æ±‚çš„ã€‚</li>
</ul>
<h2 id="ç¡¬ä»¶é€‰å‹"><a href="#ç¡¬ä»¶é€‰å‹" class="headerlink" title="ç¡¬ä»¶é€‰å‹"></a>ç¡¬ä»¶é€‰å‹</h2><p>å¦‚ä¸‹æ˜¯å¯¹äºç¡¬ä»¶çš„é€‰å‹åŠç›¸å…³ä»‹ç»ï¼Œæœ€åé™„æœ‰ä¸€å¼ æ‰€æœ‰ç”¨åˆ°çš„ç¡¬ä»¶çš„å›¾ç‰‡ã€‚</p>
<p><em><strong>1. ä¸»æ§æ¨¡å—â€”-STM32F103C8T6</strong></em></p>
<p>   æˆ‘ç›¸ä¿¡51åº”è¯¥æ˜¯å¤§éƒ¨åˆ†ç”µå­åŒå­¦å…¥æ‰‹çš„ç¬¬ä¸€æ¬¾å•ç‰‡æœºã€‚è¯šç„¶ï¼Œ51æœ‰å…¶çµæ´»è½»å·§ä¹‹å¤„ï¼Œä½†æ˜¯stm32å…·æœ‰å¼ºå¤§å¤–è®¾æ¥å£å’Œè¾ƒé«˜çš„è¿è¡Œé€Ÿåº¦ï¼ˆSTM32F103çš„CPUæœ€é«˜é€Ÿåº¦è¾¾72 MHzï¼Œå…·æœ‰16KB ~ 1MB Flashã€å¤šç§æ§åˆ¶å¤–è®¾ã€USBå…¨é€Ÿæ¥å£å’ŒCANï¼›å¤šè¾¾112ä¸ªå¿«é€ŸI/Oå£ã€11ä¸ªå®šæ—¶å™¨å’Œ13ä¸ªé€šä¿¡æ¥å£ï¼‰ æ­¤å¤–STM32è¿˜æä¾›äº†ä¸‰ç§çœç”µæ¨¡å¼å’Œä¸¤ç§è°ƒè¯•æ–¹å¼ã€‚å…¶çµæ´»çš„è°ƒè¯•æ–¹æ³•ã€å¤šæ ·çš„åŠŸèƒ½ç‰¹ç‚¹å’Œè¾ƒä¼˜çš„æ€§èƒ½å‚æ•°åŒæ ·ä¹Ÿæ˜¯é€‰æ‹©STM32ä½œä¸ºä¸»æ§èŠ¯ç‰‡çš„åŸå› ã€‚  </p>
<p><em><strong>2. æ— çº¿é€šä¿¡æ¨¡å—â€”-ESP01Sæ— çº¿é€šä¿¡æ¨¡å—</strong></em></p>
<p>   åŸºäºæ­¤æ¨¡å—é¦–å…ˆè€ƒè™‘çš„æ˜¯é€šä¿¡æ–¹å¼ï¼Œå¦‚æœä¸è°ˆåº”ç”¨åœºæ™¯ï¼Œæ¯”è¾ƒä¼ è¾“é€Ÿåº¦ã€ä¼ è¾“è·ç¦»å’Œå®‰å…¨æ€§ï¼Œzigbeeå’Œè“ç‰™ä¼šæ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚ä½†æ˜¯åœ¨æ™ºèƒ½å®¶å±…çš„åœºæ™¯ä¸‹ï¼Œwifiæ— ç–‘ä¼šæ˜¯æ›´ä¼˜é€‰ï¼Œå› ä¸ºå½“ä¸‹wifiå·²ç»åŸºæœ¬æ™®åŠåˆ°äº†æ¯ä¸ªå®¶åº­ï¼Œæ¨¡æ‹Ÿè¿˜åŸåº¦ä¼šæ›´é«˜ã€‚æ¥ä¸‹æ¥æ˜¯å…·ä½“èŠ¯ç‰‡çš„é€‰æ‹©ï¼Œå®‰ä¿¡å¯çš„ESP8266æ¨¡ç»„å¾ˆå¤šéƒ½å¯ä»¥åœ¨è¯¥åœºæ™¯ä¸‹åº”ç”¨ï¼Œå…¶å…·ä½“çš„åŒºåˆ†ä¸»è¦ä½“ç°åœ¨å°è£…æ–¹å¼ã€ç¡¬ä»¶é…ç½®ã€èµ„æºå¼•è„šç­‰ç­‰æ–¹é¢ã€‚å…·ä½“çš„åŒºåˆ†å¯ä»¥å‚è€ƒå®‰ä¿¡å¯å®˜ç½‘ç»™å‡ºçš„æ–‡æ¡£è¯´æ˜ï¼Œ<a href="https://www.ai-thinker.com/product/esp8266">please click</a>ï¼</p>
<p><em><strong>3. ç¯å¢ƒç›‘æµ‹æ¨¡å—</strong></em></p>
<ul>
<li><p>æ¸©æ¹¿åº¦ç›‘æµ‹â€”-DHT11</p>
<blockquote>
<p>  DHT11æ˜¯ä¸€æ¬¾æœ‰å·²æ ¡å‡†æ•°å­—ä¿¡å·è¾“å‡ºçš„æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ã€‚æ­¤ä¼ æ„Ÿå™¨ä½¿ç”¨èµ·æ¥ç®€å•ï¼Œç²¾åº¦å’Œæ€§èƒ½å‚æ•°è¶³å¤Ÿæ»¡è¶³ç¯å¢ƒç›‘æµ‹çš„åœºæ™¯ã€‚å…¶éµä»å•æ€»çº¿åè®®ï¼Œæœ‰ä¸¥æ ¼çš„æ—¶åºè¦æ±‚ã€‚ä¸»æœºå…ˆè¦å‘é€ä¸€ä¸ªè‡³å°‘18msçš„ä½ç”µå¹³ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒDHT11å†…éƒ¨å®ŒæˆADè½¬æ¢ç­‰æ“ä½œï¼Œå½“ä¸»æœºæ‹‰é«˜åï¼Œæœ‰20-40usæ—¶é—´ï¼Œè¿™ä¸ªæ—¶é—´ç”¨äºä¸»æœºåšè¾“å…¥è¾“å‡ºåˆ‡æ¢ï¼Œå½“ä¸»æœºé‡Šæ”¾æ€»çº¿æ§åˆ¶æƒï¼ˆæ­¤æ—¶ä¸»æœºä¸ºè¾“å…¥çŠ¶æ€ï¼Œæ€»çº¿è¢«ä¸Šæ‹‰ç”µé˜»æ‹‰é«˜ï¼‰ï¼ŒDHT11å°è¯•å°†æ€»çº¿æ‹‰ä½ï¼ŒæˆåŠŸæ‹‰ä½åå°±å¼€å§‹å‡†å¤‡å‘é€æ•°æ®äº†ï¼Œå†æ‹‰é«˜ä¸€æ¬¡å°±å¼€å§‹ä¼ è¾“æ•°æ®äº†ã€‚</p>
</blockquote>
</li>
<li><p>ç©ºæ°”è´¨é‡ç›‘æµ‹â€”-MQ135<br> &gt; MQç³»åˆ—ä¼ æ„Ÿå™¨æ˜¯ç›‘æµ‹ç©ºæ°”ç¯å¢ƒæœ€å¸¸ç”¨çš„ä¼ æ„Ÿå™¨ï¼Œå¤§æ¦‚åå‡ ä¸ªéƒ½æ˜¯é’ˆå¯¹ä¸åŒæ±¡æŸ“ç‰©è¿›è¡Œæ£€æµ‹çš„ï¼Œæœ¬æ¬¡å®éªŒæˆ‘ä»¬é‡‡ç”¨çš„æ˜¯MQ135ï¼Œä¸»è¦é’ˆå¯¹æ°¨æ°”ã€è‹¯ã€é…’ç²¾ã€çƒŸé›¾é¢—ç²’è¿›è¡Œç©ºæ°”è´¨é‡æ£€æµ‹ï¼ŒåŒæ ·æ ¹æ®è‡ªå·±çš„éœ€æ±‚å¯ä»¥é€‰æ‹©å…¶ä»–å‹å·çš„ä¼ æ„Ÿå™¨å§ï¼Œæ¯”å¦‚çƒŸé›¾ã€é…’ç²¾ã€ä¸€æ°§åŒ–ç¢³ç­‰ç­‰ã€‚</p>
</li>
<li><p>å…‰ç…§ç›‘æµ‹â€”-BH1750</p>
<blockquote>
<p> BH1750ä¼ æ„Ÿå™¨æœ‰æ¥è¿‘è§†è§‰çµæ•åº¦çš„å…‰è°±çµæ•åº¦ç‰¹æ€§ï¼Œå®ƒæ”¯æŒI2CBUSæ¥å£ï¼Œæ”¯æŒ1.8vé€»è¾‘è¾“å…¥æ¥å£ã€‚ä¼ æ„Ÿå™¨æœ‰ä¸¤ç§å¯é€‰çš„I2Cslaveåœ°å€ï¼Œæ— éœ€å…¶ä»–å¤–éƒ¨ä»¶ã€‚å…‰æºä¾èµ–æ€§å¼±ï¼Œå—çº¢å¤–çº¿å½±å“å¾ˆå°ã€‚ä¼ æ„Ÿå™¨é€šè¿‡é™ä½åŠŸç‡åŠŸèƒ½ï¼Œå®ç°ä½ç”µæµåŒ–ã€‚</p>
</blockquote>
</li>
</ul>
<p><em><strong>4. æ•°æ®å±•ç¤ºæ¨¡å—â€”-OLED</strong></em></p>
<p>   æ•°æ®æ˜¾ç¤ºæ— éå°±æ˜¯OLEDã€LCDã€TFTå±å¹•ç­‰ç­‰ã€‚è¯¥æ¨¡å—çš„ä½œç”¨æ˜¯å¯¹ç›‘æµ‹åˆ°çš„ç¯å¢ƒæ•°æ®åŠå®¶å…·çš„çŠ¶æ€è¿›è¡Œå®æ—¶æ˜¾ç¤ºã€‚OLEDç›¸è¾ƒäºLCDå±å¹•åˆ™ä¸éœ€è¦èƒŒå…‰å±‚ï¼ŒåŒæ ·ä¹Ÿä¸éœ€è¦å‘å‡ºå…‰äº®çš„æ¶²æ™¶å±‚ï¼›è€Œç›¸è¾ƒäºTFTæœ‰æ›´é«˜çš„æ€§ä»·æ¯”ï¼Œæœ€ç»ˆé€‰æ‹©äº†0.96å¯¸OLEDå±å¹•ã€‚</p>
<p><em><strong>5. å®¶å…·æ¨¡æ‹Ÿæ¨¡å—</strong></em></p>
<p>   å®¶å…·æ¨¡æ‹Ÿæ¨¡å—ä¸»è¦æ˜¯æ¨¡æ‹Ÿåˆ°äº†é—¨ã€çª—ã€ç¯å’Œé£æ‰‡ã€‚å…·ä½“æ˜¯é€šè¿‡æ­¥è¿›ç”µæœºã€èˆµæœºã€LEDç¯å’Œé£æ‰‡æ¨¡å—å®ç°çš„ã€‚è€Œåº”ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œé…ç½®IOå£çš„å·¥ä½œæ¨¡å¼ï¼Œæ§åˆ¶GPIOå£è¾“å‡ºçš„é«˜ä½ç”µå¹³å³å¯ã€‚<br>   <img src="/images/item/smarthome-2.png"></p>
<h2 id="PCBè®¾è®¡"><a href="#PCBè®¾è®¡" class="headerlink" title="PCBè®¾è®¡"></a>PCBè®¾è®¡</h2><p>å¯¹äºä»¥ä¸Šä¼—å¤šå…ƒä»¶å’Œæ¨¡å—ï¼Œå¦‚æœç”¨å¯¼çº¿ç›´æ¥è¿æ¥èµ·æ¥çš„è¯ï¼Œæˆ‘åªèƒ½æƒ³åˆ°ä¸€ä¸ªè¯å½¢å®¹ï¼šä¸€å›¢ä¹±éº»ï¼å› æ­¤è®¾è®¡PCBæ¿å°±æˆäº†è§£å†³è¯¥é—®é¢˜çš„æœ€å¥½æ–¹æ³•ã€‚å¯èƒ½æœ‰çš„åŒå­¦åœ¨å¤§å­¦æœŸé—´å­¦ä¹ è¿‡å¦‚ä½•ç”»æ¿æ‰“æ¿ï¼Œæœ‰äº›åŒå­¦æ²¡æœ‰æ¥è§¦è¿‡ï¼Œä»¥æˆ‘è‡ªå·±çš„ç»éªŒæ¥è®²ï¼Œå­¦ä¹ ä¸€ä¸¤å‘¨æ—¶é—´å¯¹äºç»˜åˆ¶è¯¥é¡¹ç›®PCBå·²ç»ç»°ç»°æœ‰ä½™ã€‚è¯¥é¡¹ç›®å¹¶ä¸éœ€è¦åœ¨æ¿å­ä¸Šæœ‰å„ä¸ªç”µè·¯çš„è®¾è®¡ï¼ˆæœ‰èƒ½åŠ›çš„åŒå­¦å¯ä»¥è®¾è®¡ä¸€ä¸ªç”µæºç”µè·¯ï¼‰ï¼Œå› æ­¤åªéœ€è¦å¸ƒå±€å¸ƒçº¿å³å¯è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œä»¥ä¸‹æ˜¯æˆ‘æ‰€è®¾è®¡çš„æ¿å­ ã€‚</p>
<p>è¯¥éƒ¨åˆ†çš„è®¾è®¡è®©è‡ªå·±å¯¹äºæ•´ä¸ªç¡¬ä»¶èµ„æºçš„äº†è§£åŠä½¿ç”¨æœ‰ä¸€ä¸ªæ–°çš„è®¤è¯†ã€‚åœ¨ä¸»æ§èŠ¯ç‰‡æœ‰é™çš„ç¡¬ä»¶èµ„æºã€æœ‰é™ç©ºé—´çš„ç”µè·¯æ¿ä¸Šï¼Œå¦‚ä½•èƒ½å……åˆ†åˆ©ç”¨æ¯ä¸ªå…ƒä»¶çš„å½¢çŠ¶å¤§å°å’Œæ€§èƒ½ç‰¹ç‚¹æ¥åšåˆ°å½¼æ­¤ä¹‹é—´çš„äº¤äº’æ˜¯è¯¥éƒ¨åˆ†çš„é‡éš¾ç‚¹ã€‚<br>==Tipsï¼šé˜…è¯»æ¯æ ¹pinçš„åŠŸèƒ½ï¼Œåˆ†é…å¥½ä¸»æ§èŠ¯ç‰‡çš„å„ä¸ªç®¡è„šèµ„æº==</p>
<p><img src="/images/item/smarthome-3.png"></p>
<h1 id="è½¯ä»¶è®¾è®¡"><a href="#è½¯ä»¶è®¾è®¡" class="headerlink" title="è½¯ä»¶è®¾è®¡"></a>è½¯ä»¶è®¾è®¡</h1><p>æ•´ä¸ªä»£ç å·¥ç¨‹å†…å®¹ç›¸å¯¹è¾ƒå¤§ï¼Œåœ¨æ­¤å°±ä¸è¿›è¡Œè¯¦ç»†çš„å±•ç¤ºäº†å¦‚æœæœ‰éœ€è¦å¯ä»¥ç§ä¿¡æˆ‘ã€‚åœ¨æ­¤åªå±•ç¤ºéƒ¨åˆ†ä¸»å‡½æ•°ä»£ç å’Œç›¸å…³å¤´æ–‡ä»¶ç­‰ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œæ•°æ®ä¸Šäº‘æ ¼å¼å®šä¹‰ã€å‘½ä»¤ä¸‹å‘ã€å„ä¸ªæ¨¡å—çš„é©±åŠ¨å‡½æ•°åŒæ ·é‡è¦ï¼</p>
<h2 id="å¤´æ–‡ä»¶"><a href="#å¤´æ–‡ä»¶" class="headerlink" title="å¤´æ–‡ä»¶"></a>å¤´æ–‡ä»¶</h2><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"stm32f10x.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"stdio.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"math.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"delay.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"string.h"</span>	</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"dht11.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"BH1750.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"adc.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"led.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"OLED_I2C.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"usart.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"timer.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"exti.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"key.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"door_bsp.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"fan.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"esp8266.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"MqttKit.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"onenet.h"</span></span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="ä¸»å‡½æ•°"><a href="#ä¸»å‡½æ•°" class="headerlink" title="ä¸»å‡½æ•°"></a>ä¸»å‡½æ•°</h2><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>{</span>					<span class="comment">//å®šä¹‰ç»“æ„ä½“</span></span><br><span class="line">	<span class="type">uint8_t</span> temp;				<span class="comment">//æ¸©åº¦</span></span><br><span class="line">	<span class="type">uint8_t</span> humi;				<span class="comment">//æ¹¿åº¦</span></span><br><span class="line">	<span class="type">float</span> mq;					<span class="comment">//MQ135ä¼ æ„Ÿå™¨</span></span><br><span class="line">	<span class="type">float</span> sun;					<span class="comment">//å…‰ç…§å¼ºåº¦ä¼ æ„Ÿå™¨</span></span><br><span class="line">	<span class="type">uint8_t</span> LED_FLAG;			<span class="comment">//LED</span></span><br><span class="line">	<span class="type">uint8_t</span> FAN_FLAG;			<span class="comment">//é£æ‰‡</span></span><br><span class="line">	<span class="type">uint8_t</span> DOOR_FLAG;			<span class="comment">//æ­¥è¿›ç”µæœº</span></span><br><span class="line">	<span class="type">uint8_t</span> WARNING_FLAG;		<span class="comment">//æ­¥è¿›ç”µæœº</span></span><br><span class="line">}SendData;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> SendData send_data;</span><br><span class="line"><span class="keyword">extern</span> <span class="type">uint8_t</span> cmd_rev_flag;</span><br><span class="line">SendData send_data = {<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0</span> , <span class="number">0</span> , <span class="number">0</span> ,<span class="number">0</span>};	<span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line"><span class="type">uint8_t</span> cmd_rev_flag = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">{</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">char</span> *data_ptr = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">short</span> timeCount = <span class="number">0</span>;	<span class="comment">//å‘é€é—´éš”å˜é‡</span></span><br><span class="line">	Hardware_Init();</span><br><span class="line">	Net_Init();</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">	{  		</span><br><span class="line">		<span class="keyword">if</span>(++timeCount &gt;= <span class="number">200</span> || (cmd_rev_flag == <span class="number">1</span>))	</span><br><span class="line">{	</span><br><span class="line">			DHT11_Read_Data(&amp;send_data.temp,&amp;send_data.humi);</span><br><span class="line">			send_data.mq=(<span class="type">float</span>)(Get_Adc_Average(ADC_Channel_1,<span class="number">10</span>))*(<span class="number">3.3</span>/<span class="number">4096</span>);	</span><br><span class="line">			send_data.sun = LIght_Intensity();										 </span><br><span class="line">			OneNet_SendData();	<span class="comment">//å‘é€æ•°æ®</span></span><br><span class="line">			timeCount = <span class="number">0</span>;</span><br><span class="line">			cmd_rev_flag=<span class="number">0</span>;</span><br><span class="line">			ESP8266_Clear();</span><br><span class="line">		}</span><br><span class="line">		data_ptr = ESP8266_GetIPD(<span class="number">0</span>);		<span class="comment">//æ£€æŸ¥æ˜¯å¦æœ‰ä¸‹å‘æŒ‡å®š</span></span><br><span class="line">		<span class="keyword">if</span>(data_ptr != <span class="literal">NULL</span>)</span><br><span class="line">			OneNet_RevPro(data_ptr);</span><br><span class="line">		delay_ms(<span class="number">10</span>);</span><br><span class="line">	}		 </span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h2 id="ç¡¬ä»¶åˆå§‹åŒ–"><a href="#ç¡¬ä»¶åˆå§‹åŒ–" class="headerlink" title="ç¡¬ä»¶åˆå§‹åŒ–"></a>ç¡¬ä»¶åˆå§‹åŒ–</h2><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">Hardware_Init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">{</span><br><span class="line">	delay_init();	    		<span class="comment">//å»¶æ—¶å‡½æ•°åˆå§‹åŒ–</span></span><br><span class="line">	TIM2_Int_Init(<span class="number">4999</span>,<span class="number">7199</span>);  	<span class="comment">//ç”¨äºOLEDæ˜¾ç¤º</span></span><br><span class="line">	Usart1_Init(<span class="number">115200</span>);		<span class="comment">//ä¸²å£è°ƒè¯•</span></span><br><span class="line">	Usart2_Init(<span class="number">115200</span>);		<span class="comment">//esp8266--stm32é€šä¿¡</span></span><br><span class="line">	OLED_Init();				<span class="comment">//OLEDåˆå§‹åŒ–</span></span><br><span class="line">	OLED_CLS();</span><br><span class="line">	KEY_Init();					<span class="comment">//æŒ‰é”®åˆå§‹åŒ–</span></span><br><span class="line">	NVIC_PriorityGroupConfig(NVIC_PriorityGroup_2);</span><br><span class="line">								<span class="comment">//è®¾ç½®ä¸­æ–­ä¼˜å…ˆçº§åˆ†ç»„2ï¼Œä¸ºåé¢å¤–éƒ¨ä¸­æ–­åšåŸºç¡€</span></span><br><span class="line">	EXTIX_Init();				<span class="comment">//åˆ¤æ–­é”®å€¼æ‰§è¡Œæ“ä½œ</span></span><br><span class="line">	DHT11_Init();				<span class="comment">//æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨åˆå§‹åŒ–</span></span><br><span class="line">	Adc_Init();					<span class="comment">//ç©ºæ°”æ£€æµ‹åˆå§‹åŒ–</span></span><br><span class="line">	BH1750_Init();				<span class="comment">//å…‰ç…§</span></span><br><span class="line">	TIM3_Int_Init(<span class="number">4999</span>,<span class="number">7199</span>);  	<span class="comment">//æŠ¥è­¦æ˜¾ç¤º</span></span><br><span class="line">	ESP8266_Init();				<span class="comment">//åˆå§‹åŒ–ESP8266</span></span><br><span class="line">	<span class="keyword">while</span>(OneNet_DevLink())		<span class="comment">//æ¥å…¥OneNET</span></span><br><span class="line">	delay_ms(<span class="number">500</span>);</span><br><span class="line">}	</span><br></pre></td></tr></tbody></table></figure>

<h1 id="äº‘å¹³å°é€‰æ‹©"><a href="#äº‘å¹³å°é€‰æ‹©" class="headerlink" title="äº‘å¹³å°é€‰æ‹©"></a>äº‘å¹³å°é€‰æ‹©</h1><p>æœ¬è®¾è®¡è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„éƒ¨åˆ†å°±æ˜¯å¯¹äºäº‘å¹³å°çš„é€‰æ‹©ï¼Œæœ¬é¡¹ç›®é€‰æ‹©çš„æ˜¯ä¸­å›½ç§»åŠ¨ç‰©è”ç½‘äº‘å¹³å°OneNETã€‚å½“ç„¶ï¼Œå¦‚æœæœ‰èƒ½åŠ›çš„åŒå­¦è‡ªå·±åšä¸ªappæ›´å¥½ã€‚</p>
<p>ç›®å‰å¾ˆå¤šäº‘å¹³å°å‚å•†éƒ½æ”¯æŒäº†å¯¹äºä¸ªäººå¼€å‘è€…çš„ç‰©è”ç½‘åº”ç”¨çš„éœ€æ±‚ï¼Œæˆ‘è§åˆ°ç”¨åˆ°æœ€å¤šçš„åŒ…æ‹¬é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€æœºæ™ºäº‘ã€OneNETç­‰ç­‰ã€‚è¿™äº›å¹³å°å¯¹å¯¹äºä¸ªäººå¼€å‘è€…è¿˜æ˜¯å¾ˆæœ‰å¥½çš„ï¼Œæœ‰ç€æ¯”è¾ƒå®Œå–„çš„æµç¨‹ã€‚æˆ‘ä¸ªäººä½¿ç”¨è¿‡æœºæ™ºäº‘å’ŒOneNETï¼Œå¯¹æ­¤åšå‡ºä»¥ä¸‹å»ºè®®ã€‚</p>
<ul>
<li>OneNETï¼šæ›´é€‚åˆå·²æœ‰å·¥ç¨‹æ–‡ä»¶ï¼Œåœ¨æ­¤åŸºç¡€ä¹‹ä¸Šè¿›è¡Œé€šä¿¡éƒ¨åˆ†çš„å¼€å‘ã€‚å…¶å¯¹äºæœ€ç»ˆçš„ç•Œé¢è®¾è®¡å¾ˆå¼€æ”¾ï¼Œå¯ä»¥è‡ªè¡Œè®¾è®¡å›¾æ ‡åŠæ˜¾ç¤ºæ–¹å¼ç­‰ï¼›</li>
<li>æœºæ™ºäº‘ï¼šé€‚åˆæ²¡æœ‰å·¥ç¨‹æ–‡ä»¶ï¼Œä»åˆšå¼€å§‹å°±é€‰æ‹©ä½¿ç”¨è¯¥ç‰©è”ç½‘äº‘å¹³å°ã€‚å¯ä»¥åœ¨å¹³å°ä¸Šç”Ÿæˆä»£ç åŒ…è¿›è¡Œå¼€å‘ï¼›</li>
</ul>
<h1 id="ç»“æœå±•ç¤º"><a href="#ç»“æœå±•ç¤º" class="headerlink" title="ç»“æœå±•ç¤º"></a>ç»“æœå±•ç¤º</h1><h2 id="å®ç‰©å›¾ä¸æ‰‹æœºç•Œé¢"><a href="#å®ç‰©å›¾ä¸æ‰‹æœºç•Œé¢" class="headerlink" title="å®ç‰©å›¾ä¸æ‰‹æœºç•Œé¢"></a>å®ç‰©å›¾ä¸æ‰‹æœºç•Œé¢</h2><p><img src="/images/item/smarthome-4.png"></p>
<h2 id="äº‘å¹³å°æ•°æ®å¯è§†åŒ–ç•Œé¢"><a href="#äº‘å¹³å°æ•°æ®å¯è§†åŒ–ç•Œé¢" class="headerlink" title="äº‘å¹³å°æ•°æ®å¯è§†åŒ–ç•Œé¢"></a>äº‘å¹³å°æ•°æ®å¯è§†åŒ–ç•Œé¢</h2><p><img src="/images/item/smarthome-5.png"></p>
<h2 id="äº‘å¹³å°æ§åˆ¶ç•Œé¢"><a href="#äº‘å¹³å°æ§åˆ¶ç•Œé¢" class="headerlink" title="äº‘å¹³å°æ§åˆ¶ç•Œé¢"></a>äº‘å¹³å°æ§åˆ¶ç•Œé¢</h2><p><img src="/images/item/smarthome-6.png"></p>
<h1 id="å®ç°åŠŸèƒ½åŠæ‰©å±•"><a href="#å®ç°åŠŸèƒ½åŠæ‰©å±•" class="headerlink" title="å®ç°åŠŸèƒ½åŠæ‰©å±•"></a>å®ç°åŠŸèƒ½åŠæ‰©å±•</h1><h2 id="å®ç°åŠŸèƒ½"><a href="#å®ç°åŠŸèƒ½" class="headerlink" title="å®ç°åŠŸèƒ½"></a>å®ç°åŠŸèƒ½</h2><ul>
<li><p>ç›‘æµ‹ï¼šç©ºæ°”ä¸­æ¸©åº¦ã€æ¹¿åº¦ã€å…‰ç…§å’Œç©ºæ°”è´¨é‡ç­‰ç¯å¢ƒå› ç´ ï¼›</p>
</li>
<li><p>æ§åˆ¶ï¼šæ¨¡æ‹Ÿçš„â€œå®¶å±…â€ï¼šé—¨ã€ç¯ã€çª—å¸˜ã€é£æ‰‡ï¼›</p>
</li>
<li><p>æ˜¾ç¤ºï¼šOLEDæ˜¾ç¤ºã€æ‰‹æœºæ˜¾ç¤ºã€ç”µè„‘æ˜¾ç¤ºï¼›</p>
</li>
<li><p>æ§åˆ¶æ–¹å¼ï¼šæŒ‰é”®æ§åˆ¶ã€æ‰‹æœºæ§åˆ¶ã€ç”µè„‘æ§åˆ¶ï¼›</p>
</li>
<li><p>æŠ¥è­¦ï¼šè®¾ç½®ç¯å¢ƒå› ç´ é˜ˆå€¼ï¼Œè¶…æ ‡å¼€å‘æ¿çš„ç¯äº®èµ·ï¼ˆå¯æ”¹æˆèœ‚é¸£å™¨ï¼‰</p>
</li>
<li><p>ä»¥ä¸Šæ‰€æœ‰ç¯å¢ƒåŠå®¶å…·çŠ¶æ€éƒ½å¯ä»¥å¯è§†åŒ–æ˜¾ç¤º</p>
</li>
</ul>
<h2 id="å¯æ‰©å±•åŠŸèƒ½"><a href="#å¯æ‰©å±•åŠŸèƒ½" class="headerlink" title="å¯æ‰©å±•åŠŸèƒ½"></a>å¯æ‰©å±•åŠŸèƒ½</h2><p>è¯¥ç³»ç»Ÿå…·æœ‰å¾ˆé«˜çš„æ‰©å±•æ€§ï¼Œåšå‡ºåŸºç¡€æ¨¡å‹ä¹‹åå¯ä»¥è¿›è¡ŒäºŒæ¬¡å¼€å‘ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å°†ç¡¬ä»¶èµ„æºåˆ†é…å¥½ã€‚</p>
<ul>
<li>è¯­éŸ³æ¨¡å—ã€‚è¯­éŸ³æ§åˆ¶æ™ºèƒ½å®¶å±…çš„çŠ¶æ€ã€‚</li>
<li>å®‰é˜²ç³»ç»Ÿã€‚æ·»åŠ æŒ‡çº¹ã€RFIDã€é¢éƒ¨è¯†åˆ«ç­‰å¼€é—¨æ–¹å¼ã€‚</li>
<li>å‘Šè­¦ç³»ç»Ÿã€‚ç›®å‰åªæ˜¯é‡åˆ°å‘Šè­¦å¹³å°è‡ªåŠ¨æé†’ï¼Œå¯ä»¥æ·»åŠ çŸ­ä¿¡é€šçŸ¥åŠŸèƒ½ã€‚</li>
<li>æ¨¡å¼é€‰æ‹©ã€‚å±…å®¶å¤šç§æ¨¡å¼è‡ªåŠ¨åˆ‡æ¢ï¼Œå¨±ä¹æ¨¡å¼ã€ä¼‘æ¯æ¨¡å¼ã€ç¦»å®¶æ¨¡å¼ç­‰ç­‰ï¼Œå®¶å…·å¯ä»¥å¯¹åº”ç€ä¸åŒçŠ¶æ€ã€‚</li>
<li>â€¦â€¦</li>
</ul>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æœ¬è®¾è®¡å¯¹äºæ™ºèƒ½å®¶å±…æ§åˆ¶ç³»ç»Ÿçš„æ¨¡æ‹Ÿä»ä¼ ç»Ÿåˆ°æ™ºèƒ½ã€ä»å‰ç«¯åˆ°åç«¯ï¼Œè¦†ç›–é¢ã€è¿˜åŸåº¦è¿˜æ˜¯æ¯”è¾ƒé«˜çš„ï¼›å…¶æ¬¡ï¼Œç³»ç»Ÿçš„å…¼å®¹æ€§å’Œå¯æ‰©å±•ç§»æ¤æ€§è¾ƒé«˜ï¼ŒåŸºäºæ­¤å¯ä»¥è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œå¯ä»¥æ‰©å±•çš„å†…å®¹æˆ‘åœ¨ä¸Šé¢ä¹Ÿæœ‰æ€»ç»“ã€‚æˆ‘è®¤ä¸ºç›¸å¯¹å®¹æ˜“ä¸Šæ‰‹çš„å°±æ˜¯å¯¹äºç›‘æµ‹åˆ°çš„æ•°æ®è¿›è¡Œè¿›ä¸€æ­¥åˆ†æåº”ç”¨ã€‚æœ€åå°±æ˜¯å…¶åº”ç”¨æ€§ï¼Œå½“è‡ªå·±è®¾è®¡å¥½ç”µæºæ¨¡å—å¯ä»¥ç‹¬ç«‹ä¾›ç”µåå°±å¯ä»¥ç›´æ¥åº”ç”¨åˆ°ç”Ÿæ´»ä¸­ï¼Œå³ä½¿ä¸åšæ¯•è®¾diyä¸€ä¸ªç¯å¢ƒç›‘æµ‹çš„ç³»ç»Ÿä¹Ÿæ˜¯ä¸é”™çš„ã€‚æ•´ä½“æ¥è¯´ï¼Œæœ¬è®¾è®¡å®ç°çš„åŠŸèƒ½æ˜¯ï¼šå››æµ‹ä¸‰æ˜¾ä¸¤æ§ä¸€å¹³å°ï¼ŒåŸºæœ¬å®ç°äº†æ™ºèƒ½å®¶å±…æ¨¡æ‹Ÿçš„åŸºæœ¬çš„è¦æ±‚ã€‚åŒæ ·è¯¥é¡¹ç›®è¿˜å¯ä»¥åº”ç”¨åˆ°ç¯å¢ƒç›‘æµ‹ç­‰æ–¹é¢çš„ï¼Œä½†æ˜¯å…¶ä¾§é‡ç‚¹æ›´è¦åå‘æ•°æ®çš„åˆ†æå’Œå¤„ç†ã€‚</p>
<p>è¡Œæ–‡è‡³æ­¤å°±ç»“æŸå•¦ï¼Œå¦‚æœæœ‰ä¸è¶³ä¹‹å¤„æˆ–è€…æ›´å¥½çš„æƒ³æ³•å¯ä»¥ä¸€èµ·äº¤æµ ~</p>
]]></content>
      <categories>
        <category>Item</category>
      </categories>
      <tags>
        <tag>æ¯•ä¸šè®¾è®¡</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¡¬ä»¶éšæœºæ•°æµ‹è¯•æ–¹æ³•</title>
    <url>/2022/11/26/third-party/DTRNG_Test/</url>
    <content><![CDATA[<h1 id="æµ‹è¯•æ–¹æ³•"><a href="#æµ‹è¯•æ–¹æ³•" class="headerlink" title="æµ‹è¯•æ–¹æ³•"></a>æµ‹è¯•æ–¹æ³•</h1><p>é…ç½®èŠ¯ç‰‡DTRNGç¡¬ä»¶å•å…ƒå¯„å­˜å™¨ç”Ÿæˆä¸€å®šæ•°é‡çš„æ•°æ®ï¼Œä¿å­˜æˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½¿ç”¨NISTæµ‹è¯•å¥—ä»¶è¿›è¡ŒéªŒè¯å¾—åˆ°æ˜¯å¦éšæœºçš„ç»“è®ºã€‚</p>
<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><ol>
<li>DTRNGï¼šDigital True Random Number Generatorï¼Œæ•°å­—çœŸéšæœºæ•°å‘ç”Ÿå™¨</li>
<li>NISTï¼šNational Institude of Standards and Technologyï¼Œå›½å®¶æ ‡å‡†æŠ€æœ¯ç ”ç©¶æ‰€</li>
<li>NIST-sts (Statistical Test Suite)ï¼Œç»Ÿè®¡æµ‹è¯•å¥—ä»¶ï¼š</li>
</ol>
<ul>
<li><p>æºç é“¾æ¥ï¼š<a href="https://csrc.nist.gov/projects/random-bit-generation/documentation-and-software%EF%BC%88Download%E5%8D%B3%E5%8F%AF%EF%BC%89">https://csrc.nist.gov/projects/random-bit-generation/documentation-and-softwareï¼ˆDownloadå³å¯ï¼‰</a></p>
</li>
<li><p>æ–‡æ¡£é“¾æ¥ï¼š<a href="https://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-22r1a.pdf">https://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-22r1a.pdf</a></p>
</li>
<li><p>windowså®‰è£…</p>
<p>å®˜ç½‘çš„è½¯ä»¶åŒ…æ˜¯Linuxç³»ç»Ÿä¸‹å¼€å‘çš„ï¼ŒWindowsç³»ç»Ÿéœ€è¦å…ˆä¸‹ä¸€ä¸ª<a href="https://cygwin.com/install.html">cygwinè½¯ä»¶</a>æ¥è¾…åŠ©ä½¿ç”¨</p>
<p>å¯ä»¥å‚è€ƒåšå®¢ï¼š<a href="https://blog.csdn.net/weixin_39928192/article/details/89256576">https://blog.csdn.net/weixin_39928192/article/details/89256576</a>?</p>
</li>
<li><p>Linuxå®‰è£…</p>
<p>è¿›å…¥å·¥ç¨‹æ–‡ä»¶å¤¹sts-2.1.2ç›´æ¥makeå³å¯ï¼Œå¾—åˆ° assess å¯æ‰§è¡Œç¨‹åº</p>
</li>
</ul>
<h1 id="éšæœºæµ‹è¯•é¡¹"><a href="#éšæœºæµ‹è¯•é¡¹" class="headerlink" title="éšæœºæµ‹è¯•é¡¹"></a><strong>éšæœºæµ‹è¯•é¡¹</strong></h1><p>æ¯ä¸€ä¸ªæµ‹è¯•é¡¹çš„è§£è¯»ï¼š<a href="https://blog.csdn.net/lafu5137/article/details/79593845">https://blog.csdn.net/lafu5137/article/details/79593845</a></p>
<ol>
<li>The Frequency (Monobit) Testï¼Œé¢‘ç‡æ£€æµ‹ã€‚è¯¥æ£€éªŒä¸»è¦æ˜¯çœ‹0å’Œ1åœ¨æ•´ä¸ªåºåˆ—ä¸­æ‰€å çš„æ¯”ä¾‹ï¼ˆåŸºç¡€æ£€æµ‹ï¼‰</li>
<li>Frequency Test within a Blockï¼Œå—å†…é¢‘ç‡æ£€æµ‹</li>
<li>The Runs Testï¼Œæ¸¸ç¨‹æ£€æµ‹ã€‚æ¸¸ç¨‹æŒ‡çš„æ˜¯ä¸€ä¸ªæ²¡æœ‰é—´æ–­çš„ç›¸åŒæ•°åºåˆ—</li>
<li>Tests for the Longest-Run-of-Ones in a Blockï¼Œå—å†…æœ€é•¿æ¸¸ç¨‹æ£€æµ‹</li>
<li>The Binary Matrix Rank Testï¼ŒäºŒå…ƒçŸ©é˜µç§©æ£€æµ‹</li>
<li>The Discrete Fourier Transform (Spectral) Testï¼Œç¦»æ•£å‚…ç«‹å¶å˜æ¢æ£€æµ‹</li>
<li>The Non-overlapping Template Matching Testï¼Œéé‡å æ¨¡å—åŒ¹é…æ£€æµ‹</li>
<li>The Overlapping Template Matching Testï¼Œé‡å æ¨¡å—åŒ¹é…æ£€æµ‹</li>
<li>Maurerâ€™s â€œUniversal Statisticalâ€ Testï¼ŒMaurerçš„é€šç”¨æ£€æµ‹ç»Ÿè®¡</li>
<li>The Linear Complexity Testï¼Œçº¿æ€§å¤æ‚åº¦æ£€æµ‹</li>
<li>The Serial Testï¼Œåºåˆ—æ£€æµ‹</li>
<li>The Approximate Entropy Testï¼Œè¿‘ä¼¼ç†µæ£€æµ‹</li>
<li>The Cumulative Sums (Cusums) Testï¼Œç´¯åŠ å’Œæ£€éªŒ</li>
<li>The Random Excursions Testï¼Œéšæœºæ¸¸åŠ¨æ£€æµ‹</li>
<li>The Random Excursions Variant Test.ï¼Œéšæœºæ¸¸åŠ¨çŠ¶æ€é¢‘ç‡æ£€æµ‹</li>
</ol>
<h1 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a><strong>ä½¿ç”¨æ–¹æ³•</strong></h1><p>è¯¥æµç¨‹æ˜¯åŸºäºLinuxç³»ç»Ÿè¿›è¡Œæ“ä½œçš„ï¼Œä½¿ç”¨çš„æ•°æ®ï¼šsts-2.1.2/data/data.pi</p>
<ol>
<li>å¯åŠ¨ç¨‹åºã€‚**./assess ï¼Œ**stream lengthè¯‘ä¸ºæµçš„é•¿åº¦ã€‚</li>
<li>è¾“å…¥å¾…æµ‹æ–‡ä»¶è·¯å¾„ã€‚æ ¹æ®èœå•ï¼Œé”®å…¥0å¹¶è¾“å…¥æ–‡ä»¶çš„è·¯å¾„ï¼ˆç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„éƒ½å¯ä»¥ï¼‰</li>
<li>é€‰æ‹©æµ‹è¯•é¡¹ã€‚é”®å…¥1è¡¨ç¤ºåº”ç”¨å…¨éƒ¨æµ‹è¯•é¡¹ï¼›è¾“å…¥0è¡¨ç¤ºéƒ¨åˆ†æµ‹è¯•é¡¹ï¼Œéšåè¾“å…¥ä¸€ä¸ª16ä½äºŒè¿›åˆ¶åºåˆ—é€‰æ‹©æµ‹è¯•é¡¹ã€‚</li>
<li>å‚æ•°è°ƒæ•´ã€‚å¯ä»¥æ ¹æ®èœå•åŠé€‰é¡¹å¾®è°ƒéƒ¨åˆ†å‚æ•°çš„å€¼ï¼ŒåŸºæœ¬é€‰æ‹©é»˜è®¤å³å¯ã€‚</li>
<li>è¾“å…¥æ¯”ç‰¹æµçš„ä¸ªæ•°ã€‚è¡¨ç¤ºæœ‰å¤šå°‘ä¸ªstream</li>
<li>é€‰æ‹©è¾“å…¥æ–‡ä»¶ç±»å‹ã€‚è¯¥ç±»å‹å¯¹åº”äºç¬¬äºŒæ­¥è¾“å…¥æ–‡ä»¶çš„ç±»å‹ï¼Œä¸¤ç§ç±»å‹ä¾›é€‰æ‹©ï¼šASCII / Binary</li>
</ol>
<h1 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a><strong>æ³¨æ„äº‹é¡¹</strong></h1><ol>
<li>æ¯ä¸€é¡¹æµ‹è¯•æ‰€éœ€çš„åºåˆ—çš„stream lengthæ˜¯ä¸ä¸€æ ·çš„ï¼Œç»æµ‹è¯•å¦‚æœé€‰æ‹©å…¨éƒ¨æµ‹è¯•é¡¹è‡³å°‘ä¿è¯stream length &gt;= 10000bitsï¼Œå¦åˆ™ä¼šå‡ºç°é”™è¯¯ã€‚è€Œå¦‚æœå•é¡¹æµ‹è¯•æŸ¥é˜…æ–‡æ¡£æ»¡è¶³å‚æ•°èŒƒå›´å³å¯ï¼Œæ¯”å¦‚é€‰æ‹©1é¢‘ç‡æµ‹è¯•åªéœ€ä¿è¯stream length&gt;100bitså³å¯ã€‚</li>
<li>å¿…é¡»ä¿è¯ï¼šæµé•¿åº¦ Ã— æµä¸ªæ•° &lt;= æ–‡ä»¶å¤§å°</li>
<li>å¦‚æœè¾“å…¥çš„æ–‡ä»¶æ˜¯ACSIIæ ¼å¼çš„è¯ï¼Œå¯åŠ¨ç¨‹åºæ—¶æ‰€è¾“å…¥çš„bitstreamçš„å•ä½æ˜¯byteï¼›è€Œè¾“å…¥æ–‡ä»¶ä¸ºBinaryçš„è¯bitstreamå•ä½ä¸ºbitã€‚ä¾‹å¦‚ï¼šç¬¬ä¸€æ­¥é”®å…¥./assess 10000ï¼›ç¬¬äº”æ­¥é”®å…¥10 ï¼›æ­¤æ—¶ç¬¬å…­æ­¥é€‰æ‹©0ä»£è¡¨è¾“å…¥äº†10000Ã—10Ã—8ï¼ˆbitsï¼‰ï¼Œè¾“å…¥1ä»£è¡¨è¾“å…¥äº†10000Ã—10ï¼ˆbitsï¼‰ã€‚å®é™…è¾“å…¥è¿‡ç¨‹æ˜¯è¦åç€ç†è§£ï¼Œå…ˆç¡®å®šè¾“å…¥æ–‡ä»¶ç±»å‹ï¼Œè¿›è€Œç¡®è®¤bitstreamã€numberï¼Œä¿è¯ç¬¬ä¸€ä¸ªå…¬å¼</li>
</ol>
<h1 id="æ£€æµ‹æ ‡å‡†"><a href="#æ£€æµ‹æ ‡å‡†" class="headerlink" title="æ£€æµ‹æ ‡å‡†"></a><strong>æ£€æµ‹æ ‡å‡†</strong></h1><p>æµ‹è¯•æˆåŠŸç»“æŸåˆ™ä¼šåœ¨ <strong>sts-2.1.2/experiments/AlgorithmTesting/</strong> ç›®å½•ä¸‹ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šï¼Œè€Œé’ˆå¯¹æ¯ä¸€ä¸ªé¡¹ç›®çš„ç»“æœä¼šåœ¨å…¶å­ç›®å½•ä¸‹ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šã€‚</p>
<p>æœ€ç»ˆæµ‹è¯•æŠ¥å‘ŠfinalAnalysisReport.txtä¸­P-valueéƒ½å¤§äºç­‰äº0.01å³å¯è®¤ä¸ºé€šè¿‡äº†NISTæ£€éªŒï¼Œè¿™ä¸ªæ•°æ®è¶Šå¤§è¶Šå¥½ã€‚å¦‚æœè¯¥æ•°æ®ä¸º0ï¼Œå¯èƒ½æ˜¯ç”±äºæ•°æ®é‡çš„é—®é¢˜åˆ™å¯ä»¥å»æ¯ä¸ªå­é¡¹ç›®ç»“æœä¸­å»æŸ¥çœ‹ï¼Œä¼šæœ‰SUCCESSå­—æ ·ï¼</p>
<h1 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a><strong>Q&amp;A</strong></h1><ol>
<li><p>Qï¼šSegment fault</p>
<p>Aï¼š bitstream*num &gt; fileSizeå³æµçš„é•¿åº¦ä¹˜ä»¥æµçš„ä¸ªæ•°è¶…è¿‡äº†æ–‡ä»¶çš„å¤§å°é€šå¸¸ä¼šæœ‰errorä¿¡æ¯</p>
</li>
<li><p>Qï¼šigamc: UNDERFLOWï¼Ÿ</p>
<p>Aï¼šæ•°æ®ä¸‹æº¢ï¼Œå¯èƒ½æ˜¯æ•°æ®æ ¼å¼çš„åŸå› æˆ–è€…æ•°æ®è¿‡äºä¸éšæœº</p>
</li>
<li><p>Qï¼šP-valueå…¨éƒ¨æ˜¯0ï¼Ÿ</p>
<p>Aï¼šå¯¼è‡´ <strong>igamc: UNDERFLOW</strong> çš„åŸå› éƒ½æ˜¯æœ‰å¯èƒ½çš„ï¼ŒåŒæ—¶ä¹Ÿå¯èƒ½æ˜¯å› ä¸ºæ•°æ®é‡ä¸å¤Ÿæ‰€å¯¼è‡´çš„ã€‚</p>
</li>
</ol>
]]></content>
      <categories>
        <category>Third Party</category>
      </categories>
  </entry>
  <entry>
    <title>CMake</title>
    <url>/2022/08/25/third-party/cmake/</url>
    <content><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><blockquote>
<p>å®˜ç½‘ : <a href="https://cmake.org/cmake/help/v3.15/">https://cmake.org/cmake/help/v3.15/</a></p>
</blockquote>
<p>CMakeæ˜¯è·¨å¹³å°çš„ å…è´¹å’Œå¼€æºè½¯ä»¶ï¼Œç”¨äºä½¿ç”¨ç‹¬ç«‹äºç¼–è¯‘å™¨çš„æ–¹æ³•æ„å»ºè‡ªåŠ¨åŒ–ã€æµ‹è¯•ã€æ‰“åŒ…å’Œå®‰è£…è½¯ä»¶ã€‚CMake æœ¬èº«å¹¶ä¸æ˜¯ä¸€ä¸ªæ„å»ºç³»ç»Ÿï¼›å®ƒç”Ÿæˆå¦ä¸€ä¸ªç³»ç»Ÿçš„æ„å»ºæ–‡ä»¶ã€‚å®ƒæ”¯æŒç›®å½•å±‚æ¬¡ç»“æ„å’Œä¾èµ–äºå¤šä¸ªåº“çš„åº”ç”¨ç¨‹åºã€‚å®ƒä¸åŸç”Ÿæ„å»ºç¯å¢ƒç»“åˆä½¿ç”¨ï¼Œä¾‹å¦‚Makeã€Qt Creatorã€Ninjaã€Android Studioã€Apple çš„Xcodeå’ŒMicrosoft Visual Studioã€‚ï¼ˆæ‘˜è‡ªWikiï¼‰</p>
<h1 id="CMakeLists-txt"><a href="#CMakeLists-txt" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h1><h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2><ol>
<li><p>cmakeè¦æ±‚æœ€ä½ç‰ˆæœ¬(é€‰æ‹©æ€§æ·»åŠ )</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">cmake_minimum_required(VERSION <span class="number">3.0</span><span class="number">.0</span>)</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ç¼–è¯‘å·¥ç¨‹å</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">project(xxx)</span><br><span class="line"><span class="comment">//ä¼šè‡ªåŠ¨åˆ›å»ºä¸¤ä¸ªå˜é‡ï¼ŒPROJECT_SOURCE_DIRå’ŒPROJECT_NAME</span></span><br><span class="line"><span class="comment">//${PROJECT_SOURCE_DIR}ï¼šæœ¬CMakeLists.txtæ‰€åœ¨çš„æ–‡ä»¶å¤¹è·¯å¾„</span></span><br><span class="line"><span class="comment">//${PROJECT_NAME}ï¼šæœ¬CMakeLists.txtçš„projectåç§°</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ç»™éƒ¨åˆ†æ–‡ä»¶æˆ–è·¯å¾„ç»„åˆèµ·åˆ«å, é€šè¿‡${å˜é‡}è·å–å˜é‡å†…å®¹</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">set</span>(å˜é‡ æ–‡ä»¶å/è·¯å¾„/...)</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>è®¾ç½®c / c++ ç¼–è¯‘ç¼–è¯‘å‚æ•°</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> (CMAKE_C_FLAGS <span class="string">"-Wall -O2"</span>)</span><br><span class="line"><span class="built_in">set</span> (CMAKE_CXX_FLAGS <span class="string">"-Wall -std=C++11"</span>)</span><br><span class="line">add_compile_options( -Wall )				<span class="comment">//è¯¥å‘½ä»¤è¯‘é€‰é¡¹æ˜¯é’ˆå¯¹æ‰€æœ‰ç¼–è¯‘å™¨çš„(åŒ…æ‹¬cå’Œc++ç¼–è¯‘å™¨)</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ä¸ºå½“å‰è·¯å¾„ä»¥åŠå­ç›®å½•çš„æºæ–‡ä»¶åŠ å…¥ç”±-Då¼•å…¥çš„define flag</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">add_definitions(-DFOO -DDEBUG ...)</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å¯¹å­æ–‡ä»¶å¤¹è¿›è¡Œcmakeç¼–è¯‘</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">add_subdirectory(å­æ–‡ä»¶å¤¹å) </span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ‰“å°ä¿¡æ¯</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">message() 			<span class="comment">//ç›´æ¥æ·»åŠ æ‰“å°çš„å†…å®¹å’Œå˜é‡å³å¯,ä¸éœ€è¦åŒå¼•å·</span></span><br><span class="line">message(<span class="string">"PROJECT_SOURCE_DIR = ${PROJECT_SOURCE_DIR}"</span>)</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å¸®åŠ©ä¿¡æ¯ </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="number">1.</span> æŸ¥çœ‹cmakeé»˜è®¤å˜é‡		cmake --help-variable-<span class="built_in">list</span></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<h2 id="åˆ¤æ–­è¯­å¥"><a href="#åˆ¤æ–­è¯­å¥" class="headerlink" title="åˆ¤æ–­è¯­å¥"></a>åˆ¤æ–­è¯­å¥</h2><p>ç”¨æ³•ï¼šæ ¹æ®æŸä¸ªå®ç¡®å®šç¼–è¯‘å†…å®¹ã€‚æ¯”è¾ƒå­—ç¬¦ä¸²ï¼Œç›¸åŒè¿”å›true</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (CPU_PLATFORM_BIT STREQUAL <span class="string">"64"</span>)</span><br><span class="line">    add_library(mylib generic_64bit.c)</span><br><span class="line"><span class="keyword">else</span>()</span><br><span class="line">    add_library(mylib generic_32bit.c)</span><br><span class="line">endif()  </span><br></pre></td></tr></tbody></table></figure>

<h2 id="ç¼–è¯‘ç›®æ ‡"><a href="#ç¼–è¯‘ç›®æ ‡" class="headerlink" title="ç¼–è¯‘ç›®æ ‡"></a>ç¼–è¯‘ç›®æ ‡</h2><h3 id="äºŒè¿›åˆ¶æ–‡ä»¶"><a href="#äºŒè¿›åˆ¶æ–‡ä»¶" class="headerlink" title="äºŒè¿›åˆ¶æ–‡ä»¶"></a>äºŒè¿›åˆ¶æ–‡ä»¶</h3><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">add_executable(ç›®æ ‡æ–‡ä»¶åå­—xxx æºæ–‡ä»¶)</span><br><span class="line"><span class="comment">//example: add_executable(${PROJECT_NAME} example_person.cpp)</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="åŠ¨æ€-x2F-é™æ€åº“"><a href="#åŠ¨æ€-x2F-é™æ€åº“" class="headerlink" title="åŠ¨æ€ / é™æ€åº“"></a>åŠ¨æ€ / é™æ€åº“</h3><p>å°†æŒ‡å®šçš„æºæ–‡ä»¶ç”Ÿæˆé“¾æ¥æ–‡ä»¶ï¼Œç„¶åæ·»åŠ åˆ°å·¥ç¨‹ä¸­å»</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">add_library(&lt;name&gt; [STATIC | SHARED | MODULE]</span><br><span class="line">[EXCLUDE_FROM_ALL]</span><br><span class="line">[source1] [source2] [...])</span><br><span class="line"></span><br><span class="line"><span class="comment">//&lt;name&gt;è¡¨ç¤ºåº“æ–‡ä»¶çš„åå­—ï¼Œè¯¥åº“æ–‡ä»¶ä¼šæ ¹æ®å‘½ä»¤é‡Œåˆ—å‡ºçš„æºæ–‡ä»¶æ¥åˆ›å»ºã€‚ç”Ÿæˆçš„åº“è‡ªåŠ¨è¡¥å…¨,å¦‚libxxx.so </span></span><br><span class="line"><span class="comment">//STATICã€SHAREDå’ŒMODULEçš„ä½œç”¨æ˜¯æŒ‡å®šç”Ÿæˆçš„åº“æ–‡ä»¶çš„ç±»å‹ã€‚STATICåº“æ˜¯ç›®æ ‡æ–‡ä»¶çš„å½’æ¡£æ–‡ä»¶ï¼Œåœ¨é“¾æ¥å…¶å®ƒç›®æ ‡çš„æ—¶å€™ä½¿ç”¨ã€‚SHAREDåº“ä¼šè¢«	åŠ¨æ€é“¾æ¥ï¼ˆåŠ¨æ€é“¾æ¥åº“ï¼‰ï¼Œåœ¨è¿è¡Œæ—¶ä¼šè¢«åŠ è½½ã€‚MODULEåº“æ˜¯ä¸€ç§ä¸ä¼šè¢«é“¾æ¥åˆ°å…¶å®ƒç›®æ ‡ä¸­çš„æ’ä»¶ï¼Œä½†æ˜¯å¯èƒ½ä¼šåœ¨è¿è¡Œæ—¶ä½¿ç”¨dlopen-ç³»åˆ—çš„å‡½æ•°	ã€‚é»˜è®¤çŠ¶æ€ä¸‹ï¼Œåº“æ–‡ä»¶å°†ä¼šåœ¨äºæºæ–‡ä»¶ç›®å½•æ ‘çš„æ„å»ºç›®å½•æ ‘çš„ä½ç½®è¢«åˆ›å»ºï¼Œè¯¥å‘½ä»¤ä¹Ÿä¼šåœ¨è¿™é‡Œè¢«è°ƒç”¨ã€‚</span></span><br><span class="line"><span class="comment">//source1 source2åˆ†åˆ«è¡¨ç¤ºå„ä¸ªæºæ–‡ä»¶</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="é“¾æ¥-x2F-è·¯å¾„"><a href="#é“¾æ¥-x2F-è·¯å¾„" class="headerlink" title="é“¾æ¥/è·¯å¾„"></a>é“¾æ¥/è·¯å¾„</h2><h3 id="å¤´æ–‡ä»¶è·¯å¾„"><a href="#å¤´æ–‡ä»¶è·¯å¾„" class="headerlink" title="å¤´æ–‡ä»¶è·¯å¾„"></a>å¤´æ–‡ä»¶è·¯å¾„</h3><p>æ·»åŠ å¤´æ–‡ä»¶çš„æŸ¥æ‰¾è·¯å¾„, ç›¸å½“äºå‘½ä»¤è¡Œçš„  <em><strong>-l</strong></em> å‚æ•°</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">include_directories(../thirdparty/comm/include)</span><br></pre></td></tr></tbody></table></figure>

<h3 id="é“¾æ¥åº“è·¯å¾„"><a href="#é“¾æ¥åº“è·¯å¾„" class="headerlink" title="é“¾æ¥åº“è·¯å¾„"></a>é“¾æ¥åº“è·¯å¾„</h3><p>æ·»åŠ éœ€è¦é“¾æ¥çš„åº“æ–‡ä»¶ç›®å½•, ç›¸å½“äºå‘½ä»¤è¡Œ <em><strong>-L</strong></em> å‚æ•°</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">link_directories(<span class="string">"/home/server/third/lib"</span>)</span><br></pre></td></tr></tbody></table></figure>

<h3 id="é“¾æ¥åº“"><a href="#é“¾æ¥åº“" class="headerlink" title="é“¾æ¥åº“"></a>é“¾æ¥åº“</h3><p> å°†ç›®æ ‡æ–‡ä»¶ä¸åº“æ–‡ä»¶è¿›è¡Œé“¾æ¥</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">target_link_libraries(&lt;target&gt; [item1] [item2] [...] [[debug|optimized|general] &lt;item&gt;] ...)</span><br><span class="line"> </span><br><span class="line"><span class="comment">//&lt;target&gt;æ˜¯æŒ‡é€šè¿‡add_executable()å’Œadd_library()æŒ‡ä»¤ç”Ÿæˆå·²ç»åˆ›å»ºçš„ç›®æ ‡æ–‡ä»¶</span></span><br><span class="line"><span class="comment">//[item]è¡¨ç¤ºåº“æ–‡ä»¶æ²¡æœ‰åç¼€çš„åå­—ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåº“ä¾èµ–é¡¹æ˜¯ä¼ é€’çš„ã€‚å½“è¿™ä¸ªç›®æ ‡é“¾æ¥åˆ°å¦ä¸€ä¸ªç›®æ ‡æ—¶ï¼Œé“¾æ¥åˆ°è¿™ä¸ªç›®æ ‡çš„åº“ä¹Ÿä¼šå‡ºç°åœ¨å¦ä¸€ä¸ªç›®æ ‡çš„è¿æ¥çº¿ä¸Šã€‚è¿™ä¸ªä¼ é€’çš„æ¥å£å­˜å‚¨åœ¨interface_link_librariesçš„ç›®æ ‡å±æ€§ä¸­ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®è¯¥å±æ€§ç›´æ¥é‡å†™ä¼ é€’æ¥å£ã€‚</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="å®‰è£…ï¼ˆInstallï¼‰"><a href="#å®‰è£…ï¼ˆInstallï¼‰" class="headerlink" title="å®‰è£…ï¼ˆInstallï¼‰"></a>å®‰è£…ï¼ˆInstallï¼‰</h2><ul>
<li>è¯¦æƒ…å‚è€ƒï¼š<a href="https://cmake.org/cmake/help/v3.22/command/install.html">https://cmake.org/cmake/help/v3.22/command/install.html</a></li>
<li>ä½œç”¨ï¼šç”¨äºå®šä¹‰å®‰è£…è§„åˆ™ï¼Œå®‰è£…å†…å®¹åŒ…æ‹¬å¯æ‰§è¡Œæ–‡ä»¶ï¼Œé™æ€åº“ï¼ŒåŠ¨æ€åº“ä»¥åŠæ–‡ä»¶ï¼Œç›®å½•ï¼Œè„šæœ¬ç­‰</li>
<li>ä½¿ç”¨æ–¹æ³•ï¼šmake install</li>
<li>ç›®æ ‡å®‰è£…è·¯å¾„ï¼š${CMAKE_INSTALL_PREFIX}æŒ‡å®šï¼Œé»˜è®¤/usr/local</li>
</ul>
<h3 id="ç›®æ ‡æ–‡ä»¶å®‰è£…"><a href="#ç›®æ ‡æ–‡ä»¶å®‰è£…" class="headerlink" title="ç›®æ ‡æ–‡ä»¶å®‰è£…"></a>ç›®æ ‡æ–‡ä»¶å®‰è£…</h3><p>ç›®æ ‡æ–‡ä»¶æŒ‡çš„æ˜¯æˆ‘ä»¬é€šè¿‡ add_executable / add_library å¾—åˆ°çš„äºŒè¿›åˆ¶æ–‡ä»¶æˆ–è€…åº“ï¼Œåªæœ‰è¿™äº›æ–‡ä»¶æ‰å¯ä»¥é€šè¿‡è¯¥å‘½ä»¤è£…è½½åˆ°ç›¸åº”çš„ä½ç½®</p>
<ul>
<li>å¯æ‰§è¡Œæ–‡ä»¶ï¼šRUNTIME</li>
<li>åŠ¨æ€åº“ï¼šLIBRARY</li>
<li>é™æ€åº“ï¼šARCHIVE</li>
</ul>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">install(TARGETS targets... [EXPORT &lt;export-name&gt;]</span><br><span class="line">        [RUNTIME_DEPENDENCIES args...|RUNTIME_DEPENDENCY_SET &lt;<span class="built_in">set</span>-name&gt;]</span><br><span class="line">        [[ARCHIVE|LIBRARY|RUNTIME|OBJECTS|FRAMEWORK|BUNDLE|</span><br><span class="line">          PRIVATE_HEADER|PUBLIC_HEADER|RESOURCE]</span><br><span class="line">         [DESTINATION &lt;dir&gt;]</span><br><span class="line">         [PERMISSIONS permissions...]</span><br><span class="line">         [CONFIGURATIONS [Debug|Release|...]]</span><br><span class="line">         [COMPONENT &lt;component&gt;]</span><br><span class="line">         [NAMELINK_COMPONENT &lt;component&gt;]</span><br><span class="line">         [OPTIONAL] [EXCLUDE_FROM_ALL]</span><br><span class="line">         [NAMELINK_ONLY|NAMELINK_SKIP]</span><br><span class="line">        ] [...]</span><br><span class="line">        [INCLUDES DESTINATION [&lt;dir&gt; ...]]</span><br><span class="line">        )</span><br><span class="line">        </span><br><span class="line"><span class="comment">// example:</span></span><br><span class="line">install(TARGETS mybin mystaiclib mydynamiclib</span><br><span class="line">        RUNTIME DESTINATION bin</span><br><span class="line">        ARCHIVE DESTINATION lib</span><br><span class="line">        LIBRARY DESTINATION lib)</span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ™®é€šæ–‡ä»¶å®‰è£…"><a href="#æ™®é€šæ–‡ä»¶å®‰è£…" class="headerlink" title="æ™®é€šæ–‡ä»¶å®‰è£…"></a>æ™®é€šæ–‡ä»¶å®‰è£…</h3><p>æ™®é€šæ–‡ä»¶å³éœ€è¦å¯¼å‡ºçš„å¤´æ–‡ä»¶ã€ä¾èµ–çš„ä¸‰æ–¹åº“ç­‰ç­‰ï¼Œè¯¥å‘½ä»¤åŒæ—¶å¯ä»¥æŒ‡å®šå¯¼å‡ºæ–‡ä»¶çš„æƒé™ï¼ˆé»˜è®¤644ï¼‰</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">install(&lt;FILES|PROGRAMS&gt; files...</span><br><span class="line">        TYPE &lt;type&gt; | DESTINATION &lt;dir&gt;</span><br><span class="line">        [PERMISSIONS permissions...]</span><br><span class="line">        [CONFIGURATIONS [Debug|Release|...]]</span><br><span class="line">        [COMPONENT &lt;component&gt;]</span><br><span class="line">        [RENAME &lt;name&gt;] [OPTIONAL] [EXCLUDE_FROM_ALL])</span><br><span class="line">        </span><br><span class="line"><span class="comment">// example</span></span><br><span class="line">install(FILES mylib.h DESTINATION include)</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç›®å½•å®‰è£…"><a href="#ç›®å½•å®‰è£…" class="headerlink" title="ç›®å½•å®‰è£…"></a>ç›®å½•å®‰è£…</h3><p>å‚æ•°ä»‹ç»ï¼š</p>
<ul>
<li>DIRECTORYï¼šåé¢è¿æ¥çš„æ˜¯æ‰€åœ¨Sourceç›®å½•çš„ç›¸å¯¹è·¯å¾„ï¼ˆç»“å°¾æ˜¯å¦æ˜¯â€/â€œå¯¹æ‹·è´ç»“æœæœ‰ä¸€å®šå½±å“ï¼‰</li>
<li>PATTERNï¼šä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œè¿‡æ»¤</li>
<li>PERMISSIONSï¼šæŒ‡å®šPATTERNè¿‡æ»¤åçš„æ–‡ä»¶æƒé™ã€‚</li>
</ul>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">install(DIRECTORY dirs...</span><br><span class="line">        TYPE &lt;type&gt; | DESTINATION &lt;dir&gt;</span><br><span class="line">        [FILE_PERMISSIONS permissions...]</span><br><span class="line">        [DIRECTORY_PERMISSIONS permissions...]</span><br><span class="line">        [USE_SOURCE_PERMISSIONS] [OPTIONAL] [MESSAGE_NEVER]</span><br><span class="line">        [CONFIGURATIONS [Debug|Release|...]]</span><br><span class="line">        [COMPONENT &lt;component&gt;] [EXCLUDE_FROM_ALL]</span><br><span class="line">        [FILES_MATCHING]</span><br><span class="line">        [[PATTERN &lt;pattern&gt; | REGEX &lt;regex&gt;]</span><br><span class="line">         [EXCLUDE] [PERMISSIONS permissions...]] [...])</span><br><span class="line"></span><br><span class="line"><span class="comment">// example</span></span><br><span class="line">install(DIRECTORY src/ DESTINATION include/myproj  FILES_MATCHING PATTERN <span class="string">"*.h"</span>)</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><ol>
<li><p>Q: ç¼–è¯‘å‚æ•°æ·»åŠ äº†-lpthread å‚æ•°, ä½†æ˜¯è¿˜æ˜¯æŠ¥undefined reference to `pthread_createâ€™ </p>
<p>A : éœ€è¦ä½¿ç”¨target_link_libraries( target thread) åœ¨è¿™é‡Œé“¾æ¥threadåº“</p>
</li>
<li><p>Q: å¦‚æœåœ¨å¤šçº§çš„ç›®å½•ä¸‹ç¼–è¯‘, å§‹ç»ˆæ‰¾ä¸åˆ°é—®é¢˜æŠ¥ undefineçš„é—®é¢˜ ?</p>
<p>A : çœ‹ä¸€ä¸‹æ˜¯ä¸æ˜¯é“¾æ¥çš„åº“æˆ–ç›®æ ‡æ–‡ä»¶æ ¼å¼ä¸åŒ, ä¸€ä¸ªc ä¸€ä¸ªc++ , è¿™æ ·å°±ä¼šå¯¼è‡´æ‰¾ä¸åˆ°ç¬¦å·é”™è¯¯</p>
</li>
<li><p>Q: undefined reference to `typeinfo for xxxBase_classâ€™ ?</p>
<p>A: åŸºç±»çš„æ„é€ å’Œææ„å‡½æ•°éœ€è¦åŠ { };  å¦åˆ™å°±ä¼šæŠ¥è¿™ä¸ªé—®é¢˜</p>
</li>
</ol>
<h1 id="Makefile"><a href="#Makefile" class="headerlink" title="Makefile"></a>Makefile</h1><h2 id="é€šé…ç¬¦"><a href="#é€šé…ç¬¦" class="headerlink" title="é€šé…ç¬¦"></a>é€šé…ç¬¦</h2><table>
<thead>
<tr>
<th>é€šé…ç¬¦</th>
<th>ä½¿ç”¨è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>*</td>
<td>åŒ¹é…0ä¸ªæˆ–è€…æ˜¯ä»»æ„ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>?</td>
<td>åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>[]</td>
<td>æˆ‘ä»¬å¯ä»¥æŒ‡å®šåŒ¹é…çš„å­—ç¬¦æ”¾åœ¨ â€œ[]â€ ä¸­</td>
</tr>
<tr>
<td>%</td>
<td>åŒ¹é…ä»»æ„ä¸ªå­—ç¬¦</td>
</tr>
</tbody></table>
<h2 id="è‡ªåŠ¨åŒ–å˜é‡"><a href="#è‡ªåŠ¨åŒ–å˜é‡" class="headerlink" title="è‡ªåŠ¨åŒ–å˜é‡"></a>è‡ªåŠ¨åŒ–å˜é‡</h2><table>
<thead>
<tr>
<th>è‡ªåŠ¨åŒ–å˜é‡</th>
<th align="center">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>$@</td>
<td align="center">è¡¨ç¤ºè§„åˆ™çš„ç›®æ ‡æ–‡ä»¶åã€‚å¦‚æœç›®æ ‡æ˜¯ä¸€ä¸ªæ–‡æ¡£æ–‡ä»¶ï¼ˆLinux ä¸­ï¼Œä¸€èˆ¬æˆ .a æ–‡ä»¶ä¸ºæ–‡æ¡£æ–‡ä»¶ï¼Œä¹Ÿæˆä¸ºé™æ€çš„åº“æ–‡ä»¶ï¼‰ï¼Œ é‚£ä¹ˆå®ƒä»£è¡¨è¿™ä¸ªæ–‡æ¡£çš„æ–‡ä»¶åã€‚åœ¨å¤šç›®æ ‡æ¨¡å¼è§„åˆ™ä¸­ï¼Œå®ƒä»£è¡¨çš„æ˜¯è§¦å‘è§„åˆ™è¢«æ‰§è¡Œçš„æ–‡ä»¶åã€‚</td>
</tr>
<tr>
<td>$%</td>
<td align="center">å½“ç›®æ ‡æ–‡ä»¶æ˜¯ä¸€ä¸ªé™æ€åº“æ–‡ä»¶æ—¶ï¼Œä»£è¡¨é™æ€åº“çš„ä¸€ä¸ªæˆå‘˜åã€‚</td>
</tr>
<tr>
<td>$&lt;</td>
<td align="center">è§„åˆ™çš„ç¬¬ä¸€ä¸ªä¾èµ–çš„æ–‡ä»¶åã€‚å¦‚æœæ˜¯ä¸€ä¸ªç›®æ ‡æ–‡ä»¶ä½¿ç”¨éšå«çš„è§„åˆ™æ¥é‡å»ºï¼Œåˆ™å®ƒä»£è¡¨ç”±éšå«è§„åˆ™åŠ å…¥çš„ç¬¬ä¸€ä¸ªä¾èµ–æ–‡ä»¶ã€‚</td>
</tr>
<tr>
<td>$?</td>
<td align="center">æ‰€æœ‰æ¯”ç›®æ ‡æ–‡ä»¶æ›´æ–°çš„ä¾èµ–æ–‡ä»¶åˆ—è¡¨ï¼Œç©ºæ ¼åˆ†éš”ã€‚å¦‚æœç›®æ ‡æ–‡ä»¶æ—¶é™æ€åº“æ–‡ä»¶ï¼Œä»£è¡¨çš„æ˜¯åº“æ–‡ä»¶ï¼ˆ.o æ–‡ä»¶ï¼‰ã€‚</td>
</tr>
<tr>
<td>$^</td>
<td align="center">ä»£è¡¨çš„æ˜¯æ‰€æœ‰ä¾èµ–æ–‡ä»¶åˆ—è¡¨ï¼Œä½¿ç”¨ç©ºæ ¼åˆ†éš”ã€‚å¦‚æœç›®æ ‡æ˜¯é™æ€åº“æ–‡ä»¶ï¼Œå®ƒæ‰€ä»£è¡¨çš„åªèƒ½æ˜¯æ‰€æœ‰çš„åº“æˆå‘˜ï¼ˆ.o æ–‡ä»¶ï¼‰åã€‚ ä¸€ä¸ªæ–‡ä»¶å¯é‡å¤çš„å‡ºç°åœ¨ç›®æ ‡çš„ä¾èµ–ä¸­ï¼Œå˜é‡â€œ$â€åªè®°å½•å®ƒçš„ç¬¬ä¸€æ¬¡å¼•ç”¨çš„æƒ…å†µã€‚å°±æ˜¯è¯´å˜é‡â€œ$â€ä¼šå»æ‰é‡å¤çš„ä¾èµ–æ–‡ä»¶ã€‚</td>
</tr>
<tr>
<td>$+</td>
<td align="center">ç±»ä¼¼â€œ$^â€ï¼Œä½†æ˜¯å®ƒä¿ç•™äº†ä¾èµ–æ–‡ä»¶ä¸­é‡å¤å‡ºç°çš„æ–‡ä»¶ã€‚ä¸»è¦ç”¨åœ¨ç¨‹åºé“¾æ¥æ—¶åº“çš„äº¤å‰å¼•ç”¨åœºåˆã€‚</td>
</tr>
<tr>
<td>$*</td>
<td align="center">åœ¨æ¨¡å¼è§„åˆ™å’Œé™æ€æ¨¡å¼è§„åˆ™ä¸­ï¼Œä»£è¡¨â€œèŒâ€ã€‚â€œèŒâ€æ˜¯ç›®æ ‡æ¨¡å¼ä¸­â€œ%â€æ‰€ä»£è¡¨çš„éƒ¨åˆ†ï¼ˆå½“æ–‡ä»¶åä¸­å­˜åœ¨ç›®å½•æ—¶ï¼Œ â€œèŒâ€ä¹ŸåŒ…å«ç›®å½•éƒ¨åˆ†ï¼‰ã€‚</td>
</tr>
</tbody></table>
<h2 id="ç‰¹æ®Šå‡½æ•°"><a href="#ç‰¹æ®Šå‡½æ•°" class="headerlink" title="ç‰¹æ®Šå‡½æ•°"></a>ç‰¹æ®Šå‡½æ•°</h2><h3 id="æ·»åŠ å‰ç¼€"><a href="#æ·»åŠ å‰ç¼€" class="headerlink" title="æ·»åŠ å‰ç¼€"></a>æ·»åŠ å‰ç¼€</h3><ul>
<li>å‡½æ•°åï¼šaddprefix( )</li>
<li>è¯­æ³•ï¼š$(addprefix PREFIX/,${NAMEâ€¦})</li>
<li>å‡½æ•°åŠŸèƒ½ï¼šä¸ºâ€œNAMESâ€¦â€ä¸­çš„æ¯ä¸€ä¸ªæ–‡ä»¶åæ·»åŠ å‰ç¼€â€œPREFIXâ€ã€‚å‚æ•°â€œNAMESâ€¦â€æ˜¯ç©ºæ ¼åˆ†å‰²çš„æ–‡ä»¶ååºåˆ—ï¼Œå°†â€œPREFIXâ€æ·»åŠ åˆ°æ­¤åºåˆ—çš„æ¯ä¸€ä¸ªæ–‡ä»¶åä¹‹å‰ã€‚</li>
<li>è¿”å›å€¼ï¼šä»¥å•ç©ºæ ¼åˆ†å‰²çš„æ·»åŠ äº†å‰ç¼€â€œPREFIXâ€çš„æ–‡ä»¶ååºåˆ—ã€‚</li>
</ul>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">$(addprefix src/,foo bar)</span><br><span class="line"><span class="comment">//è¿”å›å€¼ä¸ºâ€œsrc/foo src/barâ€</span></span><br></pre></td></tr></tbody></table></figure>



<h3 id="è¿‡æ»¤å™¨"><a href="#è¿‡æ»¤å™¨" class="headerlink" title="è¿‡æ»¤å™¨"></a>è¿‡æ»¤å™¨</h3><ul>
<li>å‡½æ•°åï¼šfilter( )</li>
<li>è¯­æ³•ï¼š$(filter SUFFIXâ€¦,$(SOURCES))</li>
<li>ä½œç”¨ï¼šä¿ç•™å­—ä¸² â€œ $(SOURCES)â€ ä¸­æ‰€æœ‰ç¬¦åˆæ¨¡å¼ â€œ SUFFIX â€ çš„å•è¯</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">sources := main.c AT.txt</span><br><span class="line">foo : $(sources)</span><br><span class="line">    cc $(filter %.c,%.s,$(sources)) -o foo</span><br></pre></td></tr></tbody></table></figure>



<h2 id="æ‰“å°"><a href="#æ‰“å°" class="headerlink" title="æ‰“å°"></a>æ‰“å°</h2><p>ç”¨äºMakefileçš„Debugï¼Œæ‰“å°åˆ†ä¸ºä¸‰ä¸ªç­‰çº§ï¼šinfoã€warningã€error</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">$(info SRC = $(SRC))</span><br><span class="line">$(warning INC = $(INC))</span><br><span class="line"><span class="comment">//æ³¨æ„ï¼šæ‰§è¡Œåˆ°errorä¼šç›´æ¥stopé€€å‡º</span></span><br><span class="line">$(error INC = $(INC))</span><br></pre></td></tr></tbody></table></figure>



]]></content>
      <categories>
        <category>Linux</category>
        <category>Tools</category>
      </categories>
      <tags>
        <tag>Makefile</tag>
        <tag>CmakeLists.txt</tag>
      </tags>
  </entry>
  <entry>
    <title>LwIPåè®®æ ˆ</title>
    <url>/2022/11/30/third-party/lwip/</url>
    <content><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><blockquote>
<p>Lwipå®˜ç½‘ï¼š<a href="https://savannah.nongnu.org/projects/lwip/">https://savannah.nongnu.org/projects/lwip/</a></p>
</blockquote>
<p>LWIPï¼ˆlight weight ipï¼‰è½»å‹IPåè®®ï¼Œæœ‰æ— æ“ä½œç³»ç»Ÿçš„æ”¯æŒéƒ½å¯ä»¥è¿è¡Œã€‚LwIPå®ç°çš„é‡ç‚¹æ˜¯åœ¨ä¿æŒTCPåè®®ä¸»è¦åŠŸèƒ½çš„åŸºç¡€ä¸Šå‡å°‘å¯¹RAM çš„å ç”¨ï¼Œå®ƒåªéœ€åå‡ KBçš„RAMå’Œ40Kå·¦å³çš„ROMå°±å¯ä»¥è¿è¡Œï¼Œè¿™ä½¿LwIPåè®®æ ˆé€‚åˆåœ¨ä½ç«¯çš„åµŒå…¥å¼ç³»ç»Ÿä¸­ä½¿ç”¨ã€‚</p>
<p>LWIPæ”¯æŒçš„åè®®ç§ç±»ï¼š</p>
<ul>
<li>DNSï¼ŒåŸŸåè§£æï¼›</li>
<li>SNMPï¼Œç®€å•ç½‘ç»œç®¡ç†åè®®ï¼›</li>
<li>DHCPï¼ŒåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼›</li>
<li>UDP åè®®ï¼Œç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼›</li>
<li>TCP åè®®ï¼Œæ”¯æŒ TCP æ‹¥å¡æ§åˆ¶ï¼Œ RTT ä¼°è®¡ï¼Œå¿«é€Ÿæ¢å¤ä¸é‡ä¼ ç­‰ï¼›</li>
<li>IP åè®®ï¼ŒåŒ…æ‹¬ IPv4 å’Œ IPv6ï¼Œæ”¯æŒ IP åˆ†ç‰‡ä¸é‡è£…ï¼Œæ”¯æŒå¤šç½‘ç»œæ¥å£ä¸‹æ•°æ®è½¬å‘ï¼›</li>
<li>AUTOIPï¼Œ IP åœ°å€è‡ªåŠ¨é…ç½®ï¼›</li>
<li>ICMP åè®®ï¼Œç”¨äºç½‘ç»œè°ƒè¯•ä¸ç»´æŠ¤ï¼›</li>
<li>IGMP åè®®ï¼Œç”¨äºç½‘ç»œç»„ç®¡ç†ï¼Œå¯ä»¥å®ç°å¤šæ’­æ•°æ®çš„æ¥æ”¶ï¼›</li>
<li>ARP åè®®ï¼Œä»¥å¤ªç½‘åœ°å€è§£æåè®®ï¼›</li>
<li>PPPï¼Œç‚¹å¯¹ç‚¹åè®®ï¼Œæ”¯æŒ PPPoE</li>
</ul>
<h1 id="LwIPæ¶æ„"><a href="#LwIPæ¶æ„" class="headerlink" title="LwIPæ¶æ„"></a>LwIPæ¶æ„</h1><p>LwIP ç¬¦åˆ TCP/IP æ¨¡å‹æ¶æ„ï¼Œè§„å®šäº†æ•°æ®çš„æ ¼å¼ã€ä¼ è¾“ã€è·¯ç”±å’Œæ¥æ”¶ï¼Œä»¥å®ç°ç«¯åˆ°ç«¯çš„é€šä¿¡ã€‚ æ­¤æ¨¡å‹åŒ…æ‹¬å››ä¸ªæŠ½è±¡å±‚ï¼Œç”¨äºæ ¹æ®æ¶‰åŠçš„ç½‘ç»œèŒƒå›´ï¼Œå¯¹æ‰€æœ‰ç›¸å…³åè®®æ’åºã€‚è¿™å‡  å±‚ä»ä½åˆ°é«˜ä¾æ¬¡ä¸ºï¼š</p>
<ul>
<li><p>é“¾è·¯å±‚åŒ…å«äº†å±€åŸŸç½‘çš„å•ç½‘æ®µ ï¼ˆé“¾è·¯ï¼‰é€šä¿¡æŠ€æœ¯</p>
</li>
<li><p>ç½‘é™…å±‚ ï¼ˆIPï¼‰å°†ç‹¬ç«‹çš„ç½‘ç»œè¿æ¥èµ·æ¥ï¼Œå»ºç«‹äº’è”</p>
</li>
<li><p>ä¼ è¾“å±‚å¤„ç†ä¸»æœºç«¯å£åˆ°ä¸»æœºç«¯å£çš„é€šä¿¡</p>
</li>
<li><p>åº”ç”¨å±‚åœ¨å®ç°å¤šä¸ªåº”ç”¨è¿›ç¨‹ç›¸äº’é€šä¿¡çš„åŒæ—¶ï¼Œå®Œæˆåº”ç”¨æ‰€éœ€çš„æœåŠ¡ ï¼ˆä¾‹å¦‚ï¼šæ•°æ®å¤„ç†ï¼‰</p>
<p><img src="/images/third-party/lwip.png"></p>
</li>
</ul>
<h1 id="ç¼–ç¨‹æ¨¡å¼"><a href="#ç¼–ç¨‹æ¨¡å¼" class="headerlink" title="ç¼–ç¨‹æ¨¡å¼"></a>ç¼–ç¨‹æ¨¡å¼</h1><h2 id="RAW-API"><a href="#RAW-API" class="headerlink" title="RAW API"></a>RAW API</h2><p>å†…æ ¸å›è°ƒå‹APIï¼Œå½“åˆå§‹åŒ–åº”ç”¨æ—¶ï¼Œç”¨æˆ·éœ€è¦ä¸ºä¸åŒå†…æ ¸äº‹ä»¶æ³¨å†Œæ‰€éœ€çš„å›è°ƒå‡½æ•° ï¼ˆä¾‹å¦‚ TCP_Sentã€ TCP_errorâ€¦ï¼‰ã€‚å½“ç›¸åº”äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œ LwIP ä¼šè‡ªå‘åœ°è°ƒç”¨ç›¸å…³çš„å›è°ƒå‡½æ•°ã€‚<em>æ²¡æœ‰æ“ä½œç³»ç»Ÿæ”¯æŒä¸­ï¼Œåªèƒ½ä½¿ç”¨RAW APIå¼€å‘</em></p>
<table>
<thead>
<tr>
<th></th>
<th>API</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>TCPè¿æ¥å»ºç«‹</td>
<td>tcp_new</td>
<td>å»ºç«‹ä¸€ä¸ªæ–°çš„ TCP PCB ï¼ˆåè®®æ§åˆ¶å—ï¼‰ã€‚</td>
</tr>
<tr>
<td></td>
<td>tcp_bind</td>
<td>å°† TCP PCB ç»‘å®šåˆ°æœ¬åœ° IP åœ°å€å’Œç«¯å£ã€‚</td>
</tr>
<tr>
<td></td>
<td>tcp_listen</td>
<td>å¯åŠ¨ TCP PCB ä¸Šçš„ç›‘å¬è¿›ç¨‹ã€‚</td>
</tr>
<tr>
<td></td>
<td>tcp_accept</td>
<td>æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œè¿æ¥æˆåŠŸå»ºç«‹åè°ƒç”¨ã€‚</td>
</tr>
<tr>
<td></td>
<td>tcp_connect</td>
<td>å‘é€è¿æ¥å»ºç«‹è¯·æ±‚ã€‚</td>
</tr>
<tr>
<td>å‘é€TCPæ•°æ®</td>
<td>tcp_write</td>
<td>å°†å‘é€æ•°æ®å†™å…¥ TCP ç¼“å†²åŒºä¸­ã€‚</td>
</tr>
<tr>
<td></td>
<td>tcp_sent</td>
<td>æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œæ•°æ®å‘é€æˆåŠŸåè°ƒç”¨ã€‚</td>
</tr>
<tr>
<td></td>
<td>tcp_output</td>
<td>å‘é€ TCP ç¼“å†²åŒºä¸­çš„æ•°æ®</td>
</tr>
<tr>
<td>æ¥æ”¶TCPæ•°æ®</td>
<td>tcp_recv</td>
<td>æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œ TCP æ¥æ”¶åˆ°æ•°æ®åè°ƒç”¨</td>
</tr>
<tr>
<td>åº”ç”¨è½®è¯¢</td>
<td>tcp_poll</td>
<td>æ³¨å†Œå›è°ƒå‡½æ•°ï¼ŒTCPæ…¢å®šæ—¶å™¨è°ƒç”¨ï¼ˆ500msä¸€æ¬¡ï¼‰ã€‚</td>
</tr>
<tr>
<td>å…³é—­å¹¶ç»ˆæ­¢è¿æ¥</td>
<td>tcp_close</td>
<td>ä¸»åŠ¨å…³é—­ã€‚</td>
</tr>
<tr>
<td></td>
<td>tcp_err</td>
<td>æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œå‡ºé”™æ—¶è°ƒç”¨ã€‚</td>
</tr>
<tr>
<td></td>
<td>tcp_abort</td>
<td>ä¸­æ­¢è¿æ¥ï¼Œå‘è¿œç¨‹ä¸»æœºå‘é€ RSTã€‚</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>udp_new</td>
<td>åˆ›å»ºæ–°çš„ UDP PCBã€‚</td>
</tr>
<tr>
<td></td>
<td>udp_remove</td>
<td>ç§»é™¤ UDP PCB å¹¶é‡Šæ”¾ç›¸å…³èµ„æºã€‚</td>
</tr>
<tr>
<td></td>
<td>udp_bind</td>
<td>å°† UDP PCB ä¸æœ¬åœ° IP åœ°å€å’Œç«¯å£ç»‘å®šã€‚</td>
</tr>
<tr>
<td></td>
<td>udp_connect</td>
<td>å»ºç«‹ UDP PCB è¿œç¨‹ IP åœ°å€å’Œç«¯å£ã€‚</td>
</tr>
<tr>
<td></td>
<td>udp_disconnect</td>
<td>ç§»é™¤ UDP PCB è¿œç¨‹ IP å’Œç«¯å£ã€‚</td>
</tr>
<tr>
<td></td>
<td>udp_send</td>
<td>å‘é€ UDP æ•°æ®</td>
</tr>
<tr>
<td></td>
<td>udp_recv</td>
<td>æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œå½“æ”¶åˆ°æ–°æ•°æ®æŠ¥æ—¶å³å¯¹å…¶è°ƒç”¨ã€‚</td>
</tr>
</tbody></table>
<h2 id="Netconn-API"><a href="#Netconn-API" class="headerlink" title="Netconn API"></a>Netconn API</h2><p>Netconn API ä¸ºé«˜å±‚æœ‰åº APIï¼Œå…¶æ‰§è¡Œæ¨¡å‹åŸºäºå…¸å‹çš„é˜»å¡å¼æ‰“å¼€ - è¯» - å†™ - å…³é—­æœºåˆ¶ã€‚ è‹¥è¦æ­£å¸¸å·¥ä½œï¼Œæ­¤ API å¿…é¡»å¤„äºå¤šçº¿ç¨‹å·¥ä½œæ¨¡å¼ï¼Œè¯¥æ¨¡å¼éœ€ä¸º LwIP TCP/IP æ ˆå®ç°ä¸“ç”¨çº¿ç¨‹ï¼Œ å¹¶ / æˆ–ä¸ºåº”ç”¨å®ç°å¤šä¸ªçº¿ç¨‹ã€‚</p>
<p>åŸºäºæ“ä½œç³»ç»Ÿçš„IPCæœºåˆ¶ï¼ˆå³ä¿¡å·é‡å’Œé‚®ç®±æœºåˆ¶ï¼‰å®ç°çš„ï¼Œå°†LWIPå†…æ ¸ä»£ç å’Œç½‘ç»œåº”ç”¨ç¨‹åºåˆ†ç¦»æˆäº†ç‹¬ç«‹çš„çº¿ç¨‹ï¼Œå› æ­¤LWIPå†…æ ¸çº¿ç¨‹å°±åªè´Ÿè´£æ•°æ®åŒ…çš„TCP/IPå°è£…å’Œæ‹†å°ï¼Œè€Œä¸ç”¨è¿›è¡Œæ•°æ®çš„åº”ç”¨å±‚å¤„ç†ï¼Œå¤§å¤§æé«˜äº†ç³»ç»Ÿå¯¹ç½‘ç»œæ•°æ®åŒ…çš„å¤„ç†æ•ˆç‡</p>
<table>
<thead>
<tr>
<th>API</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>netconn_new</td>
<td>åˆ›å»ºä¸€ä¸ªæ–°è¿æ¥ã€‚</td>
</tr>
<tr>
<td>netconn_delete</td>
<td>åˆ é™¤ä¸€ä¸ªå·²æœ‰è¿æ¥ã€‚</td>
</tr>
<tr>
<td>netconn_bind</td>
<td>å°†è¿æ¥ç»‘å®šåˆ°æœ¬åœ° IP åœ°å€å’Œç«¯å£ã€‚</td>
</tr>
<tr>
<td>netconn_connect</td>
<td>è¿æ¥è¿œç¨‹ IP åœ°å€å’Œç«¯å£ã€‚</td>
</tr>
<tr>
<td>netconn_send</td>
<td>é€šè¿‡ UDP å‘é€æ•°æ®ã€‚</td>
</tr>
<tr>
<td>netconn_recv</td>
<td>æ¥æ”¶æ•°æ®ã€‚</td>
</tr>
<tr>
<td>netconn_listen</td>
<td>ç½® TCP netconn å¤„äºç›‘å¬æ¨¡å¼ã€‚</td>
</tr>
<tr>
<td>netconn_accept</td>
<td>æ¥å—æ­£åœ¨ç›‘å¬çŠ¶æ€çš„ TCP è¿æ¥ä¸Šçš„ä¼ å…¥è¿æ¥ã€‚</td>
</tr>
<tr>
<td>netconn_write</td>
<td>é€šè¿‡ TCP æ•°æ® ï¼ˆå°†æ•°æ®å†™å…¥ TCP ç¼“å†²åŒºï¼‰ã€‚</td>
</tr>
<tr>
<td>netconn_close</td>
<td>ä¸»åŠ¨å…³é—­ TCP netconnã€‚</td>
</tr>
</tbody></table>
<h2 id="Socket-API"><a href="#Socket-API" class="headerlink" title="Socket API"></a>Socket API</h2><p>äº†æ ‡å‡† BSD å¥—æ¥å­— APIã€‚å®ƒæ˜¯æœ‰åº APIï¼Œåœ¨å†…éƒ¨æ„å»ºäº Netconn API ä¹‹ä¸Šï¼Œå¯¹ç½‘ç»œè¿æ¥è¿›è¡Œäº†é«˜çº§çš„æŠ½è±¡ï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥åƒæ“ä½œæ–‡ä»¶ä¸€æ ·æ“ä½œç½‘ç»œè¿æ¥	</p>
<table>
<thead>
<tr>
<th>API</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>socket</td>
<td>åˆ›å»ºä¸€ä¸ªæ–°å¥—æ¥å­—ã€‚</td>
</tr>
<tr>
<td>bind</td>
<td>å°†å¥—æ¥å­—ç»‘å®šåˆ° IP åœ°å€å’Œç«¯å£ã€‚</td>
</tr>
<tr>
<td>listen</td>
<td>ç›‘å¬å¥—æ¥å­—è¿æ¥ã€‚</td>
</tr>
<tr>
<td>connect</td>
<td>å°†å¥—æ¥å­—è¿æ¥åˆ°è¿œç¨‹ä¸»æœº IP åœ°å€å’Œç«¯å£ã€‚</td>
</tr>
<tr>
<td>accept</td>
<td>åœ¨å¥—æ¥å­—ä¸Šæ¥å—æ–°è¿æ¥ã€‚</td>
</tr>
<tr>
<td>read</td>
<td>ä»å¥—æ¥å­—è¯»å–æ•°æ®ã€‚</td>
</tr>
<tr>
<td>write</td>
<td>å‘å¥—æ¥å­—å†™å…¥æ•°æ®ã€‚</td>
</tr>
<tr>
<td>close</td>
<td>å…³é—­å¥—æ¥å­— ï¼ˆåˆ é™¤å¥—æ¥å­—ï¼‰ã€‚</td>
</tr>
</tbody></table>
<h1 id="LwIPé…ç½®"><a href="#LwIPé…ç½®" class="headerlink" title="LwIPé…ç½®"></a>LwIPé…ç½®</h1><p>lwipopts.h æ–‡ä»¶å…è®¸ç”¨æˆ·å……åˆ†é…ç½®æ ˆåŠå…¶æ‰€æœ‰æ¨¡å—ã€‚ç”¨æˆ·ä¸éœ€è¦å®šä¹‰ æ‰€æœ‰ LwIP é€‰é¡¹ï¼šå¦‚æœæœªå®šä¹‰æŸé€‰é¡¹ï¼Œåˆ™ä½¿ç”¨ opt.h æ–‡ä»¶ä¸­å®šä¹‰çš„é»˜è®¤å€¼ã€‚å› æ­¤ï¼Œ lwipopts.h æä¾›äº†è¦†ç›–è®¸å¤š lwIP è¡Œä¸ºçš„æ–¹æ³•ã€‚</p>
<table>
<thead>
<tr>
<th><strong>Lwip å†…å­˜é€‰é¡¹</strong></th>
<th><strong>å«ä¹‰</strong></th>
</tr>
</thead>
<tbody><tr>
<td>MEM_SIZE</td>
<td>LwIP å †å†…å­˜å¤§å°ï¼šç”¨äºæ‰€æœ‰ LwIP åŠ¨æ€å†…å­˜åˆ†é…</td>
</tr>
<tr>
<td>MEMP_NUM_PBUF</td>
<td>MEM_REF å’Œ MEM_ROM pbuf æ€»æ•°</td>
</tr>
<tr>
<td>MEMP_NUM_UDP_PCB</td>
<td>UDP PCB ç»“æ„ä½“çš„æ€»æ•°</td>
</tr>
<tr>
<td>MEMP_NUM_TCP_PCB</td>
<td>TCP PCB ç»“æ„ä½“çš„æ€»æ•°</td>
</tr>
<tr>
<td>MEMP_NUM_TCP_PCB_LISTEN</td>
<td>å¤„äºç›‘å¬çŠ¶æ€çš„ TCP PCB æ€»æ•°</td>
</tr>
<tr>
<td>MEMP_NUM_TCP_SEG</td>
<td>æœ€å¤šåŒæ—¶åœ¨ TCP ç¼“å†²é˜Ÿåˆ—ä¸­çš„æŠ¥æ–‡æ®µæ•°é‡</td>
</tr>
<tr>
<td>PBUF_POOL_SIZE</td>
<td>PBUF_POOL ç±»å‹çš„ pbuf æ€»æ•°</td>
</tr>
<tr>
<td>PBUF_POOL_BUFSIZE</td>
<td>PBUF_POOL ç±»å‹ pbuf çš„å¤§å°</td>
</tr>
<tr>
<td>TCP_MSS</td>
<td>æœ€å¤§ TCP æŠ¥æ–‡æ®µ ï¼ˆMTU - IP æŠ¥å¤´å¤§å° - TCP æŠ¥å¤´å¤§å°ï¼‰</td>
</tr>
<tr>
<td>TCP_SND_BUF</td>
<td>å¯¹äºä¸€ä¸ªè¿æ¥ï¼Œ TCP çš„å‘é€ç¼“å†²ç©ºé—´</td>
</tr>
<tr>
<td>TCP_SND_QUEUELEN</td>
<td>TCP å‘é€é˜Ÿåˆ—ä¸­ pbuf çš„æœ€å¤§æ•°</td>
</tr>
<tr>
<td>TCP_WND</td>
<td>TCP æ¥æ”¶çª—å¤§å°</td>
</tr>
</tbody></table>
<h1 id="LwIPå†…å­˜ç®¡ç†"><a href="#LwIPå†…å­˜ç®¡ç†" class="headerlink" title="LwIPå†…å­˜ç®¡ç†"></a>LwIPå†…å­˜ç®¡ç†</h1><p>LwIPæœ‰ä¸¤ç§å†…å­˜ç®¡ç†æ–¹å¼ï¼šå†…å­˜æ± ã€å†…å­˜å †</p>
<p>å‚è€ƒé“¾æ¥ï¼š<a href="https://blog.csdn.net/jiangjunjie_2005/article/details/26051399#t9">https://blog.csdn.net/jiangjunjie_2005/article/details/26051399#t9</a></p>
<h1 id="å®ç°TCPæœåŠ¡å™¨"><a href="#å®ç°TCPæœåŠ¡å™¨" class="headerlink" title="å®ç°TCPæœåŠ¡å™¨"></a>å®ç°TCPæœåŠ¡å™¨</h1><blockquote>
<p>echoserverå®ç°ï¼š<a href="https://github.com/yangLieee/codebackup/tree/master/iperf">https://github.com/yangLieee/codebackup/tree/master/iperf</a></p>
</blockquote>
<ol>
<li><p>æ–°å»ºæ§åˆ¶å— </p>
<p>ä½¿ç”¨tcp_new()å‡½æ•°å»ºç«‹ä¸€ä¸ªTCPæ§åˆ¶å—ã€‚</p>
</li>
<li><p>ç»‘å®šæ§åˆ¶å—</p>
<p>å¯¹äºæœåŠ¡å™¨æ¥è¯´ï¼Œæ–°å»ºä¸€ä¸ªæ§åˆ¶å¿«åï¼Œéœ€è¦åœ¨æ§åˆ¶å—ä¸Šç»‘å®šæœ¬åœ°IPå’Œç«¯å£ï¼Œä»¥æ–¹ä¾¿å®¢æˆ·ç«¯çš„è¿æ¥ã€‚</p>
</li>
<li><p>æ§åˆ¶å—ä¾¦å¬</p>
<p>ä½¿ç”¨tcp_listenå‡½æ•°ï¼Œå¯¹äºæœåŠ¡å™¨æ¥è¯´ï¼Œéœ€è¦æ˜¾æ€§è°ƒç”¨tcp_listenå‡½æ•°ä»¥ä½¿æ§åˆ¶å—è¿›å…¥ç›‘å¬çŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ã€‚</p>
</li>
<li><p>å»ºç«‹è¿æ¥</p>
<p>åœ¨tcp_listenå‡½æ•°è¿›å…¥æœåŠ¡å™¨ç›‘å¬çŠ¶æ€åï¼Œéœ€è¦é©¬ä¸Šä½¿ç”¨tcp_acceptå‡½æ•°æ¥æ³¨å†Œä¸€ä¸ªæ¥æ”¶å¤„ç†å‡½æ•°ï¼Œå› ä¸ºä¸€æ—¦æœ‰å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚è¢«æˆåŠŸå»ºç«‹åï¼ŒæœåŠ¡å™¨å°±ä¼šè°ƒç”¨è¿™ä¸ªå¤„ç†å‡½æ•°ã€‚</p>
</li>
<li><p>æ¥å—å¹¶å¤„ç†æ•°æ®</p>
<p>ä¸€æ—¦è¿æ¥æˆåŠŸï¼Œacceptå›è°ƒå‡½æ•°ä¼šè°ƒç”¨tcp_recvå‡½æ•°æ³¨å†Œä¸€ä¸ªæ¥æ”¶å®Œæˆçš„å¤„ç†å‡½æ•°ã€‚å¯¹äºæœåŠ¡å™¨æ¥è¯´ï¼Œæ¥æ”¶åˆ°äº†å®¢æˆ·ç«¯çš„æ•°æ®æˆ–æ“ä½œè¦æ±‚ï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸€å›è°ƒå‡½æ•°è¿›è¡Œå¤„ç†ã€‚è¿™å…¶å®æ˜¯ä¸€ä¸ªå¤æ‚çš„è¿‡ç¨‹ï¼šæ¥æ”¶åˆ°æ•°æ®åï¼Œé¦–å…ˆé€šçŸ¥æ›´æ–°æ¥å—çª—å£ï¼ˆä½¿ç”¨tcp_recvedå‡½æ•°ï¼‰ï¼Œå¤„ç†å¹¶å‘é€æ•°æ®ï¼ˆä½¿ç”¨tcp_writeå‡½æ•°ï¼‰ï¼Œæ•°æ®å‘é€æˆåŠŸåˆ™æ¸…é™¤å·²å‘é€çš„æ•°æ®ï¼ˆä½¿ç”¨tcp_sentå‡½æ•°ï¼‰ï¼Œæœ€åå…³é—­è¿æ¥ï¼ˆä½¿ç”¨å‡½æ•°tcp_closeï¼‰ã€‚</p>
</li>
</ol>
<h1 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h1><ol>
<li><p>Qï¼š<a href="https://blog.csdn.net/tanmx219/article/details/105930028">tcp_recvdæ­£ç¡®è°ƒç”¨æ–¹æ³•</a>ï¼Ÿ</p>
<p>Aï¼šå¾ˆå¤šæºç æ˜¯åœ¨tcp_server_sentå‘é€å‡½æ•°ä¸­è°ƒtcp_recvdï¼Œå¦‚æœç”¨æˆ·ä¸æ˜¯ç”¨æ¥echoï¼ˆç«‹å³å‘å›ç›¸åŒçš„æŠ¥æ–‡ï¼‰ï¼Œè€Œæ˜¯çœŸæ­£è¦å¤„ç†äº‹åŠ¡çš„æ—¶å€™ï¼Œè¿™ç§ç”¨æ³•æ˜¯é”™è¯¯çš„ï¼šæ­¤æ—¶ï¼Œæ¥æ”¶çª—å£å¤§å°ç”±å‘é€çª—å£å†³å®šï¼Œå¦‚æœæ²¡æœ‰å‘é€æ–°æ•°æ®ï¼Œæ¥æ”¶çª—å£å°±ä¼šè¶Šæ¥è¶Šå°ï¼Œç›´åˆ°æœ€åæ— æ³•æ¥æ”¶æ•°æ®ã€‚<strong>æ­£ç¡®çš„ç”¨æ³•æ˜¯ï¼šåœ¨æ”¶åˆ°æ•°æ®åï¼Œåº”ç”¨å±‚è°ƒç”¨tcp_recvedå‡½æ•°æ¢å¤åŸæ¥çš„çª—å£å¤§å°ï¼›è€Œåœ¨å‘é€å‡½æ•°ä¸­ï¼Œä¸ç”¨ç®¡çª—å£çš„äº‹ï¼</strong></p>
</li>
<li><p>Qï¼šè°ƒç”¨lwip iperfæ¥å£ï¼Œæ— æ³•å…³é—­server?</p>
<p>Aï¼šlwip iperfåªæ˜¯å®ç°å½“clientæ–­å¼€è¿æ¥åˆ é™¤æ‰å…¶ç›¸å…³pcbç»“æ„ä½“ï¼Œè€Œæ²¡æœ‰æ–­å¼€tcpè¿æ¥æ²¡æœ‰é‡Šæ”¾ç›‘å¬ç«¯å£ï¼Œä»¿ç…§lwiperf_tcp_closeå‡½æ•°å®ç°ä¸€ä¸ªæ–°çš„é’ˆå¯¹serverå…³é—­çš„æ¥å£å³å¯</p>
</li>
</ol>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol>
<li><a href="https://www.kancloud.cn/jiejietop/tcpip/988613">LwIPåº”ç”¨å¼€å‘æŒ‡å—</a></li>
<li><a href="https://blog.csdn.net/weixin_54217950/article/details/121344759">ç½‘ç»œåŸºç¡€ä¹‹åè®®æ ˆ</a></li>
<li><a href="https://www.st.com/resource/zh/user_manual/um1713-developing-applications-on-stm32cube-with-lwip-tcpip-stack-stmicroelectronics.pdf">ä½¿ç”¨ LwIP TCP/IP æ ˆåœ¨ STM32Cube ä¸Šå¼€å‘åº”ç”¨</a></li>
<li><a href="https://blog.51cto.com/u_15262460/2883223">LwIPä½¿ç”¨ç»éªŒ</a></li>
<li><a href="https://blog.csdn.net/zhzht19861011/article/details/125322654">TCPå›è°ƒå‡½æ•°æ˜¯ä½•æ—¶è°ƒç”¨çš„</a></li>
<li><a href="https://blog.csdn.net/zhzht19861011/article/details/125278742">åè®®æ ˆä»€ä¹ˆæƒ…å†µä¸‹å‘é€ RST æ ‡å¿—</a></li>
</ol>
]]></content>
      <categories>
        <category>Third Party</category>
      </categories>
      <tags>
        <tag>lwip</tag>
      </tags>
  </entry>
  <entry>
    <title>XPath Helperå®‰è£…åŠä½¿ç”¨</title>
    <url>/2022/12/03/third-party/xpath/</url>
    <content><![CDATA[<h1 id="å¼•è¯­"><a href="#å¼•è¯­" class="headerlink" title="å¼•è¯­"></a>å¼•è¯­</h1><p><em>åœ¨çˆ¬è™«å„ä¸ªåº”ç”¨åœºæ™¯ä¸‹ï¼Œæ•°æ®è§£æä¸ºå…¶ä¸­é‡è¦çš„ä¸€ç¯ã€‚è€Œåœ¨æ•°æ®è§£æä¸­ï¼ŒBeautifulSoupã€Xpathä»¥åŠæ­£åˆ™è¡¨è¾¾å¼ç­‰å¤šç§æ–¹æ³•å‡ä¸ºåˆ©å™¨ï¼Œåœ¨å®é™…åº”ç”¨ä¸­æ ¹æ®ä¸åŒåœºæ™¯é€‰æ‹©ä¸åŒçš„æ–¹æ³•æ˜¯æœ€é«˜æ•ˆçš„ï¼Œä½†æ˜¯å¯¹å„ä¸ªæ–¹æ³•çš„æŒæ¡ç¨‹åº¦è¦æ±‚å¾ˆé«˜ã€‚äº‹å®ä¸Šï¼Œç²¾é€šä¸€ç§æ–¹æ³•å°±å·²ç»æ»¡è¶³éœ€è¦äº†ï¼Œå†æ­¤åŸºç¡€ä¹‹ä¸Šï¼Œç”¨è¾…åŠ©å·¥å…·å¸®åŠ©ç†è§£æé«˜æ•ˆç‡ã€‚<br>æœ¬æ–‡å°†æä¾›ç»™â€œçˆ¬è™«å¤§å¸ˆä»¬â€ä½¿ç”¨xpathæ–¹æ³•çš„è¾…åŠ©å·¥å…·XPath Helperæ’ä»¶ã€‚</em></p>
<h1 id="XPath-Helperç®€ä»‹"><a href="#XPath-Helperç®€ä»‹" class="headerlink" title="XPath Helperç®€ä»‹"></a>XPath Helperç®€ä»‹</h1><p>XPathå³ä¸ºXMLè·¯å¾„è¯­è¨€ï¼Œå®ƒæ˜¯ä¸€ç§ç”¨æ¥ç¡®å®šXML(æ ‡å‡†é€šç”¨æ ‡è®°è¯­è¨€çš„å­é›†)æ–‡æ¡£ä¸­æŸéƒ¨åˆ†ä½ç½®çš„è¯­è¨€ã€‚XPathåŸºäºXMLçš„æ ‘çŠ¶ç»“æ„ï¼Œæä¾›åœ¨æ•°æ®ç»“æ„æ ‘ä¸­æ‰¾å¯»èŠ‚ç‚¹çš„èƒ½åŠ›ã€‚èµ·åˆXPathçš„æå‡ºçš„åˆè¡·æ˜¯å°†å…¶ä½œä¸ºä¸€ä¸ªé€šç”¨çš„ã€ä»‹äºXPointerä¸XSLé—´çš„è¯­æ³•æ¨¡å‹ã€‚<br>XPath Helperæ˜¯ä¸€æ¬¾ä¸“ç”¨äºchromeå†…æ ¸æµè§ˆå™¨çš„å®ç”¨å‹çˆ¬è™«ç½‘é¡µè§£æå·¥å…·ã€‚XPath Helperæ’ä»¶åŠŸèƒ½å¼ºåŠ²ï¼Œæ”¯æŒè¿›è¡ŒXPathæŸ¥è¯¢åŠŸèƒ½ã€‚XPath Helpæ’ä»¶å¯ä»¥å¸®åŠ©ç”¨æˆ·åœ¨å„ç±»ç½‘ç«™ä¸Šé€šè¿‡æŒ‰shifté”®é€‰æ‹©æƒ³è¦æŸ¥çœ‹çš„é¡µé¢å…ƒç´ æ¥æå–æŸ¥è¯¢å…¶ä»£ç ï¼ŒåŒæ—¶è¿˜æ”¯æŒç”¨æˆ·å¯¹æŸ¥è¯¢å‡ºæ¥çš„ä»£ç è¿›è¡Œç¼–è¾‘ï¼Œè€Œç¼–è¾‘å‡ºçš„ç»“æœå°†ç«‹å³æ˜¾ç¤ºåœ¨æ—è¾¹çš„ç»“æœæ¡†ä¸­ã€‚</p>
<h1 id="XPath-Helperå®‰è£…æ–¹æ³•"><a href="#XPath-Helperå®‰è£…æ–¹æ³•" class="headerlink" title="XPath Helperå®‰è£…æ–¹æ³•"></a>XPath Helperå®‰è£…æ–¹æ³•</h1><ol>
<li>æ ¹æ®ä¸‹é¢çš„é“¾æ¥å°†æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°ã€‚<br>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/18_Ws5qjHW9skhE1cb1jtYA">https://pan.baidu.com/s/18_Ws5qjHW9skhE1cb1jtYA</a><br>æå–ç ï¼šx0no</li>
<li>ä¸‹è½½å®Œæˆåï¼Œå°†æ–‡ä»¶çš„åç¼€åæ”¹ä¸ºâ€œ.zipâ€ï¼Œå¹¶è¿›è¡Œè§£å‹ã€‚</li>
<li>è§£å‹ä¹‹åæœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œå°†æ–‡ä»¶åä¸ºâ€œ2.0.2_0.crxâ€åç¼€åæ”¹ä¸ºâ€œ.zipâ€ï¼Œå¹¶å¯¹å…¶è¿›è¡ŒäºŒæ¬¡è§£å‹ã€‚<br>==è‡³æ­¤ï¼Œæ‰€æœ‰å¼¹å‡ºçš„æç¤ºè¯­å¥å…¨éƒ¨é€‰æ‹©  æ˜¯==</li>
<li>äºŒæ¬¡è§£å‹å®Œæˆï¼Œè·å¾—å¦‚ä¸‹å›¾æ‰€ç¤ºçš„æ–‡ä»¶å¤¹ã€‚å¦‚æœçº¢è‰²æ¡†å†…æ–‡ä»¶å¤¹å¦‚å›¾æ‰€ç¤ºï¼Œå°†â€œ_metadataâ€æ”¹ä¸ºâ€œmetadataâ€ã€‚å¦‚æœé»˜è®¤å°±æ˜¯â€œmetadataâ€åˆ™ä¸éœ€è¦åšä»»ä½•æ“ä½œã€‚<br><img src="/images/third-party/xpath-1.png"></li>
<li>è¿›å…¥è‡ªå·±å¯¹åº”çš„æµè§ˆå™¨ã€‚åœ¨æ­¤ï¼Œæˆ‘ä»¥Googleæµè§ˆå™¨ä¸ºåŸºç¡€æ“ä½œã€‚<br><strong>ç‚¹å‡»è°·æ­Œå³ä¸Šè§’çš„ä¸‰ä¸ªç‚¹çš„æŒ‰é’®<br>é€‰æ‹©æ›´å¤šå·¥å…·â€”â€”&gt;é€‰æ‹©æ‰©å±•ç¨‹åº<br>è¿›å…¥ï¼Œæ‰“å¼€å¼€å‘è€…æ¨¡å¼ï¼ŒåŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åºï¼Œé€‰æ‹©ç›¸åº”çš„å·²è§£å‹çš„æ–‡ä»¶ï¼Œç¡®è®¤ï¼<br>é‡å¯æµè§ˆå™¨ï¼Œç¡®è®¤å¯ä»¥æ­£å¸¸ä½¿ç”¨</strong></li>
<li>å¦‚ä¸‹å›¾è¡¨ç¤ºåˆ›å»ºæˆåŠŸã€‚<img src="/images/third-party/xpath-2.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li>
</ol>
<h1 id="XPath-Helperç®€å•ä½¿ç”¨æ–¹æ³•"><a href="#XPath-Helperç®€å•ä½¿ç”¨æ–¹æ³•" class="headerlink" title="XPath Helperç®€å•ä½¿ç”¨æ–¹æ³•"></a>XPath Helperç®€å•ä½¿ç”¨æ–¹æ³•</h1><h2 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h2><ol>
<li>è·å–é¡µé¢å…ƒç´ çš„xpathåœ°å€ã€‚</li>
<li>éªŒè¯ç”¨æˆ·è‡ªå·±å†™çš„xpathåœ°å€æ˜¯å¦æ­£ç¡®ã€‚</li>
</ol>
<h2 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h2><ul>
<li>æ‰“å¼€/å…³é—­XPath Helperå¿«æ·é”®ï¼šCtrl+Shift+x</li>
<li>æ‰“å¼€Xpath Helperåçš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤º<br> <img src="/images/third-party/xpath-3.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li>
<li>æ‰“å¼€è¯¥æ’ä»¶çš„æƒ…å†µä¸‹ï¼ŒæŒ‰ä½Shiftåœ¨é¡µé¢å†…è¿›è¡Œç§»åŠ¨ï¼Œé¼ æ ‡æ‰€ç»è¿‡ä¹‹å¤„ä¼šæœ‰é»„è‰²æ–¹æ¡†æ˜¾ç¤ºï¼Œä¸‹å›¾ä¸ºåœ¨CSDNé¦–é¡µï¼Œé€‰ä¸­æ ‡é¢˜å¼•å¯¼æ¡†çš„ç»“æœã€‚å·¦ä¾§çš„queryæ¡†å†…å³ä¸ºé€‰ä¸­å†…å®¹çš„xpathåœ°å€ã€‚<br><img src="/images/third-party/xpath-4.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li>
<li>å¦‚æœä½œä¸ºéªŒè¯çš„æ–¹æ³•ï¼Œåœ¨queryæ¡†å†…å†™å…¥è‡ªå·±å†™å…¥xpathåœ°å€ï¼Œçœ‹resultæ¡†å†…æ˜¯å¦æ˜¯è‡ªå·±æƒ³è¦æŠ“å–çš„å…ƒç´ ï¼Œå¦‚æœä¸æ­£ç¡®ï¼Œå¯ä»¥å®æ—¶åœ¨queryå†…è¿›è¡Œä¿®æ”¹ï¼Œç›´è‡³è·å¾—æ­£ç¡®xpathåœ°å€ã€‚<br><img src="/images/third-party/xpath-5.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li>
</ul>
]]></content>
      <categories>
        <category>Third Party</category>
      </categories>
  </entry>
</search>

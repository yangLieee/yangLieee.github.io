<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>ç†è§£c/c++ Volatileå…³é”®å­—</title>
    <url>/2022/11/15/Volatile/</url>
    <content><![CDATA[<p>ç½‘ç»œä¸Šå¯¹äºvolatileçš„è§£è¯»ä¼—è¯´çº·çº­ï¼Œè€Œä¸”å…¶ä¸­è¾ƒå¤šçš„æ˜¯javaå†…å­˜æ¨¡å‹ã€‚</p>
<p>æœ¬ç¯‡æ–‡ç« å°†åŸºäºè‡ªå·±çš„å­¦ä¹ å’Œå®éªŒï¼Œé’ˆå¯¹C/C++è¯­è¨€åµŒå…¥å¼å¼€å‘åœºæ™¯è¿›è¡Œvolatileå…³é”®å­—çš„åˆ†æ</p>
<h1 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h1><p>volatile å…³é”®å­—æ˜¯ C /C++ ç¼–ç¨‹è¯­è¨€çš„ä¸€éƒ¨åˆ†ï¼Œä½œä¸ºä¸€ç§ç±»å‹ä¿®é¥°ç¬¦ã€‚æˆ‘å°†å…¶ä½œç”¨æ€»ç»“ä¸º<em><strong>å‘Šè¯‰ç¼–è¯‘å™¨ç¦æ­¢ä¼˜åŒ–å…¶æ‰€ä¿®é¥°å¯¹è±¡çš„è¯»å†™è®¿å­˜æ“ä½œåŠæŒ‡ä»¤é¡ºåºï¼Œä¿è¯å˜é‡çš„å¯è§æ€§</strong></em></p>
<blockquote>
<p>å¯è§æ€§ï¼šå½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†å…±äº«å˜é‡åï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³å¾—çŸ¥è¿™ä¸ªä¿®æ”¹ã€‚</p>
<p>æœ‰åºæ€§ï¼šç¨‹åºæ‰§è¡Œçš„é¡ºåºæŒ‰ç…§ä»£ç çš„å…ˆåé¡ºåºæ‰§è¡Œã€‚</p>
<p>åŸå­æ€§ï¼šä¸€ä¸ªæ“ä½œæˆ–å¤šä¸ªæ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œä¸”æ‰§è¡Œçš„è¿‡ç¨‹ä¸ä¼šè¢«ä»»ä½•å› ç´ æ‰“æ–­ï¼Œè¦ä¹ˆå°±éƒ½ä¸æ‰§è¡Œã€‚</p>
</blockquote>
<p>åœ¨ã€Šç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»ã€‹è¿™æœ¬ä¹¦ä¸­è®²åˆ°ï¼ŒvolatileåŸºæœ¬å¯ä»¥åšåˆ°ä¸¤ä¸ªäº‹æƒ…ï¼š</p>
<ol>
<li>é˜»æ­¢ç¼–è¯‘å™¨ä¸ºäº†æé«˜é€Ÿåº¦å°†ä¸€ä¸ªå˜é‡ç¼“å­˜åˆ°å¯„å­˜å™¨å†…è€Œä¸å†™å›</li>
<li>é˜»æ­¢ç¼–è¯‘å™¨è°ƒæ•´æ“ä½œvolatileå˜é‡çš„æŒ‡ä»¤é¡ºåº</li>
</ol>
<p>å¯¹äºç¬¬ä¸€ä¸ªä½œç”¨volatileæ˜¯å¯ä»¥å¾ˆå¥½çš„åšåˆ°ï¼Œè€Œå¯¹äºç¬¬äºŒä¸ªä½œç”¨ç¼–è¯‘å™¨å±‚é¢å¯ä»¥ä¿è¯æŒ‡ä»¤æœ‰åºä½†æ˜¯æˆ‘ä»¬æ— æ³•é˜»æ­¢cpuåŠ¨æ€è°ƒæ•´é¡ºåºã€‚çœŸæ­£ä¿è¯æœ‰åºæ€§æ˜¯éœ€è¦é€šè¿‡å†…å­˜å±éšœå®Œæˆçš„ï¼Œè€Œvolatileå¹¶æ²¡æœ‰å†…å­˜å±éšœçš„åŠŸèƒ½ï¼Œgcc æä¾›äº†ä¸€ä¸ªå†…è”å‡½æ•° <em><strong>asm volatile (â€œâ€ : : : â€œmemoryâ€</strong>)</em> ç¼–è¯‘å™¨å±éšœï¼Œå…·ä½“å¹³å°ç›¸å…³å†…å­˜å±éšœéœ€è¦åˆ°å…·ä½“çš„ç»“æ„å¹³å°å»å‚è€ƒ</p>
<h1 id="ç†è§£volatile"><a href="#ç†è§£volatile" class="headerlink" title="ç†è§£volatile"></a>ç†è§£volatile</h1><blockquote>
<p>Collinså¯¹äºVolatileé‡Šä¹‰ï¼šA situation that is volatile is <strong>likely</strong> to change <strong>suddenly</strong> and <strong>unexpectedly</strong>.</p>
</blockquote>
<p><strong>volatile</strong> æœ¬èº«é‡Šä¹‰ä¸º <strong>æ˜“å¤±çš„ã€æ˜“å˜çš„</strong></p>
<p>å¯¹äºç”¨volatileæ‰€ä¿®é¥°çš„å¯¹è±¡ï¼Œåœ¨å…¶è‡ªèº«çš„å«ä¹‰åŸºç¡€ä¸Šï¼Œæœ‰ä¸‰ä¸ªå‰¯è¯å¯ä»¥å¾ˆå¥½çš„å¯¹å…¶æ€§è´¨è¿›è¡Œè¯ é‡Šï¼š</p>
<ul>
<li><p>likely   å¯èƒ½åœ°ï¼ŒæŒ‡å¯¹è±¡çš„çŠ¶æ€å¯èƒ½å˜åŒ–ã€ä¹Ÿå¯èƒ½ä¸å˜ä¿æŒçŠ¶æ€ï¼Œå¼ºè°ƒç»“æœï¼›</p>
</li>
<li><p>suddenly:   çªç„¶åœ°ï¼ŒæŒ‡å¯¹è±¡çŠ¶æ€çš„ç¬æ—¶å˜åŒ–ï¼Œå¼ºè°ƒè¿‡ç¨‹ï¼›</p>
</li>
<li><p>unexpectedly:  ä¸å¯é¢„æœŸåœ°ï¼ŒæŒ‡å¯¹è±¡å˜åŒ–çš„æ—¶é—´ç»“æœéƒ½ä¸å¯é¢„æœŸï¼›</p>
</li>
</ul>
<h1 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h1><p>æ ¹æ®å«ä¹‰æ€§è´¨ï¼Œåœ¨åµŒå…¥å¼å¼€å‘ä¸­ä»¥ä¸‹ä¸‰ç§åœºæ™¯æ˜¯ä¸€å®šè¦è€ƒè™‘ä½¿ç”¨volatileå…³é”®å­—çš„ï¼ˆå¤§å¤šæ•°æƒ…å†µä¸€å®šä½¿ç”¨ï¼ï¼ï¼ï¼‰</p>
<ol>
<li>å¤šçº¿ç¨‹ä»»åŠ¡è¯»å†™åŒä¸€å…¨å±€å˜é‡ï¼Œ</li>
<li>ä¸­æ–­æœåŠ¡ç¨‹åºä¿®æ”¹çš„å…¨å±€å˜é‡</li>
<li>å†…å­˜æ˜ å°„å¤–è®¾å¯„å­˜å™¨</li>
</ol>
<h1 id="æµ‹è¯•ç”¨ä¾‹"><a href="#æµ‹è¯•ç”¨ä¾‹" class="headerlink" title="æµ‹è¯•ç”¨ä¾‹"></a>æµ‹è¯•ç”¨ä¾‹</h1><h2 id="ä¸­æ–­åœºæ™¯"><a href="#ä¸­æ–­åœºæ™¯" class="headerlink" title="ä¸­æ–­åœºæ™¯"></a>ä¸­æ–­åœºæ™¯</h2><p>ä¸‹é¢ä¸€æ®µä»£ç ï¼Œæˆ‘ä»¬æ‰€æœŸå¾…çš„ç»“æœæ˜¯ä¸»ç¨‹åºè¿è¡Œï¼Œç›´åˆ°crtl+cæŒ‰é”®æŒ‰ä¸‹ç¨‹åºé€€å‡ºï¼Œä»£ç ç¼–è¯‘æ‰§è¡Œä¹‹åå¹¶ä¸æ˜¯æˆ‘ä»¬æ‰€é¢„æœŸçš„æ ·å­ã€‚å¦‚æœsig_doneå˜é‡ä¸é€šè¿‡volatileä¿®é¥°ç¨‹åºå°†æ°¸è¿œä¸ä¼šé€€å‡ºï¼Œè€Œvolatileå…³é”®å­—å¾ˆå¥½çš„è§£å†³äº†è¿™ä¸€ä¸ªé—®é¢˜</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;signal.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdbool.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">bool</span> sig_done = <span class="literal">false</span>;</span><br><span class="line"><span class="comment">//static volatile bool sig_done = false;</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">handler</span><span class="params">(<span class="type">int</span> sig)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span>(sig == SIGINT)</span><br><span class="line">    â”†   sig_done = <span class="literal">true</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc , <span class="type">char</span> *argv[])</span></span><br><span class="line">{</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"main start, press ctrl+c go on\n"</span>);</span><br><span class="line">    signal(SIGINT, handler);</span><br><span class="line">    <span class="keyword">while</span>(!sig_done) {</span><br><span class="line">    }   </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"main exit\n"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘å‘½ä»¤</span></span><br><span class="line">gcc main.c <span class="number">-02</span></span><br><span class="line">objdump -d a.out &gt; a.s</span><br></pre></td></tr></tbody></table></figure>

<p>é€šè¿‡åæ±‡ç¼–æ¯”è¾ƒä¸¤ä¸ªç¨‹åºçš„å¼‚åŒï¼ˆå·¦ä¾§volatileï¼Œå³ä¾§æ— volatileï¼‰</p>
<p><img src="/images/coding/meld.png" alt="image"></p>
<p>æ²¡æœ‰voaltileçš„whileå®ç°æ–¹å¼ä¸ºï¼š</p>
<ol>
<li>æ¯”è¾ƒripå¯„å­˜å™¨+0x2f65åœ°å€å¤„çš„å€¼ï¼ˆsig_doneï¼‰ä¸ 0 æ˜¯å¦ç›¸ç­‰</li>
<li>ä¸ç›¸ç­‰è·³è½¬åˆ°main+0x30å³ä¸Šä¸€æ¡æŒ‡ä»¤å¤„</li>
<li>è·³è½¬</li>
</ol>
<p>æœ‰volatileçš„whileå®ç°æ–¹å¼ï¼š</p>
<ol>
<li><p>nopl (%rax) ç¼–è¯‘å™¨å¼€å¯ä¼˜åŒ–åä½¿æŒ‡ä»¤æŒ‰å­—å¯¹é½,å‡å°‘å–æŒ‡ä»¤çš„æ—¶é’Ÿå‘¨æœŸã€‚</p>
</li>
<li><p>å°† ripå¯„å­˜å™¨+0x2f65åœ°å€å¤„çš„å€¼æ”¾åˆ°eaxå¯„å­˜å™¨ä¸­</p>
<blockquote>
<p>movzblæŒ‡ä»¤è´Ÿè´£æ‹·è´ä¸€ä¸ªå­—èŠ‚ï¼Œå¹¶ç”¨0å¡«å……å…¶ç›®çš„æ“ä½œæ•°ä¸­çš„å…¶ä½™å„ä½ï¼Œè¿™ç§æ‰©å±•æ–¹å¼å«â€œé›¶æ‰©å±•â€ã€‚</p>
<p>movsblæŒ‡ä»¤è´Ÿè´£æ‹·è´ä¸€ä¸ªå­—èŠ‚ï¼Œå¹¶ç”¨æºæ“ä½œæ•°çš„æœ€é«˜ä½å¡«å……å…¶ç›®çš„æ“ä½œæ•°ä¸­çš„å…¶ä½™å„ä½ï¼Œè¿™ç§æ‰©å±•æ–¹å¼å«â€œç¬¦å·æ‰©å±•â€ã€‚</p>
</blockquote>
</li>
<li><p>test   %al,%al å¯¹eaxå¯„å­˜å™¨ä½ä½é€»è¾‘ä¸</p>
<blockquote>
<p>Testå‘½ä»¤ï¼šå°†ä¸¤ä¸ªæ“ä½œæ•°è¿›è¡Œé€»è¾‘ä¸è¿ç®—ï¼Œå¹¶æ ¹æ®è¿ç®—ç»“æœè®¾ç½®ç›¸å…³çš„æ ‡å¿—ä½ï¼ˆze: zero flagï¼‰ã€‚ä½†æ˜¯ï¼ŒTestå‘½ä»¤çš„ä¸¤ä¸ªæ“ä½œæ•°ä¸ä¼šè¢«æ”¹å˜ã€‚è¿ç®—ç»“æœåœ¨è®¾ç½®è¿‡ç›¸å…³æ ‡è®°ä½åä¼šè¢«ä¸¢å¼ƒã€‚</p>
</blockquote>
</li>
<li><p>je   å¦‚æœZFï¼ˆé›¶æ ‡å¿—ä½ï¼‰=1ï¼Œé›¶æ ‡å¿—ä½ä¸º1ï¼ˆçœŸå€¼ï¼‰è¯´æ˜ç»“æœä¸º0ï¼Œåˆ™è½¬åˆ°labelæ‰€æŒ‡çš„æŒ‡ä»¤è¯­å¥ï¼›å¦åˆ™è·³è¿‡è¿™æ¡è¯­å¥ï¼Œæ‰§è¡Œä¸‹æ¡è¯­å¥</p>
</li>
</ol>
<h2 id="å¤šçº¿ç¨‹åœºæ™¯"><a href="#å¤šçº¿ç¨‹åœºæ™¯" class="headerlink" title="å¤šçº¿ç¨‹åœºæ™¯"></a>å¤šçº¿ç¨‹åœºæ™¯</h2><figure class="highlight cpp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">bool</span> mstop = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">//static volatile bool mstop = true;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">first_thread</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s start\n"</span>, __func__);</span><br><span class="line">    <span class="keyword">while</span>(mstop) {</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s exit\n"</span>, __func__);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">second_thread</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">sleep</span>(<span class="number">3</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s start\n"</span>, __func__);</span><br><span class="line">    mstop = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s exit\n"</span>, __func__);</span><br><span class="line">}                                                                                                                                                                     </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    std::thread fthread{first_thread};</span><br><span class="line">    std::thread sthread{second_thread};</span><br><span class="line">    fthread.<span class="built_in">join</span>();</span><br><span class="line">	sthread.<span class="built_in">join</span>();</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="å¤–è®¾å¯„å­˜å™¨"><a href="#å¤–è®¾å¯„å­˜å™¨" class="headerlink" title="å¤–è®¾å¯„å­˜å™¨"></a>å¤–è®¾å¯„å­˜å™¨</h2><p>å¯¹äºå¤–è®¾é€šå¸¸è®¾ç½®æœ‰çŠ¶æ€å¯„å­˜å™¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¾ªç¯è¯»å–çŠ¶æ€å¯„å­˜å™¨çš„å€¼æ¥æŸ¥çœ‹å¯¹åº”å¤–è®¾çš„çŠ¶æ€ã€‚å¯¹äºå¦‚ä¸‹ç¤ºä¾‹ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨volatileå…³é”®å­—ï¼Œç¼–è¯‘å™¨å¯èƒ½ç”Ÿæˆçš„ä»£ç æ˜¯è¯»å–ä¸€ä¸ªå›ºå®šåœ°å€çš„å€¼è€Œä¸ä¼šæ¯æ¬¡éƒ½ä»ä¸»å­˜ä¸­è¯»å–æ–°çš„å€¼ï¼ˆæˆ–è€…è¯»å–næ¬¡çŠ¶æ€ï¼Œç”Ÿæˆçš„ä»£ç åªè¯»å–äº†ä¸€æ¬¡ï¼Œç„¶åä½¿ç”¨næ¬¡ç›¸åŒçš„å€¼ï¼‰</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//è®¾ç½®å¯„å­˜å™¨</span></span><br><span class="line">*(<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> *) STATUS_BASE_ADDR = <span class="number">1</span> &lt;&lt; <span class="number">24</span>; </span><br><span class="line"><span class="comment">//è¯»å¯„å­˜å™¨</span></span><br><span class="line"><span class="keyword">while</span>(!(*(<span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> *) STATUS_BASE_ADDR)) {</span><br><span class="line">    <span class="comment">// do action</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h1 id="çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼"><a href="#çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼" class="headerlink" title="çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼"></a>çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼</h1><p>è¯¥éƒ¨åˆ†ä¸æ˜¯volatileçš„ä½¿ç”¨ï¼Œè€Œæ˜¯å¯¹å†…å±å±éšœçš„ç†è§£</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//mp3decoder.h</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">mp3decoder</span> :</span> public decoderImp </span><br><span class="line">{</span><br><span class="line">    public:</span><br><span class="line">    	<span class="type">static</span> mp3decoder* <span class="title function_">getInstance</span><span class="params">()</span>;</span><br><span class="line">    private:</span><br><span class="line">    	mp3decoder();</span><br><span class="line">    	~mp3decoder();</span><br><span class="line">    	<span class="type">static</span> mp3decoder* mdecoder;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="comment">//mp3decoder.cpp</span></span><br><span class="line"><span class="comment">//çº¿ç¨‹ä¸å®‰å…¨ï¼Œé€‚ç”¨äºå•çº¿ç¨‹</span></span><br><span class="line">mp3decoder* mp3decoder::mdecoder = <span class="literal">NULL</span>;</span><br><span class="line">mp3decoder* <span class="title function_">mp3decoder::getInstance</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span>(mdecoder == <span class="literal">NULL</span>)</span><br><span class="line">        mdecoder = new mp3decoder();</span><br><span class="line">    <span class="keyword">return</span> mdecoder;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//çº¿ç¨‹å®‰å…¨ï¼Œä½†é”çš„ä»£ä»·å¤ªé«˜</span></span><br><span class="line">mp3decoder* <span class="title function_">mp3decoder::getInstance</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    lock();</span><br><span class="line">    <span class="keyword">if</span>(mdecoder == <span class="literal">NULL</span>)</span><br><span class="line">        mdecoder = new mp3decoder();</span><br><span class="line">    <span class="keyword">return</span> mdecoder;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//çº¿ç¨‹å®‰å…¨ï¼Œé”çš„ä»£ä»·å¤ªé«˜</span></span><br><span class="line">mp3decoder* <span class="title function_">mp3decoder::getInstance</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    lock();</span><br><span class="line">    <span class="keyword">if</span>(mdecoder == <span class="literal">NULL</span>)</span><br><span class="line">        mdecoder = new mp3decoder();</span><br><span class="line">    <span class="keyword">return</span> mdecoder;</span><br><span class="line">    unlock();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//Double-Checked Locking Pattern (DCLP åŒæ£€æŸ¥é”)ï¼ŒæŒ‡ä»¤é‡æ’åºreorderä¸å®‰å…¨</span></span><br><span class="line">mp3decoder* <span class="title function_">mp3decoder::getInstance</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (mdecoder == <span class="literal">NULL</span>) {</span><br><span class="line">        lock();</span><br><span class="line">    	<span class="keyword">if</span>(mdecoder == <span class="literal">NULL</span>)</span><br><span class="line">       		mdecoder = new mp3decoder();</span><br><span class="line">         unlock();</span><br><span class="line">    	<span class="keyword">return</span> mdecoder;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//å†…å­˜å±éšœ</span></span><br><span class="line">mp3decoder* <span class="title function_">mp3decoder::getInstance</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (mdecoder == <span class="literal">NULL</span>) {</span><br><span class="line">    	<span class="keyword">if</span>(mdecoder == <span class="literal">NULL</span>) {</span><br><span class="line">            mp3decoder *tmp = new mp3decoder();</span><br><span class="line">            MemoryBarrier();</span><br><span class="line">            mdecoder = tmp;</span><br><span class="line">        }</span><br><span class="line">    	<span class="keyword">return</span> mdecoder;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// mdecoder = new mp3decoder()åœ¨cpuå±‚é¢åŠ¨ä½œï¼š</span></span><br><span class="line"><span class="comment">// 1. åˆ†é…å†…å­˜</span></span><br><span class="line"><span class="comment">// 2. è°ƒç”¨æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="comment">// 3. å°†å†…å­˜åœ°å€èµ‹å€¼ç»™mdecoderæŒ‡é’ˆ</span></span><br><span class="line"><span class="comment">// ç”±äº2ã€3å¯¹äºç¼–è¯‘å™¨æ¥è®²æ˜¯æœ‰å¯èƒ½è¿›è¡Œä¼˜åŒ–çš„ï¼Œå³å…ˆå°†æŒ‡é’ˆèµ‹å€¼å†è°ƒç”¨æ„é€ å‡½æ•°ï¼Œå¯¼è‡´çº¿ç¨‹ä¸å®‰å…¨ï¼ï¼</span></span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>å‚è€ƒæ–‡ç« ï¼š</p>
<ul>
<li><a href="https://barrgroup.com/embedded-systems/how-to/c-volatile-keyword">How to Use Câ€™s volatile Keyword</a></li>
<li><a href="https://barrgroup.com/tech-talks/volatile-c">Pro Tips for Using Câ€™s volatile Keyword</a></li>
<li><a href="https://liam.page/2018/01/18/volatile-in-C-and-Cpp/">è°ˆè°ˆ c / c++ ä¸­çš„volatile</a></li>
</ul>
</blockquote>
]]></content>
      <categories>
        <category>c/c++</category>
      </categories>
      <tags>
        <tag>volatile</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello New World</title>
    <url>/2022/08/22/hello-world/</url>
    <content><![CDATA[<blockquote>
<p>Be all you can be!</p>
</blockquote>
<p>Hello World æ˜¯ç¨‹åºå‘˜è¿›å…¥ç¼–ç¨‹ä¸–ç•Œåçœ‹åˆ°çš„ç¬¬ä¸€é“é£æ™¯ï¼Œæˆ‘ä¹Ÿååˆ†ä¹æ„è¿™ä½œä¸ºç¬¬ä¸€ç¯‡åšæ–‡çš„æ ‡é¢˜ï¼Œå¯¹æˆ‘æ¥è®²å¯èƒ½æ˜¯ï¼šä½ å¥½æ–°ä¸–ç•Œï¼</p>
<p>ç¬”è€…æ˜¯ä¸€ååµŒå…¥å¼è½¯ä»¶å·¥ç¨‹å¸ˆï¼Œæœªæ¥æ›´å¤šçš„å†…å®¹å°†ä¼šæ˜¯å…³äºLinuxã€Androidç­‰ç›¸å…³å†…å®¹ï¼Œç¼–ç¨‹è¯­è¨€æ–¹é¢å°†ä¼šæ˜¯ä»¥C / C++ä¸ºä¸»ã€‚åšè¿™ä¸ªåšå®¢æœ‰ä¸‰ä¸ªç›®çš„ï¼š</p>
<ol>
<li>è®°å½•è‡ªå·±åœ¨å·¥ä½œä¸­é‡åˆ°çš„é—®é¢˜åŠç›¸å…³è§£å†³åŠæ³•ã€‚å¸®åŠ©è‡ªå·±ç§¯ç´¯è°ƒè¯•ç»éªŒåŒæ—¶å¸®åŠ©å…¶ä»–å¯èƒ½é‡åˆ°åŒæ ·é—®é¢˜çš„æœ‹å‹ï¼Œé¿å…è¸©å¾ˆå¤šå‘ï¼›</li>
<li>æ€»ç»“è‡ªå·±è¿‘æœŸå­¦åˆ°çš„æ–°çš„çŸ¥è¯†å’Œå†…å®¹ã€‚è¿™éƒ¨åˆ†ä¸ä¸€å®šæ˜¯æœ€å…¨é¢çš„ä½†å¯¹äºå¤„äºç›¸åŒé˜¶æ®µçš„æˆ‘ä»¬ä¸€å®šæ˜¯æœ€å®ç”¨çš„ï¼Œåé¢å†ä¸æ–­çš„å®Œå–„æ›´æ–°ï¼›</li>
<li>æœ€åå¯èƒ½å°±æ˜¯ç®€å•çš„è®°å½•å¹¶å®‰åˆ©ä¸€äº›å®ç”¨çš„å·¥å…·æˆ–è€…æ¯”è¾ƒå¥½çš„æ–‡ç« ï¼Œèƒ½å¤Ÿä»¥é€šä¿—çš„è¯­è¨€å¸®åŠ©æˆ‘ä»¬ç†è§£æŸä¸€ä¸ªç‚¹æˆ–è€…çœ‹æ¸…æ¥šæŸä¸€ä¸ªé¢ã€‚</li>
</ol>
<p>ç›®å‰æˆ‘åªæ­å»ºäº†ä¸»é¡µåŸºç¡€æ¨¡å—ï¼Œåé¢éšç€æ–‡ç« çš„ä¸æ–­è¾“å‡ºä¹Ÿä¼šæ·»ç –åŠ ç“¦çš„ã€‚æˆ‘ä¹Ÿå¸Œæœ›åç»­èƒ½å†™ä¸€äº›è¯»ä¹¦ç¬”è®°æˆ–è€…ç”Ÿæ´»ç»éªŒæ¥åšè®°å½•åšåˆ†äº«ï¼åšå®¢æ›´æ–°é¢‘ç‡æš‚å®š1~2å‘¨è‡³å°‘ä¸€ç¯‡å†…å®¹ä¹Ÿä¸€å®šæ˜¯å’Œå·¥ä½œç”Ÿæ´»ç›¸å…³çš„ã€‚å¦‚æœæœ‰é”™è¯¯è¿˜è¯·æŒ‡æ­£å…±åŒè¿›æ­¥å‘€<span class="github-emoji" style="display:inline;vertical-align:middle"><span>ğŸ˜ƒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>!</p>
<p align="right">2022-8-22/23.38</p>

<p align="right">Lee</p>

]]></content>
      <categories>
        <category>Personal</category>
      </categories>
      <tags>
        <tag>å¼€ç¯‡</tag>
      </tags>
  </entry>
  <entry>
    <title>æ­å»ºUbuntuè™šæ‹Ÿæœº</title>
    <url>/2022/10/22/ubuntu-create/</url>
    <content><![CDATA[<h1 id="Linux-ç®€ä»‹"><a href="#Linux-ç®€ä»‹" class="headerlink" title="Linux ç®€ä»‹"></a>Linux ç®€ä»‹</h1><p>linusè‡ªä¼ ã€Šåªæ˜¯ä¸ºäº†å¥½ç©ã€‹ä¸­è¿™æ ·å®šä¹‰ï¼š</p>
<ul>
<li><p>ç±»Unixæ“ä½œç³»ç»Ÿ</p>
</li>
<li><p>å¼€æ”¾æºä»£ç æ–¹å¼åä½œå¼€å‘</p>
</li>
<li><p>é‡‡ç”¨GPLé€šç”¨è®¸å¯è¯ç»´æƒ</p>
</li>
<li><p>ä¸»è¦ç”¨äºè¶…çº§ç”µè„‘ã€ä¼ä¸šçº§æœåŠ¡å™¨ã€åµŒå…¥å¼è®¾å¤‡ç­‰</p>
</li>
</ul>
<h1 id="Ubuntu-ç®€ä»‹"><a href="#Ubuntu-ç®€ä»‹" class="headerlink" title="Ubuntu ç®€ä»‹"></a>Ubuntu ç®€ä»‹</h1><ul>
<li>æ¡Œé¢åº”ç”¨ä¸ºä¸»çš„Linuxæ“ä½œç³»ç»Ÿ</li>
<li>æ“ä½œç®€å•ã€æ–¹ä¾¿ä½¿ç”¨</li>
<li>ç³»ç»Ÿå®‰å…¨æ€§é«˜ï¼Œé»˜è®¤useræƒé™ç™»å½•</li>
<li>Ubuntuä¸­æ–‡ç½‘ç«™ï¼š<a href="http://www.wubantu.co/">http://www.wubantu.co</a></li>
<li>Ubuntuä¸­æ–‡ç¤¾åŒºï¼š<a href="http://www.ubuntu.org.cn/">http://www.ubuntu.org.cn</a></li>
<li>UbuntuæŠ€æœ¯ï¼š<a href="http://wiki.ubuntu.org.cn/">http://wiki.ubuntu.org.cn</a></li>
</ul>
<h1 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h1><ul>
<li>ç‰©ç†ä¸»æœº</li>
<li>isoé•œåƒ</li>
<li>vmware / VirtualBox</li>
</ul>
<p>ç½‘ç›˜ä¸­æˆ‘å‡†å¤‡äº†ubuntu20.04.4-isoã€ubuntu16.04.7-isoã€Vmware-16.2.3å®‰è£…åŒ…åŠå¯†é’¥å’Œä¸€ä»½linuxå‘½ä»¤å¤§å…¨ï¼</p>
<p>å¯†é’¥å¯¹äºä¸åŒç‰ˆæœ¬å¯èƒ½æœ‰å·®å¼‚å¯ä»¥éƒ½è¿›è¡Œå°è¯•ï¼Œå…¶åªæ˜¯å¯¹äºä¸ªäººå­¦ä¹ ä½¿ç”¨ï¼Œå»ºè®®è´­ä¹°æ­£ç‰ˆï¼</p>
<p>åŒæ—¶é™„ä¸Šç›¸å…³å®˜ç½‘é“¾æ¥ï¼š</p>
<ul>
<li>ubuntuå„ç‰ˆæœ¬é•œåƒï¼š<a href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu-releases/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu-releases/</a></li>
<li>vmwareå®˜ç½‘ï¼š<a href="https://www.vmware.com/cn/products/workstation-pro.html">https://www.vmware.com/cn/products/workstation-pro.html</a></li>
<li>VirtualBoxï¼š<a href="https://www.virtualbox.org/">https://www.virtualbox.org</a></li>
<li>èµ„æºç½‘ç›˜é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/18vxScuvFp2Vf4g28nRSC5w">https://pan.baidu.com/s/18vxScuvFp2Vf4g28nRSC5w</a><br>æå–ç ï¼šf8uo</li>
</ul>
<h1 id="å®‰è£…è¿‡ç¨‹"><a href="#å®‰è£…è¿‡ç¨‹" class="headerlink" title="å®‰è£…è¿‡ç¨‹"></a>å®‰è£…è¿‡ç¨‹</h1><p>å‚è€ƒè§†é¢‘ï¼š<a href="https://www.bilibili.com/video/BV1hd4y127HY">https://www.bilibili.com/video/BV1hd4y127HY</a></p>
]]></content>
      <categories>
        <category>Linux</category>
        <category>æ­å»ºè™šæ‹Ÿæœº</category>
      </categories>
  </entry>
  <entry>
    <title>init.rcè¯­æ³•åŠè§£æ</title>
    <url>/2022/11/16/init.rc/</url>
    <content><![CDATA[<p>åœ¨linuxè®¾å¤‡ä¸Šè¾“å…¥â€œpstreeâ€å‘½ä»¤æˆ‘ä»¬ä¾¿ä¼šçœ‹åˆ°ä¸€æ£µè¿›ç¨‹æ ‘ï¼Œä¸åŒçŠ¶æ€ä¸åŒè®¾å¤‡æ ‘ä¸Šè¿›ç¨‹åå­—è¿›ç¨‹å·å¯èƒ½ä¸å®Œå…¨ä¸€è‡´ï¼Œä½†è¿›ç¨‹å·pid=1çš„è¿›ç¨‹ä¸€å®šæ˜¯initè¿›ç¨‹ï¼å¯¹äºAndroidç³»ç»Ÿæ¥è®²ï¼Œå…¶å®é™…æ˜¯è¿è¡ŒäºLinuxå†…æ ¸ä¹‹ä¸Šçš„ä¸€ç³»åˆ—â€œæœåŠ¡è¿›ç¨‹â€ï¼Œè€Œè¿™äº›æœåŠ¡è¿›ç¨‹çš„â€œè€ç¥–å®—â€å°±æ˜¯initï¼Œå®ƒæ˜¯Androidä¸­ç¬¬ä¸€ä¸ªè¢«å¯åŠ¨çš„è¿›ç¨‹ï¼Œæ‰€æœ‰æœåŠ¡éƒ½æ˜¯é€šè¿‡è§£æinit.rcæ–‡ä»¶å¾—åˆ°çš„ï¼ˆéƒ¨åˆ†å¯ä»¥æ‰§è¡Œç¨‹åºé€šè¿‡init.d/æ–‡ä»¶å¤¹ä¸‹çš„è„šæœ¬å¯åŠ¨ï¼‰</p>
<p>æœ¬ç¯‡æ–‡ç« å°†å¯¹init.rcæ–‡ä»¶è¯­æ³•è¿›è¡Œè§£æ</p>
<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><blockquote>
<p>æŸ¥çœ‹andriodæºç ï¼š<a href="http://androidxref.com/">http://androidxref.com/</a></p>
</blockquote>
<p>init.rcæ˜¯ç³»ç»Ÿå¯åŠ¨çš„ç¬¬ä¸€ä¸ªç¨‹åºæ‰€åŠ è½½çš„è¯­æ³•æ–‡ä»¶ã€‚init.rcæ–‡ä»¶æ˜¯ä»¥â€œå—â€(section)ä¸ºå•ä½æœåŠ¡çš„ï¼Œä¸€ä¸ªâ€œå—â€(section)å¯ä»¥åŒ…å«å¤šè¡Œï¼Œè€Œä¸€è¡Œä¸­åŒ…å«å¤šä¸ªtokens(ç¬¦å·)ã€‚â€œå—â€(section)åˆ†æˆä¸¤å¤§ç±»ï¼šä¸€ç±»ç§°ä¸ºâ€åŠ¨ä½œ(action)â€ï¼Œå¦ä¸€ç±»ç§°ä¸ºâ€œæœåŠ¡(service)â€ã€‚è€Œä¸€ä¸ªinit.rcè„šæœ¬ç”±å››ä¸ªç±»å‹çš„å£°æ˜ç»„æˆï¼š</p>
<ol>
<li>åŠ¨ä½œ ï¼šActionsï¼Œä»¥å…³é”®å­—â€œonâ€å¼€å§‹</li>
<li>å‘½ä»¤ ï¼šCommandsï¼Œä»¥å…³é”®å­—â€œstartâ€â€œrestartâ€â€œstopâ€å¼€å§‹</li>
<li>æœåŠ¡ ï¼šServices</li>
<li>é€‰é¡¹ ï¼šOptions</li>
</ol>
<h1 id="Actions"><a href="#Actions" class="headerlink" title="Actions"></a>Actions</h1><p>Actionså°±æ˜¯å“åº”æŸä¸ªäº‹ä»¶çš„è¿‡ç¨‹ã€‚å¦‚ä¸‹æ‰€ç¤ºå½“æ»¡è¶³triggerè§¦å‘æ¡ä»¶æ—¶ä¾æ¬¡æ‰§è¡ŒCommandså‘½ä»¤ã€‚æºç ä¼šä¾æ¬¡å°†è¿™äº›å‘½ä»¤æ·»åŠ åˆ°â€œå‘½ä»¤æ‰§è¡Œé˜Ÿåˆ—å°¾éƒ¨â€ï¼Œç³»ç»Ÿå¯¹è¿™äº›å‘½ä»¤é¡ºåºæ‰§è¡Œã€‚æ‰€ä»¥æœåŠ¡å¯åŠ¨çš„æ ¹æœ¬å°±æ˜¯onç±»å‹çš„sectionè¢«æ‰§è¡Œçš„è¿‡ç¨‹</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">on &lt;trigger&gt;        //è§¦å‘æ¡ä»¶</span><br><span class="line">    &lt;command1&gt;      //å‘½ä»¤1</span><br><span class="line">    &lt;command2&gt;      //å‘½ä»¤2</span><br><span class="line">    &lt;command3&gt;      //å‘½ä»¤3</span><br></pre></td></tr></tbody></table></figure>

<p>å¯¹äºtriggerï¼ˆè§¦å‘å™¨ï¼‰æ¥è®²ï¼Œå¸¸è§çš„æœ‰ä¸¤ç§å½¢å¼ï¼š</p>
<ol>
<li>å•çº¯çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼šon boot</li>
<li>é”®å€¼åŒ¹é…ï¼Œæ ¼å¼ä¸ºâ€œ on property <key> = <value> â€ã€‚ä¾‹å¦‚ï¼šon property:init.svc.wifi = stopped</value></key></li>
</ol>
<p>æ­¤å¤–è¿˜æœ‰ä¸¤ç§å½¢å¼ï¼š</p>
<ol>
<li>device-added/removed-<patch> å½“è®¾å¤‡èŠ‚ç‚¹æ·»åŠ /åˆ é™¤æ—¶è§¦å‘æ­¤äº‹ä»¶</patch></li>
<li>sevice-exited-<name> å½“æŒ‡å®šæœåŠ¡<name> å­˜åœ¨æ—¶è§¦å‘</name></name></li>
</ol>
<h2 id="Actionsè§£æåæ‰§è¡Œé¡ºåº"><a href="#Actionsè§£æåæ‰§è¡Œé¡ºåº" class="headerlink" title="Actionsè§£æåæ‰§è¡Œé¡ºåº"></a>Actionsè§£æåæ‰§è¡Œé¡ºåº</h2><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">on early-init           #åœ¨åˆå§‹åŒ–æ—©æœŸé˜¶æ®µè§¦å‘</span><br><span class="line">on init                 #åˆå§‹åŒ–é˜¶æ®µè§¦å‘ã€‚è¿™é‡Œä¼šæ‰§è¡Œå®Œå±æ€§æœåŠ¡ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥è®¾ç½®å±æ€§äº†</span><br><span class="line">on late-init            #åœ¨åˆå§‹åŒ–æ™šæœŸè§¦å‘ã€‚åœ¨è¿™é‡Œä¼šé€šè¿‡triggeræ¥æ‰§è¡Œå…¶ä»–çš„action,ä»¥ä¸‹å‡æ˜¯</span><br><span class="line">on early-fs</span><br><span class="line">on fs</span><br><span class="line">on post-fs</span><br><span class="line">on post-fs-data</span><br><span class="line">on firmware_mounts_complete</span><br><span class="line">on early-boot</span><br><span class="line">on boot`</span><br></pre></td></tr></tbody></table></figure>

<h1 id="Commands"><a href="#Commands" class="headerlink" title="Commands"></a>Commands</h1><table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>start <service></service></td>
<td>å¯åŠ¨ä¸€ä¸ªæœåŠ¡ï¼Œå¦‚æœå®ƒæ²¡æœ‰å¤„äºè¿è¡ŒçŠ¶æ€çš„è¯</td>
</tr>
<tr>
<td>stop <service></service></td>
<td>åœæ­¢ä¸€ä¸ªæœåŠ¡ï¼Œå¦‚æœå½“å‰å®ƒå¤„äºè¿è¡ŒçŠ¶æ€çš„è¯</td>
</tr>
<tr>
<td>restart <service></service></td>
<td></td>
</tr>
<tr>
<td>setprop <name> <value></value></name></td>
<td>è®¾ç½®<name>çš„å±æ€§å€¼ä¸º<value></value></name></td>
</tr>
<tr>
<td>trigger <event></event></td>
<td>è§¦å‘ä¸€ä¸ªäº‹ä»¶</td>
</tr>
<tr>
<td>export <name> <value></value></name></td>
<td>è®¾ç½®<name>ç¯å¢ƒå˜é‡çš„å€¼ä¸º<value>ï¼Œå…¨å±€æœ‰æ•ˆ</value></name></td>
</tr>
<tr>
<td>mount <type> <device> <dir> [<mountoption>]*</mountoption></dir></device></type></td>
<td>å°è¯•åœ¨æŒ‡å®šè·¯å¾„ä¸ŠæŒ‚è½½ä¸€ä¸ªè®¾å¤‡</td>
</tr>
</tbody></table>
<h1 id="Services"><a href="#Services" class="headerlink" title="Services"></a>Services</h1><p>å®é™…ä¸Šæ¯ä¸€ä¸ªserviceå°±æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºï¼Œå®ƒä»¬åœ¨ç‰¹å®šé€‰é¡¹çš„çº¦æŸä¸‹æ˜¯è¢«initç¨‹åºè¿è¡Œæˆ–è€…é‡å¯(serviceå¯ä»¥åœ¨é…ç½®ä¸­æŒ‡å®šæ˜¯å¦éœ€è¦é€€å‡ºé‡å¯ï¼Œè¿™æ ·å½“serviceå‡ºç°å¼‚å¸¸crashæ—¶å°±å¯ä»¥æœ‰æœºä¼šå¤åŸ)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">service &lt;name&gt; &lt;pathname&gt; [ &lt;argument&gt; ]*</span><br><span class="line">        &lt;option&gt;</span><br><span class="line">        &lt;option&gt;</span><br><span class="line">        ...</span><br><span class="line"># &lt;name&gt;       serviceæœåŠ¡çš„åå­—</span><br><span class="line"># &lt;pathname&gt;   serviceè·¯å¾„ï¼Œä¸€èˆ¬å¯¹åº”å¯æ‰§è¡Œç¨‹åºæˆ–è€…è„šæœ¬</span><br><span class="line"># &lt;argument&gt;   å¯åŠ¨pathnameä¸‹çš„serviceæ‰€éœ€è¦çš„å‚æ•°</span><br><span class="line"># &lt;option&gt;     serviceçš„çº¦æŸé¡¹</span><br></pre></td></tr></tbody></table></figure>

<h1 id="Options"><a href="#Options" class="headerlink" title="Options"></a>Options</h1><table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>disable</td>
<td>éšå¼å£°æ˜ï¼Œé»˜è®¤ä¸ä¼šè‡ªåŠ¨å¯åŠ¨è¯¥æœåŠ¡ï¼Œéœ€è¦æ˜¾å¼è°ƒç”¨</td>
</tr>
<tr>
<td>oneshot</td>
<td>å­—é¢æ„æ€ä¸€æ¬¡æ€§ï¼Œå³æœåŠ¡é€€å‡ºæ—¶ï¼Œä¸è¦ä¸»åŠ¨é‡å¯è¯¥æœåŠ¡</td>
</tr>
<tr>
<td>onrestart</td>
<td>å½“æœåŠ¡é‡å¯æ—¶ï¼Œæ‰§è¡ŒæŸäº›å‘½ä»¤ï¼ˆéœ€è¦ç†è§£ï¼‰</td>
</tr>
<tr>
<td>class <name></name></td>
<td>æŒ‡å®šè¯¥æœåŠ¡å±äº<name>classç±»ï¼Œé»˜è®¤classåä¸ºdefaultï¼ˆæ³¨ï¼šåŒä¸€ä¸ªclassæ‰€æœ‰æœåŠ¡å¿…é¡»æ˜¯åŒæ—¶å¯åŠ¨æˆ–åœæ­¢ï¼‰</name></td>
</tr>
<tr>
<td>socket <name> <type> <perm> [<user> [<group>] ]</group></user></perm></type></name></td>
<td>åˆ›å»ºä¸€ä¸ªåä¸ºdev/socket/<name>çš„ socketï¼Œç„¶åå°†å®ƒçš„fdå€¼ä¼ ç»™å¯åŠ¨å®ƒçš„è¿›ï¼Œæœ‰æ•ˆçš„<type>å€¼åŒ…æ‹¬dgram,stream å’Œseqpacketã€‚ueser å’Œgroup çš„é»˜è®¤å€¼ä¸º0ã€‚</type></name></td>
</tr>
<tr>
<td>critical</td>
<td>è¡¨æ˜è¿™æ˜¯å¯¹è®¾å¤‡è‡³å…³é‡è¦çš„æœåŠ¡ï¼›å¦‚æœå®ƒåœ¨å››åˆ†é’Ÿå†…é€€å‡ºè¶…è¿‡å››æ¬¡ï¼Œåˆ™è®¾å¤‡å°†è¿›å…¥Recovery æ¨¡å¼</td>
</tr>
<tr>
<td>group <groupname> [<groupname>]*</groupname></groupname></td>
<td>åœ¨å¯åŠ¨æœåŠ¡å‰å°†ç”¨æˆ·ç»„åˆ‡æ¢è‡³<groupname></groupname></td>
</tr>
<tr>
<td>setenv <name> <value></value></name></td>
<td>è®¾ç½®ç¯å¢ƒå˜é‡<name> ä¸ºå€¼<value></value></name></td>
</tr>
</tbody></table>
<h1 id="Notice"><a href="#Notice" class="headerlink" title="Notice"></a>Notice</h1><ol>
<li>serviceå’ŒActionséƒ½æ˜¯æœ‰å”¯ä¸€çš„åå­—çš„ã€‚å¦‚æœæœ‰é‡åçš„æƒ…å†µä¼šä½œä¸ºé”™è¯¯å¿½ç•¥ã€‚</li>
<li>æ— è®ºæ˜¯åŠ¨ä½œè¿˜æ˜¯æœåŠ¡ï¼Œå¹¶ä¸æ˜¯æŒ‰ç…§æ–‡ä»¶çš„ç¼–æ’é¡ºåºæ‰§è¡Œçš„ã€‚</li>
<li>è¯¥æ–‡ä»¶ä¸­æ³¨é‡Šä»¥â€œ#â€å¼€å§‹ï¼›åæ–œæ â€œ\â€åœ¨è¡Œå°¾è¡¨ç¤ºä¸‹é¢ä¸€è¡Œæ˜¯åŒä¸€è¡Œ</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">/* </span><br><span class="line"> * copy from http://androidxref.com/6.0.0_r5/xref/bootable/recovery/etc/init.rc</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">import /init.recovery.${ro.hardware}.rc</span><br><span class="line"></span><br><span class="line">on early-init</span><br><span class="line">    start ueventd</span><br><span class="line">    start healthd</span><br><span class="line"></span><br><span class="line">on init</span><br><span class="line">    export PATH /sbin:/system/bin</span><br><span class="line">    export ANDROID_ROOT /system</span><br><span class="line">    export ANDROID_DATA /data</span><br><span class="line">    export EXTERNAL_STORAGE /sdcard</span><br><span class="line"></span><br><span class="line">    symlink /system/etc /etc</span><br><span class="line"></span><br><span class="line">    mkdir /sdcard</span><br><span class="line">    mkdir /system</span><br><span class="line">    mkdir /data</span><br><span class="line">    mkdir /cache</span><br><span class="line">    mkdir /sideload</span><br><span class="line">    mount tmpfs tmpfs /tmp</span><br><span class="line"></span><br><span class="line">    chown root shell /tmp</span><br><span class="line">    chmod 0775 /tmp</span><br><span class="line"></span><br><span class="line">    write /proc/sys/kernel/panic_on_oops 1</span><br><span class="line">    write /proc/sys/vm/max_map_count 1000000</span><br><span class="line"></span><br><span class="line">on fs</span><br><span class="line">    mkdir /dev/usb-ffs 0770 shell shell</span><br><span class="line">    mkdir /dev/usb-ffs/adb 0770 shell shell</span><br><span class="line">    mount functionfs adb /dev/usb-ffs/adb uid=2000,gid=2000</span><br><span class="line"></span><br><span class="line">    write /sys/class/android_usb/android0/enable 0</span><br><span class="line">    write /sys/class/android_usb/android0/idVendor 18D1</span><br><span class="line">    write /sys/class/android_usb/android0/idProduct D001</span><br><span class="line">    write /sys/class/android_usb/android0/f_ffs/aliases adb</span><br><span class="line">    write /sys/class/android_usb/android0/functions adb</span><br><span class="line">    write /sys/class/android_usb/android0/iManufacturer ${ro.product.manufacturer}</span><br><span class="line">    write /sys/class/android_usb/android0/iProduct ${ro.product.model}</span><br><span class="line">    write /sys/class/android_usb/android0/iSerial ${ro.serialno}</span><br><span class="line"></span><br><span class="line">on boot</span><br><span class="line">    ifup lo</span><br><span class="line">    hostname localhost</span><br><span class="line">    domainname localdomain</span><br><span class="line"></span><br><span class="line">    class_start default</span><br><span class="line"></span><br><span class="line"># Load properties from /system/ + /factory after fs mount.</span><br><span class="line">on load_all_props_action</span><br><span class="line">    load_all_props</span><br><span class="line"></span><br><span class="line">on firmware_mounts_complete</span><br><span class="line">   rm /dev/.booting</span><br><span class="line"></span><br><span class="line"># Mount filesystems and start core system services.</span><br><span class="line">on late-init</span><br><span class="line">    trigger early-fs</span><br><span class="line">    trigger fs</span><br><span class="line">    trigger post-fs</span><br><span class="line">    trigger post-fs-data</span><br><span class="line"></span><br><span class="line">    # Load properties from /system/ + /factory after fs mount. Place</span><br><span class="line">    # this in another action so that the load will be scheduled after the prior</span><br><span class="line">    # issued fs triggers have completed.</span><br><span class="line">    trigger load_all_props_action</span><br><span class="line"></span><br><span class="line">    # Remove a file to wake up anything waiting for firmware</span><br><span class="line">    trigger firmware_mounts_complete</span><br><span class="line"></span><br><span class="line">    trigger early-boot</span><br><span class="line">    trigger boot</span><br><span class="line"></span><br><span class="line">on property:sys.powerctl=*</span><br><span class="line">   powerctl ${sys.powerctl}</span><br><span class="line"></span><br><span class="line">service ueventd /sbin/ueventd</span><br><span class="line">    critical</span><br><span class="line">    seclabel u:r:ueventd:s0</span><br><span class="line"></span><br><span class="line">service healthd /sbin/healthd -r</span><br><span class="line">    critical</span><br><span class="line">    seclabel u:r:healthd:s0</span><br><span class="line"></span><br><span class="line">service recovery /sbin/recovery</span><br><span class="line">    seclabel u:r:recovery:s0</span><br><span class="line"></span><br><span class="line">service adbd /sbin/adbd --root_seclabel=u:r:su:s0 --device_banner=recovery</span><br><span class="line">    disabled</span><br><span class="line">    socket adbd stream 660 system system</span><br><span class="line">    seclabel u:r:adbd:s0</span><br><span class="line"></span><br><span class="line"># Always start adbd on userdebug and eng builds</span><br><span class="line">on property:ro.debuggable=1</span><br><span class="line">    write /sys/class/android_usb/android0/enable 1</span><br><span class="line">    start adbd</span><br><span class="line"></span><br><span class="line"># Restart adbd so it can run as root</span><br><span class="line">on property:service.adb.root=1</span><br><span class="line">    write /sys/class/android_usb/android0/enable 0</span><br><span class="line">    restart adbd</span><br><span class="line">    write /sys/class/android_usb/android0/enable 1</span><br></pre></td></tr></tbody></table></figure>]]></content>
      <categories>
        <category>Linux</category>
        <category>Andriod</category>
      </categories>
  </entry>
  <entry>
    <title>ALSA</title>
    <url>/2023/04/11/Audio/Audio-Alsa/</url>
    <content><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><blockquote>
<p>å®˜ç½‘ï¼š<a href="https://www.alsa-project.org/wiki/Main_Page">https://www.alsa-project.org/wiki/Main_Page</a></p>
</blockquote>
<p>ALSAï¼šAdvanced Linux Sound Architectureï¼Œé«˜çº§linuxå£°éŸ³ä½“ç³»ï¼Œå®ƒåœ¨Linuxæ“ä½œç³»ç»Ÿä¸Šæä¾›äº†éŸ³é¢‘å’ŒMIDIï¼ˆMusical Instrument Digital Interfaceï¼ŒéŸ³ä¹è®¾å¤‡æ•°å­—åŒ–æ¥å£ï¼‰çš„æ”¯æŒã€‚</p>
<h1 id="ALSAè®¾å¤‡æ–‡ä»¶ç»“æ„"><a href="#ALSAè®¾å¤‡æ–‡ä»¶ç»“æ„" class="headerlink" title="ALSAè®¾å¤‡æ–‡ä»¶ç»“æ„"></a>ALSAè®¾å¤‡æ–‡ä»¶ç»“æ„</h1><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta"># cd /dev/snd; ls -l;</span></span><br><span class="line"></span><br><span class="line">crw-rw----+ <span class="number">1</span> root audio <span class="number">116</span>, <span class="number">8</span> <span class="number">2011</span><span class="number">-02</span><span class="number">-23</span> <span class="number">21</span>:<span class="number">38</span> controlC0	 ç”¨äºå£°å¡çš„æ§åˆ¶,ä¾‹å¦‚é€šé“é€‰æ‹©,æ··éŸ³,éº¦å…‹é£çš„æ§åˆ¶ç­‰ </span><br><span class="line">crw-rw----+ <span class="number">1</span> root audio <span class="number">116</span>, <span class="number">4</span> <span class="number">2011</span><span class="number">-02</span><span class="number">-23</span> <span class="number">21</span>:<span class="number">38</span> midiC0D0	 ç”¨äºæ’­æ”¾midiéŸ³é¢‘ </span><br><span class="line">crw-rw----+ <span class="number">1</span> root audio <span class="number">116</span>, <span class="number">7</span> <span class="number">2011</span><span class="number">-02</span><span class="number">-23</span> <span class="number">21</span>:<span class="number">39</span> pcmC0D0c	 ç”¨äºå½•éŸ³çš„pcmè®¾å¤‡ </span><br><span class="line">crw-rw----+ <span class="number">1</span> root audio <span class="number">116</span>, <span class="number">6</span> <span class="number">2011</span><span class="number">-02</span><span class="number">-23</span> <span class="number">21</span>:<span class="number">56</span> pcmC0D0p	 ç”¨äºæ’­æ”¾çš„pcmè®¾å¤‡ </span><br><span class="line">crw-rw----+ <span class="number">1</span> root audio <span class="number">116</span>, <span class="number">3</span> <span class="number">2011</span><span class="number">-02</span><span class="number">-23</span> <span class="number">21</span>:<span class="number">38</span> seq		 éŸ³åºå™¨ </span><br><span class="line">crw-rw----+ <span class="number">1</span> root audio <span class="number">116</span>, <span class="number">2</span> <span class="number">2011</span><span class="number">-02</span><span class="number">-23</span> <span class="number">21</span>:<span class="number">38</span> timer	     å®šæ—¶å™¨</span><br></pre></td></tr></tbody></table></figure>

<p>å…¶ä¸­,C0D0ä»£è¡¨çš„æ˜¯å£°å¡0ä¸­çš„è®¾å¤‡0 ; pcmC0D0cæœ€åä¸€ä¸ªcä»£è¡¨capture ; pcmC0D0pæœ€åä¸€ä¸ªpä»£è¡¨playbackã€‚</p>
<h2 id="alsaç›¸å…³å‡½æ•°åŠæ–‡ä»¶"><a href="#alsaç›¸å…³å‡½æ•°åŠæ–‡ä»¶" class="headerlink" title="alsaç›¸å…³å‡½æ•°åŠæ–‡ä»¶"></a>alsaç›¸å…³å‡½æ•°åŠæ–‡ä»¶</h2><h3 id="å‡½æ•°åŠç»“æ„ä½“"><a href="#å‡½æ•°åŠç»“æ„ä½“" class="headerlink" title="å‡½æ•°åŠç»“æ„ä½“"></a>å‡½æ•°åŠç»“æ„ä½“</h3><ul>
<li>AVFrame    iFrame           å­˜å‚¨éå‹ç¼©çš„æ•°æ®ï¼Œè¾“å…¥</li>
<li>AVFrame    swapFrame   å­˜å‚¨éå‹ç¼©çš„æ•°æ®ï¼Œé‡é‡‡æ ·</li>
<li>AVPack       oPacket          å‹ç¼©å³ç¼–ç åçš„è¾“å…¥ï¼Œè¾“å‡º</li>
</ul>
<ol>
<li><p>snd_pcm_hw_params_get_rate( )</p>
</li>
<li><p>snd_pcm_open( )</p>
<ul>
<li><p>snd_config_update_ref</p>
<p>è¿™ä¸ªå‡½æ•°ä½œç”¨æ˜¯æ£€æŸ¥alsaé…ç½®æ–‡ä»¶æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ï¼ŒåŒ…æ‹¬æ–‡ä»¶åå­—å’Œå„ä¸ªé…ç½®æ–‡ä»¶çš„å†…å®¹æ˜¯å¦ä¿®æ”¹ï¼Œå¦‚æœæœ‰ä¿®æ”¹ï¼Œå°±é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶æ ‘ï¼Œåˆ·æ–°å…¨å±€å˜é‡snd_configå¹¶å¢åŠ ä¸€ä¸ªsnd_configçš„å¼•ç”¨è®¡æ•°ï¼Œè°ƒç”¨snd_config_update_refä¼ å…¥çš„topå°±æ˜¯æŒ‡å‘snd_configçš„æŒ‡é’ˆï¼Œè¿™ä¸ªtopå½“ä½œå‚æ•°ä¼ å…¥snd_pcm_open_noupdateå‡½æ•°ä¸­ã€‚snd_config_unrefæ¥ä¸‹æ¥ä¼šå‡å»snd_configçš„å¼•ç”¨è®¡æ•°ã€‚</p>
<p>é¦–å…ˆåˆ›å»ºé¡¶å±‚é…ç½®èŠ‚ç‚¹ï¼Œç„¶åæ‰“å¼€/usr/share/alsa/alsa.confï¼ŒåŠ è½½æ–‡ä»¶å†…å®¹åˆ°é¡¶å±‚é…ç½®èŠ‚ç‚¹ä¸Šï¼Œç„¶åéå†æ‰€æœ‰çš„hooksï¼Œè°ƒç”¨snd_config_hooksåŠ è½½æ‰€æœ‰hooksï¼Œå¹¶è°ƒç”¨ç›¸å…³çš„hookså‡½æ•°æ‰“å¼€å¯¹åº”çš„pluginåŠ¨æ€åº“</p>
</li>
<li><p>snd_pcm_open_noupdate</p>
</li>
</ul>
</li>
<li><p>avcodec_open2( )</p>
<ul>
<li><p>æ£€æµ‹æŒ‡å®šçš„codecå’Œcontexté‡Œé¢çš„codecæ˜¯å¦åŒ¹é…ã€‚</p>
</li>
<li><p>åˆ†é…ç©ºé—´ã€‚</p>
</li>
<li><p>æ£€æµ‹codecå„ä¸ªå‚æ•°åˆæ³•æ€§ï¼Œå¹¶ç»™æŸäº›å­—æ®µèµ‹åˆå€¼ã€‚</p>
</li>
<li><p>è°ƒç”¨codecçš„initåˆå§‹åŒ–codecã€‚</p>
</li>
<li><p>é‡Šæ”¾èµ„æºï¼Œè¿”å›ã€‚</p>
</li>
</ul>
</li>
</ol>
<h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><ol>
<li><p>å‚è€ƒç½‘å€ : <a href="https://www.cnblogs.com/lihaiping/p/alsaconfig.html">https://www.cnblogs.com/lihaiping/p/alsaconfig.html</a></p>
</li>
<li><p>é…ç½®æ–‡ä»¶çš„è°ƒç”¨è¿‡ç¨‹</p>
<p>alsa-libåº“  :  alsa-lib-1.2.1.2/src/pcm/pcm.c</p>
<p>snd_pcm_open( ) å‡½æ•°ä½œä¸ºæ‰“å¼€ä¸€ä¸ªpcmçš„æ¥å£.  å…·ä½“çš„è°ƒç”¨è¿‡ç¨‹æ˜¯ :  static snd_pcm_open_noupdate â€”-&gt;  static snd_pcm_open_conf( )</p>
<p>è§£æasound.confè¿‡ç¨‹ : <a href="https://www.xuebuyuan.com/1043778.html">https://www.xuebuyuan.com/1043778.html</a></p>
</li>
<li><p>snd_pcm_openå†…éƒ¨ç›´æ¥è§£æçš„æ˜¯usr/share/alsa/alsa.conf, åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å†³å®šäº†etc/asound.confå’Œ/.asoundrcè¿™ä¸¤ä¸ªæ–‡ä»¶è¦ä¸è¦è°ƒç”¨</p>
</li>
</ol>
<h3 id="3-3-éŸ³é¢‘è®¾å¤‡çš„å®šä¹‰"><a href="#3-3-éŸ³é¢‘è®¾å¤‡çš„å®šä¹‰" class="headerlink" title="3.3 éŸ³é¢‘è®¾å¤‡çš„å®šä¹‰"></a>3.3 éŸ³é¢‘è®¾å¤‡çš„å®šä¹‰</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">#  æ–‡ä»¶å®šä¹‰ä½ç½® : /system/core/include/system/audio.h</span><br><span class="line">enum {</span><br><span class="line">    AUDIO_DEVICE_NONE                          = 0x0,</span><br><span class="line">    /* reserved bits */</span><br><span class="line">    AUDIO_DEVICE_BIT_IN                        = 0x80000000,</span><br><span class="line">    AUDIO_DEVICE_BIT_DEFAULT                   = 0x40000000,</span><br><span class="line">    /* output devices */</span><br><span class="line">    AUDIO_DEVICE_OUT_EARPIECE                  = 0x1,    // å¬ç­’</span><br><span class="line">    AUDIO_DEVICE_OUT_SPEAKER                   = 0x2,    // æ‰¬å£°å™¨</span><br><span class="line">    AUDIO_DEVICE_OUT_WIRED_HEADSET             = 0x4,    // çº¿æ§è€³æœºï¼Œå¯ä»¥é€šè¿‡è€³æœºæ§åˆ¶è¿œç«¯æ’­æ”¾ã€æš‚åœã€éŸ³é‡è°ƒèŠ‚ç­‰åŠŸèƒ½çš„è€³æœº</span><br><span class="line">    AUDIO_DEVICE_OUT_WIRED_HEADPHONE           = 0x8,    // æ™®é€šè€³æœºï¼Œåªèƒ½å¬ï¼Œä¸èƒ½æ“æ§æ’­æ”¾</span><br><span class="line">    AUDIO_DEVICE_OUT_BLUETOOTH_SCO             = 0x10,   // å•å£°é“è“ç‰™è€³æœºï¼Œåè¿›åˆ¶32</span><br><span class="line">    AUDIO_DEVICE_OUT_BLUETOOTH_SCO_HEADSET     = 0x20,   // è½¦è½½å…æè“ç‰™è®¾å¤‡ï¼Œåè¿›åˆ¶64</span><br><span class="line">    AUDIO_DEVICE_OUT_BLUETOOTH_SCO_CARKIT      = 0x40,   // ç«‹ä½“å£°è“ç‰™è€³æœº</span><br><span class="line">    AUDIO_DEVICE_OUT_BLUETOOTH_A2DP            = 0x80,   // åè¿›åˆ¶128</span><br><span class="line">    AUDIO_DEVICE_OUT_BLUETOOTH_A2DP_HEADPHONES = 0x100,  // åè¿›åˆ¶256</span><br><span class="line">    AUDIO_DEVICE_OUT_BLUETOOTH_A2DP_SPEAKER    = 0x200,  // åè¿›åˆ¶512</span><br><span class="line">    AUDIO_DEVICE_OUT_AUX_DIGITAL               = 0x400,  // åè¿›åˆ¶1024</span><br><span class="line">    AUDIO_DEVICE_OUT_ANLG_DOCK_HEADSET         = 0x800,  // åè¿›åˆ¶2048</span><br><span class="line">    AUDIO_DEVICE_OUT_DGTL_DOCK_HEADSET         = 0x1000, // åè¿›åˆ¶4096</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>

<h1 id="alsaæ’ä»¶"><a href="#alsaæ’ä»¶" class="headerlink" title="alsaæ’ä»¶"></a>alsaæ’ä»¶</h1><blockquote>
<p>asound.confé…ç½® <a href="https://www.alsa-project.org/main/index.php/Asoundrc">https://www.alsa-project.org/main/index.php/Asoundrc</a></p>
<p>æ’ä»¶è¯¦è§£å®˜ç½‘  <a href="https://www.alsa-project.org/alsa-doc/alsa-lib/pcm_plugins.html">https://www.alsa-project.org/alsa-doc/alsa-lib/pcm_plugins.html</a></p>
</blockquote>
<ol>
<li>ç”Ÿæˆalsaé…ç½®æ–‡ä»¶ : alsactl store -f a.conf</li>
<li>å¯¹äºè€³æœºçš„controlséœ€è¦æŒ‡å®š-c 1,é»˜è®¤èµ°çš„æ˜¯card 0</li>
<li>æ’­æ”¾éŸ³é¢‘çš„å‘½ä»¤ arecord -D usbheadsetC -d 5 -f cd -r 48000 -c 2 -t wav test.wav</li>
</ol>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//æŸ¥çœ‹æ§ä»¶</span></span><br><span class="line"><span class="meta"># amixer -c 1 controls </span></span><br><span class="line">numid=<span class="number">3</span>,iface=MIXER,name=<span class="string">'PCM Playback Switch'</span></span><br><span class="line">numid=<span class="number">4</span>,iface=MIXER,name=<span class="string">'PCM Playback Volume'</span></span><br><span class="line">numid=<span class="number">6</span>,iface=MIXER,name=<span class="string">'usbCapture_vol'</span></span><br><span class="line">numid=<span class="number">5</span>,iface=MIXER,name=<span class="string">'usbPlay_vol'</span></span><br><span class="line">numid=<span class="number">1</span>,iface=PCM,name=<span class="string">'Capture Channel Map'</span></span><br><span class="line">numid=<span class="number">2</span>,iface=PCM,name=<span class="string">'Playback Channel Map'</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="comment">//å¯¹æ§ä»¶è¿›è¡Œé…ç½®</span></span><br><span class="line"><span class="meta"># amixer -c 1 sget usbCapture_vol </span></span><br><span class="line">Simple mixer control <span class="string">'usbCapture_vol'</span>,<span class="number">0</span></span><br><span class="line">  Capabilities: volume</span><br><span class="line">  Playback channels: Front Left - Front Right</span><br><span class="line">  Capture channels: Front Left - Front Right</span><br><span class="line">  Limits: <span class="number">0</span> - <span class="number">255</span></span><br><span class="line">  Front Left: <span class="number">100</span> [<span class="number">39</span>%]</span><br><span class="line">  Front Right: <span class="number">100</span> [<span class="number">39</span>%]</span><br><span class="line"><span class="meta"># amixer -c 1 cget numid=5,iface=MIXER,name=<span class="string">'usbCapture_vol'</span></span></span><br><span class="line">numid=<span class="number">5</span>,iface=MIXER,name=<span class="string">'usbCapture_vol'</span></span><br><span class="line">  ; type=INTEGER,access=rw---RW-,values=<span class="number">2</span>,min=<span class="number">0</span>,max=<span class="number">255</span>,step=<span class="number">0</span></span><br><span class="line">  : values=<span class="number">100</span>,<span class="number">100</span></span><br><span class="line">  | dBscale-min=<span class="number">-20.00</span>dB,step=<span class="number">0.20</span>dB,mute=<span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta"># arecord -l</span></span><br><span class="line">**** List of CAPTURE Hardware Devices ****</span><br><span class="line">card <span class="number">0</span>: smartpenknot [smartpen_knot], device <span class="number">0</span>: i2s-ecodec nau8822-hifi<span class="number">-0</span> []</span><br><span class="line">  Subdevices: <span class="number">1</span>/<span class="number">1</span></span><br><span class="line">  Subdevice #<span class="number">0</span>: subdevice #<span class="number">0</span></span><br><span class="line">card <span class="number">0</span>: smartpenknot [smartpen_knot], device <span class="number">1</span>: dmic dmic-codec-hifi<span class="number">-1</span> []</span><br><span class="line">  Subdevices: <span class="number">1</span>/<span class="number">1</span></span><br><span class="line">  Subdevice #<span class="number">0</span>: subdevice #<span class="number">0</span></span><br><span class="line">card <span class="number">0</span>: smartpenknot [smartpen_knot], device <span class="number">2</span>: i2s-tloop pcm-dump<span class="number">-2</span> []</span><br><span class="line">  Subdevices: <span class="number">1</span>/<span class="number">1</span></span><br><span class="line">  Subdevice #<span class="number">0</span>: subdevice #<span class="number">0</span></span><br><span class="line">card <span class="number">1</span>: EP3C [Meizu EP3C], device <span class="number">0</span>: USB Audio [USB Audio]</span><br><span class="line">  Subdevices: <span class="number">1</span>/<span class="number">1</span></span><br><span class="line">  Subdevice #<span class="number">0</span>: subdevice #<span class="number">0</span></span><br><span class="line"># </span><br><span class="line"><span class="meta"># aplay -l</span></span><br><span class="line">**** List of PLAYBACK Hardware Devices ****</span><br><span class="line">card <span class="number">0</span>: smartpenknot [smartpen_knot], device <span class="number">0</span>: i2s-ecodec nau8822-hifi<span class="number">-0</span> []</span><br><span class="line">  Subdevices: <span class="number">1</span>/<span class="number">1</span></span><br><span class="line">  Subdevice #<span class="number">0</span>: subdevice #<span class="number">0</span></span><br><span class="line">card <span class="number">1</span>: EP3C [Meizu EP3C], device <span class="number">0</span>: USB Audio [USB Audio]</span><br><span class="line">  Subdevices: <span class="number">0</span>/<span class="number">1</span></span><br><span class="line">  Subdevice #<span class="number">0</span>: subdevice #<span class="number">0</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<h1 id="ALSAéŸ³é¢‘å·¥å…·"><a href="#ALSAéŸ³é¢‘å·¥å…·" class="headerlink" title="ALSAéŸ³é¢‘å·¥å…·"></a>ALSAéŸ³é¢‘å·¥å…·</h1><p>å¯¹äºä»¥ä¸‹å·¥å…·çš„ä½¿ç”¨ï¼Œéƒ½å¯ä»¥ç›´æ¥è¾“å…¥â€œå·¥å…·åâ€æˆ–â€œå·¥å…·å â€“helpâ€ è·å¾—è¯¦ç»†ä½¿ç”¨æ–¹æ³•</p>
<h2 id="arecode-å½•éŸ³"><a href="#arecode-å½•éŸ³" class="headerlink" title="arecode å½•éŸ³"></a>arecode å½•éŸ³</h2><ol>
<li>æŸ¥çœ‹å½•éŸ³è®¾å¤‡ : arecode -l</li>
<li>å‘½ä»¤å®ä¾‹ :  arecord -D hw:0,1 -d 10 -f cd -r 44100 -c 2 -t wav test.wav</li>
<li>å‚æ•°è§£æ : <ul>
<li>-D æŒ‡å®šäº†å½•éŸ³è®¾å¤‡ï¼Œ0,1 æ˜¯card 0 device 1</li>
<li>-d æŒ‡å®šå½•éŸ³çš„æ—¶é•¿ï¼Œå•ä½ : ç§’</li>
<li>-f æŒ‡å®šé‡‡æ ·æ ¼å¼ï¼Œé€šè¿‡ä¸Šé¢çš„ä¿¡æ¯çŸ¥é“åªæ”¯æŒ cd cdr dat </li>
<li>-r æŒ‡å®šäº†é‡‡æ ·ç‡ï¼Œå•ä½ : Hz</li>
<li>-c æŒ‡å®šchannel ä¸ªæ•°</li>
<li>-t æŒ‡å®šç”Ÿæˆçš„æ–‡ä»¶æ ¼å¼</li>
</ul>
</li>
</ol>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">lee@lee-virtual-machine:~$ arecord -l</span><br><span class="line">**** CAPTURE ç¡¬é«”è£ç½®æ¸…å–® ****</span><br><span class="line">card 0: AudioPCI [Ensoniq AudioPCI], device 0: ES1371/1 [ES1371 DAC2/ADC]</span><br><span class="line">  å­è®¾å¤‡: 1/1</span><br><span class="line">  å­è®¾å¤‡ #0: subdevice #0</span><br><span class="line">lee@lee-virtual-machine:~$ arecord -D hw:0,0 -d 10 -f cd -r 44100 -c 2 -t wav test.wav</span><br><span class="line">æ­£åœ¨å½•éŸ³ WAVE 'test.wav' : Signed 16 bit Little Endian, é¢‘ç‡44100Hzï¼Œ Stereo</span><br><span class="line">lee@lee-virtual-machine:~$ </span><br></pre></td></tr></tbody></table></figure>



<h2 id="aplay-æ”¾éŸ³"><a href="#aplay-æ”¾éŸ³" class="headerlink" title="aplay æ”¾éŸ³"></a>aplay æ”¾éŸ³</h2><ol>
<li><p>æŸ¥çœ‹æ”¾éŸ³è®¾å¤‡ : aplay -l</p>
</li>
<li><p>å‘½ä»¤å®ä¾‹ : aplay test.wav</p>
<blockquote>
<p>å¦‚æœæ˜¯ç›´æ¥æ’­æ”¾pcmæ•°æ®ï¼Œåˆ™éœ€è¦æŒ‡å®špcmæ ¼å¼ ã€é‡‡æ ·ç‡ã€channelä¸ªæ•°ç­‰ã€‚</p>
</blockquote>
</li>
</ol>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">lee@lee-virtual-machine:~$ aplay -l</span><br><span class="line">**** PLAYBACK ç¡¬é«”è£ç½®æ¸…å–® ****</span><br><span class="line">card 0: AudioPCI [Ensoniq AudioPCI], device 0: ES1371/1 [ES1371 DAC2/ADC]</span><br><span class="line">  å­è®¾å¤‡: 0/1</span><br><span class="line">  å­è®¾å¤‡ #0: subdevice #0</span><br><span class="line">card 0: AudioPCI [Ensoniq AudioPCI], device 1: ES1371/2 [ES1371 DAC1]</span><br><span class="line">  å­è®¾å¤‡: 1/1</span><br><span class="line">  å­è®¾å¤‡ #0: subdevice #0</span><br><span class="line">lee@lee-virtual-machine:~$ aplay test.wav </span><br><span class="line">æ­£åœ¨æ’­æ”¾ WAVE 'test.wav' : Signed 16 bit Little Endian, é¢‘ç‡44100Hzï¼Œ Stereo</span><br><span class="line">lee@lee-virtual-machine:~$ </span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<h2 id="amixer-é…å‚"><a href="#amixer-é…å‚" class="headerlink" title="amixer é…å‚"></a>amixer é…å‚</h2><p>amixerï¼Œæ˜¯alsamixerçš„æ–‡æœ¬æ¨¡å¼ï¼ˆå‘½ä»¤è¡Œæ¨¡å¼ï¼‰ç”¨äºé…ç½®éŸ³é¢‘çš„å„ä¸ªå‚æ•°</p>
<ol>
<li><p>ä½¿ç”¨æ–¹æ³• :</p>
<ol>
<li><p>ç”¨ # amixer controls åˆ—å‡ºæ‰€æœ‰æ§åˆ¶é¡¹ã€‚( æ˜¾ç¤ºæ¥å£å‡½æ•° )</p>
</li>
<li><p>å¦‚æœå¯¹æ§åˆ¶é¡¹ä¸ç†Ÿæ‚‰æˆ–è€…æƒ³æŸ¥çœ‹å½“å‰çš„æ‰€æœ‰é…ç½®å¯ä»¥ä½¿ç”¨ # amixer contents å‘½ä»¤ã€‚(æ˜¾ç¤ºå½“å‰é…ç½®)</p>
</li>
<li><p>æŸ¥çœ‹è·å–æŸä¸ªè®¾ç½®é¡¹çš„å€¼ç”¨ # amixer cget + æ§åˆ¶å‚æ•° å‘½ä»¤ã€‚ è¿™é‡Œæ§åˆ¶å‚æ•°ç›´æ¥å¤åˆ¶ # amixer controls æ‰“å°å‡ºæ¥çš„æ•°æ®å°±å¯ä»¥</p>
</li>
<li><p>æ ¹æ®æ§åˆ¶å‚æ•°ç±»å‹è®¾ç½®æ§åˆ¶å‚æ•°ä½¿ç”¨ # amixer cset + æ§åˆ¶å‚æ•° + è®¾ç½®å‚æ•° å‘½ä»¤ã€‚</p>
</li>
<li><p>values è¡¨ç¤ºæ•°å€¼å¯¹äº volume ä¹‹ç±»çš„æ˜¯å…·ä½“çš„æ•°å­—ï¼Œåœ¨ä¸Šä¸‹æ–‡èœå•ä¸­æœ‰æ˜¾ç¤ºæ•°å€¼çš„èŒƒå›´ï¼Œå¯¹äº switch ä¹‹ç±»çš„è¡¨ç¤ºå¼€å…³ä¸€èˆ¬æ˜¯ on æˆ– offã€‚</p>
<p>å¦å¤–ä¸€sget/ssetç³»åˆ—çš„å‘½ä»¤, ä¸cget/csetçš„ä½¿ç”¨ç›¸åŒ</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨ä¾‹å­:</span></span><br><span class="line"><span class="comment">//ç»™çš„å‚æ•°çœ‹valueéœ€è¦å‡ ä¸ª éœ€è¦ä»€ä¹ˆç±»å‹è¿›è¡Œç›¸åº”çš„é…ç½®å³å¯</span></span><br><span class="line">/ <span class="meta"># amixer cget numid=43,iface=MIXER,name=<span class="string">'Speaker Playback Volum'</span></span></span><br><span class="line">numid=<span class="number">43</span>,iface=MIXER,name=<span class="string">'Speaker Playback Volume'</span></span><br><span class="line">  ; type=INTEGER,access=rw---R--,values=<span class="number">2</span>,min=<span class="number">0</span>,max=<span class="number">63</span>,step=<span class="number">0</span></span><br><span class="line">  : values=<span class="number">63</span>,<span class="number">63</span></span><br><span class="line">  | dBscale-min=<span class="number">-57.00</span>dB,step=<span class="number">1.00</span>dB,mute=<span class="number">0</span></span><br><span class="line">/ # </span><br><span class="line">/ # </span><br><span class="line">/ # </span><br><span class="line">/ <span class="meta"># amixer cset numid=43,iface=MIXER,name=<span class="string">'Speaker Playback Volum'</span> 30 30 </span></span><br><span class="line">numid=<span class="number">43</span>,iface=MIXER,name=<span class="string">'Speaker Playback Volume'</span></span><br><span class="line">  ; type=INTEGER,access=rw---R--,values=<span class="number">2</span>,min=<span class="number">0</span>,max=<span class="number">63</span>,step=<span class="number">0</span></span><br><span class="line">  : values=<span class="number">30</span>,<span class="number">30</span></span><br><span class="line">  | dBscale-min=<span class="number">-57.00</span>dB,step=<span class="number">1.00</span>dB,mute=<span class="number">0</span></span><br><span class="line">/ # </span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</li>
<li><p>ä¿å­˜åŠæ¢å¤æ–¹æ³•</p>
<p>å¯¹å£°å¡ä¿¡æ¯çŠ¶æ€è¿›è¡Œä¿å­˜ : alsactl store -f /var/lib/alsa/asound.state </p>
<p>å£°å¡çŠ¶æ€æ¢å¤å‘½ä»¤ : alsactl restore -f /var/lib/alsa/asound.state</p>
</li>
</ol>
<h2 id="LinuxéŸ³é¢‘åˆ†æå·¥å…·"><a href="#LinuxéŸ³é¢‘åˆ†æå·¥å…·" class="headerlink" title="LinuxéŸ³é¢‘åˆ†æå·¥å…·"></a>LinuxéŸ³é¢‘åˆ†æå·¥å…·</h2><ol>
<li><p>audacity</p>
<ul>
<li><p>åŠŸèƒ½ï¼šæŸ¥çœ‹å„ç§æ ¼å¼éŸ³é¢‘çš„æ³¢å½¢ï¼Œå¹¶æœ‰è£å‰ªã€è½¬æ¢æ ¼å¼ã€ç”Ÿæˆç‰¹å®šéŸ³é¢‘æ•°æ®ç­‰è¯¸å¤šåŠŸèƒ½</p>
</li>
<li><p>ä¸‹è½½æ–¹æ³• : sudo apt install audacity -o Acquire::http::proxy=â€<a href="http://192.168.4.15:8080/&quot;">http://192.168.4.15:8080/"</a>( -o å‚æ•°æŒ‡å®šä»£ç†)</p>
</li>
<li><p>ä½¿ç”¨æ–¹æ³•ï¼šå‘½ä»¤è¡Œè¾“å…¥audacityï¼Œæ·»åŠ éŸ³é¢‘æ–‡ä»¶å³å¯</p>
</li>
</ul>
</li>
<li><p>play</p>
<ul>
<li>ç”±äºaplayæ’­æ”¾æ•°æ®æ ¼å¼æœ‰é™ï¼Œplayå¯¹äºéŸ³é¢‘æ•°æ®æ ¼å¼è¿›è¡Œäº†è¾ƒå¤šçš„æ”¯æŒ</li>
<li>playæ’­æ”¾è£¸æ•°æ®å‘½ä»¤ : play -t raw -r 16000 -e signed-integer -b 16 -c 1 test.wav</li>
</ul>
</li>
</ol>
<h1 id="APIä½¿ç”¨"><a href="#APIä½¿ç”¨" class="headerlink" title="APIä½¿ç”¨"></a>APIä½¿ç”¨</h1><p>ä»£ç é“¾æ¥ï¼š<a href="https://github.com/yangLieee/audioplayer">https://github.com/yangLieee/audioplayer</a></p>
<h1 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h1><ol>
<li><p>Qï¼šæ•°æ®å­˜å‚¨å‡ºæ¥åªæœ‰78å­—èŠ‚ï¼Œä½†æ˜¯å†™å‡½æ•°å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Ÿ</p>
<p>Aï¼šè¿™åªæ˜¯å†™äº†ä¸€ä¸ªæ–‡ä»¶å¤´ï¼Œè€Œæœ€ç»ˆæ–‡ä»¶æ²¡æœ‰å†™å…¥ã€‚åŸå› æ˜¯ï¼šavio_openä¹‹åæ²¡æœ‰å…³é—­ï¼Œè°ƒç”¨closepå‡½æ•°ä¹‹åæ•°æ®æ­£å¸¸å†™å…¥;</p>
<p>â€‹		è°ƒè¯•æµç¨‹ï¼šé¦–å…ˆå®šä½é—®é¢˜ä½ç½®ã€‚åœ¨alsaå½•éŸ³å®Œæˆä¹‹åå°†æ•°æ®å†™å…¥bufferä¸­å­˜å‚¨æ¥çœ‹æ˜¯å¦æ˜¯alsaéƒ¨åˆ†çš„å½•éŸ³é—®é¢˜ã€‚ä¹‹åæ ¹æ®æµç¨‹è¿›è¡Œæ£€æŸ¥ã€‚ä¸€å®šè¦æ³¨æ„open close / new delete / ç­‰é…å¥—çš„ä½¿ç”¨</p>
</li>
<li><p>æ•°æ®å·²ç»å†™ç»“æŸ ä½†æ˜¯è¿˜æ˜¯ä¼šå†æ¬¡æ‰§è¡Œä¸€æ¬¡å…¶ä¸Šé¢çš„ç¨‹åº</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(fmtContext)                                                                    </span><br><span class="line">       av_write_trailer(fmtContext);</span><br><span class="line"><span class="keyword">if</span>(fmtContext != <span class="literal">NULL</span>){   </span><br><span class="line">   <span class="keyword">if</span>( avio_closep(&amp;fmtContext-&gt;pb) &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"avio_closep error!"</span>);</span><br><span class="line">   avformat_free_context(fmtContext);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">av_write_trailerçš„ä½œç”¨</span></span><br><span class="line"><span class="comment">	1. å¾ªç¯è°ƒç”¨interleave_packet()ä»¥åŠwrite_packet()ï¼Œå°†è¿˜æœªè¾“å‡ºçš„AVPacketè¾“å‡ºå‡ºæ¥ã€‚</span></span><br><span class="line"><span class="comment">	2. è°ƒç”¨AVOutputFormatçš„write_trailer()ï¼Œè¾“å‡ºæ–‡ä»¶å°¾ã€‚</span></span><br><span class="line"><span class="comment">avio_closepçš„ä½œç”¨</span></span><br><span class="line"><span class="comment">	å…³é—­è¾“å‡ºæ–‡ä»¶çš„ä¸Šä¸‹æ–‡,ä¸avio_openç›¸å¯¹åº”ä½¿ç”¨</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">è¿™ä¸¤ä¸ªçš„ä½¿ç”¨éœ€è¦ä¿è¯av_write_trailerå‡½æ•°è°ƒç”¨æ—©äºavio_closep</span></span><br><span class="line"><span class="comment">å¦‚æœä¸è°ƒç”¨è¿™ä¸¤ä¸ªå‡½æ•°ä¼šå¯¼è‡´æœ€ç»ˆæ–‡ä»¶ä¸èƒ½å†™å‡º</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>Qï¼šé‡é‡‡æ ·æ—¶ channel å¯ä»¥æ­£å¸¸è½¬æ¢, sample_rateé‡‡æ ·ç‡å˜åŒ–ä¸èƒ½è½¬æ¢?</p>
<p>Aï¼šåœ¨åšé‡‡æ ·ç‡çš„é‡é‡‡æ ·æ—¶, å¯¹è¾“å‡ºçš„contexté…ç½®éœ€è¦å°†é‡‡æ ·ç‚¹ä¹Ÿåšä¸€ä¸‹è½¬æ¢,å¦åˆ™å·²ç»è½¬æ¢æˆåŠŸä½†æ˜¯ç”Ÿæˆçš„æ–‡ä»¶å¤§å°è¿˜æ˜¯æŒ‰ç…§ä»¥å‰çš„è¾“å‡ºè¿›è¡Œ.<br>  é‡‡æ ·ç‚¹è½¬æ¢å‡½æ•° : av_rescale_rnd(iFrame-&gt;nb_samples, oSampleRate, iSampleRate, AV_ROUND_UP);</p>
</li>
<li><p>Q : å½•éŸ³ä¹‹åå£°éŸ³å¤ªå°, ç”šè‡³æœ‰æ—¶å€™å¬ä¸åˆ°, éœ€è¦å¦‚ä½•è°ƒæ•´? </p>
<p>A : é€šè¿‡amixerå‚æ•°è¿›è¡Œç›¸åº”çš„é…ç½®</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">/storage/recode <span class="meta"># amixer cset numid=53,iface=MIXER,name=<span class="string">'DMIC GAIN'</span> 15</span></span><br><span class="line">numid=<span class="number">53</span>,iface=MIXER,name=<span class="string">'DMIC GAIN'</span></span><br><span class="line">  ; type=INTEGER,access=rw---R--,values=<span class="number">1</span>,min=<span class="number">0</span>,max=<span class="number">31</span>,step=<span class="number">0</span></span><br><span class="line">  : values=<span class="number">15</span></span><br><span class="line">  | dBscale-min=<span class="number">0.00</span>dB,step=<span class="number">3.00</span>dB,mute=<span class="number">0</span></span><br><span class="line"><span class="comment">//è¿™ä¸ªæ­¥éª¤çš„ä½œç”¨æ˜¯, å°†dmicçš„å¢ç›Šè°ƒæ•´ä¸º15 </span></span><br></pre></td></tr></tbody></table></figure>


</li>
<li><p>Q:  è€³æœºéŸ³é‡å°ä½†æ˜¯amixeræ²¡æœ‰ç›¸å…³å¯ä»¥é…ç½®çš„å‚æ•°?</p>
<p>A : é€šè¿‡asound.confé…ç½®æ–°çš„æ’ä»¶, </p>
<p><a href="https://alsa.opensrc.org/How_to_use_softvol_to_control_the_master_volume">https://alsa.opensrc.org/How_to_use_softvol_to_control_the_master_volume</a></p>
</li>
</ol>
<h1 id="å‚è€ƒèµ„æ–™ï¼ˆåŒ…å«FFmpegï¼‰"><a href="#å‚è€ƒèµ„æ–™ï¼ˆåŒ…å«FFmpegï¼‰" class="headerlink" title="å‚è€ƒèµ„æ–™ï¼ˆåŒ…å«FFmpegï¼‰"></a>å‚è€ƒèµ„æ–™ï¼ˆåŒ…å«FFmpegï¼‰</h1><blockquote>
<p>æ³¨ï¼šå¦‚æœåç»­å¦‚æ¶‰åŠåˆ°FFmpegæ–‡ç« ï¼Œå†å°†è¯¥éƒ¨åˆ†å†…å®¹ç§»é™¤ï¼Œä»¥ä¸‹æ–‡ç« æ˜¯åœ¨å·¥ä½œçš„å¼€å‘ä¸­æœ‰å¸®åŠ©åˆ°è‡ªå·±</p>
</blockquote>
<ul>
<li><p><a href="https://mp.weixin.qq.com/s/1TJQc3Ktdw_Qz576iLjB1Q">ALSAï¼ˆé«˜çº§Linuxå£°éŸ³æ¶æ„ï¼‰æµ…æ</a></p>
</li>
<li><p><a href="https://wenku.baidu.com/view/dacb0922af45b307e87197a2.html">ALSAæ¡†æ¶ä»‹ç»â€”â€”éŸ³é¢‘é€šè·¯</a></p>
</li>
<li><p><a href="https://magodo.github.io/alsa-pcm/#0-pcm">ALSA - PCMæ¥å£</a></p>
</li>
<li><p><a href="https://www.cnblogs.com/jason-lu/archive/2013/06/07/3123750.html">Linux ALSAæ¡†æ¶ä¹‹ä¸‰:PCMè®¾å¤‡çš„åˆ›å»º </a></p>
</li>
<li><p><a href="https://blog.csdn.net/leixiaohua1020/article/details/44116215">FFmpegæºä»£ç ç®€å•åˆ†æ</a></p>
</li>
<li><p><a href="https://blog.csdn.net/BrookIcv/article/details/53490799">FFmpeg ä¸­AVPacketçš„ä½¿ç”¨</a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>Linux</category>
        <category>Audio</category>
      </categories>
      <tags>
        <tag>ALSA</tag>
      </tags>
  </entry>
  <entry>
    <title>Libmadè¯¦è§£</title>
    <url>/2022/11/05/Audio/Audio-libmad/</url>
    <content><![CDATA[<p>ç®€å•æ¥è®²ï¼Œlibmadå°±æ˜¯ä¸€ä¸ªMP3æ–‡ä»¶çš„è§£ç åº“ã€‚å¦‚æœæƒ³è¦æ·±å…¥ç†è§£å…¶ä¸­çš„å®ç°éœ€è¦å¯¹MP3æ–‡ä»¶æ ¼å¼æœ‰è¯¦ç»†çš„äº†è§£ï¼Œå…³äºMP3æ–‡ä»¶æ ¼å¼çš„å†…å®¹åœ¨è¿™é‡Œæˆ‘ä¸èµ˜è¿°ï¼Œä¹‹å‰çš„æ–‡ç« å½“ä¸­æœ‰è¿‡è¯¦ç»†çš„è®²è§£ <a href="https://yanglieee.com/2022/09/05/Audio-meet-1/">click here</a></p>
<h1 id="What"><a href="#What" class="headerlink" title="What"></a>What</h1><blockquote>
<p>Libmad è¯¦è§£ï¼š<a href="https://www.underbit.com/products/mad/">https://www.underbit.com/products/mad/</a></p>
</blockquote>
<p> libmad æ˜¯ä¸€ä¸ªé«˜è´¨é‡çš„ MPEG éŸ³é¢‘è§£ç å™¨ã€‚ç›®å‰æ”¯æŒ  MPEG-1 å’Œ MPEG-2 å¯¹è¾ƒä½é‡‡æ ·é¢‘ç‡çš„æ‰©å±•ï¼Œä»¥åŠæ‰€è°“çš„ MPEG 2.5 æ ¼å¼ï¼Œä¸‰ä¸ªéŸ³é¢‘å±‚éƒ½åœ¨ä»£ç ä¸Šåšäº†å®ç°ã€‚ä¼˜åŠ¿ï¼š</p>
<ul>
<li>24 ä½ PCM è¾“å‡º</li>
<li>100% å®šç‚¹ï¼ˆæ•´æ•°ï¼‰è®¡ç®—</li>
<li>åŸºäº ISO/IEC æ ‡å‡†çš„å…¨æ–°å®æ–½</li>
<li>æ ¹æ® GNU é€šç”¨å…¬å…±è®¸å¯è¯ (GPL) çš„æ¡æ¬¾åˆ†å‘</li>
</ul>
<h1 id="How"><a href="#How" class="headerlink" title="How"></a>How</h1><h2 id="ä»£ç ä¸‹è½½"><a href="#ä»£ç ä¸‹è½½" class="headerlink" title="ä»£ç ä¸‹è½½"></a>ä»£ç ä¸‹è½½</h2><p><a href="https://sourceforge.net/projects/mad/files/">https://sourceforge.net/projects/mad/files/</a></p>
<p><a href="https://www.linuxfromscratch.org/blfs/view/svn/multimedia/libmad.html">https://www.linuxfromscratch.org/blfs/view/svn/multimedia/libmad.html</a></p>
<h2 id="ä»£ç ç»“æ„"><a href="#ä»£ç ç»“æ„" class="headerlink" title="ä»£ç ç»“æ„"></a>ä»£ç ç»“æ„</h2><p>&lt; åŸºäº libmad-0.15.1b ç‰ˆæœ¬&gt;</p>
<table>
<thead>
<tr>
<th>æºæ–‡ä»¶</th>
<th>bit.c</th>
<th>decoder.c</th>
<th>fixed.c</th>
<th>frame.c</th>
<th>huffman.c</th>
<th>layer12.c</th>
<th>layer3.c</th>
<th>stream.c</th>
<th>synth.c</th>
<th>timer.c</th>
<th>version.c</th>
<th>minimad.c(demo)</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>å¤´æ–‡ä»¶</td>
<td>bit.h</td>
<td>decoder.h</td>
<td>fixed.h</td>
<td>frame.h</td>
<td>huffman.h</td>
<td>layer12.h</td>
<td>layer3.h</td>
<td>stream.h</td>
<td>synth.h</td>
<td>timer.h</td>
<td>version.h</td>
<td>global.h</td>
<td>mad.hï¼ˆAPIï¼‰</td>
</tr>
<tr>
<td>datæ–‡ä»¶</td>
<td>sf_table.dat</td>
<td>imdct_s.dat</td>
<td>qc_table.dat</td>
<td>D.dat</td>
<td>rq_table.dat</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>å…¶ä»–æ–‡ä»¶</td>
<td>Makefile</td>
<td>config</td>
<td>â€¦â€¦</td>
<td></td>
<td>å¤§éƒ¨åˆ†å†…å®¹ä¸å‚ä¸ç¼–è¯‘</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>å…·ä½“ä½¿ç”¨æ–¹æ³•å¯ä»¥å‚è€ƒminimad.cæ–‡ä»¶ï¼Œè¿™é‡Œé¢å¯¹apiçš„ä½¿ç”¨æœ‰è¿›ä¸€æ­¥çš„è¯´æ˜</p>
<p>åŒæ—¶ä¹Ÿå¯ä»¥å‚è€ƒæˆ‘åŸºäºLinux libmadå†™å‡ºæ¥çš„ä¸€ä¸ªéŸ³é¢‘æ’­æ”¾å™¨ï¼Œæºç é“¾æ¥ <a href="https://github.com/yangLieee/audioplayer">click here</a></p>
<h1 id="ç¼–è¯‘æ–¹æ³•"><a href="#ç¼–è¯‘æ–¹æ³•" class="headerlink" title="ç¼–è¯‘æ–¹æ³•"></a>ç¼–è¯‘æ–¹æ³•</h1><p>&lt; ä»…ä»‹ç»linuxç¯å¢ƒä¸‹ç¼–è¯‘æ–¹æ³• &gt; </p>
<ol>
<li>æ‰‹å†™Makefile / CMakeLists.txt</li>
<li>ç³»ç»Ÿæä¾›çš„config<ul>
<li>æ‰§è¡Œ <strong>sed -i â€˜/-fforce-mem/dâ€™ configure</strong> ï¼Œ è¿™æ¡å‘½ä»¤æ˜¯ä¸ºäº†é€‚é…é«˜ç‰ˆæœ¬çš„gccï¼Œå› ä¸ºé«˜ç‰ˆæœ¬çš„gccå·²ç»å°†-fforce-memå»é™¤äº†</li>
<li>æ‰§è¡Œ <strong>./configure ,</strong> æ–‡ä»¶å¤¹ä¸‹ä¼šç”ŸæˆMakefile</li>
<li>æ‰§è¡Œ <strong>sudo make; sudo install;</strong> </li>
<li>è‡³æ­¤é™æ€åº“å’ŒåŠ¨æ€åº“å·²ç»ç”Ÿæˆï¼Œç›®å½•åœ¨/usr/local/lib</li>
</ul>
</li>
</ol>
<h1 id="æ ¸å¿ƒAPI"><a href="#æ ¸å¿ƒAPI" class="headerlink" title="æ ¸å¿ƒAPI"></a>æ ¸å¿ƒAPI</h1><ol>
<li><p>mad_decoder_init( )</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//mad.h</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">mad_decoder_init</span><span class="params">(<span class="keyword">struct</span> mad_decoder *, <span class="type">void</span> *,   </span></span><br><span class="line"><span class="params">           <span class="comment">/* input func  */</span>  <span class="keyword">enum</span> mad_flow (*)(<span class="type">void</span> *, <span class="keyword">struct</span> mad_stream *), </span></span><br><span class="line"><span class="params">           <span class="comment">/* header func */</span>  <span class="keyword">enum</span> mad_flow (*)(<span class="type">void</span> *, <span class="keyword">struct</span> mad_header <span class="type">const</span> *),                   </span></span><br><span class="line"><span class="params">           <span class="comment">/* filter func */</span>  <span class="keyword">enum</span> mad_flow (*)(<span class="type">void</span> *, <span class="keyword">struct</span> mad_stream <span class="type">const</span> *, <span class="keyword">struct</span> mad_frame *), </span></span><br><span class="line"><span class="params">           <span class="comment">/* output func */</span>  <span class="keyword">enum</span> mad_flow (*)(<span class="type">void</span> *, <span class="keyword">struct</span> mad_header <span class="type">const</span> *, <span class="keyword">struct</span> mad_pcm *), </span></span><br><span class="line"><span class="params">           <span class="comment">/* error func  */</span>  <span class="keyword">enum</span> mad_flow (*)(<span class="type">void</span> *, <span class="keyword">struct</span> mad_stream *, <span class="keyword">struct</span> mad_frame *), </span></span><br><span class="line"><span class="params">           <span class="comment">/* message func*/</span>  <span class="keyword">enum</span> mad_flow (*)(<span class="type">void</span> *, <span class="type">void</span> *, <span class="type">unsigned</span> <span class="type">int</span> *))</span>; </span><br></pre></td></tr></tbody></table></figure>

<p>mad_decoder_init( )æ˜¯libmadä¸­æœ€ç»ˆé‡è¦çš„å‡½æ•°ä¹‹ä¸€ï¼Œå…¶ä½œç”¨æ˜¯å°†line3~line8çš„å…­ä¸ªå›è°ƒå‡½æ•°æ³¨å†Œåˆ°mad_decoderå®ä¾‹å‡ºæ¥çš„decoderä¸­ã€‚</p>
<ul>
<li><p><strong>å¿…é¡»è‡ªå®šä¹‰çš„å‚æ•°ï¼š</strong>å‚æ•°1ï¼šç”¨æˆ·è‡ªå·±å®ä¾‹çš„ä¸€ä¸ªè§£ç å™¨ç»“æ„ä½“ï¼›å‚æ•°2ï¼šç”¨æˆ·è‡ªå®šä¹‰çš„ç»“æ„ä½“æŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆå°†ç”¨äºæ•´ä¸ªè§£ç çš„è¿‡ç¨‹åœ¨å›è°ƒå‡½æ•°ä¹‹é—´è¿›è¡Œæ•°æ®çš„ä¼ è¾“ï¼›å‚æ•°3ï¼šè¾“å…¥çš„å›è°ƒå‡½æ•°ï¼Œè¯¥å›è°ƒç”¨äºç”¨æˆ·è‡ªå®šä¹‰å°†æ•°æ®è¾“å…¥ç¼–ç å™¨çš„é€»è¾‘ï¼›å‚æ•°6ï¼šè¾“å‡ºçš„å›è°ƒå‡½æ•°ï¼ŒåŒinput callback funcã€‚è‡ªå®šä¹‰è¾“å‡ºçš„åˆ†è¾¨ç‡å§ï¼š24bit / 16bitï¼Œå¯ä»¥å­˜æˆæ–‡ä»¶äº¦å¯ä»¥ç›´æ¥é€šè¿‡pcmæ¥å£æ’­æ”¾ã€‚Outputå›è°ƒå‡½æ•°åœ¨madlibæ¯è§£ç å®Œæˆä¸€ä¸ªå¸§åè¢«è°ƒç”¨ï¼Œç›´åˆ°å…¨éƒ¨è§£ç å®Œæˆæˆ–å‡ºé”™ã€‚å‚æ•°8ï¼ˆå¼‚æ­¥å·¥ä½œæ¨¡å¼ä¸‹å¿…é€‰ï¼‰ï¼šè¾“å‡ºä¿¡æ¯ã€‚</p>
</li>
<li><p><strong>é€‰æ‹©æ€§å®šä¹‰å‚æ•°ï¼š</strong>å…¶ä»–å‚æ•°å±äºè‡ªå®šä¹‰å‚æ•°æ¯”å¦‚è¿›è¡Œå¤´è§£æã€è¿‡æ»¤ç­›é€‰çš„å›è°ƒå‡½æ•°ç­‰ç­‰ï¼Œå¦‚æœè‡ªå·±æ²¡æœ‰éœ€æ±‚ç½®0å³å¯ã€‚</p>
</li>
</ul>
</li>
<li><p>mad_decoder_run( )</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//mad.h</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">mad_decoder_run</span><span class="params">(<span class="keyword">struct</span> mad_decoder *, <span class="keyword">enum</span> mad_decoder_mode)</span>; </span><br></pre></td></tr></tbody></table></figure>

<p>è¯¥å‡½æ•°æ˜¯è§£ç çš„ä¸»æµç¨‹å‡½æ•°ï¼Œå³è§£ç å™¨çš„å…¥å£å‡½æ•°ï¼Œå¦‚æœè¦è¿½ä»£ç å¯ä»¥ä»æ­¤å¤„å¼€å§‹è¿›è¡Œå‰–æã€‚</p>
<ul>
<li>å‚æ•°1ï¼šç”¨æˆ·è‡ªå®šä¹‰å®ä¾‹åŒ–å¹¶åˆå§‹åŒ–çš„è§£ç å™¨decoderï¼›</li>
<li>å‚æ•°2ï¼šé€‰æ‹©è§£ç æ¨¡å¼ï¼ˆSYNC / ASYNCï¼‰æ·±å…¥ä»£ç å¯ä»¥å‘ç°è¿™ä¸ªé€‰æ‹©ä½¿å¾—è§£ç å™¨è¿›å…¥ä¸åŒçš„å‡½æ•°è¿›è¡Œå·¥ä½œã€‚</li>
</ul>
<p>æ‰€è°“åŒæ­¥æ–¹å¼æ˜¯æŒ‡è§£ç å‡½æ•°åœ¨è§£ç å®Œä¸€å¸§åæ‰è¿”å›å¹¶å¸¦å›å‡ºé”™ä¿¡æ¯ï¼Œå¼‚æ­¥æ–¹å¼æ˜¯æŒ‡è§£ç å‡½æ•°åœ¨è°ƒç”¨åç«‹å³è¿”å›ï¼Œé€šè¿‡æ¶ˆæ¯ä¼ é€’è§£ç çŠ¶æ€ä¿¡æ¯ã€‚(æ•…å¼‚æ­¥æ–¹å¼å¿…é¡»å®šä¹‰messageå›è°ƒå‡½æ•°)</p>
</li>
<li><p>mad_decoder_finish( )</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//mad.h</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">mad_decoder_finish</span><span class="params">(<span class="keyword">struct</span> mad_decoder *)</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>è§£ç ç»“æŸï¼Œç”¨äºæ¸…ç†å·¥ä½œï¼Œé‡Šæ”¾ä¸æµç›¸å…³çš„ä»»ä½•åŠ¨æ€å†…å­˜ã€‚</p>
</li>
<li><p>mad_stream_buffer( )</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//mad.h</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">mad_stream_buffer</span><span class="params">(<span class="keyword">struct</span> mad_stream *, <span class="type">unsigned</span> <span class="type">char</span> <span class="type">const</span> *, <span class="type">unsigned</span> <span class="type">long</span>)</span>; </span><br></pre></td></tr></tbody></table></figure>

<p>è¯¥å‡½æ•°æ˜¯inputå›è°ƒå‡½æ•°ä¸­æœ€é‡è¦çš„å‡½æ•°ï¼Œå…¶ä½œç”¨æ˜¯æŒ‰ç…§å‚æ•°2ã€å‚æ•°3å³MP3æ–‡ä»¶åœ¨å†…å­˜æ˜ åƒçš„èµ·å§‹åœ°å€å’Œæœ¬æ¬¡è¦ä¼ é€’çš„æ–‡ä»¶é•¿åº¦ä¸mad_streamè¿›è¡Œå…³è”ï¼Œå½¢æˆlibmadå¯è¯†åˆ«çš„streamæµ</p>
<p>éœ€è¦æ³¨æ„ï¼Œè¿™é‡Œä¼ é€’å¤šå°‘æ•°æ®å®Œå…¨æ˜¯è‡ªå®šä¹‰çš„ã€‚å¦‚æœä¸€æ¬¡æ€§é€å…¥åˆ™æ•´ä¸ªè§£ç è¿‡ç¨‹è°ƒç”¨ä¸€æ¬¡inputï¼›å¦‚æœä¸€æ¬¡æ€§ä¼ é€’è‹¥å¹²ï¼Œoutputæ ¹æ®ä¼ é€’çš„æ•°æ®è¿›è¡Œè§£ç ï¼Œå¦‚æœæ²¡æœ‰æ•°æ®å¯è§£ç»§ç»­è°ƒç”¨inputã€‚æ‰€ä»¥è‡ªå·±å®šä¹‰å¥½è¾“å…¥é€»è¾‘å³å¯ã€‚</p>
</li>
</ol>
<h1 id="é‡ç‚¹æ•°æ®ç»“æ„"><a href="#é‡ç‚¹æ•°æ®ç»“æ„" class="headerlink" title="é‡ç‚¹æ•°æ®ç»“æ„"></a>é‡ç‚¹æ•°æ®ç»“æ„</h1><ol>
<li><p>mad_stream</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//mad.h &amp;&amp; stream.h</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">mad_stream</span> {</span>           </span><br><span class="line">  <span class="type">unsigned</span> <span class="type">char</span> <span class="type">const</span> *buffer;          <span class="comment">/* input bitstream buffer */</span>                                       <span class="type">unsigned</span> <span class="type">char</span> <span class="type">const</span> *bufend;          <span class="comment">/* end of buffer */</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">long</span> skiplen;                <span class="comment">/* bytes to skip before next frame */</span></span><br><span class="line">  <span class="type">int</span> sync;                             <span class="comment">/* stream sync found */</span>        </span><br><span class="line">  <span class="type">unsigned</span> <span class="type">long</span> freerate;               <span class="comment">/* free bitrate (fixed) */</span>     </span><br><span class="line">  <span class="type">unsigned</span> <span class="type">char</span> <span class="type">const</span> *this_frame;      <span class="comment">/* start of current frame */</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">char</span> <span class="type">const</span> *next_frame;      <span class="comment">/* start of next frame */</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mad_bitptr</span> <span class="title">ptr</span>;</span>                <span class="comment">/* current processing bit pointer */</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mad_bitptr</span> <span class="title">anc_ptr</span>;</span>            <span class="comment">/* ancillary bits pointer */</span>   </span><br><span class="line">  <span class="type">unsigned</span> <span class="type">int</span> anc_bitlen;              <span class="comment">/* number of ancillary bits */</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="title function_">char</span> <span class="params">(*main_data)</span>[MAD_BUFFER_MDLEN];                  <span class="comment">/* Layer III main_data() */</span>    </span><br><span class="line">  <span class="type">unsigned</span> <span class="type">int</span> md_len;                  <span class="comment">/* bytes in main_data */</span>  </span><br><span class="line">  <span class="type">int</span> options;                          <span class="comment">/* decoding options (see below) */</span></span><br><span class="line">  <span class="class"><span class="keyword">enum</span> <span class="title">mad_error</span> <span class="title">error</span>;</span>                 <span class="comment">/* error code (see above) */</span>   </span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>

<p>è¯¥ç»“æ„ä½“è®°å½•äº†æ–‡ä»¶çš„åœ°å€ã€å½“å‰æ‰€å¤„ç†çš„ä½ç½®å’Œè§£ç å‰çš„Bitstreamæ•°æ®</p>
<p>mad_stream.bufend â€“ mad_stream.next_frameå°±æ˜¯å‰©ä½™çš„æœªè¢«è§£ç çš„ MPEG å¸§çš„æ•°æ®çš„å­—èŠ‚æ•°é‡ï¼ˆå‡è®¾æ­¤å¸§åœ¨ç¼“å†²åŒºä¸­ä¸å®Œæ•´)</p>
</li>
<li><p>mad_header</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">mad_header</span> {</span></span><br><span class="line">  <span class="class"><span class="keyword">enum</span> <span class="title">mad_layer</span> <span class="title">layer</span>;</span>             <span class="comment">/* audio layer (1, 2, or 3) */</span></span><br><span class="line">  <span class="class"><span class="keyword">enum</span> <span class="title">mad_mode</span> <span class="title">mode</span>;</span>               <span class="comment">/* channel mode (see above) */</span></span><br><span class="line">  <span class="type">int</span> mode_extension;               <span class="comment">/* additional mode info */</span>                                             <span class="class"><span class="keyword">enum</span> <span class="title">mad_emphasis</span> <span class="title">emphasis</span>;</span>       <span class="comment">/* de-emphasis to use (see above) */</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">long</span> bitrate;            <span class="comment">/* stream bitrate (bps) */</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">int</span> samplerate;          <span class="comment">/* sampling frequency (Hz) */</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">short</span> crc_check;         <span class="comment">/* frame CRC accumulator */</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">short</span> crc_target;        <span class="comment">/* final target CRC checksum */</span></span><br><span class="line">  <span class="type">int</span> flags;                        <span class="comment">/* flags (see below) */</span></span><br><span class="line">  <span class="type">int</span> private_bits;                 <span class="comment">/* private bits (see below) */</span></span><br><span class="line">  <span class="type">mad_timer_t</span> duration;             <span class="comment">/* audio playing time of frame */</span></span><br><span class="line">};    </span><br></pre></td></tr></tbody></table></figure>

<p>é€šè¿‡æ³¨é‡Šå¾ˆå®¹æ˜“çœ‹å‡ºï¼Œè¯¥ç»“æ„ä½“è®°å½•äº†MPEG å¸§çš„åŸºæœ¬ä¿¡æ¯ï¼Œæ¯”å¦‚MPEG å±‚æ•°ã€å£°é“æ¨¡å¼ã€æµæ¯”ç‰¹ç‡ã€é‡‡æ ·ç‡ã€æ¯”ç‰¹ç‡ä»¥åŠæŸäº›æ ¡éªŒä½ç­‰ç­‰ã€‚</p>
<blockquote>
<p>Tipsï¼šï¼ˆbitrate % 32ï¼‰ å¦‚æœæ˜¯æ•´æ•°è¯´æ˜è¯¥æ–‡ä»¶æ ¼å¼æ˜¯CBRï¼ˆconstant bitrateï¼Œæ’å®šæ¯”ç‰¹ç‡ï¼‰ï¼Œå¦åˆ™æ˜¯VBRï¼ˆvariable bitrateï¼Œå¯å˜æ¯”ç‰¹ç‡ï¼‰ï¼Œè¿™å¯¹æ–‡ä»¶æ’­æ”¾æ—¶é•¿æ˜¯æœ‰å½±å“çš„ã€‚</p>
</blockquote>
</li>
<li><p>mad_pcm</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">mad_pcm</span> {</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">int</span> samplerate;          <span class="comment">/* sampling frequency (Hz) */</span>                                           <span class="type">unsigned</span> <span class="type">short</span> channels;          <span class="comment">/* number of channels */</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">short</span> length;            <span class="comment">/* number of samples per channel */</span></span><br><span class="line">  <span class="type">mad_fixed_t</span> samples[<span class="number">2</span>][<span class="number">1152</span>];     <span class="comment">/* PCM output samples [ch][sample] */</span></span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>

<p>madlibè§£ç å™¨æ˜¯ä»¥å¸§ä¸ºå•ä½è¿›è¡Œè§£ç çš„ï¼Œmad_pcmæ¯æ¬¡æœ€å¤šè§£ç å‡ºï¼ˆ1152 * channelsï¼‰ä¸ªPCMæ•°æ®ï¼Œæ¯ä¸ªé‡‡æ ·ç‚¹ç”¨intï¼ˆ32bitï¼‰è¡¨å¾ä½†æ˜¯åªç”¨äº†å…¶ä¸­çš„24bitï¼Œè‡³æ­¤å¯ä»¥ç›´æ¥è¾“å‡ºæ•°æ®ä¿å­˜æ–‡ä»¶æˆ–è€…ç›´æ¥è°ƒç”¨éŸ³é¢‘æ’­æ”¾çš„APIè¿›è¡Œæ’­æ”¾ã€‚ä½†ç›®å‰å¤§å¤šæ•°codecæ”¯æŒçš„æ˜¯16bité‡åŒ–åˆ†è¾¨ç‡ï¼Œæ‰€ä»¥åœ¨è¾“å‡ºæ—¶å°†æ•°æ®é¥±å’Œåˆ°16bitè¿›è¡Œè¾“å‡ºã€‚</p>
</li>
<li><p>mad_flow</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">mad_flow</span> {</span></span><br><span class="line">  MAD_FLOW_CONTINUE = <span class="number">0x0000</span>,   <span class="comment">/* continue normally */</span>                                                     MAD_FLOW_STOP     = <span class="number">0x0010</span>,   <span class="comment">/* stop decoding normally */</span></span><br><span class="line">  MAD_FLOW_BREAK    = <span class="number">0x0011</span>,   <span class="comment">/* stop decoding and signal an error */</span></span><br><span class="line">  MAD_FLOW_IGNORE   = <span class="number">0x0020</span>    <span class="comment">/* ignore the current frame */</span></span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>

<p>æ‰€æœ‰å›è°ƒå‡½æ•°çš„è¿”å›å€¼å‡ä¸ºè¯¥æšä¸¾ç±»å‹ï¼Œåœ¨è§£ç çš„ä¸»æµç¨‹ä¸­ä¼šé€šè¿‡ä¸æ–­åˆ¤æ–­è§£ç å™¨æ‰€è°ƒç”¨çš„å›è°ƒå‡½æ•°çš„çŠ¶æ€æ¥ç¡®è®¤ä¸‹ä¸€æ­¥çš„åŠ¨ä½œ</p>
</li>
</ol>
<h1 id="ç›¸å…³è°ƒè¯•ç»éªŒ"><a href="#ç›¸å…³è°ƒè¯•ç»éªŒ" class="headerlink" title="ç›¸å…³è°ƒè¯•ç»éªŒ"></a>ç›¸å…³è°ƒè¯•ç»éªŒ</h1><ol>
<li><p>é…ç½®å‚æ•°æœªé€‰æ‹©</p>
<p>Qï¼šç¼–è¯‘æ­£å¸¸é€šè¿‡ï¼Œæµç¨‹æ­£ç¡®ï¼Œä½†æ˜¯è¾“å‡ºçš„å£°éŸ³èƒ½å¬å‡ºæ˜¯æ‰€éœ€è¦çš„éŸ³é¢‘ä½†æ˜¯æ•´ä½“æ•°æ®å¹¶ä¸æ­£ç¡®ï¼Ÿ</p>
<p>Aï¼šåœ¨mad.hä¸­æœ‰è‹¥å¹²çš„å‡½æ•°æ˜¯æ ¹æ®å¹³å°çš„ä¸åŒæœ‰ä¸åŒçš„å®ç°ï¼Œç”±äºç¼–è¯‘è¿‡ç¨‹ä¸­æ²¡æœ‰æ³¨æ„è­¦å‘Šç›´æ¥å°†å…¶æ³¨é‡Šå¯¼è‡´æ²¡æœ‰é€‰æ‹©æ­£ç¡®å‡½æ•°å®ç°ï¼Œå¯¼è‡´æœ€ç»ˆçš„æ•°æ®éƒ½æ˜¯é”™è¯¯çš„ã€‚ç¼–è¯‘æ—¶æ·»åŠ ç›¸åº”çš„å¹³å°çš„å‚æ•°å³å¯ï¼Œå¦‚æœæ‰‹åŠ¨å†™cmakeï¼Œå‚è€ƒç»™å‡ºçš„Makefileåšå‚æ•°é€‰æ‹©ï¼</p>
</li>
<li><p>çº¿ç¨‹æ ˆç©ºé—´å¤§å°åˆ†é…ä¸è¶³</p>
<p>Qï¼šåœ¨PCä¸Šæµ‹è¯•æ­£å¸¸æ’­æ”¾ï¼Œä½†æ˜¯ç§»æ¤åˆ°å°ç³»ç»Ÿä¸­ç»å¸¸å‡ºç°stack overflowï¼Ÿ</p>
<p>Aï¼šç”±äºMP3ä¸€å¸§æ•°æ®çš„é‡‡æ ·ç‚¹æ•°ä¸º1152ï¼Œä½¿ç”¨ int ç±»å‹è¿›è¡Œå­˜å‚¨ï¼Œæ‰€ä»¥æ ¸å¿ƒå‡½æ•° â€œ â…¢_decodeâ€ è‡³å°‘éœ€è¦6kçš„æ ˆç©ºé—´ï¼Œå¦‚æœæ˜¯å•ç‹¬ä¸€ä¸ªçº¿ç¨‹çš„è¯å†åŠ ä¸Šå…¶ä»–çš„å±€éƒ¨å˜é‡ã€å‡½æ•°è·³è½¬ç­‰ç­‰å¯èƒ½å°±è¶…è¿‡8kã€‚</p>
<p>â€‹	  å½“æ—¶ä½¿ç”¨c++ çš„threadè¿›è¡Œçš„çº¿ç¨‹åˆ›å»ºå¹¶ä¸èƒ½é…ç½®æ ˆç©ºé—´å¤§å°ï¼Œç»è¿‡ä¸¤å¤©å·¦å³çš„debugæŸ¥åˆ°æ˜¯æ ¸å¿ƒå‡½æ•°æ ˆç©ºé—´çš„æº¢å‡ºï¼Œæœ€ç»ˆä½¿ç”¨pthreadåŠ å¤§æ ˆç©ºé—´çš„å¤§å°è¿è¡Œå³å¯ã€‚</p>
</li>
<li><p>åŠ¨æ€è§£ç çš„å®ç°</p>
<p>Qï¼šåˆšå¼€å§‹ç™¾åº¦libmadçš„åº“ï¼Œå¾ˆå¤šåšå®¢è¯´åªèƒ½è°ƒç”¨ä¸€æ¬¡inputå›è°ƒå‡½æ•°å³ä¸€æ¬¡åŠ è½½æ‰€æœ‰çš„æºæ•°æ®ï¼Œè¿™å¯¹äºå®æ—¶æ§åˆ¶é€ æˆä¸ä¾¿ï¼Ÿ</p>
<p>Aï¼š æ·±å…¥æºç å¯ä»¥çœ‹å‡ºè¾“å…¥çš„çš„æ•°æ®è§£ç å®Œæˆåªè¦ä¸è¿”å›STOPæ˜¯å¯ä»¥ç»§ç»­å¡«å……æ•°æ®çš„ï¼Œè¿™æ ·ä¸´æ—¶çš„bufferå°±å°ä¸€äº›å¹¶ä¸”å¯ä»¥è¯•è¯•æ§åˆ¶å®Œæˆæ’­æ”¾å™¨çš„åŠŸèƒ½ã€‚ï¼ˆéœ€è¦æ³¨æ„å¦‚æœä¸€æ¬¡è¾“å…¥çš„æ•°æ®æ˜¯å‡ å¸§å¤šä¸€ç‚¹ï¼Œè€Œå¤šå‡ºæ¥çš„éœ€è¦æ”¾ä¿å­˜ä¸‹æ¬¡å†æ­¤è¿›è¡Œè§£ç ï¼‰</p>
</li>
<li><p>è·å¾—éŸ³é¢‘å‚æ•°</p>
<p>Qï¼šèƒ½å¤Ÿå¾ˆå¿«çš„è·å¾—éŸ³é¢‘ä¿¡æ¯ï¼Ÿ</p>
<p>Aï¼š å¯¹äºwavå¤´å¾ˆå®¹æ˜“çš„å¯ä»¥æ‰¾åˆ°éŸ³é¢‘çš„å‚æ•°ï¼Œä½†æ˜¯MP3æ–‡ä»¶çš„ä¿¡æ¯ä¿å­˜åœ¨å¸§å¤´ä¸­ï¼Œæ‰€ä»¥å¯ä»¥è¿›è¡Œä¸€æ­¥é¢„è§£ç ã€‚å³è¯»å…¥è‹¥å¹²ï¼ˆ512å³å¯ï¼‰byteæ•°æ®è§£ä¸€å¸§çš„å¤´å°±å¯ä»¥è·å¾—å…¨éƒ¨ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼šé‡‡æ ·ç‡ã€æ¯”ç‰¹ç‡ã€å£°é“ã€éŸ³é¢‘æ—¶é•¿ç­‰ç­‰ã€‚</p>
</li>
<li><p>è·å¾—æ’­æ”¾è¿›åº¦ / æ—¶é•¿å‡ºç°å¼‚å¸¸</p>
<p>Qï¼šä½¿ç”¨å…¬å¼ï¼šå½“å‰æ–‡ä»¶ä½ç½® / æ–‡ä»¶å¤§å° Ã— æ–‡ä»¶æ€»æ—¶é•¿ï¼Œè·å¾—å½“å‰æ’­æ”¾æ—¶é—´å‡ºç°å¼‚å¸¸ï¼Ÿ</p>
<p>Aï¼š å¯¹äºduration å’Œ fposæ˜¯ç”¨intçš„æ•°æ®ç±»å‹è¿›è¡Œä¿å­˜çš„ï¼Œä½†æ˜¯å¯¹äºwavæ–‡ä»¶ä¸€èˆ¬æ¯”è¾ƒå¤§åœ¨è®¡ç®—çš„æ—¶å€™è¶…å‡ºäº†æ•°æ®ç±»å‹æ‰€èƒ½å­˜å‚¨çš„æœ€å¤§é•¿åº¦ã€‚</p>
</li>
</ol>
]]></content>
      <categories>
        <category>Linux</category>
        <category>Audio</category>
      </categories>
      <tags>
        <tag>libmad</tag>
      </tags>
  </entry>
  <entry>
    <title>Audio-å†é‡</title>
    <url>/2022/09/05/Audio/Audio-meet-1/</url>
    <content><![CDATA[<p>æœ¬ç¯‡å†…å®¹å¯¹ä¸€èŠ‚æåˆ°çš„ç¼–ç è¿›è¡Œæ‰©å±•ï¼Œå°†é‡ç‚¹å¯¹PCMæ ¼å¼ã€WAVEæ ¼å¼ã€MP3æ ¼å¼è¿›è¡Œè¯¦ç»†è§£æã€‚</p>
<h1 id="PCM"><a href="#PCM" class="headerlink" title="PCM"></a>PCM</h1><p>PCM : Pulse-Code Modulation è„‰å†²è°ƒåˆ¶ç¼–ç </p>
<p>PCM æœ¬æ˜¯ä¸€ç§è°ƒåˆ¶æ–¹æ³•çš„åç§°ï¼Œè¿›è€Œé€šè¿‡è¯¥æ–¹æ³•å¾—åˆ°çš„éŸ³é¢‘æ•°æ®ä¹Ÿç§°ä½œPCMæ•°æ®ï¼Œå³è£¸æ•°æ®ã€‚è¯¥æ•°æ®æ˜¯æˆ‘ä»¬é€šè¿‡codecå¾—åˆ°çš„æœ€åŸå§‹çš„æ•°æ®ï¼</p>
<p>â€‹    <img src="/images/linux/Audio/Audio-remeet-1.png" alt="pic"></p>
<h1 id="WAVE"><a href="#WAVE" class="headerlink" title="WAVE"></a>WAVE</h1><p>WAVE : Waveform Audio File Format æ³¢å½¢éŸ³é¢‘æ–‡ä»¶æ ¼å¼, å³æˆ‘ä»¬å¹³æ—¶æ‰€è¯´çš„waveæ–‡ä»¶</p>
<p>å¾ˆç®€å•ï¼ŒWAVæ–‡ä»¶æ ¼å¼ç»“æ„ä½“é€šå¸¸æ˜¯ç”¨æ¥ä¿å­˜PCMæ ¼å¼çš„åŸå§‹æ•°æ®ï¼ŒåŸºäºæ­¤æ·»åŠ ä¸€ä¸ªæ–‡ä»¶å¤´æ„æˆäº†WAVæ–‡ä»¶ï¼Œå³wave = waveå¤´ + PCMæ•°æ®ã€‚å› æ­¤å®ƒé€šå¸¸ä¹Ÿè¢«ç§°ä¸ºæ— æŸéŸ³é¢‘ï¼Œä½†æ˜¯ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è®²ï¼ŒWAVä¹Ÿå¯ä»¥å­˜å‚¨å…¶å®ƒå‹ç¼©æ ¼å¼çš„éŸ³é¢‘æ•°æ®ã€‚</p>
<h2 id="wavå¤´"><a href="#wavå¤´" class="headerlink" title="wavå¤´"></a>wavå¤´</h2><table>
<thead>
<tr>
<th><strong>åç§»åœ°å€</strong></th>
<th><strong>æ•°æ®ç±»å‹</strong></th>
<th><strong>å¤§å°</strong></th>
<th><strong>åç§°</strong></th>
<th><strong>å†…å®¹</strong></th>
</tr>
</thead>
<tbody><tr>
<td>00H~03H</td>
<td>char</td>
<td>4</td>
<td>èµ„æºäº¤æ¢æ–‡ä»¶æ ‡å¿— ( RIFF )</td>
<td>52 49 46 46 å›ºå®šå†™æ³•</td>
</tr>
<tr>
<td>04H~07H</td>
<td>long int ï¼ˆ4ï¼‰</td>
<td>1</td>
<td>æ–‡ä»¶å¤§å°size</td>
<td>ä»ä¸‹ä¸ªåœ°å€ (08) å¼€å§‹åˆ° WAV æ–‡ä»¶ç»“å°¾çš„æ€»å­—èŠ‚æ•°æ•´ä¸ª WAV æ–‡ä»¶çš„å¤§å°å°±æ˜¯è¯¥æ•°å€¼ + 8</td>
</tr>
<tr>
<td>08H~0BH</td>
<td>char</td>
<td>4</td>
<td>WAVæ–‡ä»¶æ ‡å¿— WAVE</td>
<td>57 41 56 45 , æ˜¯ WAVE å››ä¸ªå­—æ¯çš„ ASCII ç ï¼Œå›ºå®šå†™æ³•</td>
</tr>
<tr>
<td>0CH~0FH</td>
<td>char</td>
<td>4</td>
<td>æ³¢å½¢æ ¼å¼æ ‡å¿—ï¼ˆfmt ï¼‰</td>
<td>æœ€åä¸€ä½0x20 å¯¹åº”çš„å­—ç¬¦æ˜¯ç©ºæ ¼</td>
</tr>
<tr>
<td>10H~13H</td>
<td>int</td>
<td>1</td>
<td>è¿‡æ»¤å­—èŠ‚</td>
<td>ä¸€èˆ¬ä¸º00000010H</td>
</tr>
<tr>
<td>14H~15H</td>
<td>short int ï¼ˆ2ï¼‰</td>
<td>1</td>
<td><strong>æ ¼å¼ç§ç±»audioformat</strong></td>
<td>å€¼ä¸º1æ—¶ï¼Œè¡¨ç¤ºæ•°æ®ä¸ºçº¿æ€§PCMç¼–ç </td>
</tr>
<tr>
<td>16H~17H</td>
<td>short int</td>
<td>1</td>
<td><strong>é€šé“æ•° channnels</strong></td>
<td>1 è¡¨ç¤ºå•å£°é“ , 2 è¡¨ç¤ºç«‹ä½“å£°</td>
</tr>
<tr>
<td>18H~1BH</td>
<td>long int</td>
<td>1</td>
<td><strong>é‡‡æ ·é¢‘ç‡ sampleRate</strong></td>
<td>80 BB 00 00 â€“ &gt; 48000 Hz ;</td>
</tr>
<tr>
<td>1CH~1FH</td>
<td>long int</td>
<td>1</td>
<td>æ³¢å½¢æ•°æ®ä¼ è¾“é€Ÿç‡ï¼ˆæ¯ç§’å¹³å‡å­—èŠ‚æ•°ï¼‰</td>
<td>é‡‡æ ·ç‡Ã—é€šé“æ•°Ã—é‡‡æ ·ä½æ•° / 8</td>
</tr>
<tr>
<td>20H~21H</td>
<td>short int</td>
<td>1</td>
<td>DATAæ•°æ®å—è°ƒæ•´é•¿åº¦ï¼Œå­—èŠ‚ã€‚</td>
<td>é€šé“æ•°Ã—æ ·æœ¬æ•°æ®ä½æ•° / 8</td>
</tr>
<tr>
<td>22H~23H</td>
<td>short int</td>
<td>1</td>
<td>PCMä½å®½</td>
<td>10 00 â€”-&gt; 16 ä½, 2 å­—èŠ‚</td>
</tr>
<tr>
<td>24H~27H</td>
<td>char</td>
<td>4</td>
<td>æ•°æ®æ ‡è®°</td>
<td>64 61 74 61 dataçš„ASCIIçš„å€¼</td>
</tr>
<tr>
<td>28H~2BH</td>
<td>long int</td>
<td>1</td>
<td>PCM æ•°æ®æ€»é•¿åº¦</td>
<td></td>
</tr>
</tbody></table>
<h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><p>Qï¼šwaveæ–‡ä»¶çš„æ–‡ä»¶å¤´ä¸€å®šæ˜¯44Byteså—ï¼Ÿ</p>
<p>Aï¼šä¸ä¸€å®šï¼ä»¥ä¸Šæ ¼å¼åªæ˜¯waveæ–‡ä»¶çš„æ ‡å‡†ï¼Œå±äºé€šç”¨æ ‡å‡†ã€‚ä½†æ˜¯å°†å…¶ä»–æ ¼å¼æ–‡ä»¶é€šè¿‡ffmpegè½¬ç ä¹‹åçš„wavæ–‡ä»¶å¤´ä¼šå¤§äº44ä¸ªå­—èŠ‚ï¼ˆ115Bytesï¼‰ï¼Œåœ¨æ–‡ä»¶å¤´å’Œæ•°æ®å—ä¹‹é—´æ·»åŠ äº†ä¸€äº›ffmpegçš„ä¿¡æ¯ï¼Œéƒ¨åˆ†è¡¨å¾çš„æ„ä¹‰ä¸åŒï¼ç½‘ä¸Šå¾ˆå¤šæ ¼å¼è½¬æ¢å·¥å…·éƒ½æ˜¯è°ƒç”¨çš„ffmpegè½¬ç çš„ï¼Œå¯¼è‡´æ–‡ä»¶å¤´å¤§å°ä¸å®Œå…¨ç›¸åŒã€‚</p>
<blockquote>
<p>â€‹     -map_metadata -1 -fflags +bitexact å¯ä»¥å»é™¤æ ‡æ³¨ä¿¡æ¯ï¼Œä½¿æ–‡ä»¶å¤´ç¬¦åˆæ ‡å‡†</p>
<p>â€‹     ffmpeg -y -i music.mp3 -map_metadata -1 -fflags +bitexact -f wav -ac 1 -ar 16000 -ab 16k music.wav</p>
</blockquote>
<h2 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h2><p>Ffmpegä¸å»æ ‡å‡†ä¿¡æ¯è½¬ç waveä¹‹åçš„æ–‡ä»¶æ ¼å¼ï¼š</p>
<table>
<thead>
<tr>
<th>åç§»åœ°å€</th>
<th>å­—èŠ‚æ•°</th>
<th>æ•°æ®ç±»å‹</th>
<th>å†…å®¹</th>
</tr>
</thead>
<tbody><tr>
<td>00H ~ 23H</td>
<td>36</td>
<td>åŒä¸Šè¡¨çš„00H~23Hä¸€è‡´</td>
<td></td>
</tr>
<tr>
<td>24H ~ 27H</td>
<td>4</td>
<td>char</td>
<td>â€œLISTâ€, LISTå—æ ‡å¿—ï¼Œå›ºå®šä¸å˜</td>
</tr>
<tr>
<td>28H ~ 2BH</td>
<td>4</td>
<td>long</td>
<td>LISTå—å ç”¨çš„å­—èŠ‚æ•°ï¼Œåœ¨è¿™é‡Œä¸º26å­—èŠ‚</td>
</tr>
<tr>
<td>2CH ~ 45H</td>
<td>26</td>
<td>char</td>
<td>LISTå—å†…å®¹</td>
</tr>
<tr>
<td>46H ~ 49H</td>
<td>4</td>
<td>char</td>
<td>â€œdataâ€, dataæ•°æ®å—æ ‡å¿—ï¼Œå›ºå®šä¸å˜</td>
</tr>
<tr>
<td>4AH ~ 4DH</td>
<td>4</td>
<td>long</td>
<td>wavæ–‡ä»¶éŸ³é¢‘æ•°æ®æ‰€å å¤§å°</td>
</tr>
</tbody></table>
<h1 id="MP3"><a href="#MP3" class="headerlink" title="MP3"></a>MP3</h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>MP3ï¼šMoving Picture Experts Group Audio Layer III, åŠ¨æ€å½±åƒä¸“å®¶å‹ç¼©æ ‡å‡†éŸ³é¢‘å±‚é¢3</p>
<p>é¦–å…ˆç§‘æ™®ä¸‹éƒ¨åˆ†æ¦‚å¿µï¼šMPEGï¼ˆMoving Pictures Experts Group ï¼ŒåŠ¨æ€å›¾åƒä¸“å®¶ç»„ï¼‰ï¼Œç®€å•ç†è§£å°±æ˜¯ä¸€äº›ç ”ç©¶éŸ³è§†é¢‘çš„ä¸“å®¶å‘å¸ƒçš„ç›¸å…³æ ‡å‡†ï¼Œå…¶å‘½åä¸ºMPEG-*ï¼ˆå…¶ä¸­*ä»£è¡¨æ•°å­—æˆ–å­—æ¯ï¼‰ï¼Œä¾‹å¦‚MPEG-1ã€MPEG-2.5ã€MPEG-Eç­‰ç­‰ã€‚</p>
<p>å¯èƒ½æœ‰äººä¼šæƒ³MPEG-3æ˜¯ä¸æ˜¯å°±æ˜¯MP3å‘¢ï¼ŸMPEGæ˜¯é’ˆå¯¹éŸ³è§†é¢‘åŠç³»ç»Ÿæµ‹è¯•çš„ä¸€æ•´å¥—çš„æ ‡å‡†è§„èŒƒï¼Œå…¶ä¸­å¯¹äºMPEG1æ¥è®²ï¼Œå…¶part3éŸ³é¢‘éƒ¨åˆ†è§„å®šäº†3ä¸ªç‹¬ç«‹åˆ†å±‚çš„éŸ³é¢‘ç¼–ç æ ¼å¼ï¼Œåˆ†åˆ«ä¸ºlayer â… ã€layer â…¡ã€layer â…¢ï¼Œè€Œlayer â…¢ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„MP3ï¼ˆMEPEG1 Layer â…¢ï¼‰ï¼Œè¿™ä¸‰å±‚çš„åŒºåˆ«ä¸»è¦åœ¨äºç¼–ç çš„ç®—æ³•åŠè¾“å‡ºé€Ÿç‡çš„åŒºåˆ«ã€‚åŒæ ·çºµå‘æ¥çœ‹ï¼ŒMPEG2ã€MPEG2.5åŒæ ·æœ‰ä¸‰ä¸ªç‹¬ç«‹çš„layerï¼ŒåŒºåˆ«åœ¨äºå®ƒä»¬æ‰€ä½¿ç”¨çš„é‡‡æ ·ç‡æ›´ä½äº†ã€‚</p>
<h2 id="æ–‡ä»¶ç»“æ„"><a href="#æ–‡ä»¶ç»“æ„" class="headerlink" title="æ–‡ä»¶ç»“æ„"></a>æ–‡ä»¶ç»“æ„</h2><p>ç›®å‰å¤§å¤šæ•°æ ‡å‡†MP3æ–‡ä»¶éƒ½æ”¯æŒID3V2æ ‡å‡†ã€‚å…·ä½“ç»„æˆæ ¼å¼ä¸ºï¼šID3V2.3æ ‡ç­¾å¸§ï¼ˆ1ä¸ªï¼‰+ æ•°æ®å¸§ï¼ˆè‹¥å¹²ï¼‰+ ID3V1å¸§ï¼ˆ1ä¸ªï¼‰ï¼Œå…¶ä¸­ID3V2.3 = æ ‡ç­¾å¤´ï¼ˆ1ä¸ªï¼Œå¿…é¡»ï¼‰ + æ ‡ç­¾å¸§ï¼ˆè‹¥å¹²ï¼Œä¸å¿…é¡»ï¼‰ + æ‰©å±•æ ‡ç­¾å¤´ï¼ˆä¸å¿…é¡»ï¼‰</p>
<p>ç»„æˆéƒ¨åˆ†æˆ‘ç”»äº†ä¸€å¼ ç¤ºæ„å›¾å¯ä»¥å‚è€ƒï¼Œæ¯ä¸€éƒ¨åˆ†ä¸‹é¢å°†åšè¯¦ç»†è§£æ</p>
<p>â€‹    <img src="/images/linux/Audio/Audio-remeet-2.png" alt="pic"></p>
<h2 id="ID3æ ‡å‡†"><a href="#ID3æ ‡å‡†" class="headerlink" title="ID3æ ‡å‡†"></a>ID3æ ‡å‡†</h2><p>MP3å¸§å¤´ä¸­é™¤äº†å­˜å‚¨ä¸€äº›è±¡privateã€copyrightã€originalçš„ç®€å•éŸ³ä¹è¯´æ˜ä¿¡æ¯ä»¥å¤–ï¼Œæ²¡æœ‰è€ƒè™‘å­˜æ”¾æ­Œåã€ä½œè€…ã€ä¸“è¾‘åã€å¹´ä»½ ç­‰å¤æ‚ä¿¡æ¯ï¼Œè€Œè¿™äº›ä¿¡æ¯åœ¨MP3åº”ç”¨ä¸­éå¸¸å¿…è¦ã€‚1996å¹´ï¼ŒFricKempåœ¨â€œStudio 3â€é¡¹ç›®ä¸­æå‡ºäº†åœ¨MP3æ–‡ä»¶å°¾å¢åŠ ä¸€å—ç”¨äºå­˜æ”¾æ­Œæ›²çš„è¯´æ˜ä¿¡æ¯ï¼Œå½¢æˆäº†ID3æ ‡å‡†</p>
<h2 id="æ ‡ç­¾å¤´"><a href="#æ ‡ç­¾å¤´" class="headerlink" title="æ ‡ç­¾å¤´"></a>æ ‡ç­¾å¤´</h2><p>æ ‡ç­¾å¤´æ˜¯ç”±10Byteç»„æˆçš„ï¼Œå…·ä½“å«ä¹‰å¦‚ä¸‹</p>
<table>
<thead>
<tr>
<th>å®šä¹‰</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>char Header[3];</td>
<td>å¿…é¡»ä¸ºâ€ID3â€å¦åˆ™è®¤ä¸ºæ ‡ç­¾ä¸å­˜åœ¨ï¼Œå¦‚ä¸Šå›¾åœ°å€00â€”02éƒ¨åˆ†ä¸ºâ€49 44 33â€ï¼Œæ–‡æœ¬ä¸ºâ€œID3â€</td>
</tr>
<tr>
<td>char Ver;</td>
<td>ç‰ˆæœ¬å· ID3V2.3 å°±è®°å½• 3ï¼Œå¦‚ä¸Šå›¾åœ°å€03å¤„è®°å½•ä¸ºâ€03â€</td>
</tr>
<tr>
<td>char Revision;</td>
<td>å‰¯ç‰ˆæœ¬å·æ­¤ç‰ˆæœ¬è®°å½•ä¸º 0</td>
</tr>
<tr>
<td>char Flag;</td>
<td>æ”¾æ ‡å¿—çš„å­—èŠ‚ï¼Œä¸€èˆ¬ä¸º00abc00000a â€“ è¡¨ç¤ºæ˜¯å¦ä½¿ç”¨ Unsynchronisationb â€“ è¡¨ç¤ºæ˜¯å¦æœ‰æ‰©å±•å¤´éƒ¨,ä¸€èˆ¬æ²¡æœ‰(è‡³å°‘ Winamp æ²¡æœ‰è®°å½•),æ‰€ä»¥ä¸€èˆ¬ä¹Ÿä¸è®¾ç½®c â€“ è¡¨ç¤ºæ˜¯å¦ä¸ºæµ‹è¯•æ ‡ç­¾(99.99%çš„æ ‡ç­¾éƒ½ä¸æ˜¯æµ‹è¯•ç”¨çš„ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¹Ÿä¸è®¾ç½®)</td>
</tr>
<tr>
<td>char Size[4];</td>
<td>æ ‡ç­¾å¤§å°,åŒ…æ‹¬æ ‡ç­¾å¤´çš„ 10 ä¸ªå­—èŠ‚å’Œæ‰€æœ‰çš„æ ‡ç­¾å¸§çš„å¤§å°</td>
</tr>
</tbody></table>
<p>æ•´ä¸ªæ ‡ç­¾å¤§å° :</p>
<p>ID3V2_frame_size = (int)(Size[0] &amp; 0x7F) &lt;&lt; 21 | (int)(Size[1] &amp; 0x7F) &lt;&lt; 14 | (int)(Size[2] &amp; 0x7F) &lt;&lt; 7 | (int)(Size[3] &amp; 0x7F) + 10;</p>
<h2 id="æ ‡ç­¾å¸§"><a href="#æ ‡ç­¾å¸§" class="headerlink" title="æ ‡ç­¾å¸§"></a>æ ‡ç­¾å¸§</h2><p>æ¯ä¸ªæ ‡ç­¾å¸§éƒ½æœ‰ä¸€ä¸ª 10 ä¸ªå­—èŠ‚çš„å¸§å¤´ï¼ˆè™½ç„¶éƒ½æ˜¯10å­—èŠ‚ï¼Œä½†æ˜¯ä¸æ ‡ç­¾å¤´ä¸æ˜¯ä¸€ä¸ªä¸œè¥¿ã€‚æ ‡ç­¾å¤´æœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼Œè€Œæ ‡ç­¾å¤´æ¯ä¸€ä¸ªæ ‡ç­¾å¸§éƒ½æœ‰ä¸€ä¸ªå¸§å¤´ï¼‰å’Œè‡³å°‘ä¸€ä¸ªå­—èŠ‚çš„ä¸å›ºå®šé•¿åº¦çš„å†…å®¹ç»„æˆã€‚</p>
<table>
<thead>
<tr>
<th>å®šä¹‰</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>char FrameID[4]</td>
<td>ç”¨å››ä¸ªå­—ç¬¦æ ‡è¯†ä¸€ä¸ªå¸§ï¼Œè¯´æ˜å…¶å†…å®¹</td>
</tr>
<tr>
<td>char Size[4]</td>
<td>å¸§å†…å®¹çš„å¤§å°ï¼Œä¸åŒ…æ‹¬å¸§å¤´ï¼Œä¸å¾—å°äº1</td>
</tr>
<tr>
<td>char Flags[2]</td>
<td>å­˜æ”¾æ ‡å¿—ï¼Œåªå®šä¹‰äº†6 ä½ï¼Œæ­¤å¤„ä¸å†è¯´æ˜</td>
</tr>
</tbody></table>
<p>å¸¸ç”¨å¸§æ ‡è¯†ï¼š</p>
<p>TIT2ï¼šæ ‡é¢˜<br>TPE1ï¼šä½œè€…<br>TALBï¼šä¸“è¾‘<br>TRCKï¼š éŸ³è½¨ï¼Œæ ¼å¼ï¼šN/Mï¼ŒNè¡¨ç¤ºä¸“è¾‘ä¸­ç¬¬å‡ é¦–ï¼ŒMä¸ºä¸“è¾‘ä¸­æ­Œæ›²æ€»æ•°<br>TYERï¼šå¹´ä»½<br>TCONï¼šç±»å‹<br>COMMï¼šå¤‡æ³¨ï¼Œæ ¼å¼ï¼šâ€œeng\0å¤‡æ³¨å†…å®¹â€ï¼Œå…¶ä¸­engè¡¨ç¤ºæ‰€ä½¿ç”¨çš„è¯­è¨€<br>å¸§å¤§å°ä¸ºå››ä¸ªå­—èŠ‚æ‰€è¡¨ç¤ºçš„æ•´æ•°å¤§å°ã€‚</p>
<h2 id="æ•°æ®å¸§"><a href="#æ•°æ®å¸§" class="headerlink" title="æ•°æ®å¸§"></a>æ•°æ®å¸§</h2><p>æ•°æ®å¸§ç”±å¸§å¤´å’Œæ•°æ®å¸§ç»„æˆï¼Œå¯¹äºæ¯ä¸€å¸§æ•°æ®éƒ½æœ‰ä¸€ä¸ªå¸§å¤´ã€‚</p>
<p>å¸§å¤´é•¿4å­—èŠ‚ï¼Œå¯¹äºå›ºå®šä½ç‡çš„MP3æ–‡ä»¶ï¼Œæ‰€æœ‰å¸§çš„å¸§å¤´æ ¼å¼ä¸€æ ·å…¶æ•°æ®ç»“æ„å¦‚ä¸‹</p>
<p>typedef struct frameHeader<br>{<br>unsigned int sync1:8; //åŒæ­¥ä¿¡æ¯ 1<br>unsigned int error_protection:1; //CRC æ ¡éªŒ<br>unsigned int layer:2; //å±‚<br>unsigned int version:2; //ç‰ˆæœ¬<br>unsigned int sync2:3; //åŒæ­¥ä¿¡æ¯ 2<br>unsigned int extension:1; //ç‰ˆæƒ<br>unsigned int padding:1; //å¡«å……ç©ºç™½å­—<br>unsigned int sample_rate_index:2; //é‡‡æ ·ç‡ç´¢å¼•<br>unsigned int bit_rate_index:4; //ä½ç‡ç´¢å¼•<br>unsigned int emphasis:2; //å¼ºè°ƒæ–¹å¼<br>unsigned int original:1; //åŸå§‹åª’ä½“<br>unsigned int copyright:1; //ç‰ˆæƒæ ‡å¿—<br>unsigned int mode_extension:2; //æ‰©å±•æ¨¡å¼,ä»…ç”¨äºè”åˆç«‹ä½“å£°<br>unsigned int channel_mode:2; //å£°é“æ¨¡å¼<br>}FHEADER;</p>
<p>æ¯”ç‰¹ç‡ä¸º32çš„æ•´æ•°å€ä¸€èˆ¬å°±æ˜¯æ’å®šç¼–ç ï¼Œå¦åˆ™å°±æ˜¯å¯å˜ç¼–ç ï¼›å¯å˜ç¼–ç å¸§å¤´ä¸€èˆ¬ä¼šæœ‰ä¸åŒ</p>
<h2 id="ID3V1æ ‡ç­¾å¸§"><a href="#ID3V1æ ‡ç­¾å¸§" class="headerlink" title="ID3V1æ ‡ç­¾å¸§"></a>ID3V1æ ‡ç­¾å¸§</h2><p>æ ‡ç­¾å¤´æ˜¯ç”±128Byteç»„æˆçš„ï¼Œå…·ä½“å«ä¹‰å¦‚ä¸‹</p>
<table>
<thead>
<tr>
<th>å®šä¹‰</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>char Header[3]</td>
<td>æ ‡ç­¾å¤´å¿…é¡»æ˜¯â€TAGâ€å¦åˆ™è®¤ä¸ºæ²¡æœ‰æ ‡ç­¾</td>
</tr>
<tr>
<td>char Title[30]</td>
<td>æ ‡é¢˜</td>
</tr>
<tr>
<td>char Artist[30]</td>
<td>ä½œè€…</td>
</tr>
<tr>
<td>char Album[30]</td>
<td>ä¸“é›†</td>
</tr>
<tr>
<td>char Year[4]</td>
<td>å‡ºå“å¹´ä»£</td>
</tr>
<tr>
<td>char Comment[28]</td>
<td>å¤‡æ³¨</td>
</tr>
<tr>
<td>char reserve</td>
<td>ä¿ç•™</td>
</tr>
<tr>
<td>char track</td>
<td>éŸ³è½¨</td>
</tr>
<tr>
<td>char Genre;</td>
<td>ç±»å‹</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Linux</category>
        <category>Audio</category>
      </categories>
  </entry>
  <entry>
    <title>ã€ŠGoogleå·¥ä½œæ³•ã€‹</title>
    <url>/2023/02/06/Reading/Google%E5%B7%A5%E4%BD%9C%E6%B3%95/</url>
    <content><![CDATA[<p><img src="/images/reading/GoogleWork.jpg" alt="img"></p>
<p>ã€Šgoogleå·¥ä½œæ³•ã€‹ä½œè€…æ˜¯å½¼å¾—Â·è´¹åˆ©å…‹æ–¯Â·æ ¼æ—¥ç“¦å¥‡ï¼Œé’ˆå¯¹googleçš„ä¸€äº›å·¥ä½œæ–¹æ³•è®ºå’Œä¸ªäººç»éªŒçš„è¿›è¡Œè‘—ä¹¦ã€‚æˆ‘è®¤ä¸ºå¯¹äºè¿™ç±»ä¹¦ç±çš„æ­£ç¡®ä½¿ç”¨æ˜¯é€šè¯»å…¨ç¯‡ï¼ŒäºŒæ¬¡é˜…è¯»é’ˆå¯¹éƒ¨åˆ†å†…å®¹è‡ªå·±è¿›è¡Œåœºæ™¯çš„å¸¦å…¥ï¼Œæ­¤ç±»å·¥å…·ä¹¦ç±å¯ä»¥ç»å¸¸æ¥è¿›è¡Œç¿»çœ‹å¯¹è‡ªå·±æ—¥å¸¸ç”Ÿæ´»å·¥ä½œæ–¹å¼çš„åˆ¤æ–­</p>
<p>é’ˆå¯¹æ¯ä¸ªç»†åˆ†ç« èŠ‚ï¼Œæ€»ç»“å¹¶è¿›è¡Œè‡ªå·±çš„æ€è€ƒ</p>
<h1 id="Fasterï¼ˆâ€»ï¼‰"><a href="#Fasterï¼ˆâ€»ï¼‰" class="headerlink" title="Fasterï¼ˆâ€»ï¼‰"></a>Fasterï¼ˆâ€»ï¼‰</h1><h2 id="ä¸€æ¬¡ç»“æŸï¼Œå½“åœºåšå®Œ"><a href="#ä¸€æ¬¡ç»“æŸï¼Œå½“åœºåšå®Œ" class="headerlink" title="ä¸€æ¬¡ç»“æŸï¼Œå½“åœºåšå®Œ"></a>ä¸€æ¬¡ç»“æŸï¼Œå½“åœºåšå®Œ</h2><p>ä½œè€…è®¤ä¸ºå†³å®šå·¥ä½œæ•ˆç‡çš„å…³é”®åœ¨äºå¯¹ ç°åœ¨ çš„ä½¿ç”¨æ–¹æ³•ã€‚å¯¹äºä¸€ä»¶äº‹æƒ…å¦‚æœèƒ½å¤Ÿå½“åœºåšå®Œå°±ä¸è¦æ¨è¿Ÿåˆ°ä»¥åï¼Œå¯¹äºä¸€é¡¹å†³å®šå¦‚æœå½“åœºç¡®å®šå°±ä¸è¦æ¨è¿Ÿåˆ°æœªæ¥ã€‚å¦‚æœå½“æ—¶æ²¡æœ‰è¿›è¡Œå°±è§£å†³æˆ–å†³å®šå°±éœ€è¦åšå‡ºç›¸åº”çš„è®¡åˆ’ï¼šè¦æƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦æ”¶é›†å“ªäº›å¿…è¦çš„èµ„æºã€‚å…·ä½“ç­–ç•¥å¦‚ä¸‹ï¼š</p>
<p><img src="/images/reading/google-0.jpg" alt="img"></p>
<p>å¯¹è‡ªå·±æ¥è®²ï¼Œæˆ‘æ›¾ç»è´Ÿè´£æŸä¸ªé¡¹ç›®ï¼Œå®¢æˆ·åœ¨é—®æˆ‘ä¸€ä¸ªæŠ€æœ¯ç›¸å…³çš„é—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘å½“æ—¶çš„åšæ³•å¯èƒ½å°±æ²¡æœ‰å¾ˆæ°å½“ã€‚ç°åœ¨æ¥çœ‹æˆ‘è®¤ä¸ºæ­£ç¡®çš„æµç¨‹åº”è¯¥æ˜¯ï¼šå°†æˆ‘è‡ªå·±å·²çŸ¥çš„å†…å®¹å¯¹å®¢æˆ·è¿›è¡Œåé¦ˆï¼›å°†è‡ªå·±ä¸çŸ¥é“çš„å†…å®¹å¦‚å®å‘Šè¯‰å®¢æˆ·å¹¶è¯¢é—®ä»–ç›®å‰æ˜¯å¦æœ‰ç©ºæˆ‘å»æ‰¾ä¸€ä¸‹ç›¸å…³è´Ÿè´£äººæ¥è§£ç­”ä»–è¿™ä¸ªé—®é¢˜ï¼ˆ<strong>å¦‚æœç°åœ¨æœ‰å¿…è¦çš„è¯ï¼Œç°åœ¨å°±è”ç³»ï¼›å¦‚æœç°åœ¨åº”è¯¥å†³å®šçš„è¯ï¼Œç°åœ¨å°±å†³å®š</strong>ï¼‰ï¼Œå¦‚æœä¸­é€”é‡åˆ°å…¶å®ƒé—®é¢˜ä¸çŸ¥é“è°æ˜¯è´Ÿè´£äººæˆ–è€…è´Ÿè´£äººä¸åœ¨ï¼Œä¹Ÿå¿…é¡»åšåˆ°ç›¸å…³è§£å†³æ–¹æ¡ˆåšåˆ°æœ‰åˆ‡å®è¿›å±•ï¼ˆæ´»ç”¨èº«è¾¹çš„äºº/å›æ¥ä¹‹åç¬¬ä¸€æ—¶é—´åé¦ˆç­‰ç­‰ï¼‰ï¼Œåœ¨ç¬¬ä¸€æ—¶é—´å†…å°†é—®é¢˜è¿›è¡Œè§£å†³ï¼Œä¸æ‹–å»¶ï¼ï¼ï¼</p>
<h2 id="è®¾ç½®deadline"><a href="#è®¾ç½®deadline" class="headerlink" title="è®¾ç½®deadline"></a>è®¾ç½®deadline</h2><p>èƒ½å½“åœºè§£å†³çš„é—®é¢˜ä¸€å®šè¦ä¸€æ¬¡è§£å†³ï¼Œè€Œä¸èƒ½è§£å†³çš„é—®é¢˜ä¸€å®šè¦è®¾ç½®deadlineï¼Œè¦æœ‰ä¸€ç§ å¦‚æœç°åœ¨ä¸åšé‚£è¦ä»€ä¹ˆæ—¶å€™åš çš„è§‚å¿µã€‚å¯¹äºçº·æ‚çš„å·¥ä½œéœ€è¦æ˜ç¡®ä¼˜å…ˆçº§ã€ç²¾ç»†ç¨‹åº¦ç­‰å› ç´ ã€‚å°†è‡ªå·±çš„æœŸé™æå‰æ˜¯æé«˜æ•ˆç‡çš„æœ‰æ•ˆæ–¹æ³•ã€‚</p>
<p>å¯¹äºè‡ªå·±æ¥è®²ï¼Œå¦‚æœé¢†å¯¼è¦æ±‚ä¸€é¡¹å·¥ä½œå‘¨äº”ä¹‹å‰å®Œæˆã€‚é‚£è‡ªå·±çš„deadlineè¦è®¾ç½®åœ¨å‘¨ä¸‰å‘¨å››åšå¥½ä¸€ä¸ªdemoç»™é¢†å¯¼æŸ¥çœ‹ã€‚åœ¨å·¥ä½œè¿›è¡Œä¹‹å‰éœ€è¦æ˜ç¡®äº‹æƒ…çš„ç´§æ€¥ç¨‹åº¦ã€å®ŒæˆéªŒæ”¶çš„æ ‡å‡†ã€æ˜¯å¦æœ‰å…¶å®ƒæ³¨æ„äº‹é¡¹ç­‰ç­‰</p>
<h2 id="é›†ä¸­ç²¾åŠ›äºæ­¤æ—¶æ­¤åˆ»"><a href="#é›†ä¸­ç²¾åŠ›äºæ­¤æ—¶æ­¤åˆ»" class="headerlink" title="é›†ä¸­ç²¾åŠ›äºæ­¤æ—¶æ­¤åˆ»"></a>é›†ä¸­ç²¾åŠ›äºæ­¤æ—¶æ­¤åˆ»</h2><p>æ­£å¿µï¼ˆMindfulnessï¼‰çš„æ„æ€å°±æ˜¯å°†æ„è¯†é›†ä¸­äºæ­¤æ—¶æ­¤åˆ»ï¼Œè¿™ä¸€è¯åŒæ ·è¢«è°·æ­Œæ‰€é‡‡ç”¨ã€‚å¤§è„‘å°±åƒæ˜¯ä¸€ä¸ªCPUåº”å°½å¯èƒ½çš„å‡å°‘å¤§è„‘èµ„æºçš„æµªè´¹ï¼Œå¯¹äºä»»ä½•ä¸€ä»¶äº‹æƒ…å°½å¯èƒ½è¦æå‰åšå‡†å¤‡ã€‚æ¯”å¦‚ï¼šå‰ä¸€å¤©æ™šä¸Šå°±å‡†å¤‡å¥½ç¬¬äºŒå¤©éœ€è¦ç©¿çš„è¡£æœï¼›ä¼šè®®å‰æ¢³ç†ä¼šè®®çš„ç›®çš„æˆå‘˜ç»„ç»‡ç­‰ç­‰ï¼›ä»»ä½•ä¸€ä»¶äº‹æƒ…å¯èƒ½å‘ç”Ÿçš„åæœåŠç›¸åº”çš„è§£å†³åŠæ³•</p>
<p>åˆ†æçœ¼å‰ä»»åŠ¡çš„æ­£ç¡®æ–¹å¼ï¼šææ¸…æ¥šâ€ä¸ºä»€ä¹ˆéœ€è¦è§£å†³è¿™ä¸ªé—®é¢˜â€œï¼Œâ€åœ¨ä»€ä¹ˆæ—¶é—´ä¹‹å‰å¿…é¡»å¾—å‡ºç­”æ¡ˆâ€œï¼Œè®¾å®šå¥½â€ç›®çš„ä¸ç›®æ ‡â€œä¹‹åå…¨åŠ›ä»¥èµ´ã€‚æ¯”å¦‚ä¼šè®®ä¹‹å‰çš„å‡†å¤‡åˆ—è¡¨ï¼š</p>
<ul>
<li>ä¸ºä»€ä¹ˆå°†å¤§å®¶å¬é›†åˆ°ä¸€èµ·</li>
<li>è¦åšå‡ºä»€ä¹ˆå†³å®š</li>
<li>è¦å–å¾—ä»€ä¹ˆæˆæœ</li>
<li>é€šè¿‡ä¼šè®®åè¦å¾—åˆ°ä»€ä¹ˆæ”¶è·</li>
</ul>
<h2 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h2><ol>
<li><p>å¢åŠ ç°åœ¨çš„å¯†åº¦</p>
<p>é’ˆå¯¹è‡ªå·±æ¥è®²å¯ä»¥ä½“ç°åœ¨ï¼šé€šå‹¤è·¯ä¸Šè¿›è¡Œä¹¦ç±çš„é˜…è¯»è‹±è¯­çš„å­¦ä¹ ç­‰ç­‰ï¼Œå¹¶è¡Œä¸€äº›ä»»åŠ¡</p>
</li>
<li><p>å‡å°‘é‚®ä»¶çš„ä½¿ç”¨ï¼Œç›´æ¥è§é¢æœ€æœ‰æ•ˆç‡</p>
</li>
<li><p>åˆç†ä½¿ç”¨å·¥å…·</p>
<p>æ—¶é—´/æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆå¯¹äºnotionçš„ä½¿ç”¨æ²¡æœ‰æŒç»­ï¼‰ï¼›æ•´ç†çš„æ–‡æ¡£ä¼ è‡³äº‘ç«¯ï¼Œéšæ—¶æŸ¥çœ‹ä¿®æ”¹</p>
</li>
<li><p>å­¦ä¹ è‹±è¯­</p>
<p>ç›®å‰å¾ˆå¤šç¬¬ä¸€æ‰‹èµ„æ–™éƒ½æ˜¯è‹±æ–‡çš„ï¼Œä¸ºäº†æé«˜æ•ˆç‡å¿…é¡»å­¦ä¼šè‹±æ–‡ã€‚å¦åˆ™å†…å®¹çš„å‡†ç¡®æ€§æ’é™¤åœ¨å¤–ï¼Œä¹Ÿæ˜¯æ—¶é—´å’Œæˆæœ¬çš„äºŒæ¬¡æµªè´¹</p>
</li>
</ol>
<h1 id="Sense-VS-sensibility"><a href="#Sense-VS-sensibility" class="headerlink" title="Sense VS sensibility"></a>Sense VS sensibility</h1><h2 id="åˆ›æ„æ€ç»´çš„äº§ç”Ÿ"><a href="#åˆ›æ„æ€ç»´çš„äº§ç”Ÿ" class="headerlink" title="åˆ›æ„æ€ç»´çš„äº§ç”Ÿ"></a>åˆ›æ„æ€ç»´çš„äº§ç”Ÿ</h2><p>ä¸é€»è¾‘å’Œåˆ†æç›¸æ¯”â€œ çµæ„Ÿï¼ˆåˆ›æ„æ€ç»´ï¼‰ â€æ›´é‡è¦</p>
<p>é€šè¿‡äººä¸ºåœ°åˆ¶é€ æ··ä¹±ï¼Œå¯ä»¥ä½¿æ½œæ„è¯†æ´»æ€§åŒ–ï¼Œä»è€Œæ›´å®¹æ˜“åˆ›é€ å‡ºæ–°çš„åˆ›æ„ã€‚å…·ä½“æ–¹æ¡ˆï¼šå‡†å¤‡å‡ ä¸ªé€æ˜æ–‡ä»¶è¢‹ï¼Œå°†å„ç§å›¾ç‰‡ã€æ‚å¿—ã€æŠ¥çº¸å‰ªä¸‹æ¥çš„å†…å®¹æˆ–å†™åœ¨çº¸ä¸Šçš„å…³é”®è¯æ”¾åœ¨é‡Œé¢ï¼Œé€šè¿‡ä»»æ„ç‰©å“çš„ç»„åˆäº§ç”Ÿæ–°çš„åˆ›æ„ã€‚ä¸ºäº†å¼•å‘è¿™ç§â€œçªç„¶å‡ºç°çš„åˆ›æ„ç¬é—´â€ï¼Œæœ€å¥½çš„åŠæ³•å°±æ˜¯å¤šå‡†å¤‡ä¸€äº›èƒ½å¤Ÿæ¿€å‘çµæ„Ÿçš„èµ„æ–™</p>
<h2 id="ç›´è§‰-x2F-é€»è¾‘åœºæ™¯"><a href="#ç›´è§‰-x2F-é€»è¾‘åœºæ™¯" class="headerlink" title="ç›´è§‰/é€»è¾‘åœºæ™¯"></a>ç›´è§‰/é€»è¾‘åœºæ™¯</h2><p>ç»éªŒçš„ç›´è§‰å’Œé€»è¾‘æ€è€ƒæœ¬èº«ä¹‹é—´å¹¶æ²¡æœ‰å­°ä¼˜å­°åŠ£ï¼Œä¸¤è€…å„è‡ªé€‚ç”¨äºä¸åŒçš„æƒ…å†µï¼Œå…·æœ‰ä¸åŒçš„ä½œç”¨ã€‚å¯¹äºæ›´é‡è§†æ„Ÿæ€§çš„é¢†åŸŸæ¥è¯´ï¼Œç›´è§‰æ¯”é€»è¾‘æ›´èƒ½å¤Ÿå‘æŒ¥ä½œç”¨ã€‚</p>
<h2 id="å…¶å®ƒ-1"><a href="#å…¶å®ƒ-1" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h2><ol>
<li><p>ä¸é€»è¾‘å’Œåˆ†æç›¸æ¯”â€çµæ„Ÿâ€œæ›´é‡è¦</p>
</li>
<li><p>ä¸€å‘³çš„æ¨¡ä»¿ä¸å¯èƒ½å®ç°å·®å¼‚åŒ–ã€‚</p>
<p>åªå¯¹ç«äº‰å¯¹æ‰‹çš„å•†å“è¿›è¡Œåˆ†ææ— æ³•å®ç°å·®å¼‚åŒ–ã€‚è¦æƒ³åšå‡ºä¸ä¼—ä¸åŒçš„å•†å“ï¼Œå¿…é¡»åšåˆ°å…¶å®ƒå…¬å¸æ²¡æœ‰åšåˆ°çš„äº‹æƒ…ã€‚</p>
</li>
<li><p>ä¼åˆ’ä¼šè®®ä¸éœ€è¦æ€»ç»“å¼æŠ¥å‘Šã€‚åªç¡®å®šä¸€ä¸ªä¼šè®®è®®é¢˜ï¼Œç„¶åå¤§å®¶å½“åœºè®¨è®º</p>
</li>
<li><p>ç§¯æå¬å–å…¶å®ƒéƒ¨é—¨æˆ–è€…å…¶å®ƒé¢†åŸŸçš„äººçš„æ„è§</p>
</li>
</ol>
<h1 id="Efficiently"><a href="#Efficiently" class="headerlink" title="Efficiently"></a>Efficiently</h1><h2 id="å°†ç›®æ ‡å®šä¸ºåŸæ¥çš„10å€"><a href="#å°†ç›®æ ‡å®šä¸ºåŸæ¥çš„10å€" class="headerlink" title="å°†ç›®æ ‡å®šä¸ºåŸæ¥çš„10å€"></a>å°†ç›®æ ‡å®šä¸ºåŸæ¥çš„10å€</h2><p>å·¥ä½œç”Ÿæ´»ä¸­æˆ‘ä»¬å¯¹äºè‡ªå·±çš„è¦æ±‚å¾€å¾€æ˜¯å®Œæˆä»»åŠ¡å³å¯ï¼Œä½†æ˜¯æœ€ç»ˆçš„æ•ˆæœå¾€å¾€ä¸å°½å¦‚äººæ„ï¼Œå¯èƒ½åªå®Œæˆäº†ä¸ƒå…«æˆã€‚å› æ­¤åœ¨æˆ‘ä»¬è®¾ç½®ç›®æ ‡çš„æ—¶å€™ä¸å¦¨å°†ç›®æ ‡è®¾ç½®çš„æ›´å¤§ä¸€ç‚¹ï¼Œæ—¢å®šç›®æ ‡çš„10å€ã€‚è¿™ä¸ªç›®æ ‡ä¼šå€’é€¼è‡ªå·±æ‰“ç ´æŸç¼šè‡ªå·±çš„æ¡æ¡æ¡†æ¡†å’Œå›ºæœ‰è§‚å¿µ ï¼Œå¦ä¸€æ–¹é¢ï¼Œè¦æƒ³æ”¹å˜å·¥ä½œæ–¹æ³•ï¼Œå¿…é¡»æ•¢äºæ‰¿æ‹…é£é™©ã€æ‰“ç ´è§„åˆ™ã€‚æœ€ç»ˆå³ä½¿å®Œæˆä¸ƒå…«æˆä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç»“æœäº†</p>
<h2 id="Think-like-an-owner"><a href="#Think-like-an-owner" class="headerlink" title="Think like an owner"></a>Think like an owner</h2><p>åƒå…¬å¸æ‰€æœ‰è€…ä¸€æ ·æ€è€ƒã€‚é’ˆå¯¹è‡ªå·±çš„å·¥ä½œå²—ä½ï¼Œä»¥æˆ‘çš„å¹´æ”¶å…¥åº”è¯¥å–å¾—å¤šå°‘çš„æˆæœï¼Œæƒ³è¦å–å¾—è¿™äº›æˆæœéœ€è¦åšå“ªäº›å·¥ä½œï¼Œè€Œæ¯é¡¹å·¥ä½œåº”è¯¥æœ‰æ€æ ·çš„ç»“æœã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­åŠ¿å¿…è¦ä¼˜åŒ–è‡ªå·±çš„å·¥ä½œï¼Œç€çœ¼äºé‡ç‚¹å·¥ä½œå†…å®¹å‡å°‘å·¥ä½œä¸­çš„æ— ç”¨åŠŸï¼Œå¸å–ä»–äººçš„ç»éªŒå¯»æ±‚ä»–äººçš„å¸®åŠ©ã€‚åŒæ ·ä¹Ÿå¯ä»¥å‡è®¾è‡ªå·±å³å°†å¤±ä¸šï¼Œå¦‚æœæ²¡æœ‰å·¥ä½œæ²¡æœ‰äº†æ€ä¹ˆåŠï¼Ÿæƒ³åˆ°è¿™é‡Œè‡ªå·±çš„ç´§è¿«æ„Ÿæ²¹ç„¶è€Œç”Ÿ</p>
<h2 id="æ´»ç”¨20-åŸåˆ™"><a href="#æ´»ç”¨20-åŸåˆ™" class="headerlink" title="æ´»ç”¨20%åŸåˆ™"></a>æ´»ç”¨20%åŸåˆ™</h2><p>åœ¨æ€è€ƒå·¥ä½œçš„æœ‰é™é¡ºåºçš„æ—¶å€™ï¼Œåº”è¯¥ä¼˜å…ˆå°†æ—¶é—´æ”¾åœ¨ <strong>èƒ½å­¦åˆ°å¾ˆå¤šä¸œè¥¿è€Œä¸”å½±å“åŠ›æ¯”è¾ƒå¤§</strong>çš„å·¥ä½œä¸Šã€‚è€Œå…¶å®ƒç±»å‹çš„å·¥ä½œå¯ä»¥è¿›è¡Œåˆ†é…ç­‰ç­‰ã€‚å¯ä»¥è¿›ä¸€æ­¥å¯¹äºŒå…«å®šå¾‹è¿›è¡Œäº†è§£å­¦ä¹ </p>
<h2 id="å¿…è¦çš„å·¥ä½œç´ å…»ï¼ˆâ€»ï¼‰"><a href="#å¿…è¦çš„å·¥ä½œç´ å…»ï¼ˆâ€»ï¼‰" class="headerlink" title="å¿…è¦çš„å·¥ä½œç´ å…»ï¼ˆâ€»ï¼‰"></a>å¿…è¦çš„å·¥ä½œç´ å…»ï¼ˆâ€»ï¼‰</h2><ol>
<li><p>æ‹¥æœ‰é¢„è§æ€§</p>
<ul>
<li>é¢„è§æœºä¼šä¸å¨èƒ</li>
<li>å¯»æ‰¾å‘¨æœŸã€è¶‹åŠ¿ä»¥åŠè§„å¾‹</li>
<li>çŸ­æœŸã€ä¸­æœŸä¸é•¿æœŸæ€è€ƒã€‚è€ƒè™‘<strong>â€œ5/5/5è§„åˆ™â€</strong>ï¼Œå³5å‘¨ä»¥åã€5ä¸ªæœˆä»¥åã€5å¹´ä»¥åä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…è¿›è¡Œæ€è€ƒ</li>
</ul>
</li>
<li><p>æ¢ä½æ€è€ƒ</p>
</li>
<li><p>æ•¢äºæå‡ºè‡ªå·±çš„è§è§£</p>
</li>
<li><p>æ•¢è¯´çœŸè¯ï¼ˆä¸ªäººè®¤ä¸ºè¿™ä¸€ç‚¹è¿˜æ˜¯å…·ä½“æƒ…å†µå…·ä½“åˆ†æï¼‰</p>
</li>
<li><p>ä¸»åŠ¨æ‰¿æ‹…è´£ä»»</p>
</li>
<li><p>ç§¯æå‚ä¸äº¤æµ</p>
</li>
<li><p>æ‰“ç ´å¸¸è§„</p>
</li>
<li><p>ä¸å®³æ€•å¤±è´¥</p>
</li>
<li><p>å‹¤äºæ€è€ƒã€ä¿æŒè´¨ç–‘</p>
<p>é‡åˆ°ä¸æ˜ç™½çš„äº‹æƒ…å¤šé—®ä¸€ä¸ªä¸ºä»€ä¹ˆ</p>
</li>
<li><p>æ”¹å˜è§†è§’</p>
<p>æ•´ä½“è§†è§’ï¼›å±€éƒ¨è§†è§’ï¼›åé¢è§†è§’ï¼›æœªæ¥è§†è§’ï¼›é¡¾å®¢è§†è§’ï¼›ç«äº‰å¯¹æ‰‹è§†è§’ï¼›ç‰¹æ®Šè§†è§’</p>
</li>
</ol>
<h1 id="Interpersonal-relationship"><a href="#Interpersonal-relationship" class="headerlink" title="Interpersonal relationship"></a>Interpersonal relationship</h1><h2 id="å…·è±¡åŒ–æ€è€ƒ"><a href="#å…·è±¡åŒ–æ€è€ƒ" class="headerlink" title="å…·è±¡åŒ–æ€è€ƒ"></a>å…·è±¡åŒ–æ€è€ƒ</h2><p>å®ç‰©æ€è€ƒæˆ‘å°†å…¶æ€»ç»“ä¸ºå…·è±¡åŒ–æ€è€ƒã€‚å·¥ä½œç”Ÿæ´»ä¸­åˆ«äººæœ‰æŸé¡¹éœ€æ±‚æ—¶ï¼Œå¯ä»¥é€šè¿‡æŸç§ç±»æ¯”æˆ–å®ç‰©æ¥ä¸å¯¹æ–¹ç¡®è®¤è¡¨è¾¾æ˜¯å¦ä¸€è‡´ã€‚å…·ä½“æ–¹æ¡ˆï¼šå¯ä»¥æ˜¯åœ¨ä¸€å¼ è‰å›¾ä¸Šç”»å‡ºæ¥å‘åˆ«äººç¡®è®¤â€œæ‚¨è¯´çš„æ˜¯è¿™ç§ç±»å‹å—ï¼Ÿâ€ï¼›æˆ–è€…åœ¨è®¨è®ºé—®é¢˜ä¹‹å‰å°†è®¨è®ºçš„å†…å®¹æ€»ç»“åˆ°A4çº¸ä¸Šï¼Œå°†æ¯”è¾ƒæŠ½è±¡çš„äº‹æƒ…å…·è±¡åŒ–å¯ä»¥å®æ“ã€‚è¿™æ ·æ˜¯å¯ä»¥å¤§å¹…åº¦çš„å‡å°‘äº¤æµçš„æˆæœ¬é™ä½åæœŸçš„æ— ç”¨åŠŸ</p>
<h2 id="æå‡å¿ƒç†å®‰å…¨"><a href="#æå‡å¿ƒç†å®‰å…¨" class="headerlink" title="æå‡å¿ƒç†å®‰å…¨"></a>æå‡å¿ƒç†å®‰å…¨</h2><ul>
<li>å¿ƒç†å®‰å…¨ï¼šé¢å¯¹ æˆ‘å¯ä»¥ä¿¡èµ–ä½ å— æˆ–è€… æˆ‘èƒ½å°Šé‡ä½ å— è¿™æ ·çš„é—®é¢˜çš„æ—¶å€™èƒ½å¤Ÿç»™å‡ºè‚¯å®šçš„ç­”æ¡ˆ</li>
</ul>
<p>å¾—åˆ°ä»–äººçš„ä¿¡èµ–å’Œå°Šé‡ä¹Ÿä¼šä½¿è‡ªå·±äº§ç”Ÿå®‰å…¨æ„Ÿã€‚ä¸€æ—¦æ„ç­‘èµ·ä¿¡èµ–å…³ç³»ï¼Œäº¤æµåŒæ–¹å°±ä¼šåƒæœ‹å‹ä¸€æ ·ï¼Œæ›´å®¹æ˜“çš„äº’ç›¸æå‡ºæ„è§æˆ–å»ºè®®ï¼Œå·¥ä½œç°åœºçš„æ°”æ°›ä¹Ÿä¼šæ›´åŠ æ´»è·ƒã€‚</p>
<h2 id="å€¾å¬ï¼ˆâ€»ï¼‰"><a href="#å€¾å¬ï¼ˆâ€»ï¼‰" class="headerlink" title="å€¾å¬ï¼ˆâ€»ï¼‰"></a>å€¾å¬ï¼ˆâ€»ï¼‰</h2><p>äº¤æµTipsï¼šå»ºç«‹ä¿¡èµ–å…³ç³»æœ€é‡è¦çš„ä¸€ç‚¹å°±æ˜¯å€¾å¬ï¼Œæœ€å¥½çš„åŠæ³•å°±æ˜¯è®©è‡ªå·±å¯¹å¯¹æ–¹äº§ç”Ÿå…´è¶£å¹¶å°†è¿™ç§æƒ…ç»ªä¼ é€’ç»™å¯¹æ–¹ã€‚å¦å¤–ï¼Œå¥½ä¸å®¹æ˜“è®©å¯¹æ–¹è¯´å‡ºè‡ªå·±çš„æ„è§ï¼Œç»å¯¹ä¸èƒ½å°†å¯¹æ–¹çš„æ„è§å®Œå…¨å¦å®šï¼Œä¸èƒ½è®©å¯¹æ–¹è§‰å¾—â€œæˆ‘è¯´äº†ä¹Ÿæ²¡ç”¨â€çš„æƒ³æ³•ï¼ï¼ï¼</p>
<p>è‰¾ç±³Â·åŸƒå¾·è’™é¡¿æ•™æˆæŒ‡å‡ºï¼šä¸è¦å°†é—®é¢˜å•çº¯åœ°çœ‹æˆâ€œéœ€è¦è§£å†³çš„é—®é¢˜â€ï¼Œè€Œæ˜¯è¦å°†å…¶çœ‹ä½œâ€œéœ€è¦å­¦ä¹ çš„é—®é¢˜â€æ¥è¿›è¡Œè®¨è®ºï¼Œè¿™æ ·ä¸æ¸…æ¥šçš„éƒ¨åˆ†å°±ä¼šè‡ªç„¶è€Œç„¶çš„æµ®ç°ï¼Œä¹Ÿæ›´å®¹æ˜“è®©å›¢é˜Ÿæˆå‘˜ç§¯ææ€è€ƒ</p>
<h2 id="å»ºç«‹è‰¯å¥½äººé™…å…³ç³»"><a href="#å»ºç«‹è‰¯å¥½äººé™…å…³ç³»" class="headerlink" title="å»ºç«‹è‰¯å¥½äººé™…å…³ç³»"></a>å»ºç«‹è‰¯å¥½äººé™…å…³ç³»</h2><p>è‰¯å¥½çš„äººé™…å…³ç³»æ˜¯å¿«é€Ÿè§£å†³é—®é¢˜çš„åŸºçŸ³</p>
<p>ç¤¾ä¼šå„è¡Œå„ä¸šå“ªæ€•åªè¦æœ‰ä¸€ç‚¹ç‚¹äº¤é›†éƒ½è¶³å¯ä»¥è®©å¯¹æ–¹å’Œè‡ªå·±äº§ç”Ÿè”ç³»ã€‚è€Œè§åˆ°å…³é”®çš„äººçš„æ—¶å€™æ­£ç¡®çš„æ–¹å¼åº”è¯¥æ˜¯ï¼šæå‰äº†è§£è®¾æƒ³å¯¹æ–¹çš„è¯¾é¢˜ï¼Œç„¶åå¼€é—¨è§å±±çš„æ ¹æ®è¯¾é¢˜å†…å®¹è¿›è¡Œæé—®ï¼Œäº¤æµè¿‡ç¨‹ä¸­è¡¨ç°å‡ºçƒ­æƒ…ã€å¹³ç­‰çš„æ€åº¦å°±å¯ä»¥å¿ƒæƒ…èˆ’ç•…çš„è¿›è¡Œäº¤æµã€‚åœ¨äº¤æµè¿‡ç¨‹ä¸­è¿˜è¦éœ€è¦æ³¨æ„ <strong>ä¸è¦takeè€Œè¦give</strong>ï¼Œè¦è®©åˆ«äººçœ‹åˆ°è‡ªå·±çš„ä»·å€¼</p>
<p><strong>äººé™…å…³ç³»çš„ä¼˜å…ˆé¡ºåº</strong>ï¼šæ–°è®¤è¯†çš„äºº &gt; ç†Ÿè¯†çš„äººï¼›æ–°è®¤è¯†å¹¶ä¸”ä¸æ–­æ”¹å˜è‡ªå·±çš„äºº &gt; æ–°è®¤è¯†ä½†å˜åŒ–ä¸å¤šçš„äºº</p>
<h1 id="Skill"><a href="#Skill" class="headerlink" title="Skill"></a>Skill</h1><h2 id="å­¦ä¹ çš„æ­£ç¡®æ–¹æ³•"><a href="#å­¦ä¹ çš„æ­£ç¡®æ–¹æ³•" class="headerlink" title="å­¦ä¹ çš„æ­£ç¡®æ–¹æ³•"></a>å­¦ä¹ çš„æ­£ç¡®æ–¹æ³•</h2><p>æ£€ç´¢ + è¯¢é—®ä¸“ä¸šäººå£«Â·è¯¢é—®ä»–äººÂ·è¯¢é—®åŒäº‹</p>
<ul>
<li>æ£€ç´¢ï¼šè¯¢é—®äº’è”ç½‘è¿™ä¸ªè€å¸ˆ</li>
<li>è¯¢é—®ä»–äººï¼š<ol>
<li>æ‰¾æœ€æ“…é•¿è¿™é¡¹å·¥ä½œçš„äººè¯¢é—®</li>
<li>è¯¢é—®ä¹‹å‰è¦æœ‰è‡ªå·±çš„æ€è€ƒã€‚å¸¦ç€å‡è®¾å¸¦ç€æ€è€ƒå»æé—®ã€‚å…·ä½“å¯ä»¥æœ‰å››è¦ç´ ï¼šå…·ä½“æ¥è¯´ï¼›è¦åœ¨ä»€ä¹ˆåœ°æ–¹ï¼›æ”¹å˜ä»€ä¹ˆï¼›æ€ä¹ˆåšæ‰èƒ½è®©å·¥ä½œæ›´é¡ºåˆ©</li>
</ol>
</li>
</ul>
<h2 id="å‰é¦ˆä¸åé¦ˆ"><a href="#å‰é¦ˆä¸åé¦ˆ" class="headerlink" title="å‰é¦ˆä¸åé¦ˆ"></a>å‰é¦ˆä¸åé¦ˆ</h2><ul>
<li>å‰é¦ˆï¼šæ‰¾åˆ«äººè¯¢é—®â€œæˆ‘æƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåº”è¯¥æ€ä¹ˆåŠæ‰å¥½å‘¢ï¼Ÿâ€</li>
<li>åé¦ˆï¼šäº‹åçš„åæ€ä¸ç»éªŒæ€»ç»“</li>
</ul>
<p>è¦æƒ³è·å–æœ‰ç”¨çš„ä¿¡æ¯ï¼Œæé—®çš„</p>
<p><img src="/images/reading/google-1.jpg" alt="img"></p>
<h2 id="å¤šå‚åŠ äº¤æµä¼š"><a href="#å¤šå‚åŠ äº¤æµä¼š" class="headerlink" title="å¤šå‚åŠ äº¤æµä¼š"></a>å¤šå‚åŠ äº¤æµä¼š</h2><p>ä¸ºäº†ä¿è¯è‡ªå·±çš„ç”Ÿå­˜ï¼Œæœ€å¥½å¤šå‚åŠ äº¤æµï¼Œä¸è®ºæ˜¯éæ­£å¼èšä¼šã€å…¬å¸å¤–éƒ¨ä¼šè®®ç­‰ç­‰ï¼Œç»™è‡ªå·±å¤šåˆ›é€ å‡ ä¸ªç«‹è¶³ç‚¹ã€‚</p>
<p>åŒè¡Œä¸šã€åŒå¹´é¾„çš„äººå‘†åœ¨ä¸€èµ·ï¼Œè°ˆè®ºçš„äº‹æƒ…éƒ½æ˜¯ç›¸ä¼¼çš„è¯é¢˜ï¼Œæ— æ³•ä»ä¸­è·å–åˆ°è·Ÿå¤šæœ‰ç”¨çš„ä¿¡æ¯ã€‚åœ¨äº¤æµè¿‡ç¨‹ä¸­ï¼Œä¹Ÿè¦æ—¶åˆ»æ€è€ƒâ€œæˆ‘åº”è¯¥ç»™å¯¹æ–¹æä¾›ä»€ä¹ˆæ ·çš„ä¿¡æ¯â€ï¼Œè¾“å‡ºè‡ªå·±çš„ä»·å€¼</p>
<h1 id="Relax-Work"><a href="#Relax-Work" class="headerlink" title="Relax Work"></a>Relax Work</h1><h2 id="ä¸€åˆ†é’Ÿå†¥æƒ³"><a href="#ä¸€åˆ†é’Ÿå†¥æƒ³" class="headerlink" title="ä¸€åˆ†é’Ÿå†¥æƒ³"></a>ä¸€åˆ†é’Ÿå†¥æƒ³</h2><p>å…³é—­ç”µè„‘ï¼Œå°†æ‰€æœ‰æ³¨æ„åŠ›éƒ½é›†ä¸­åœ¨è‡ªå·±çš„å‘¼å¸ä¸Šï¼Œå®‰é™çš„ååœ¨åº§ä½ä¸Š</p>
<h2 id="å¹¶è¡Œä»»åŠ¡ä¸ä¸²è¡Œä»»åŠ¡åˆ†ç±»"><a href="#å¹¶è¡Œä»»åŠ¡ä¸ä¸²è¡Œä»»åŠ¡åˆ†ç±»" class="headerlink" title="å¹¶è¡Œä»»åŠ¡ä¸ä¸²è¡Œä»»åŠ¡åˆ†ç±»"></a>å¹¶è¡Œä»»åŠ¡ä¸ä¸²è¡Œä»»åŠ¡åˆ†ç±»</h2><p>æ¯”å¦‚é€šå‹¤è¿‡ç¨‹ä¸­è¿›è¡Œä¹¦ç±çš„é˜…è¯»ã€å¬éŸ³é¢‘ç­‰ç­‰</p>
<p>è€Œä¸€æ—¦ä¸“æ³¨äºæŸé¡¹å·¥ä½œå°±å°½å¯èƒ½æ’é™¤å¤–éƒ¨çš„å¹²æ‰°ï¼Œå¯ä»¥å°è¯•å°†æ‰‹æœºé™éŸ³ã€æ”¾è¿œä¸€ç‚¹ç­‰ç­‰æ“ä½œ</p>
<h2 id="ç¡åˆè§‰ã€åƒé›¶é£Ÿã€æ”¾æ¾æ˜¯è‡ªå·±çš„è´£ä»»"><a href="#ç¡åˆè§‰ã€åƒé›¶é£Ÿã€æ”¾æ¾æ˜¯è‡ªå·±çš„è´£ä»»" class="headerlink" title="ç¡åˆè§‰ã€åƒé›¶é£Ÿã€æ”¾æ¾æ˜¯è‡ªå·±çš„è´£ä»»"></a>ç¡åˆè§‰ã€åƒé›¶é£Ÿã€æ”¾æ¾æ˜¯è‡ªå·±çš„è´£ä»»</h2><h1 id="Final-Innovation"><a href="#Final-Innovation" class="headerlink" title="Final Innovation"></a>Final Innovation</h1><ol>
<li>æ€è€ƒå¦‚ä½•ä½¿ç”¨AIæ›¿ä»£è‡ªå·±çš„å·¥ä½œ</li>
<li>ç«™åœ¨é©æ–°ä¸€ä¾§ä¸è¢–æ‰‹æ—è§‚ï¼Œæ”¹å˜è‡ªå·±åšæŒä½†ä¸å¥½çš„ä¹ æƒ¯ï¼Œåˆç†ä½¿ç”¨ç°ä»£åŒ–å·¥å…·</li>
<li>å°±ç®—å¯¹æŠ€æœ¯ç»†èŠ‚ä¸äº†è§£ï¼Œä¹Ÿè¦è·Ÿä¸Šè¶‹åŠ¿</li>
<li>å·¥ä½œä¸èƒ½å’Œæ˜¨å¤©ä¸€æ ·</li>
</ol>
<h1 id="æ‘˜æŠ„"><a href="#æ‘˜æŠ„" class="headerlink" title="æ‘˜æŠ„"></a>æ‘˜æŠ„</h1><ol>
<li><p>ä¸è¦è®¤ä¸ºâ€œå…¬å¸å°±æ˜¯è‡ªå·±çš„åŠå…¬å®¤â€ï¼Œè€Œè¦æ—¶åˆ»è®°ä½â€œè‡ªå·±åœ¨å“ªå“ªé‡Œå°±æ˜¯åŠå…¬å®¤â€</p>
</li>
<li><p>ä¼šè®®çš„ç›®çš„ä¸æ˜¯å°†æ‰€æœ‰äººå¬é›†åˆ°ä¸€èµ·ï¼Œè€Œæ˜¯å–å¾—ç»“æœï¼Œæ‰€ä»¥åªéœ€è¦å¬é›†å¯¹å–å¾—ç»“æœæœ‰å¸®åŠ©çš„æˆå‘˜å³å¯</p>
</li>
<li><p>é‚®ä»¶æ˜¯â€œç­‰å¾…æ–‡åŒ–â€ï¼Œå³æ—¶é€šä¿¡æ˜¯â€œå®æ—¶æ–‡åŒ–â€</p>
</li>
<li><p>å·¥ç¨‹é¡¹ç›®çš„å†²åˆºé˜¶æ®µä¸€èˆ¬éƒ½ä¼šé‡‡ç”¨â€œè§„å®šæœŸé™ï¼Œé›†ä¸­ç²¾ç¥â€çš„å·¥ä½œæ–¹æ³•</p>
</li>
<li><p>æ˜ç¡®å·¥ä½œçš„ä¼˜å…ˆé¡ºåºå’Œå“è´¨è¦æ±‚æ˜¯ä¸“ä¸šäººå£«çš„åŸºæœ¬ç´ å…»</p>
</li>
<li><p>å·¥ä½œçš„ç›®çš„å¹¶ä¸æ˜¯â€œä»æ—©9ç‚¹åˆ°æ™š6ç‚¹ååœ¨åŒä¸€ä¸ªåœ°æ–¹â€œï¼Œè€Œæ˜¯å–å¾—ä»¤äººæ»¡æ„çš„æˆæœï¼ˆèˆ’é€‚çš„å·¥ä½œç¯å¢ƒè‡³å…³é‡è¦ï¼‰</p>
</li>
<li><p>æ²¡æœ‰ç»“è®ºçš„åˆ†ææ¯«æ— æ„ä¹‰</p>
</li>
<li><p>åˆ›æ„æ€ç»´éœ€è¦çš„æ˜¯çµæ„Ÿä»¥åŠä¸°å¯Œç»éªŒçš„ç›´è§‰</p>
</li>
<li><p>åªæœ‰æ•¢äºèµ°å‡ºèˆ’é€‚åŒºæ‰èƒ½å–å¾—æ›´å¤§çš„æˆæœ</p>
</li>
<li><p>å…¬å¸ä¹‹æ‰€ä»¥ç»™ä½ é«˜é¢è–ªæ°´ï¼Œæ˜¯å› ä¸ºä½ èƒ½åšåˆ°åˆ«äººæ— æ³•åšåˆ°çš„å›°éš¾å·¥ä½œ</p>
</li>
<li><p>äº¤æµæœ€å¤§çš„ç›®çš„æ˜¯æ„ç­‘ä¿¡èµ–å…³ç³» </p>
</li>
<li><p>å½“äººæ„Ÿè§‰åˆ°è‡ªå·±å—åˆ°äº†å°Šé‡æˆ–è€…åˆ«äººå¾ˆé‡è§†æˆ‘çš„æ—¶å€™ï¼Œå°±ä¼šå°†è‡ªå·±çš„å†…å¿ƒä»é˜²å¤‡ä¸­è§£æ”¾å‡ºæ¥</p>
</li>
<li><p>åœ¨å¥½å¥‡å¿ƒé©±ä½¿ä¸‹ä¸æ–­çš„è¿½æ±‚è‡ªå·±æ„Ÿå…´è¶£çš„ä¸œè¥¿ï¼Œè¿™å°†æˆä¸ºä½ èŒåœºä¸­çš„é€šè¡Œè¯</p>
</li>
<li><p>åº”è¯¥å­¦ä¹ çš„ä¸æ˜¯çŸ¥è¯†è€Œæ˜¯ç»éªŒ</p>
</li>
<li><p>äººçš„æˆé•¿å°±åƒæ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œæ˜¨å¤©çš„è‡ªå·±åŠ ä¸Šå‰å¤©çš„è‡ªå·±æ‰æ˜¯ä»Šå¤©çš„è‡ªå·±</p>
</li>
<li><p>å¤šæ¬¡å®è·µä¸ä½†æœ‰åŠ©äºæé«˜è‡ªä¿¡ï¼Œæ›´èƒ½åŠ å¿«æŒæ¡é€Ÿåº¦</p>
</li>
<li><p>æ‹¥æœ‰çš„â€œé€‰é¡¹â€è¶Šå¤šï¼Œåœ¨ç«äº‰ä¸­ç”Ÿå­˜çš„å¯èƒ½æ€§å°±è¶Šå¤§</p>
</li>
<li><p>ç©¶ç«Ÿæ˜¯é€‰æ‹©ç«™åœ¨é©æ–°çš„ä¸€ä¾§è¿˜æ˜¯é€‰æ‹©è¢–æ‰‹æ—è§‚ï¼Œä¸åŒçš„é€‰æ‹©å¸¦æ¥çš„ç»“æœå¯è°“æ˜¯å¤©å£¤ä¹‹åˆ« </p>
</li>
<li><p>æ‰¾åˆ°åœ¨å·¨å˜æ´ªæµä¸­å‘æŒ¥è‡ªå·±èƒ½åŠ›å¹¶ä¸”èµšå–åˆ©æ¶¦çš„æ–¹æ³•</p>
</li>
</ol>
]]></content>
      <categories>
        <category>Reading</category>
      </categories>
      <tags>
        <tag>è¯»ä¹¦ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>Opus Oggè¯¦è§£</title>
    <url>/2023/01/04/Audio/Audio-opus/</url>
    <content><![CDATA[<h1 id="opusæ˜¯ä»€ä¹ˆ"><a href="#opusæ˜¯ä»€ä¹ˆ" class="headerlink" title="opusæ˜¯ä»€ä¹ˆ"></a>opusæ˜¯ä»€ä¹ˆ</h1><blockquote>
<p>ä»¥ä¸‹å†…å®¹å–è‡ªopuså®˜ç½‘ï¼š<a href="https://www.opus-codec.org/">https://www.opus-codec.org</a></p>
</blockquote>
<h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>Opus æ˜¯ä¸€ç§å®Œå…¨å¼€æ”¾ã€å…ç‰ˆç¨ã€ç”¨é€”å¹¿æ³›çš„éŸ³é¢‘ç¼–è§£ç å™¨ã€‚ Opus åœ¨ Internet ä¸Šçš„äº¤äº’å¼è¯­éŸ³å’ŒéŸ³ä¹ä¼ è¾“æ–¹é¢æ— ä¸ä¼¦æ¯”ï¼Œä½†ä¹Ÿé€‚ç”¨äºå­˜å‚¨å’Œæµåª’ä½“åº”ç”¨ã€‚å®ƒè¢«äº’è”ç½‘å·¥ç¨‹ä»»åŠ¡ç»„ (IETF) æ ‡å‡†åŒ–ä¸º RFC 6716ï¼Œå®ƒç»“åˆäº† Skype çš„ SILK ç¼–è§£ç å™¨å’Œ Xiph.Org çš„ CELT ç¼–è§£ç å™¨çš„æŠ€æœ¯ã€‚</p>
<h2 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h2><p>Opus å¯ä»¥å¤„ç†èŒƒå›´å¹¿æ³›çš„éŸ³é¢‘åº”ç”¨ï¼ŒåŒ…æ‹¬ IP è¯­éŸ³ã€è§†é¢‘ä¼šè®®ã€æ¸¸æˆå†…èŠå¤©ï¼Œç”šè‡³è¿œç¨‹ç°åœºéŸ³ä¹è¡¨æ¼”ã€‚å®ƒå¯ä»¥ä»ä½æ¯”ç‰¹ç‡çª„å¸¦è¯­éŸ³æ‰©å±•åˆ°éå¸¸é«˜è´¨é‡çš„ç«‹ä½“å£°éŸ³ä¹ã€‚æ”¯æŒçš„åŠŸèƒ½æœ‰ï¼š</p>
<ul>
<li>æ¯”ç‰¹ç‡ä» 6 kb/s åˆ° 510 kb/s</li>
<li>é‡‡æ ·ç‡ä» 8 kHzï¼ˆçª„å¸¦ï¼‰åˆ° 48 kHzï¼ˆå…¨å¸¦ï¼‰</li>
<li>å¸§å¤§å°ä» 2.5 ms åˆ° 60 ms</li>
<li>æ”¯æŒæ’å®šæ¯”ç‰¹ç‡ (CBR) å’Œå¯å˜æ¯”ç‰¹ç‡ (VBR)</li>
<li>ä»çª„å¸¦åˆ°å…¨å¸¦çš„éŸ³é¢‘å¸¦å®½</li>
<li>æ”¯æŒè¯­éŸ³å’ŒéŸ³ä¹</li>
<li>æ”¯æŒå•å£°é“å’Œç«‹ä½“å£°</li>
<li>æ”¯æŒå¤šè¾¾ 255 ä¸ªé€šé“ï¼ˆå¤šæµå¸§ï¼‰</li>
<li>åŠ¨æ€å¯è°ƒæ¯”ç‰¹ç‡ã€éŸ³é¢‘å¸¦å®½å’Œå¸§å¤§å°</li>
<li>è‰¯å¥½çš„ä¸¢åŒ…é²æ£’æ€§å’Œä¸¢åŒ…éšè— (PLC)</li>
<li>æµ®ç‚¹å’Œå®šç‚¹å®ç°</li>
</ul>
<h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul>
<li><p>éŸ³é¢‘å¸¦å®½ã€‚Opusç¼–ç å™¨è¦†ç›–äº†ä½é¢‘æ®µåˆ°é«˜é¢‘æ®µçš„å…¨å¸¦éŸ³é¢‘</p>
</li>
<li><p>ä½å»¶è¿Ÿã€‚å»¶è¿Ÿä¾èµ–äºå¸§è§„æ ¼ï¼ŒOpusæœ€ä½å¸§è§„æ ¼2.5msï¼Œéå¸¸é€‚åˆå®æ—¶éŸ³è§†é¢‘åœºæ™¯</p>
</li>
</ul>
<h1 id="opusåº“"><a href="#opusåº“" class="headerlink" title="opusåº“"></a>opusåº“</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><blockquote>
<p>ç¼–è§£ç å™¨libopus: <a href="https://www.opus-codec.org/docs/opus_api-1.2/index.html">https://www.opus-codec.org/docs/opus_api-1.2/index.html</a></p>
<p>å°è£…å™¨opusfileï¼š<a href="https://www.opus-codec.org/docs/opusfile_api-0.7/index.html">https://www.opus-codec.org/docs/opusfile_api-0.7/index.html</a></p>
</blockquote>
<p>opusåº“åŒ…æ‹¬ä¸‰éƒ¨åˆ†ï¼šlibopusã€opus-toolsã€opusfile</p>
<ul>
<li>libopusï¼šopusç¼–è§£ç çš„æºç å’Œå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆæ³¨æ„ï¼šè¿™é‡Œç¼–ç å‡ºæ¥çš„opusæ–‡ä»¶æ˜¯æ’­æ”¾ä¸äº†çš„ï¼Œå¹¶ä¸”è§£ç ä¹Ÿå¿…é¡»ç”¨é‚£ç§æ’­æ”¾ä¸äº†çš„opusæ–‡ä»¶,åé¢è§£é‡Šä¸ºä»€ä¹ˆï¼‰</li>
<li>opus-toolsï¼šå·¥å…·åŒ…ï¼Œå…¶ä¸­åŒ…å«äº†liboggï¼ˆ.wav2.opus  /  .opus2.wavï¼‰</li>
<li>opusfileï¼šå°†å¯æ’­æ”¾çš„opusæ–‡ä»¶è§£ç æˆwavçš„å·¥å…·ï¼Œå¯åˆ†æå‡ºè¿™ä¸ªå¯æ’­æ”¾çš„opusæ–‡ä»¶çš„ä¿¡æ¯ï¼Œå…¶ä¸­åŒ…å«äº†libogg</li>
</ul>
<h2 id="å¯æ’­æ”¾opusä¸ä¸å¯æ’­æ”¾opusæ–‡ä»¶"><a href="#å¯æ’­æ”¾opusä¸ä¸å¯æ’­æ”¾opusæ–‡ä»¶" class="headerlink" title="å¯æ’­æ”¾opusä¸ä¸å¯æ’­æ”¾opusæ–‡ä»¶"></a>å¯æ’­æ”¾opusä¸ä¸å¯æ’­æ”¾opusæ–‡ä»¶</h2><p>oggæ–‡ä»¶é‡Œé¢åŒ…å«äº†opusç¼–ç çš„éŸ³é¢‘ï¼Œç›¸å½“äºMP4æ–‡ä»¶ä¸­åŒ…å«äº†aac</p>
<ul>
<li>ä¸å¯æ’­æ”¾opusï¼šåªæœ‰ç¼–ç å±‚opusæ•°æ®çš„éŸ³é¢‘ï¼ˆæ²¡æœ‰oggçš„å°è£…åªç»è¿‡libopusç¼–ç ï¼‰ï¼Œåç¼€åæ˜¯.opus</li>
<li>å¯æ’­æ”¾çš„opusï¼šopusç¼–ç çš„éŸ³é¢‘å¤–éƒ¨å¥—ç”¨äº†ä¸€å±‚oggçš„å°è£…ï¼ˆç»è¿‡oggçš„å°è£…ï¼Œopus-toolsç¼–ç çš„æ–‡ä»¶ï¼‰ï¼Œåç¼€åå¯ä»¥æ˜¯.opusä¹Ÿå¯ä»¥æ˜¯.ogg</li>
</ul>
<h1 id="opusç»“æ„"><a href="#opusç»“æ„" class="headerlink" title="opusç»“æ„"></a>opusç»“æ„</h1><p>æ¯ä¸ª Opus åŒ…ä»¥ä¸€ä¸ª TOC ï¼ˆTable of Contentsï¼‰å­—èŠ‚å¼€å¤´</p>
<table>
<thead>
<tr>
<th>é…ç½®æ•°ï¼ˆconfigï¼‰</th>
<th>ç¼–ç æ¨¡å¼</th>
<th>éŸ³é¢‘å¸¦å®½</th>
<th>å¸§é•¿åº¦</th>
</tr>
</thead>
<tbody><tr>
<td>0â€¦3</td>
<td>SILK-only</td>
<td>NB</td>
<td>10, 20, 40, 60 ms</td>
</tr>
<tr>
<td>4â€¦7</td>
<td>SILK-only</td>
<td>MB</td>
<td>10, 20, 40, 60 ms</td>
</tr>
<tr>
<td>8â€¦11</td>
<td>SILK-only</td>
<td>WB</td>
<td>10, 20, 40, 60 ms</td>
</tr>
<tr>
<td>12â€¦13</td>
<td>Hybrid</td>
<td>SWB</td>
<td>10, 20 ms</td>
</tr>
<tr>
<td>14â€¦15</td>
<td>Hybrid</td>
<td>FB</td>
<td>10, 20 ms</td>
</tr>
<tr>
<td>16â€¦19</td>
<td>CELT-only</td>
<td>NB</td>
<td>2.5, 5, 10, 20 ms</td>
</tr>
<tr>
<td>20â€¦23</td>
<td>CELT-only</td>
<td>WB</td>
<td>2.5, 5, 10, 20 ms</td>
</tr>
<tr>
<td>24â€¦27</td>
<td>CELT-only</td>
<td>SWB</td>
<td>2.5, 5, 10, 20 ms</td>
</tr>
<tr>
<td>28â€¦31</td>
<td>CELT-only</td>
<td>FB</td>
<td>2.5, 5, 10, 20 ms</td>
</tr>
</tbody></table>
<p>ç«‹ä½“å£°æ ‡å¿—ä½ï¼ˆsï¼‰å–å€¼ 0 è¡¨ç¤ºå•å£°é“ï¼Œ1 è¡¨ç¤ºå¤šå£°é“ç«‹ä½“å£°ã€‚</p>
<p>TOC ä¸­æœ€åä¸¤ä½ï¼ˆcï¼‰è¡¨ç¤ºï¼š</p>
<ul>
<li>0ï¼šä¸€ä¸ªåŒ…ä¸­åªæœ‰ä¸€å¸§éŸ³é¢‘ã€‚</li>
<li>1ï¼šä¸€ä¸ªåŒ…ä¸­æœ‰ä¸¤å¸§éŸ³é¢‘ï¼Œå¹¶ä¸”å¤§å°ç›¸åŒã€‚</li>
<li>2ï¼šä¸€ä¸ªåŒ…ä¸­æœ‰ä¸¤å¸§éŸ³é¢‘ï¼Œä½†æ˜¯å¤§å°ä¸åŒã€‚</li>
</ul>
<h1 id="opusfile-API"><a href="#opusfile-API" class="headerlink" title="opusfile API"></a>opusfile API</h1><blockquote>
<p>opusfileé«˜çº§APIå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://opus-codec.org/docs/opusfile_api-0.12/">https://opus-codec.org/docs/opusfile_api-0.12/</a></p>
<p>å‚è€ƒæ–‡æ¡£ï¼š</p>
<p>â€‹	<a href="https://juejin.cn/post/6844903998831460360">https://juejin.cn/post/6844903998831460360</a></p>
<p>â€‹	<a href="https://chenliang.org/2020/04/17/ogg-encapsulation-for-opus/">https://chenliang.org/2020/04/17/ogg-encapsulation-for-opus/</a></p>
</blockquote>
<ol>
<li><p><strong>op_open_file() / op_free()</strong></p>
<p>æ‰“å¼€/å…³é—­ä¸€ä¸ªè§£ç å™¨</p>
</li>
<li><p><strong>op_head() / op_tags()</strong></p>
</li>
</ol>
<ul>
<li><p>op_headå‡½æ•°å¯ç”¨äºè·å–channelsã€samplerateç­‰å‚æ•°</p>
</li>
<li><p>op_tagså‡½æ•°å¯è·å¾—ç”¨æˆ·è‡ªå®šä¹‰å‚æ•°ï¼Œä¾‹å¦‚ï¼šæ ‡é¢˜ã€æ­Œæ‰‹ã€ç¼–ç æ–¹å¼æ ‡å‡†ç­‰ç­‰ï¼Œå…¶ä¸­tags-&gt;user_comments[i]å¯è·å–ç”¨æˆ·è‡ªå®šä¹‰çš„ä¿¡æ¯</p>
</li>
</ul>
<ol start="3">
<li><strong>op_pcm_total() / op_pcm_tell() / op_pcm_seek()</strong></li>
</ol>
<ul>
<li>op_pcm_total å¯ä»¥è¿”å›è¯¥opusæ–‡ä»¶è½¬æ¢æˆpcmæ–‡ä»¶åçš„æ€»çš„pcmé•¿åº¦</li>
<li>op_pcm_tell å¯ä»¥æ”¾å›ç›®å‰æ–‡ä»¶å·²ç»æ’­æ”¾çš„pcmçš„é•¿åº¦</li>
<li>op_pcm_seek å¯ä»¥é€šè¿‡å‚æ•°æŒ‡å®šè®©éŸ³é¢‘è¿›è¡Œè·³è½¬æ’­æ”¾</li>
</ul>
<ol start="4">
<li><strong>op_pcm_read()</strong></li>
</ol>
<p>   ä»op_open_fileæ‰“å¼€çš„æ–‡ä»¶æµä¸­è¯»å–pcmæ•°æ®è¿›è¡Œæ’­æ”¾ã€‚æ³¨æ„è§£ç çš„æ•°é‡å¹¶ä¸ç­‰äºä¼ å…¥bufferçš„å¤§å°ï¼Œéœ€è¦ä½¿ç”¨åˆ°è¯¥å‡½æ•°çš„è¿”å›å€¼</p>
<h1 id="Ogg"><a href="#Ogg" class="headerlink" title="Ogg"></a>Ogg</h1><blockquote>
<p> å‚è€ƒ : <a href="https://juejin.cn/post/6844904016254599175">https://juejin.cn/post/6844904016254599175</a></p>
</blockquote>
<p>å…¨ç§°ï¼šOGGVobis(oggVorbis) ä¸€ä¸ªè‡ªç”±ä¸”å¼€æ”¾æ ‡å‡†çš„å®¹å™¨æ ¼å¼ï¼Œâ€œ.oggâ€ç»“å°¾å‘½å</p>
<p>OGGæ˜¯ä»¥é¡µï¼ˆpageï¼‰ä¸ºå•ä½å°†é€»è¾‘æµç»„ç»‡é“¾æ¥èµ·æ¥ï¼Œæ¯ä¸ªé¡µéƒ½æœ‰pageheaderå’Œpagedataã€‚</p>
<ol>
<li>capture_patterné¡µæ ‡è¯†ï¼šASCIIå­—ç¬¦ï¼Œ0x4f â€˜Oâ€™ 0x67 â€˜gâ€™ 0x67 â€˜gâ€™ 0x53 â€˜Sâ€™ï¼Œ4ä¸ªå­—èŠ‚å¤§å°ï¼Œå®ƒæ ‡è¯†ç€ä¸€ä¸ªé¡µçš„å¼€å§‹ã€‚</li>
<li>stream_structure_versionç‰ˆæœ¬idï¼šä¸€èˆ¬å½“å‰ç‰ˆæœ¬é»˜è®¤ä¸º0ï¼Œ1ä¸ªå­—èŠ‚ã€‚</li>
<li>header_type_flagç±»å‹æ ‡è¯†ï¼šæ ‡è¯†å½“å‰çš„é¡µçš„ç±»å‹ï¼Œ1ä¸ªå­—èŠ‚ï¼Œ - 0x01ï¼šæœ¬é¡µåª’ä½“ç¼–ç æ•°æ®ä¸å‰ä¸€é¡µå±äºåŒä¸€ä¸ªé€»è¾‘æµçš„åŒä¸€ä¸ªpacketï¼Œè‹¥æ­¤ä½æ²¡æœ‰è®¾ï¼Œè¡¨ç¤ºæœ¬é¡µæ˜¯ä»¥ä¸€ä¸ªæ–°çš„packetå¼€å§‹çš„ï¼› - 0x02ï¼šè¡¨ç¤ºè¯¥é¡µä¸ºé€»è¾‘æµçš„ç¬¬ä¸€é¡µï¼Œbosæ ‡è¯†ï¼Œå¦‚æœæ­¤ä½æœªè®¾ç½®ï¼Œé‚£è¡¨ç¤ºä¸æ˜¯ç¬¬ä¸€é¡µï¼› - 0x04ï¼šè¡¨ç¤ºè¯¥é¡µä½é€»è¾‘æµçš„æœ€åä¸€é¡µï¼Œeosæ ‡è¯†ï¼Œå¦‚æœæ­¤ä½æœªè®¾ç½®ï¼Œé‚£è¡¨ç¤ºæœ¬é¡µä¸æ˜¯æœ€åä¸€é¡µã€‚</li>
<li>granule_positionï¼šåª’ä½“ç¼–ç ç›¸å…³çš„å‚æ•°ä¿¡æ¯ï¼Œ8ä¸ªå­—èŠ‚ï¼Œå¯¹äºéŸ³é¢‘æµæ¥è¯´ï¼Œå®ƒå­˜å‚¨ç€åˆ°æœ¬é¡µä¸ºæ­¢é€»è¾‘æµåœ¨PCMè¾“å‡ºä¸­é‡‡æ ·ç çš„æ•°ç›®ï¼Œå¯ä»¥ç”±å®ƒæ¥ç®—å¾—æ—¶é—´æˆ³ã€‚å¯¹äºè§†é¢‘æµæ¥è¯´ï¼Œå®ƒå­˜å‚¨ç€åˆ°æœ¬é¡µä¸ºæ­¢è§†é¢‘å¸§ç¼–ç çš„æ•°ç›®ã€‚è‹¥æ­¤å€¼ä¸º-1ï¼Œé‚£è¡¨ç¤ºæˆªæ­¢åˆ°æœ¬é¡µï¼Œé€»è¾‘æµçš„packetæœªç»“æŸã€‚(å°ç«¯)</li>
<li>serial_numberï¼šå½“å‰é¡µä¸­çš„æµçš„idï¼Œ4ä¸ªå­—èŠ‚ï¼Œå®ƒæ˜¯åŒºåˆ†æœ¬é¡µæ‰€å±é€»è¾‘æµä¸å…¶ä»–é€»è¾‘æµçš„åºå·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªå€¼æ¥åˆ’åˆ†æµã€‚(å°ç«¯)</li>
<li>page_seguence_numberï¼šæœ¬é¡µåœ¨é€»è¾‘æµçš„åºå·ï¼Œ4ä¸ªå­—èŠ‚ã€‚</li>
<li>CRC_cbecksumï¼šå¾ªç¯å†—ä½™æ•ˆéªŒç æ•ˆéªŒï¼Œ4ä¸ªå­—èŠ‚ï¼Œç”¨æ¥æ•ˆéªŒæ¯é¡µçš„æœ‰æ•ˆæ€§ã€‚</li>
<li>number_page_segmentsï¼šç»™å®šæœ¬é¡µåœ¨segment_tableåŸŸä¸­å‡ºç°çš„segementä¸ªæ•°ï¼Œ1ä¸ªå­—èŠ‚ã€‚</li>
<li>segment_tableï¼šä»å­—é¢çœ‹å®ƒå°±æ˜¯ä¸€ä¸ªè¡¨ï¼Œè¡¨ç¤ºç€æ¯ä¸ªsegmentçš„é•¿åº¦ï¼Œå–å€¼èŒƒå›´æ˜¯0~255ã€‚ç”±segmentï¼ˆ1ä¸ªsegmentå°±æ˜¯1ä¸ªå­—èŠ‚ï¼‰å¯ä»¥å¾—åˆ°packetçš„å€¼ï¼Œæ¯ä¸ªpacketçš„å¤§å°æ˜¯ä»¥æœ€åä¸€ä¸ªä¸ç­‰äº255çš„segmentç»“æŸçš„ï¼Œä»é¡µå¤´ä¸­çš„segment_tableå¯ä»¥å¾—åˆ°æ¯ä¸ªpacketé•¿åº¦ï¼Œä¸¾ä¾‹ï¼šå¦‚æœä¸€ç»„segmentä¾æ¬¡é¡ºåºä¸ºFF 45 FF FF FF 40FF 05FF FF FF 66ï¼ˆå…±4ä¸ªpacketï¼Œå«12ä¸ªsegmentï¼Œæ¯ä¸ªpacketçš„é•¿åº¦æ˜¯ï¼šFF 45ã€324ã€‘ï¼›FF FF FF 40ã€829ã€‘ï¼›FF 05ã€260ã€‘ï¼›FF FF FF 66ã€847ã€‘ï¼‰ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªpacketçš„é•¿åº¦ä¸º255+69 = 324,ç¬¬äºŒä¸ªpacketå¤§å°829ï¼ŒåŒç†ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>Linux</category>
        <category>Audio</category>
      </categories>
      <tags>
        <tag>opus</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Šäººç±»ç¾¤æ˜Ÿé—ªè€€æ—¶ã€‹</title>
    <url>/2023/03/18/Reading/%E4%BA%BA%E7%B1%BB%E7%BE%A4%E6%98%9F%E9%97%AA%E8%80%80%E6%97%B6/</url>
    <content><![CDATA[<p><img src="/images/reading/RenLeiQunXing.jpg" alt="img"></p>
<h1 id="å¯¼è¯­"><a href="#å¯¼è¯­" class="headerlink" title="å¯¼è¯­"></a>å¯¼è¯­</h1><p>å’Œè¿™æœ¬ä¹¦çš„æ¸Šæºåº”è¯¥è¿˜æ˜¯åœ¨é€šå‹¤è·¯ä¸Šä½¿ç”¨å¾—åˆ°APPå¬åˆ°çš„å¯¹è¯¥ä¹¦çš„è§£è¯»ã€‚è´¾è¡Œå®¶è€å¸ˆçš„è§£è¯»é£æ ¼ä¸€ç›´æ˜¯æˆ‘æ‰€å–œæ¬¢çš„ï¼Œé€šè¿‡ä»–çš„è¯­è¨€æˆ‘å¤§è‡´äº†è§£åˆ°è¿™æœ¬ä¹¦è®²è¿°çš„æ˜¯14ä¸ªå†å²çš„å†³å®šæ€§ç¬é—´ï¼Œå½“ç„¶ä¸€å®šæ˜¯é’ˆå¯¹ä¸–ç•Œçš„ï¼Œè€Œå…¶å®ä½œè€…é»˜è®¤å°†è¥¿æ–¹ä¸–ç•Œç­‰åŒäºä¸–ç•Œã€‚æˆ‘è‡ªå·±å…¶å®å¯¹äºè¥¿æ–¹å†å²çš„äº†è§£ç¨‹åº¦ä¸€ç›´åœç•™åœ¨åˆä¸­å†å²ä¹¦çš„å±‚é¢ã€‚å½“å¬åˆ°è¿™åå››ä¸ªå†å²çš„å†³å®šæ€§ç¬é—´åŒ…å«äº†æ»‘é“å¢æˆ˜å½¹ã€é©¬èµ›æ›²ã€æ‹œå åº­å¸å›½ç­‰ç­‰ç›¸å…³å†…å®¹ï¼Œæˆ‘ä¸€ä¸‹å­ä¾¿æèµ·äº†å…´è¶£ï¼Œè¿™äº›è€³ç†Ÿèƒ½è¯¦çš„æ•…äº‹åé¢ç©¶ç«Ÿæœ‰ä»€ä¹ˆæ•…äº‹ï¼Œå¸¦ç€å¥½å¥‡å¼€å§‹äº†è¿™æœ¬ä¹¦çš„é˜…è¯»ã€‚</p>
<p>å°æ³¨ï¼šç”±äºè¿™æœ¬ä¹¦çš„ä¸­æ–‡è¯‘æœ¬é«˜è¾¾å‡ åç§ï¼Œæˆ‘åœ¨ä¹°ä¹¦çš„æ—¶å€™ä¹Ÿæ²¡æœ‰çœ‹å¥½ï¼Œä¹°çš„ä¹¦åªåŒ…å«åä¸ªç¬é—´ã€‚å…¶å®ƒç¼ºå¤±çš„åº”è¯¥åŒ…å«ï¼šåˆ—å¤«æ‰˜å°”æ–¯æ³°ã€è²å°”å¾·ï¼ˆå»ºç«‹ç¬¬ä¸€æ¡è·¨æ´‹ç”µç¼†ï¼‰ã€å¨å°”é€Šï¼ˆç¾å›½ç¬¬äºŒåå…«ä»»æ€»ç»Ÿï¼‰ã€å·´å¡ç½—ã€‚æœ‰æœºä¼šçš„è¯è¿™å‡ ä¸ªä¹Ÿè¦è¡¥å›æ¥ã€‚</p>
<h1 id="å…³äºä½œè€…"><a href="#å…³äºä½œè€…" class="headerlink" title="å…³äºä½œè€…"></a>å…³äºä½œè€…</h1><p>è¿™æœ¬ä¹¦çš„ä½œè€…æ˜¯æ–¯è’‚èŠ¬Â·èŒ¨å¨æ ¼ï¼Œè¢«èª‰ä¸ºâ€å†å²ä¸Šæœ€å¥½çš„ä¼ è®°ä½œå®¶â€œã€‚èŒ¨å¨æ ¼1881å¹´å‡ºç”Ÿåœ¨å¥¥åœ°åˆ©çŠ¹å¤ªçš„å¯Œå•†å®¶åº­ï¼Œè¿™ä¸ªæ—¶é—´å’Œèº«ä»½æ³¨å®šä»–çš„å‘½è¿ä¸å¹³å‡¡ã€‚äºŒæˆ˜æ—¶æœŸï¼ŒèŒ¨å¨æ ¼å› ä¸ºåæˆ˜çº³ç²¹è¢«é©±é€ï¼Œéšåæµäº¡è‹±å›½ã€ç¾å›½ã€å·´è¥¿ï¼Œä»–çš„ä»£è¡¨ä½œåŒ…æ‹¬&lt;&lt;è±¡æ£‹çš„æ•…äº‹&gt;&gt;ã€ã€Šæ˜¨æ—¥çš„ä¸–ç•Œã€‹ã€ã€Šä¸‰å¤§å¸ˆä¼ ã€‹ç­‰ç­‰</p>
<h1 id="ä¹¦è¯„"><a href="#ä¹¦è¯„" class="headerlink" title="ä¹¦è¯„"></a>ä¹¦è¯„</h1><p>èƒ½å¤Ÿè¯»å®Œæ•´æœ¬ä¹¦å°±å·²ç»è¯´æ˜è¶³å¤Ÿå¸å¼•äººäº†ã€‚æ•´ä½“ä¸Šè¿™æœ¬ä¹¦çš„è·¨åº¦å¾ˆå¤§ï¼ŒåŒ…æ‹¬æ—¶é—´è·¨åº¦ã€äººç‰©ç±»å‹è·¨åº¦ç­‰ç­‰ï¼Œæœ€è¿œçš„è®²åˆ°å…¬å…ƒå‰1å®é™…çš„å¤ç½—é©¬æ”¿æ²»å±æœºï¼ˆç©†ç½•é»˜å¾·äºŒä¸–ï¼‰ï¼Œè¿‘çš„å¯ä»¥åˆ°ä¸€æˆ˜åçš„å·´é»å’Œä¼šï¼ˆå¨å°”é€Šï¼‰ï¼›è€Œåœ¨ç±»å‹ä¸Šæœ‰å†å²ä¸Šä¼Ÿå¤§çš„æ”¿æ²»å®¶æ‹¿ç ´ä»‘ã€ä¼Ÿå¤§çš„éŸ³ä¹å®¶äº¨å¾·å°”ã€ç”šè‡³åŒ…æ‹¬æˆ‘ä»¬å¯èƒ½å®Œå…¨ä¸ç†Ÿæ‚‰çš„é©¬èµ›æ›²çš„ä½œè€…é²çƒ­â€¦â€¦</p>
<p>åœ¨è¯­è¨€é£æ ¼ä¸Šï¼Œç”¨è´¾è¡Œå®¶çš„è€å¸ˆè¯å¯ä»¥è¯´æ˜¯ï¼ŒèŒ¨å¨æ ¼é«˜è´µçš„æ°”è´¨ã€ä¼˜é›…çš„æ–‡é£å’Œç†æƒ³ä¸»ä¹‰çš„ç¬”è°ƒå°½æ˜¾æ— ç–‘ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿™æœ¬ä¹¦ç»™æˆ‘çš„å¦ä¸€ä¸ªæ„Ÿå—å°±æ˜¯ç»†èŠ‚åˆ»ç”»éå¸¸åˆ°ä½ï¼Œä½†æ˜¯å‘¢è¿™äº›ç»†èŠ‚æ›´åƒæ˜¯ä½œè€…æœ¬äººè®¾èº«å¤„åœ°çš„ç†è§£äººç‰©åœ¨æŸä¸ªæ—¶åˆ»æŸä¸ªåœºæ™¯ä¸‹çš„å¿ƒç†æ´»åŠ¨ã€‚è¿™å¯¹äºå†å²çºªå®å¯èƒ½å¹¶ä¸å‹å¥½ä½†æ˜¯æˆ‘è§‰å¾—å¯¹äºæˆ‘ä»¬è¯»è€…ç†è§£äººç‰©çš„å½¢è±¡å¯ä»¥è¯´éå¸¸åˆ°ä½äº†ï¼</p>
<p>ä¾‹å­ï¼š</p>
<ol>
<li>äººæ°‘ä¹Ÿè®¸æ°¸è¿œä¸ä¼šçŸ¥é“ï¼Œé‚£æ‰‡å› ä¸ºç–å¿½æ•å¼€çš„å‡¯å°”å¡é—¨åœ¨é‚£æ¬¡å‘½è¿æ”¸å…³çš„æ—¶åˆ»ï¼Œä¸ºäººç±»å¸¦æ¥äº†å¤šä¹ˆå¤§çš„ç¾éš¾</li>
<li>ä¹Ÿè®¸æ ¼é²å¸Œè‡ªå·±æ ¹æœ¬æ²¡æœ‰æƒ³åˆ°çš„æ˜¯åœ¨ä»–æ€è€ƒçš„è¿™ä¸€ç§’é’Ÿï¼Œå´å†³å®šäº†æ‹¿ç ´ä»‘å’Œä»–è‡ªå·±çš„å‘½è¿ï¼Œç”šè‡³ä¸–ç•Œå‘½è¿çš„ä¸€ç§’é’Ÿ</li>
<li>åˆ½å­æ‰‹é“¡åˆ€ä¸€é—ªï¼Œè¿™ä¸ªäººç±»ç¬¬ä¸€åŒåŒæ—¶è§è¿‡ä¸¤å¤§æµ·æ´‹çš„çœ¼ç›ï¼Œæ°¸è¿œç†„ç­äº†ç¥é‡‡ï¼ˆå·´å°”æ²ƒäºšï¼‰</li>
</ol>
<h1 id="è®°å¿†ç‚¹åŠæ„Ÿå—"><a href="#è®°å¿†ç‚¹åŠæ„Ÿå—" class="headerlink" title="è®°å¿†ç‚¹åŠæ„Ÿå—"></a>è®°å¿†ç‚¹åŠæ„Ÿå—</h1><p>æˆ‘åœ¨é˜…è¯»è¥¿æ–¹å†å²çš„æ—¶å€™çš„æˆ‘é¦–å…ˆå…³æ³¨çš„å˜é‡å°±æ˜¯æ—¶é—´èŠ‚ç‚¹ï¼Œåœ¨ä»€ä¹ˆæ—¶åˆ»å‘ç”Ÿäº†è¿™ä¸ªäº‹ä»¶ï¼Œè€Œæ¥ä¸‹æ¥æˆ‘è¦äº†è§£çš„å°±æ˜¯åœ¨è¿™ä¸ªæ—¶é—´èŠ‚ç‚¹ä¸Šæˆ‘ä»¬è‡ªå·±çš„è¿™ç‰‡åœŸåœ°å¤„äºå“ªä¸ªæœä»£å‘ç”Ÿç€ä»€ä¹ˆæ ·çš„æ•…äº‹ã€‚å¤ä»£çš„ä¸­å›½å„æ–¹é¢è¿˜æ˜¯å¤„äºå…ˆè¿›æ°´å¹³ï¼Œä½†æ˜¯åˆ°äº†æ˜æ¸…æ—¶æœŸå¾ˆæ˜æ˜¾çš„æ„Ÿå—åˆ°è¥¿æ–¹å„ç§ç§‘æŠ€ã€ç¿çƒ‚æ–‡åŒ–æ¶Œç°ï¼Œè€Œæˆ‘ä»¬è‡ªå·±çš„å›½å®¶å§‹ç»ˆåœ¨ä¸€ä¸ªå†…å¿§å¤–æ‚£çš„é˜¶æ®µï¼Œç§‘æŠ€æ–‡åŒ–çš„ç§¯ç´¯ä¹Ÿåœ¨è¿™ä¸ªæ—¶æœŸè½åäºä¸–ç•Œ</p>
<p>æˆ‘è‡ªå·±å¹¶å¯¹äºæ–‡å­¦æ²¡æœ‰å¯ä»¥è¯´æ²¡å•¥å¤©èµ‹å¯¹äºå°¼é‡‡å•Šã€å·´å°”æ²ƒäºšç­‰äººæ•…äº‹ä¹Ÿæ²¡æœ‰æèµ·å¾ˆå¤§çš„å…´è¶£ï¼Œç›¸åå¯¹äºæ‹¿ç ´ä»‘ã€é²çƒ­ç­‰äººè¿˜æ˜¯è›®æ„Ÿå…´è¶£çš„ã€‚å¯¹äºä¸æ˜ç™½æ»‘é“å¢æˆ˜å½¹å…¨è¿‡ç¨‹çš„äººæ¥è®²ï¼ˆä¹‹å‰çš„æˆ‘ï¼‰å¤§å¤šæ•°éƒ½ä¼šå½’å’äºæ‹¿ç ´ä»‘ï¼Œä½†æ˜¯ç©¶ç«Ÿå¦‚ä½•å¤±è´¥å“ªé‡Œå¤±è´¥å´è¯´ä¸å‡ºæ‰€ä»¥ç„¶ã€‚è¯»å®Œè¿™ä¸€éƒ¨åˆ†æˆ‘åå€’è§‰å¾—æ²¡æœ‰ä»»ä½•äººè¯¥æ‰¿æ‹…è¿™ä¸€è´£ä»»ï¼Œä½†æŒ‰ç…§ä¹¦ç±çš„ç†è®ºï¼Œç”±äºæ ¼é²å¸Œå°†å†›çš„ä¸ä¼šå˜é€šå¯¼è‡´äº†æ»‘é“å¢æˆ˜å½¹çš„æœ€ç»ˆèƒœåˆ©ã€‚å†å²æ˜¯ç”±èƒœåˆ©è€…æ¥ä¹¦å†™çš„ï¼Œå¤±è´¥è€…å´è¿ç‹¡è¾©çš„æœºä¼šéƒ½æ²¡æœ‰ã€‚æˆ‘ä»¬ç°åœ¨çŸ¥é“ç»“æœæ˜¯è¿™ä¸ªæ ·å­ï¼Œå‡è®¾å½“æ—¶æˆ˜äº‰çš„ç»†èŠ‚æ˜¯å¦å¤–ä¸€ç§æ ·å­è€Œæ ¼é²å¸Œå°†å†›é€‰æ‹©é©°æ´æ»‘é“å¢æˆ‘ä»¬å¯èƒ½åˆä¼šè®¤ä¸ºæ˜¯ä»–çš„ä¸»åŠ¨æ€§å¤ªå¼ºå¯¼è‡´äº†æœ€ç»ˆçš„å¤±è´¥ã€‚æ‰€ä»¥ç»ˆç©¶è¿˜æ˜¯æˆ˜äº‰çš„æ®‹é…·æ€§å’Œä¸ç¡®å®šæ€§å¯¼è‡´äº†æœ€ç»ˆçš„ç»“æœã€‚å°½äººäº‹å¬å¤©å‘½ï¼Œå¤§æ¦‚è¯´çš„å°±æ˜¯è¿™ä¸ªå«ä¹‰å§ï¼ŒæŠŠæ¡æˆ‘ä»¬æ‰€èƒ½æŠŠæ¡çš„ï¼Œå‰©ä¸‹çš„å°±çœ‹å¤©æ„ã€‚</p>
<h1 id="ä¹¦æ‘˜"><a href="#ä¹¦æ‘˜" class="headerlink" title="ä¹¦æ‘˜"></a>ä¹¦æ‘˜</h1><p>ç©†ç½•é»˜å¾·äºŒä¸–â€”-æ‹œå åº­çš„æ²¦é™·</p>
<ul>
<li>å†å²ä¸Šæ‰€æœ‰ä»¥ç†æ™ºæ¢æ¥çš„å’Œå¹³éƒ½æ˜¯è½¬ç¬å³é€çš„</li>
<li>å‡ºå¥‡åˆ¶èƒœå¾€å¾€æ˜¯æ‰€æœ‰ä¼Ÿå¤§å†›äº‹è¡ŒåŠ¨ä¸­å–å¾—èƒœåˆ©çš„å…³é”®</li>
<li>äººä¸–é—´ç©ºå‰å›¢ç»“çš„åœºé¢æ€»æ˜¯åœ¨æœ€å±æ€¥çš„å…³å¤´æ‰ä¼šå‡ºç°</li>
<li>äººç±»çš„å†å²å’Œä¸€ä¸ªäººçš„ä¸€ç”Ÿæ˜¯ä¸€æ ·çš„ï¼Œä¸€å¤±è¶³æˆåƒå¤æ¨</li>
</ul>
<p>å·´å°”æ²ƒäºšâ€”-åœ¨ä¸æœ½çš„äº‹ä¸šé‡Œå¯»æ±‚ä¿æŠ¤</p>
<ul>
<li>èƒ½å¤Ÿåœ¨ç”Ÿå‘½çš„ä¸­é€”ï¼Œä¹Ÿå°±æ˜¯å¹´è½»åŠ›å£®çš„æ—¶å€™æ‰¾åˆ°è‡ªå·±è‚©è´Ÿçš„ä½¿å‘½ï¼Œè¿™çœŸçš„æ˜¯äººç”Ÿæœ€ç¾å¥½çš„äº‹æƒ…</li>
</ul>
<p>é²çƒ­â€”-ä¸€ä¸ªæµæ˜Ÿèˆ¬çš„å¤©æ‰</p>
<ul>
<li>åœ¨è¿™ä¸ªä¸–ç•Œä¸Šï¼Œä»æ¥å°±ä¸ä¼šæœ‰å“ªä¸€éƒ¨è•´å«å¼ºå¤§èƒ½é‡çš„ä½œå“è¢«åŸ‹æ²¡æˆ–è€…é•¿ä¹…çš„è¢«å°å­˜ï¼Œä¹Ÿä¸ä¼šæœ‰å“ªä¸€ä»¶ä¼˜ç§€çš„è‰ºæœ¯å“éšç€æ—¶é—´çš„æµé€è€Œè¢«é—å¿˜ï¼Œè™½ç„¶æœ‰æš‚æ—¶è¢«ç¦é”¢æˆ–è€…åŸ‹æ²¡çš„å¯èƒ½ï¼Œä½†ç»ˆç©¶è¿˜æ˜¯ç”Ÿå‘½åŠ›çš„ï¼Œä»–ä¼šå†²ç ´æ‰€æœ‰é˜»ç¢ï¼Œè„±é¢–è€Œå‡º</li>
</ul>
<p>æ‹¿ç ´ä»‘â€”-å†³å®šå‘½è¿çš„ä¸€åˆ†é’Ÿ</p>
<ul>
<li>å‘½è¿åªæ„¿æ„æˆå°±é‚£äº›å‹‡æ•¢è€…ã€‚å½“é‡ä»»é™ä¸´åˆ°å¹³åº¸ä¹‹è¾ˆèº«ä¸Šæ—¶ï¼Œä»–ä»¬ä¸æ˜¯æ„Ÿåˆ°åº†å¹¸ï¼Œè€Œæ˜¯å®³æ€•ã€‚ä»–ä»¬æŠŠè¿™ä¸ªæˆä¸ºå‘½è¿ä¸»äººçš„æœºä¼šï¼Œå“†å“†å—¦å—¦åœ°å¤±æ‰äº†</li>
<li>å‘½è¿â€”â€”è¿™æŒç®¡ä¸–é—´ä¸–ç•Œçš„å¦ä¸€ä¸ªç¥ï¼Œä»–å¼ºæœ‰åŠ›çš„åŒè‡‚åªæ„¿é«˜é«˜ä¸¾èµ·å‹‡æ•¢è€…ï¼Œå°†ä»–ä»¬é€ä¸Šè‹±é›„çš„æ®¿å ‚</li>
</ul>
<p>å°¼é‡‡â€”-å‘å®‡å®™é«˜å³°èµ°å»</p>
<ul>
<li>æ— æ³•å°†æˆ‘ç½®ä¹‹æ­»åœ°çš„ï¼Œæ›´ä»¤æˆ‘åšå¼º</li>
</ul>
<p>æ–¯ç§‘ç‰¹â€”-äº‰å¤ºå—æä¹‹æˆ˜</p>
<ul>
<li>ç›¸è¾ƒäºä½œå“ä¸­çš„æ‚²å‰§ï¼Œç”Ÿæ´»æœ¬èº«åˆ›é€ å‡ºçš„æ‚²å‰§è¦å¤šä¸€åƒå€</li>
<li>æ‚²å£®çš„å¤±è´¥ä¾ç„¶å…‰è£ï¼Œè¿™æ ·çš„å¤±è´¥èƒ½å¤Ÿæ¿€èµ·äººä»¬ç»§ç»­æŒ‘æˆ˜é™©å¢ƒçš„å‹‡æ°”ï¼Œå› ä¸ºåªæœ‰é›„å¿ƒå£®å¿—æ‰èƒ½å°†æ»¡æ€€çš„æ¿€æƒ…ç‚¹ç‡ƒï¼Œå»å®Œæˆé‚£å†ç»åƒéš¾ä¸‡é™©æ‰èƒ½å®Œæˆçš„äº‹</li>
</ul>
]]></content>
      <categories>
        <category>Reading</category>
      </categories>
      <tags>
        <tag>è¯»ä¹¦ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>Audio-åˆè¯†</title>
    <url>/2022/08/31/Audio/Audio-meet/</url>
    <content><![CDATA[<p>è·³åŠ¨çš„éŸ³ç¬¦ï¼Œå©‰è½¬çš„èŠ‚å¥ï¼Œæ‚ æ‰¬çš„æ­Œå£°â€¦â€¦</p>
<p>éŸ³ä¹æ— ç–‘æ˜¯æœ€èƒ½æ„‰æ‚¦èº«å¿ƒçš„æ–¹å¼ä¹‹ä¸€ï¼Œé‚£ä¹ˆæ­Œæ‰‹çš„éŸ³è°ƒã€éŸ³è‰²æ˜¯å¦‚ä½•å­˜å‚¨åˆ°æ‰‹æœºä¸­ï¼Œåˆæ˜¯å¦‚ä½•é€šè¿‡å–‡å­æ’­æ”¾å‡ºæ¥çš„å‘¢ï¼Ÿ</p>
<p>ä¸‹é¢æˆ‘å°†é€šè¿‡å‡ ç¯‡åšå®¢é˜è¿°æˆ‘å¯¹éŸ³é¢‘çš„ç†è§£åŠéƒ¨åˆ†è°ƒè¯•ç»éªŒï¼Œæœ¬ç« ä¸»è¦ä»‹ç»éŸ³é¢‘çš„çš„åŸºç¡€çŸ¥è¯†</p>
<h1 id="ä¿¡å·åˆ†ç±»"><a href="#ä¿¡å·åˆ†ç±»" class="headerlink" title="ä¿¡å·åˆ†ç±»"></a>ä¿¡å·åˆ†ç±»</h1><p>å£°éŸ³ä¸¥æ ¼æ„ä¹‰æ¥è®²åº”è¯¥è¢«å«åšå£°éŸ³ä¿¡å·ï¼Œè€Œåœ¨ç»´åŸºç™¾ç§‘ä¸­å¯¹äº<strong>ä¿¡å·</strong>çš„å®šä¹‰æ˜¯<a href="https://baike.baidu.com/item/%E7%89%A9%E7%90%86%E9%87%8F/9984692">è¡¨ç¤ºæ¶ˆæ¯çš„ç‰©ç†é‡</a>ï¼Œè¿™æ ·å°±å¾ˆå¥½ç†è§£äº†å£°éŸ³ä¿¡å·å°±æ˜¯ä»¥å£°éŸ³ä¸ºè½½ä½“çš„ä¸€ä¸ªç‰©ç†é‡ã€‚è€Œè‡ªç„¶ç•Œä¸­ä¿¡å·å¯ä»¥æœ‰å¦‚ä¸‹çš„åˆ†ç±»</p>
<p><img src="/images/linux/Audio/Audio-meet-1.png" alt="signal"></p>
<p>å› æ­¤ï¼ŒæŒ‰ç…§ä¿¡å·å˜åŒ–åˆ†ç±»å£°éŸ³ä¿¡å·å±äºéšæœºä¿¡å·ï¼›æŒ‰ç…§ä¿¡å·ç‰¹å¾åˆ†ç±»å£°éŸ³ä¿¡å·å±äºæ¨¡æ‹Ÿä¿¡å·</p>
<h1 id="æ¨¡æ•°è½¬æ¢"><a href="#æ¨¡æ•°è½¬æ¢" class="headerlink" title="æ¨¡æ•°è½¬æ¢"></a>æ¨¡æ•°è½¬æ¢</h1><p>ä¸Šä¸€éƒ¨åˆ†äº†è§£åˆ°å£°éŸ³æ˜¯æ¨¡æ‹Ÿä¿¡å·ï¼Œè€Œå¯¹äºè®¡ç®—æœºæ¥è®²å…¶åªèƒ½å¤„ç†æ•°å­—ä¿¡å·å³0å’Œ1ï¼Œæ‰€ä»¥å¿…é¡»éœ€è¦å°†å£°éŸ³æ¨¡æ‹Ÿä¿¡å·è½¬æ¢æˆæ•°å­—ä¿¡å·ï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹å«åšæ¨¡æ•°è½¬æ¢ï¼ˆAnalog Digital Conversionï¼‰ï¼Œç›¸åº”çš„å®Œæˆè¯¥åŠŸèƒ½çš„ç¡¬ä»¶å•å…ƒå°±å«åšæ¨¡æ•°è½¬æ¢å™¨(ADC)</p>
<p>å®Œæˆè¯¥è¿‡ç¨‹éœ€è¦ä¸‰éƒ¨æ›²åˆ†åˆ«æ˜¯ï¼šé‡‡æ ·ã€é‡åŒ–ã€ç¼–ç ï¼Œæ•´ä½“è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/images/linux/Audio/Audio-meet-2.png" alt="ADC"></p>
<h2 id="é‡‡æ ·"><a href="#é‡‡æ ·" class="headerlink" title="é‡‡æ ·"></a>é‡‡æ ·</h2><p><em>é‡è¦å‚æ•°ï¼šé‡‡æ ·ç‡</em></p>
<ul>
<li>å®šä¹‰ï¼šåœ¨æ—¶é—´è½´ä¸Šå¯¹ä¿¡å·è¿›è¡Œç¦»æ•£åŒ–</li>
<li>åŸç†ï¼šæŒ‰ç…§ä¸€å®šçš„é¢‘ç‡å¯¹æ¨¡æ‹Ÿä¿¡å·çš„ç¬æ—¶æ—¶åˆ»è¿›è¡Œæ ·æœ¬é‡‡é›†</li>
</ul>
<p>å…¶å®é‡‡æ ·ä½œç”¨é€šä¿—ç†è§£å°±æ˜¯æ˜¯é‡‡é›†æ ·æœ¬ã€‚ç”±äºæ¨¡æ‹Ÿä¿¡å·æ˜¯è¿ç»­çš„ï¼Œç†è®ºä¸Šæˆ‘ä»¬éœ€è¦é‡‡é›†æ— æ•°ä¸ªç‚¹æ‰èƒ½å®Œæ•´çš„è¿˜åŸè¯¥ä¿¡å·ï¼Œä½†æ˜¯ä¸€æ¥æ— ç©·çš„æ¦‚å¿µæ˜¯ä¸å¯èƒ½æ»¡è¶³çš„ï¼ŒäºŒæ¥æˆ‘ä»¬å…¶å®å¹¶ä¸éœ€è¦è¿™ä¹ˆé«˜çš„é‡‡æ ·ç‡ã€‚æˆ‘ä»¬å¬è§‰æ˜¯æœ‰å»¶è¿Ÿçš„å°±å’Œè§†é¢‘å¸§ä¸åœçš„åˆ·æ–°æ¬ºéª—æˆ‘ä»¬çš„çœ¼ç›æ˜¯ç”»é¢è¿ç»­çš„æ˜¯ä¸€ä¸ªé“ç†ã€‚</p>
<p>æ‰€ä»¥é‡‡æ ·ç‡è¶Šé«˜ï¼Œå£°éŸ³çš„è¿˜åŸå°±è¶ŠçœŸå®è¶Šè‡ªç„¶ï¼Œäººå¯¹é¢‘ç‡çš„è¯†åˆ«èŒƒå›´æ˜¯ 20HZ - 22000HZ, å¦‚æœæ¯ç§’é’Ÿèƒ½å¯¹å£°éŸ³åš 22000 ä¸ªé‡‡æ ·, å›æ”¾æ—¶å°±è¶³å¯ä»¥æ»¡è¶³äººè€³çš„éœ€æ±‚. æ‰€ä»¥ 22050 çš„é‡‡æ ·é¢‘ç‡æ˜¯å¸¸ç”¨çš„, 44100å·²æ˜¯CDéŸ³è´¨, è¶…è¿‡48000çš„é‡‡æ ·å¯¹äººè€³å·²ç»æ²¡æœ‰æ„ä¹‰ã€‚è¿™å’Œç”µå½±çš„æ¯ç§’ 24 å¸§å›¾ç‰‡çš„é“ç†å·®ä¸å¤šã€‚</p>
<h2 id="é‡åŒ–"><a href="#é‡åŒ–" class="headerlink" title="é‡åŒ–"></a>é‡åŒ–</h2><p><em>ç›¸å…³å‚æ•°ï¼šé‡‡æ ·ä½æ•°</em></p>
<ul>
<li><p>å®šä¹‰ï¼šåœ¨å¹…åº¦è½´ä¸Šå¯¹ä¿¡å·è¿›è¡Œæ•°å­—åŒ–</p>
</li>
<li><p>åŸç†ï¼šå¯¹é‡‡æ ·ç‚¹çš„å¹…åº¦èµ‹äºˆå…·ä½“çš„æ•°å€¼ï¼Œè¯¥æ•°å€¼ç”±nä½äºŒè¿›åˆ¶è¡¨å¾ï¼ˆn = 8 / 16 / 32ï¼‰</p>
</li>
</ul>
<p>é‡‡æ ·ä½æ•°è¶Šé«˜è¯´æ˜åˆ’åˆ†çš„ç­‰çº§è¶Šç²¾ç»†ã€‚è¾ƒä½çš„é‡‡æ ·ä½æ•°æŸå¤±ç²¾åº¦ï¼Œè¾ƒé«˜çš„é‡‡æ ·ä½æ•°å¯èƒ½é€ æˆè½¯ç¡¬ä»¶èµ„æºçš„æµªè´¹</p>
<blockquote>
<p>å°å¸¸è¯†ï¼šæ ‡å‡†CDéŸ³ä¹çš„è´¨é‡å°±æ˜¯16bitã€44.1KHzé‡‡æ ·</p>
</blockquote>
<h2 id="ç¼–ç "><a href="#ç¼–ç " class="headerlink" title="ç¼–ç "></a>ç¼–ç </h2><p>å®šä¹‰ï¼šæŒ‰ç…§ä¸€å®šçš„æ ¼å¼è®°å½• é‡‡æ · å’Œ é‡åŒ– åçš„æ•°æ®ã€‚åç»­ä¼šå¯¹éƒ¨åˆ†æ ¼å¼çš„å­˜å‚¨æ ¼å¼è¿›è¡Œåˆ†æ</p>
<h3 id="ç¼–ç åˆ†ç±»"><a href="#ç¼–ç åˆ†ç±»" class="headerlink" title="ç¼–ç åˆ†ç±»"></a>ç¼–ç åˆ†ç±»</h3><blockquote>
<p> è¯¥éƒ¨åˆ†å†…å®¹è½¬è‡ª <a href="https://www.jianshu.com/p/28d3f108ef63">https://www.jianshu.com/p/28d3f108ef63</a></p>
</blockquote>
<h4 id="æ³¢å½¢ç¼–ç "><a href="#æ³¢å½¢ç¼–ç " class="headerlink" title="æ³¢å½¢ç¼–ç "></a>æ³¢å½¢ç¼–ç </h4><ul>
<li>å®šä¹‰ï¼šä¸åˆ©ç”¨ç”ŸæˆéŸ³é¢‘ä¿¡å·çš„ä»»ä½•å‚æ•°ï¼Œç›´æ¥å°† <strong>æ—¶é—´åŸŸä¿¡å·</strong> å˜æ¢ä¸º <strong>æ•°å­—ä»£ç </strong>ï¼Œä½¿é‡æ„çš„è¯­éŸ³æ³¢å½¢å°½å¯èƒ½åœ°ä¸åŸå§‹è¯­éŸ³ä¿¡å·çš„ æ³¢å½¢å½¢çŠ¶ ä¿æŒä¸€è‡´ã€‚</li>
<li>åŸç†ï¼šåœ¨ <strong>æ—¶é—´è½´</strong> ä¸Šå¯¹æ¨¡æ‹Ÿè¯­éŸ³ä¿¡å·æŒ‰ä¸€å®šçš„é€Ÿç‡æŠ½æ ·ï¼Œç„¶åå°†å¹…åº¦æ ·æœ¬åˆ†å±‚é‡åŒ–ï¼Œå¹¶ç”¨ä»£ç è¡¨ç¤ºã€‚</li>
</ul>
<h4 id="å‚æ•°ç¼–ç "><a href="#å‚æ•°ç¼–ç " class="headerlink" title="å‚æ•°ç¼–ç "></a>å‚æ•°ç¼–ç </h4><p>ä»è¯­éŸ³ <strong>æ³¢å½¢ä¿¡å·</strong> ä¸­æå–ç”Ÿæˆè¯­éŸ³çš„å‚æ•°ï¼Œä½¿ç”¨è¿™äº›å‚æ•°é€šè¿‡è¯­éŸ³ç”Ÿæˆæ¨¡å‹é‡æ„å‡ºè¯­éŸ³ï¼Œä½¿é‡æ„çš„è¯­éŸ³ä¿¡å·å°½å¯èƒ½åœ°ä¿æŒåŸå§‹è¯­éŸ³ä¿¡å·çš„è¯­æ„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‚æ•°ç¼–ç æ˜¯æŠŠè¯­éŸ³ä¿¡å·äº§ç”Ÿçš„æ•°å­—æ¨¡å‹ä½œä¸ºåŸºç¡€ï¼Œç„¶åæ±‚å‡ºæ•°å­—æ¨¡å‹çš„æ¨¡å‹å‚æ•°ï¼Œå†æŒ‰ç…§è¿™äº›å‚æ•°è¿˜åŸæ•°å­—æ¨¡å‹ï¼Œè¿›è€Œåˆæˆè¯­éŸ³ã€‚</p>
<h4 id="æ··åˆç¼–ç "><a href="#æ··åˆç¼–ç " class="headerlink" title="æ··åˆç¼–ç "></a>æ··åˆç¼–ç </h4><p>æ··åˆç¼–ç æ˜¯æŒ‡åŒæ—¶ä½¿ç”¨ä¸¤ç§æˆ–ä¸¤ç§ä»¥ä¸Šçš„ç¼–ç æ–¹æ³•è¿›è¡Œç¼–ç ã€‚è¿™ç§ç¼–ç æ–¹æ³•å…‹æœäº†æ³¢å½¢ç¼–ç å’Œå‚æ•°ç¼–ç çš„å¼±ç‚¹ï¼Œå¹¶ç»“åˆäº†æ³¢å½¢ç¼–ç é«˜è´¨é‡å’Œå‚æ•°ç¼–ç çš„ä½ç¼–ç ç‡ï¼Œèƒ½å¤Ÿå–å¾—æ¯”è¾ƒå¥½çš„æ•ˆæœã€‚</p>
<ul>
<li><p>WAVç¼–ç ï¼ˆæ³¢å½¢ç¼–ç ï¼‰</p>
<p>WAVæ˜¯ç¼–ç çš„ä¸€ç§å®ç°æ–¹å¼ï¼ˆå…¶å®å®ƒæœ‰éå¸¸å¤šå®ç°æ–¹å¼ï¼Œä½†éƒ½æ˜¯ä¸ä¼šè¿›è¡Œå‹ç¼©æ“ä½œï¼‰ã€‚å°±æ˜¯åœ¨æº <strong>PCM</strong> æ•°æ®æ ¼å¼çš„å‰é¢åŠ ä¸Š44ä¸ªå­—èŠ‚ã€‚åˆ†åˆ«ç”¨æ¥æè¿° <strong>PCM</strong> çš„é‡‡æ ·ç‡ã€å£°é“æ•°ã€æ•°æ®æ ¼å¼ç­‰ä¿¡æ¯ã€‚</p>
</li>
<li><p>MP3ç¼–ç </p>
<p>MP3ç¼–ç å…·æœ‰ä¸é”™çš„å‹ç¼©æ¯”ï¼Œè€Œä¸”å¬æ„Ÿä¹Ÿæ¥è¿‘äºWAVæ–‡ä»¶ï¼Œå½“ç„¶åœ¨ä¸åŒçš„ç¯å¢ƒä¸‹ï¼Œåº”è¯¥è°ƒæ•´åˆé€‚çš„å‚æ•°æ¥è¾¾åˆ°æ›´å¥½çš„æ•ˆæœã€‚</p>
</li>
<li><p>AACç¼–ç </p>
</li>
</ul>
<p>  AACæ˜¯ç›®å‰æ¯”è¾ƒçƒ­é—¨çš„æœ‰æŸå‹ç¼©ç¼–ç æŠ€æœ¯ï¼Œå¹¶ä¸”è¡ç”Ÿäº†LC-AACã€HE-AACã€HE-AAC v2 ä¸‰ç§ä¸»è¦ç¼–ç æ ¼å¼ã€‚</p>
<p>  <strong>LC-AACï¼š</strong>æ˜¯æ¯”è¾ƒä¼ ç»Ÿçš„AAC,ä¸»è¦åº”ç”¨äºä¸­é«˜ç ç‡çš„åœºæ™¯ç¼–ç (&gt;= 80Kbit/s)<br>   <strong>HE-AACï¼š</strong> ä¸»è¦åº”ç”¨äºä½ç ç‡åœºæ™¯çš„ç¼–ç (&lt;= 48Kbit/s)</p>
<ul>
<li><p>Oggç¼–ç ï¼ˆæœ‰æŸï¼‰</p>
<p>Oggç¼–ç æ˜¯ä¸€ç§éå¸¸æœ‰æ½œåŠ›çš„ç¼–ç ï¼Œåœ¨å„ç§ç ç‡ä¸‹éƒ½æœ‰æ¯”è¾ƒä¼˜ç§€çš„è¡¨ç°ã€‚å°¤å…¶åœ¨ä½ç ç‡åœºæ™¯ä¸‹ã€‚Oggé™¤äº†éŸ³è´¨å¥½ä¹‹å¤–ï¼ŒOggçš„ç¼–ç ç®—æ³•ä¹Ÿæ˜¯éå¸¸å‡ºè‰²ã€‚å¯ä»¥ç”¨æ›´å°çš„ç ç‡è¾¾åˆ°æ›´å¥½çš„éŸ³è´¨ã€‚128Kbit/sçš„Oggæ¯”192Kbit/sç”šè‡³æ›´é«˜ç ç‡çš„MP3æ›´ä¼˜è´¨.ä½†ç›®å‰ç”±è½¯ä»¶è¿˜æ˜¯ç¡¬ä»¶æ”¯æŒé—®é¢˜,éƒ½æ²¡æ³•è¾¾åˆ°ä¸MP3çš„ä½¿ç”¨å¹¿åº¦.</p>
</li>
</ul>
<h1 id="éŸ³é¢‘å‚æ•°"><a href="#éŸ³é¢‘å‚æ•°" class="headerlink" title="éŸ³é¢‘å‚æ•°"></a>éŸ³é¢‘å‚æ•°</h1><p>ä¸€æ®µæ‚ æ‰¬çš„éŸ³ä¹ç»è¿‡é‡‡æ ·ã€é‡åŒ–ã€ç¼–ç å°±ä¿å­˜æ•°å­—ä¿¡å·æ–‡ä»¶ï¼Œè€Œæˆ‘ä»¬æœ€ç»ˆçš„ç›®çš„ä¸€å®šä¸æ˜¯åªå­˜æˆæ–‡ä»¶è€Œæ˜¯é€šè¿‡æ–‡ä»¶å½¢å¼ä¼ æ’­è®©æ›´å¤šäººå¬åˆ°è¯¥éŸ³ä¹ï¼Œå› æ­¤ä¸€å®šå­˜åœ¨DAè½¬æ¢ï¼Œå³è¿˜åŸæ•°å­—ä¿¡å·ä¸ºæ¨¡æ‹Ÿä¿¡å·çš„è¿‡ç¨‹ã€‚é‚£ä¹ˆåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­æœ‰å“ªäº›å‚æ•°è¡¨å¾äº†éŸ³é¢‘é‡è¦çš„ä¿¡æ¯å‘¢ï¼Ÿ</p>
<p>ä¸ä»…é™äºwebrtcã€ffmpegã€libmadç­‰ç­‰éŸ³é¢‘ç¼–è§£ç åº“ï¼Œå¯¹äºæ‰€æœ‰ç¼–è§£ç å™¨å’Œcodecæ¥è®²ï¼ŒéŸ³é¢‘æºæ•°æ®çš„ä¸‰ä¸ªå‚æ•°è‡³å…³é‡è¦ï¼š<strong>å£°é“channelã€é‡‡æ ·ç‡sampleRateã€é‡‡æ ·ä½æ•°sampleBit</strong>ã€‚è¿™ä¸‰ä¸ªå‚æ•°ä¹‹æ‰€ä»¥é‡è¦æ˜¯å› ä¸ºæœ‰è¿™å‡ ä¸ªå‚æ•°å°±å¯ä»¥å‡†ç¡®çš„çŸ¥é“ä¸€ä¸ªè£¸çš„éŸ³é¢‘æ•°æ®ï¼ˆPCMï¼‰çš„å…¨éƒ¨ä¿¡æ¯äº†ã€‚</p>
<h2 id="å£°é“"><a href="#å£°é“" class="headerlink" title="å£°é“"></a>å£°é“</h2><p>å£°é“æ˜¯æŒ‡éŸ³é¢‘æ–‡ä»¶åœ¨å½•åˆ¶æ—¶éŸ³æºçš„æ•°é‡ä½ç½®å’Œæ’­æ”¾æ—¶ç›¸åº”çš„æ‰¬å£°å™¨çš„æ•°é‡ï¼ˆç™¾åº¦ç™¾ç§‘ï¼‰ã€‚æ‰€ä»¥å¯æƒ³è€ŒçŸ¥ï¼Œå…¶ä»–å‚æ•°ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œå£°é“æ•°è¶Šå¤šå®šä½è¶Šç²¾å‡†ï¼ŒåŒæ ·æ‰€éœ€æ‰¬å£°å™¨å’ŒåŠŸæ”¾ç»„ä»¶è¶Šå¤šã€‚</p>
<ul>
<li>å•å£°é“ï¼ˆmonoï¼‰</li>
<li>åŒå£°é“ï¼ˆstereo ç«‹ä½“å£°ï¼‰ï¼šå·¦å£°é“ + å³å£°é“ï¼Œä½éŸ³ä¸åˆ†ç¦»ï¼Œåº”ç”¨äºéŸ³ä¹æ’­æ”¾è¾ƒå¤š</li>
<li>2.1å£°é“ ï¼šå·¦å£°é“ + å³å£°é“ï¼Œ ä½éŸ³åˆ†ç¦»</li>
<li>5.1å£°é“ ï¼šå·¦å£°é“ + å³å£°é“ + ä½éŸ³å£°é“ + ä¸­å¤®å£°é“ + å·¦ç¯ç»• + å³ç¯ç»•ï¼Œåº”ç”¨äºç±»ä¼ ç»Ÿå½±é™¢å’Œå®¶åº­å½±é™¢ä¸­</li>
<li>7.1å£°é“ ï¼šå·¦å£°é“ + å³å£°é“ + ä½éŸ³å£°é“ + ä¸­å¤®å£°é“ + å·¦ç¯ç»• + å³ç¯ç»• + å·¦åç¯ + å³åç¯ï¼Œå¸¸è§çš„åŒ…æ‹¬ï¼šDolby Surround 7.1æœæ¯”7.1ç¯ç»•å£°</li>
</ul>
<h2 id="é‡‡æ ·ç‡"><a href="#é‡‡æ ·ç‡" class="headerlink" title="é‡‡æ ·ç‡"></a>é‡‡æ ·ç‡</h2><p>é‡‡æ ·ç‡å¯ä»¥ç†è§£ä¸ºé‡‡é›†æ ·æœ¬çš„é€Ÿç‡ï¼ˆæ•…ä¹Ÿå¯ä»¥ç§°ä¸ºé‡‡æ ·é€Ÿåº¦æˆ–è€…é‡‡æ ·é¢‘ç‡ï¼‰ï¼Œå®ƒå®šä¹‰äº†æ¯ç§’ä»è¿ç»­ä¿¡å·ä¸­æå–å¹¶ç»„æˆç¦»æ•£ä¿¡å·çš„é‡‡æ ·ä¸ªæ•°ï¼Œå®ƒç”¨èµ«å…¹ï¼ˆHzï¼‰æ¥è¡¨ç¤ºã€‚</p>
<p>ä¾‹å¦‚ï¼šé‡‡æ ·ç‡ä¸º44100ï¼Œæ„å‘³ç€æ¯ç§’é’Ÿå¯¹è¿ç»­çš„å£°éŸ³ä¿¡å·é‡‡é›†44100æ¬¡ï¼ŒåŒæ ·å¯¹åº”å¾—åˆ°çš„æ•°å­—ä¿¡å·æ¯ç§’çš„æ ·æœ¬æ•°é‡ï¼ˆå…·ä½“å¯ä»¥å‚è€ƒé‡‡æ ·è¿‡ç¨‹ï¼‰</p>
<h2 id="é‡‡æ ·ä½æ•°"><a href="#é‡‡æ ·ä½æ•°" class="headerlink" title="é‡‡æ ·ä½æ•°"></a>é‡‡æ ·ä½æ•°</h2><p>é‡‡æ ·ä½æ•°å°±æ˜¯æŒ‡æŸä¸€ç¬æ—¶æ—¶åˆ»ï¼Œé‡åŒ–å£°éŸ³å¤§å°ï¼ˆç²¾ç»†ç¨‹åº¦ï¼‰çš„è®¡é‡å•ä½</p>
<ul>
<li>8bit ( 1Byte ) å¯¹åº”0~255ï¼Œå°†æŒ¯å¹…åˆ’åˆ†ä¸º256ä¸ªç­‰çº§</li>
<li>16bit (2Byte) å¯¹åº”0~65535ï¼Œå°†æŒ¯å¹…åˆ’åˆ†ä¸º65536ä¸ªç­‰çº§</li>
</ul>
<h2 id="æ ·æœ¬æ ¼å¼"><a href="#æ ·æœ¬æ ¼å¼" class="headerlink" title="æ ·æœ¬æ ¼å¼"></a>æ ·æœ¬æ ¼å¼</h2><h3 id="æ ·æœ¬ç»„åˆå½¢å¼"><a href="#æ ·æœ¬ç»„åˆå½¢å¼" class="headerlink" title="æ ·æœ¬ç»„åˆå½¢å¼"></a>æ ·æœ¬ç»„åˆå½¢å¼</h3><ul>
<li>äº¤é”™æ¨¡å¼ï¼šæ¯ä¸ªå£°é“çš„æ ·æœ¬æ•°æ®äº¤é”™å­˜å‚¨æ’å¸ƒ</li>
<li>å¹³é¢æ¨¡å¼ï¼šæ¯ä¸ªå£°é“çš„æ ·æœ¬æ•°æ®åˆ†å¼€å­˜å‚¨</li>
</ul>
<p>ä¸‹é¢ä»¥stereoæ¨¡å¼è¿›è¡Œå›¾ç¤ºè§£é‡Šï¼ˆCä»£è¡¨Channelï¼‰ï¼š</p>
<p>â€‹    <img src="/images/linux/Audio/Audio-meet-3.png" alt="sample"></p>
<h3 id="FFmpeg-æ ·æœ¬ç»„ç»‡å½¢å¼ä»‹ç»"><a href="#FFmpeg-æ ·æœ¬ç»„ç»‡å½¢å¼ä»‹ç»" class="headerlink" title="FFmpeg æ ·æœ¬ç»„ç»‡å½¢å¼ä»‹ç»"></a>FFmpeg æ ·æœ¬ç»„ç»‡å½¢å¼ä»‹ç»</h3><ul>
<li>Packedæ ¼å¼ï¼Œframe.data[0]åŒ…å«æ‰€æœ‰çš„éŸ³é¢‘æ•°æ®ã€‚</li>
<li>Planaræ ¼å¼ï¼Œframe.data[i]è¡¨ç¤ºç¬¬iä¸ªå£°é“çš„æ•°æ®ï¼ˆå‡è®¾å£°é“0æ˜¯ç¬¬ä¸€ä¸ªï¼‰</li>
</ul>
<h3 id="FFmpeg-ä¸»è¦æ ·æœ¬æ ¼å¼"><a href="#FFmpeg-ä¸»è¦æ ·æœ¬æ ¼å¼" class="headerlink" title="FFmpeg ä¸»è¦æ ·æœ¬æ ¼å¼"></a>FFmpeg ä¸»è¦æ ·æœ¬æ ¼å¼</h3><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">AVSampleFormat</span> {</span></span><br><span class="line">    AV_SAMPLE_FMT_NONE = <span class="number">-1</span>,</span><br><span class="line">    AV_SAMPLE_FMT_U8,          <span class="comment">///&lt; unsigned 8 bits</span></span><br><span class="line">    AV_SAMPLE_FMT_S16,         <span class="comment">///&lt; signed 16 bits</span></span><br><span class="line">    AV_SAMPLE_FMT_S32,         <span class="comment">///&lt; signed 32 bits</span></span><br><span class="line">    AV_SAMPLE_FMT_FLT,         <span class="comment">///&lt; float</span></span><br><span class="line">    AV_SAMPLE_FMT_DBL,         <span class="comment">///&lt; double</span></span><br><span class="line"> </span><br><span class="line">    AV_SAMPLE_FMT_U8P,         <span class="comment">///&lt; unsigned 8 bits, planar</span></span><br><span class="line">    AV_SAMPLE_FMT_S16P,        <span class="comment">///&lt; signed 16 bits, planar</span></span><br><span class="line">    AV_SAMPLE_FMT_S32P,        <span class="comment">///&lt; signed 32 bits, planar</span></span><br><span class="line">    AV_SAMPLE_FMT_FLTP,        <span class="comment">///&lt; float, planar</span></span><br><span class="line">    AV_SAMPLE_FMT_DBLP,        <span class="comment">///&lt; double, planar</span></span><br><span class="line">    AV_SAMPLE_FMT_S64,         <span class="comment">///&lt; signed 64 bits</span></span><br><span class="line">    AV_SAMPLE_FMT_S64P,        <span class="comment">///&lt; signed 64 bits, planar</span></span><br><span class="line"> </span><br><span class="line">    AV_SAMPLE_FMT_NB           <span class="comment">///&lt; Number of sample formats. DO NOT USE if linking dynamically</span></span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>

<p>è¯´æ˜ï¼šä»¥Pä¸ºç»“å°¾çš„æ˜¯planarç»“æ„ï¼›Planaræ¨¡å¼æ˜¯FFmpegå†…éƒ¨å­˜å‚¨æ¨¡å¼ï¼Œæˆ‘ä»¬å®é™…ä½¿ç”¨çš„éŸ³é¢‘æ–‡ä»¶éƒ½æ˜¯Packedæ¨¡å¼çš„ã€‚</p>
<h2 id="æ¯”ç‰¹ç‡"><a href="#æ¯”ç‰¹ç‡" class="headerlink" title="æ¯”ç‰¹ç‡"></a>æ¯”ç‰¹ç‡</h2><p>æ¯”ç‰¹ç‡æŒ‡çš„æ˜¯å•ä½æ—¶é—´æ’­æ”¾è¿ç»­çš„åª’ä½“å¦‚å‹ç¼©åçš„éŸ³é¢‘æˆ–è§†é¢‘çš„æ¯”ç‰¹æ•°é‡ï¼Œåœ¨è¿™ä¸ªæ„ä¹‰ä¸Šè®²ï¼Œå®ƒç›¸å½“äºæœ¯è¯­æ•°å­—å¸¦å®½æ¶ˆè€—é‡ï¼Œæˆ–ååé‡ã€‚å•ä½bps / Kbpsï¼ˆbit per secondï¼‰è¿™é‡Œæ˜¯bitè€Œä¸æ˜¯Byteï¼ˆ1Byte = 8bitï¼‰</p>
<p>è™½ç„¶ç»å¸¸ä½œä¸ºâ€œé€Ÿåº¦â€çš„å‚è€ƒï¼Œæ¯”ç‰¹ç‡å¹¶ä¸æµ‹é‡â€œâ€˜è·ç¦»â€™/æ—¶é—´â€ï¼Œè€Œæ˜¯è¢«ä¼ è¾“æˆ–è€…è¢«å¤„ç†çš„â€œâ€˜äºŒè¿›åˆ¶ç æ•°é‡â€™/æ—¶é—´â€ï¼Œæ‰€ä»¥åº”è¯¥æŠŠå®ƒå’Œä¼ æ’­é€Ÿåº¦åŒºåˆ†å¼€æ¥ï¼Œä¼ æ’­é€Ÿåº¦ä¾èµ–äºä¼ è¾“çš„ä»‹è´¨å¹¶ä¸”æœ‰é€šå¸¸çš„ç‰©ç†æ„ä¹‰ã€‚ï¼ˆæ¥è‡ªç»´åŸºç™¾ç§‘ï¼‰</p>
<h2 id="å‚æ•°å…³ç³»"><a href="#å‚æ•°å…³ç³»" class="headerlink" title="å‚æ•°å…³ç³»"></a>å‚æ•°å…³ç³»</h2><p>å¯¹äºPCMè£¸æ•°æ®ï¼š æ–‡ä»¶æ—¶é•¿ â‰ˆï¼ˆæ–‡ä»¶æ€»å¤§å° - å¤´ä¿¡æ¯ï¼‰/ (é‡‡æ ·ç‡ * é‡‡æ ·ä½æ•° * é€šé“æ•° / 8) [ä¹Ÿå°±æ˜¯æ¯”ç‰¹ç‡]</p>
]]></content>
      <categories>
        <category>Linux</category>
        <category>Audio</category>
      </categories>
  </entry>
  <entry>
    <title>ã€ŠåµŒå…¥å¼Cè¯­è¨€è‡ªæˆ‘ä¿®å…»ã€‹ç¬”è®°</title>
    <url>/2023/03/13/Reading/%E5%B5%8C%E5%85%A5%E5%BC%8FC%E8%AF%AD%E8%A8%80%E8%87%AA%E6%88%91%E4%BF%AE%E5%85%BB/</url>
    <content><![CDATA[<p><img src="/images/reading/QianRuShiC.jpg" alt="img"></p>
<h1 id="GNU-Cç¼–è¯‘å™¨æ‰©å±•è¯­æ³•ç²¾è®²ï¼ˆå…­ï¼‰"><a href="#GNU-Cç¼–è¯‘å™¨æ‰©å±•è¯­æ³•ç²¾è®²ï¼ˆå…­ï¼‰" class="headerlink" title="GNU Cç¼–è¯‘å™¨æ‰©å±•è¯­æ³•ç²¾è®²ï¼ˆå…­ï¼‰"></a>GNU Cç¼–è¯‘å™¨æ‰©å±•è¯­æ³•ç²¾è®²ï¼ˆå…­ï¼‰</h1><p>github Demoï¼š<a href="https://github.com/yangLieee/codebackup/blob/master/book_%E5%B5%8C%E5%85%A5%E5%BC%8FC%E8%AF%AD%E8%A8%80%E8%87%AA%E6%88%91%E4%BF%AE%E5%85%BB/gnuc.c">click here</a></p>
<h2 id="æŒ‡å®šåˆå§‹åŒ–"><a href="#æŒ‡å®šåˆå§‹åŒ–" class="headerlink" title="æŒ‡å®šåˆå§‹åŒ–"></a>æŒ‡å®šåˆå§‹åŒ–</h2><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="number">1.</span> æ•°ç»„åˆå§‹åŒ–</span><br><span class="line"><span class="type">int</span> <span class="built_in">array</span>[<span class="number">100</span>] = { [<span class="number">10</span>] = <span class="number">1</span>, [<span class="number">20</span>] = <span class="number">3</span> };</span><br><span class="line"></span><br><span class="line"># ... å‰åéƒ½éœ€è¦ç©ºæ ¼ï¼Œå¹¶ä¸”è¯¥ç‰¹æ€§ä¹Ÿå¯ä»¥ç”¨åœ¨<span class="keyword">switch</span>-<span class="keyword">case</span>è¯­å¥ä¸­</span><br><span class="line"><span class="type">int</span> <span class="built_in">array</span>[<span class="number">100</span>] = { [<span class="number">10</span> ... <span class="number">20</span>] = <span class="number">1</span>, [<span class="number">40</span> ... <span class="number">50</span>] = <span class="number">2</span> };</span><br><span class="line"><span class="keyword">switch</span>(i) {</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span> ... <span class="number">8</span>:</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> ç»“æ„ä½“æˆå‘˜åˆå§‹åŒ–  (é€šè¿‡ç»“æ„åŸŸå)</span><br><span class="line">ä¾‹å¦‚linuxå†…æ ¸ï¼š</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">const</span> <span class="title">file_opt</span> <span class="title">codec_opt</span> =</span> {</span><br><span class="line">    .open = codec_open,</span><br><span class="line">    .read = codec_read,</span><br><span class="line">    .write = codec_write,</span><br><span class="line">} </span><br><span class="line">å¥½å¤„ï¼šçµæ´»ï¼Œä»£ç æ˜“äºç»´æŠ¤</span><br></pre></td></tr></tbody></table></figure>

<h2 id="è¯­å¥è¡¨è¾¾å¼"><a href="#è¯­å¥è¡¨è¾¾å¼" class="headerlink" title="è¯­å¥è¡¨è¾¾å¼"></a>è¯­å¥è¡¨è¾¾å¼</h2><ul>
<li>ç›®çš„ï¼šæ„é€ å¤æ‚å®</li>
<li>ç»“æ„ï¼šï¼ˆ {  è¡¨è¾¾å¼1; è¡¨è¾¾å¼2;  è¡¨è¾¾å¼3  } ï¼‰ è¯­å¥è¡¨è¾¾å¼ç”¨ï¼ˆï¼‰å°æ‹¬å·æ‹¬èµ·æ¥ï¼Œä»£ç å—ç”¨ { } å¤§æ‹¬å·æ‹¬èµ·æ¥ï¼Œè¯­å¥è¡¨è¾¾å¼çš„å€¼ç­‰äºæœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼</li>
</ul>
<h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><ol>
<li><p>æ±‚å’Œ</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">sum = ( {</span><br><span class="line">     <span class="type">int</span> s = <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++&gt;) </span><br><span class="line">        s = s +i;</span><br><span class="line">     s;</span><br><span class="line">} )</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å®šä¹‰ä¸€ä¸ªå®ï¼Œæ±‚ä¸¤ä¸ªæ•°çš„æœ€å¤§å€¼ï¼Ÿ</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> my_max(x,y)   ({    \</span></span><br><span class="line"><span class="meta">    typeof(x) _x = (x);     \</span></span><br><span class="line"><span class="meta">    typeof(y) _y = (y);     \</span></span><br><span class="line"><span class="meta">    (void) (&amp;_x == &amp;_y);    \</span></span><br><span class="line"><span class="meta">    _x &gt; _y ? _x : _y;      \</span></span><br><span class="line"><span class="meta">})</span></span><br><span class="line"><span class="comment">// ç¬¬å…­è¡Œçš„ä½œç”¨ï¼šä¸åŒç±»å‹çš„æŒ‡é’ˆæ¯”è¾ƒä¼šç»™å‡ºè­¦å‘Šï¼ŒåŠ voidæ¶ˆé™¤æ²¡æœ‰ç”¨åˆ°æ¯”è¾ƒç»“æœå¸¦æ¥çš„è­¦å‘Š</span></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<h2 id="container-ofå®"><a href="#container-ofå®" class="headerlink" title="container_ofå®"></a>container_ofå®</h2><ul>
<li><p>ä½œç”¨ï¼šæ ¹æ®ç»“æ„ä½“æŸä¸€æˆå‘˜åœ°å€ï¼Œè·å–è¿™ä¸ªç»“æ„ä½“çš„é¦–åœ°å€</p>
</li>
<li><p>åœºæ™¯ï¼šä¼ ç»™æŸä¸ªå‡½æ•°çš„å‚æ•°æ˜¯æŸä¸ªç»“æ„ä½“çš„æˆå‘˜å˜é‡ï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­è¿˜å¯èƒ½ç”¨åˆ°è¿™ä¸ªç»“æ„ä½“å…¶å®ƒå˜é‡</p>
</li>
<li><p>åŸºç¡€ï¼šå¸¸é‡æŒ‡é’ˆçš„å€¼å³ä¸ºå¸¸é‡æœ¬èº«çš„å€¼ã€‚0å¼ºè½¬ä¸ºç»“æ„ä½“æŒ‡é’ˆï¼Œç»“æ„ä½“çš„é¦–åœ°å€ä¸º0ï¼Œæ¯ä¸ªæˆå‘˜å˜é‡éƒ½æ˜¯é¦–åœ°å€çš„ç›¸å¯¹åç§»</p>
</li>
<li><p>å®ç°</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> offset( TYPE , MEMBER ) ((size_t) &amp; (((TYPE*)0)-&gt;MEMBER))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> container_of(ptr, type, member) ({                    \                    </span></span><br><span class="line">            <span class="type">const</span> <span class="title function_">typeof</span><span class="params">(((type*)<span class="number">0</span>)-&gt;member)</span>* _ptr = (ptr);   \</span><br><span class="line">            (type*) ((<span class="type">char</span>*)_ptr - offset(type, member));     \                              </span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h2 id="é›¶é•¿æ•°ç»„"><a href="#é›¶é•¿æ•°ç»„" class="headerlink" title="é›¶é•¿æ•°ç»„"></a>é›¶é•¿æ•°ç»„</h2><ul>
<li>å®šä¹‰ï¼šé•¿åº¦ä¸º0çš„æ•°ç»„</li>
<li>ä¼˜ç‚¹ï¼šä¸å ç”¨å†…å­˜å­˜å‚¨ç©ºé—´</li>
<li>å…¶å®ƒï¼šC99æ”¯æŒå˜é•¿æ•°ç»„ï¼Œå³é•¿åº¦ç¼–è¯‘æ—¶æœŸæ˜¯ä¸èƒ½ç¡®å®šï¼Œåœ¨è¿è¡Œæ—¶æ‰å¯ä»¥ç¡®å®š</li>
<li>åº”ç”¨ï¼šå˜é•¿ç»“æ„ä½“</li>
<li>æ•°ç»„ä¸æŒ‡é’ˆåŒºåˆ«ï¼šæ•°ç»„åç”¨æ¥è¡¨å¾ä¸€å—è¿ç»­çš„å†…å­˜åœ°å€ç©ºé—´ï¼Œä»…ä»…æ˜¯ç¬¦å·ä¸åˆ†é…ç©ºé—´ï¼›æŒ‡é’ˆæ˜¯ä¸€ä¸ªå˜é‡ï¼Œç¼–è¯‘å™¨éœ€è¦å•ç‹¬ç»™å®ƒåˆ†é…ä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œç”¨æ¥å­˜æ”¾ä»–æŒ‡å‘çš„å˜é‡çš„åœ°å€ã€‚</li>
</ul>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">buffer</span> {</span></span><br><span class="line">  <span class="type">int</span> len;</span><br><span class="line">  <span class="type">int</span> ptr[<span class="number">0</span>];  <span class="comment">// ä¸å å¤§å°</span></span><br><span class="line">};</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">buffer</span>* <span class="title">buf</span>;</span></span><br><span class="line">buf = (<span class="keyword">struct</span> buffer*) <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> buffer) + <span class="number">100</span>);</span><br><span class="line">buf-&gt;len = <span class="number">100</span>;</span><br></pre></td></tr></tbody></table></figure>



<h2 id="å±æ€§å£°æ˜"><a href="#å±æ€§å£°æ˜" class="headerlink" title="å±æ€§å£°æ˜"></a>å±æ€§å£°æ˜</h2><h3 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h3><p>__attribute__</p>
<ul>
<li>ä½œç”¨ï¼šæŒ‡å¯¼ç¼–è¯‘å™¨åœ¨ç¼–è¯‘ç¨‹åºçš„æ—¶å€™è¿›è¡Œç‰¹å®šæ–¹é¢ä¼˜åŒ–æˆ–ä»£ç æ£€æŸ¥</li>
<li>æ ¼å¼ï¼š<strong>attribute</strong>(( ))ï¼Œåé¢éœ€è¦å†™ä¸¤å¯¹å°æ‹¬å·ï¼Œå¤šä¸ªå±æ€§ä¹‹é—´é€—å·éš”å¼€</li>
<li>æ”¯æŒçš„å±æ€§å£°æ˜ï¼šsectionã€alignedã€packedã€formatã€weakã€aliasã€noinlineã€always_inilne</li>
</ul>
<h3 id="section"><a href="#section" class="headerlink" title="section"></a>section</h3><ul>
<li><p>ä½œç”¨ï¼šå°†ä¸€ä¸ªå‡½æ•°æˆ–å˜é‡æ”¾åˆ°æŒ‡å®šçš„æ®µï¼Œå³æ”¾åˆ°æŒ‡å®šçš„section</p>
</li>
<li><p>ä½¿ç”¨ï¼š<strong>attribute</strong>(( section(â€œ.dataâ€) ))</p>
</li>
<li><p>å¯é€‰é¡¹ï¼š</p>
<ul>
<li><p>.textï¼šå‡½æ•°å®šä¹‰ã€ç¨‹åºè¯­å¥</p>
</li>
<li><p>.dataï¼šåˆå§‹åŒ–çš„å…¨å±€å˜é‡ã€åˆå§‹åŒ–çš„é™æ€å±€éƒ¨å˜é‡</p>
</li>
<li><p>.bssï¼šæœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡ã€æœªåˆå§‹åŒ–çš„é™æ€å±€éƒ¨å˜é‡</p>
</li>
</ul>
</li>
</ul>
<h3 id="aligned"><a href="#aligned" class="headerlink" title="aligned"></a>aligned</h3><ul>
<li>ä½œç”¨ï¼šåœ°å€å¯¹é½ï¼Œåœ¨ç»™å˜é‡åˆ†é…å­˜å‚¨ç©ºé—´çš„æ—¶å€™ï¼Œéœ€è¦æŒ‰ç…§åˆ¶å®šçš„åœ°å€å¯¹é½æ–¹å¼ç»™å˜é‡åˆ†é…åœ°å€</li>
<li>æ³¨æ„ï¼šåœ°å€å¯¹é½çš„å­—èŠ‚æ•°å¿…é¡»æ˜¯2çš„å¹‚æ¬¡æ–¹</li>
<li>ä½¿ç”¨ï¼š<strong>attribute</strong>(( (aligned(4) ))</li>
<li>å¯¹é½çš„å¥½å¤„ï¼šç®€åŒ–CPUä¸RAMä¹‹é—´çš„æ¥å£å’Œç¡¬ä»¶è®¾è®¡ã€‚cpuè®¿å­˜ç¡¬ä»¶è®¾è®¡å¯èƒ½åªæ”¯æŒ4å­—èŠ‚æˆ–4å­—èŠ‚æ•´æ•°å€å¯¹é½çš„åœ°å€è®¿é—®ï¼Œå¯¹é½åcpuå¯ä»¥ä¸€æ¬¡è¯»å®Œ</li>
<li>æ³¨æ„ï¼šè¿™ä¸ªå±æ€§å£°æ˜åªæ˜¯å»ºè®®ç¼–è¯‘å™¨æŒ‰ç…§è¿™ç§æ–¹å¼å¯¹é½ï¼Œå½“è¶…è¿‡ç¼–è¯‘å™¨å…è®¸çš„æœ€å¤§å€¼åªèƒ½æŒ‰ç…§æœ€å¤§å¯¹é½å­—èŠ‚æ•°è¿›è¡Œåœ°å€åˆ†é…</li>
</ul>
<h3 id="packed"><a href="#packed" class="headerlink" title="packed"></a>packed</h3><ul>
<li>ä½œç”¨ï¼šå‡å°‘åœ°å€å¯¹é½</li>
<li>ä½¿ç”¨ï¼š <strong>attribute</strong>(( packed ))</li>
<li>é€šå¸¸alignedä¸packedä¸€èµ·ä½¿ç”¨ï¼Œè¿™æ ·æ—¢é¿å…äº†ç»“æ„ä½“å„ä¸ªæˆå‘˜å˜é‡åœ°å€å¯¹é½äº§ç”Ÿçš„å†…å­˜ç©ºæ´åˆæŒ‡å®šäº†æ•´ä¸ªç»“æ„ä½“å¯¹é½æ–¹å¼ï¼š<strong>attribute</strong>(( packed, aligned(8) ))</li>
</ul>
<h3 id="format"><a href="#format" class="headerlink" title="format"></a>format</h3><ul>
<li>ä½œç”¨ï¼šæŒ‡å®šå˜å‚å‡½æ•°çš„å‚æ•°æ ¼å¼æ£€æŸ¥</li>
</ul>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">LOG</span><span class="params">(<span class="type">int</span> num, <span class="type">char</span>* fmt, ...)</span> __<span class="title function_">attribute__</span><span class="params">((format(<span class="built_in">printf</span>,<span class="number">2</span>,<span class="number">3</span>)))</span>)</span><br><span class="line"><span class="comment">// LOGå‡½æ•°çš„å‚æ•°ï¼Œä¸ªæ•°å­—ç¬¦ä¸²çš„ä½ç½®åœ¨æ‰€æœ‰å‚æ•°åˆ—è¡¨çš„ç´¢å¼•æ˜¯2,å³å‰ä¸¤ä¸ªå‚æ•°ï¼›è¦ç¼–è¾‘å™¨å¸®å¿™æ£€æŸ¥çš„å‚æ•°åœ¨æ‰€æœ‰å‚æ•°åˆ—è¡¨é‡Œçš„ç´¢å¼•æ˜¯3</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="weak"><a href="#weak" class="headerlink" title="weak"></a>weak</h3><ul>
<li>ä½œç”¨ï¼šå¯ä»¥å°†ä¸€ä¸ªå¼ºç¬¦å·è½¬æ¢ä¸ºå¼±ç¬¦å·</li>
<li>ä½¿ç”¨ï¼švoid _<em>attribute</em>(( weak )) func(void);</li>
<li>å¥½å¤„ï¼šå½“ä¸€ä¸ªå‡½æ•°è¢«å£°æ˜ä¸ºä¸€ä¸ªå¼±ç¬¦å·ä¹‹åï¼Œé“¾æ¥é˜¶æ®µæ‰¾ä¸åˆ°å‡½æ•°å®šä¹‰ä¸ä¼šæŠ¥é”™ä¼šå°†è¿™ä¸ªå¼±ç¬¦å·è®¾ç½®ä¸º0æˆ–è€…ç‰¹æ®Šå€¼ã€‚å½“ç¨‹åºè¿è¡Œæ—¶ï¼Œè°ƒç”¨è¿™ä¸ªè¿™ä¸ªå‡½æ•°è·³è½¬åˆ°é›¶åœ°å€æˆ–ç‰¹æ®Šåœ°å€æ‰ä¼šäº§ç”Ÿä¸€ä¸ªå†…å­˜é”™è¯¯</li>
</ul>
<h3 id="alias"><a href="#alias" class="headerlink" title="alias"></a>alias</h3><ul>
<li>ä½œç”¨ï¼šç»™å‡½æ•°å®šä¹‰ä¸€ä¸ªåˆ«å</li>
<li>ä½¿ç”¨ï¼švoid f() <strong>attribute</strong>((alias(â€œ_f â€œ)));</li>
<li>é€šå¸¸åœ¨linuxå†…æ ¸ä¸­weakå’Œaliasä¸€èµ·ä½¿ç”¨ï¼Œéšç€ç‰ˆæœ¬å‡çº§å¯ä»¥å°è£…æ—§åå­—èµ·ä¸€ä¸ªæ–°åå­—</li>
</ul>
<h2 id="å†…è”å‡½æ•°"><a href="#å†…è”å‡½æ•°" class="headerlink" title="å†…è”å‡½æ•°"></a>å†…è”å‡½æ•°</h2><ul>
<li><p>ç‰¹å¾ï¼šç”¨inlineä¿®é¥°çš„å‡½æ•°è¢«ç§°ä¸ºå†…è”å‡½æ•°ï¼Œé€šå¸¸ç”¨static æˆ– extern ä¿®é¥°</p>
</li>
<li><p>å†…è”å‡½æ•°ç‰¹å¾ï¼š</p>
</li>
<li><ul>
<li>å‡½æ•°ä½“ç§¯å°</li>
<li>å‡½æ•°ä½“å†…æ— æŒ‡é’ˆèµ‹å€¼ã€é€’å½’ã€å¾ªç¯ç­‰è¯­å¥</li>
<li>è°ƒç”¨é¢‘ç¹</li>
</ul>
</li>
<li><p>ä¸å®ç›¸æ¯”ï¼Œå†…è”å‡½æ•°çš„ä¼˜ç‚¹ï¼š</p>
</li>
<li><ul>
<li>å‚æ•°ç±»å‹æ£€æŸ¥ï¼Œæœ¬è´¨ä»ç„¶æ˜¯å‡½æ•°</li>
<li>ä¾¿äºè°ƒè¯•ã€‚å¯ä»¥å•æ­¥ã€æ–­ç‚¹è°ƒè¯•</li>
<li>æœ‰è¿”å›å€¼ï¼ˆå®ä¹Ÿå¯ä»¥ï¼Œè¯­å¥è¡¨è¾¾å¼ç»“æ„ï¼‰</li>
<li>æ¥å£å°è£…</li>
</ul>
</li>
<li><p>ä½¿ç”¨ï¼š</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// æ˜¾å¼å‘Šè¯‰ç¼–è¯‘å™¨ä¸è¦å±•å¼€</span></span><br><span class="line"><span class="type">static</span> <span class="keyword">inline</span> __attribute((noinline)) <span class="type">int</span> <span class="title function_">func</span><span class="params">()</span>;</span><br><span class="line"><span class="comment">// æ˜¾å¼å‘Šè¯‰ç¼–è¯‘å™¨è¦å†…è”å±•å¼€</span></span><br><span class="line"><span class="type">static</span> <span class="keyword">inline</span> __attribute((always_inline)) <span class="type">int</span> <span class="title function_">func</span><span class="params">()</span>;</span><br><span class="line"><span class="comment">// å¦åˆ™ç¼–è¯‘å™¨çš„è¡Œä¸ºä¸å›ºå®šï¼Œè€ƒè™‘è¯¸å¤šå› ç´ å†³å®šæ˜¯å¦å±•å¼€</span></span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h2 id="å†…å»ºå‡½æ•°"><a href="#å†…å»ºå‡½æ•°" class="headerlink" title="å†…å»ºå‡½æ•°"></a>å†…å»ºå‡½æ•°</h2><ul>
<li>å«ä¹‰ï¼šç¼–è¯‘å™¨å†…éƒ¨å®ç°çš„å‡½æ•°</li>
<li>ç‰¹å¾ï¼šé€šå¸¸ä»¥ __builtin å¼€å¤´</li>
<li>è¯´æ˜ï¼šæ²¡æœ‰æ–‡æ¡£ï¼Œå˜åŠ¨é¢‘ç¹ï¼Œä¸å»ºè®®åº”ç”¨ç¨‹åºå·¥ç¨‹å¸ˆä½¿ç”¨</li>
</ul>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//  __builtin_return_addressï¼ˆLEVELï¼‰    è¿”å›å½“å‰å‡½æ•°æˆ–è€…è°ƒç”¨è€…çš„è¿”å›åœ°å€</span></span><br><span class="line"><span class="comment">// LEVEL 0: è·å–å½“å‰å‡½æ•°è¿”å›åœ°å€</span></span><br><span class="line"><span class="comment">// LEVEL 1: è·å–ä¸Šä¸€çº§å‡½æ•°è¿”å›åœ°å€</span></span><br><span class="line"><span class="comment">// LEVEL 2: è·å–ä¸Šä¸¤çº§å‡½æ•°è¿”å›åœ°å€</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// __builtin_frame_address(LEVEL)        æŸ¥çœ‹å‡½æ•°çš„æ ˆå¸§åœ°å€</span></span><br><span class="line"><span class="comment">// LEVEL 0: è·å–å½“å‰å‡½æ•°æ ˆå¸§åœ°å€</span></span><br><span class="line"><span class="comment">// LEVEL 1: è·å–ä¸Šä¸€çº§å‡½æ•°æ ˆå¸§åœ°å€</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// __builtin_constant_p(n)               åˆ¤æ–­å‚æ•°nåœ¨ç¼–è¯‘æ—¶æ˜¯å¦æ˜¯å¸¸é‡ï¼Œæ˜¯å¸¸é‡è¿”å›1,å¦åˆ™0</span></span><br><span class="line"><span class="comment">// å†…æ ¸ä¸­åˆ¤æ–­å®çš„å‚æ•°æ˜¯å¦æ˜¯å¸¸æ•°ï¼Œåˆ™æœ‰æ›´ä¼˜åŒ–çš„å®ç°æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// __builtin_expect(exp,c)        </span></span><br><span class="line"><span class="comment">// å‘Šè¯‰ç¼–è¯‘å™¨å‚æ•°expçš„å€¼ä¸ºcçš„å¯èƒ½æ€§å¾ˆå¤§ï¼Œç”¨äºåˆ†æ”¯é¢„æµ‹ï¼Œå‚æ•°cä¸è¿”å›å€¼æ— å…³ï¼Œè¿”å›å€¼ä¸€å®šæ˜¯exp</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># <span class="keyword">define</span> likely(x) __builtin_expect(!!(x),1)) </span></span><br><span class="line"><span class="meta"># <span class="keyword">define</span> unlikely(x) __builtin_expect(!!(x),0)</span></span><br><span class="line"><span class="comment">// å‘Šè¯‰ç¼–è¯‘å™¨æŸä¸€ä¸ªåˆ†æ”¯å‘ç”Ÿçš„æ¦‚ç‡å¾ˆé«˜ï¼Œè‡ªå·±åšä¼˜åŒ–</span></span><br><span class="line"><span class="comment">// ä¸¤æ¬¡å–éæ˜¯ä¸ºäº†å°†å‚æ•°xè½¬æ¢ä¸ºboolç±»å‹ï¼Œä¸1/0æ¯”è¾ƒ</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="å¯å˜å‚æ•°å®"><a href="#å¯å˜å‚æ•°å®" class="headerlink" title="å¯å˜å‚æ•°å®"></a>å¯å˜å‚æ•°å®</h2><ul>
<li>ç”¨ â€¦ è¡¨ç¤ºå˜å‚åˆ—è¡¨ï¼Œå˜å‚åˆ—è¡¨ç”±ä¸ç¡®å®šçš„å‚æ•°ç»„æˆï¼Œç”¨  <strong>VA_ARGS</strong>  æ ‡è¯†ç¬¦è¡¨ç¤ºå˜å‚å‡½æ•°åˆ—è¡¨</li>
<li>C99è§„å®šï¼Œå¯ä»¥ä½¿ç”¨ argsâ€¦  è¡¨ç¤ºå˜å‚åˆ—è¡¨ï¼Œç”¨ args ä»£è¡¨å˜å‚åˆ—è¡¨å³å¯</li>
<li>å®è¿æ¥ç¬¦  ##  çš„ä½œç”¨æ˜¯è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²</li>
<li>åœ¨å®šä¹‰å®çš„æ—¶å€™é€šå¸¸ä½¿ç”¨ do { } while(0);çš„ç»“æ„ï¼Œè¿™æ ·æ˜¯ä¸ºäº†é˜²æ­¢å®åœ¨é€‰æ‹©ã€æ¡ç­‰åˆ†æ”¯è¯­å¥ä¸­å±•å¼€åï¼Œäº§ç”Ÿå®æ­§ä¹‰</li>
</ul>
<p>ä¸¤ç§æ–¹æ³•å®ç°è‡ªå®šä¹‰ç­‰çº§å®æ‰“å°ï¼š<a href="https://github.com/yangLieee/codebackup/blob/master/book_%E5%B5%8C%E5%85%A5%E5%BC%8FC%E8%AF%AD%E8%A8%80%E8%87%AA%E6%88%91%E4%BF%AE%E5%85%BB/mlog.h">click here</a></p>
<h2 id="Ubooté•œåƒè‡ªå¤åˆ¶"><a href="#Ubooté•œåƒè‡ªå¤åˆ¶" class="headerlink" title="Ubooté•œåƒè‡ªå¤åˆ¶"></a>Ubooté•œåƒè‡ªå¤åˆ¶</h2><ul>
<li>ä½œç”¨ï¼šåŠ è½½linuxå†…æ ¸é•œåƒåˆ°å†…å­˜ï¼Œç»™å†…æ ¸ä¼ é€’å¯åŠ¨å‚æ•°ï¼Œç„¶åå¼•å¯¼linuxæ“ä½œç³»ç»Ÿå¯åŠ¨</li>
<li>è¿‡ç¨‹ï¼šé€šè¿‡å®šä¹‰ä¸¤ä¸ªé›¶é•¿åº¦æ•°ç»„ï¼Œåˆ†åˆ«è¡¨ç¤ºè¦å¤åˆ¶è‡ªèº«é•œåƒçš„èµ·å§‹åœ°å€å’Œç»“æŸåœ°å€ï¼Œå¹¶æ”¾åœ¨ç‰¹å®šçš„sectionä¸Šï¼Œè€Œè¿™ä¸¤ä¸ªsectionåˆ†åˆ«æ”¾åœ¨ä»£ç æ®µå‰å’Œæ•°æ®æ®µåã€‚æ•°ç»„åæœ¬èº«å°±ä»£è¡¨ä¸€ä¸ªåœ°å€ï¼Œé€šè¿‡arm ldrä¼ªæŒ‡ä»¤ç›´æ¥è·å–è¦å¤åˆ¶çš„é•œåƒé¦–åœ°å€ä¿å­˜åœ¨æŸä¸ªå¯„å­˜å™¨ä¸­ï¼Œä»flashå¤åˆ¶è‡ªèº«é•œåƒåˆ°å†…å­˜ä¸­ï¼Œç„¶åé‡å®šä½ï¼Œæœ€ç»ˆè·³è½¬åˆ°å†…å­˜ä¸­æ‰§è¡Œã€‚ï¼ˆè‡ªä¸¾ï¼‰</li>
</ul>
<h1 id="Cè¯­è¨€é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³ï¼ˆå…«ï¼‰"><a href="#Cè¯­è¨€é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³ï¼ˆå…«ï¼‰" class="headerlink" title="Cè¯­è¨€é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³ï¼ˆå…«ï¼‰"></a>Cè¯­è¨€é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³ï¼ˆå…«ï¼‰</h1><h2 id="ä»£ç å¤ç”¨ä¸åˆ†å±‚"><a href="#ä»£ç å¤ç”¨ä¸åˆ†å±‚" class="headerlink" title="ä»£ç å¤ç”¨ä¸åˆ†å±‚"></a>ä»£ç å¤ç”¨ä¸åˆ†å±‚</h2><p>å¤ç”¨ï¼š</p>
<ul>
<li>å‡½æ•°çº§å¤ç”¨</li>
<li>åº“çº§å¤ç”¨</li>
<li>æ¡†æ¶çº§å¤ç”¨</li>
<li>æ“ä½œç³»ç»Ÿçº§å¤ç”¨</li>
</ul>
<p>åˆ†å±‚ï¼š</p>
<ul>
<li>åº”ç”¨å±‚</li>
<li>Frameworkå±‚</li>
<li>åº“</li>
<li>Linuxå†…æ ¸</li>
</ul>
<h2 id="é¢å‘å¯¹è±¡ä¸»è¦ç‰¹å¾"><a href="#é¢å‘å¯¹è±¡ä¸»è¦ç‰¹å¾" class="headerlink" title="é¢å‘å¯¹è±¡ä¸»è¦ç‰¹å¾"></a>é¢å‘å¯¹è±¡ä¸»è¦ç‰¹å¾</h2><p>ç»§æ‰¿ã€å¤šæ€ã€çº¯è™šå‡½æ•°ç‰¹å¾ï¼ˆæŠ½è±¡ç±»ï¼‰</p>
<h1 id="æ¨¡å—åŒ–ï¼ˆä¹ï¼‰"><a href="#æ¨¡å—åŒ–ï¼ˆä¹ï¼‰" class="headerlink" title="æ¨¡å—åŒ–ï¼ˆä¹ï¼‰"></a>æ¨¡å—åŒ–ï¼ˆä¹ï¼‰</h1><p>æ¨¡å—åŒ–çš„æ€æƒ³å†…æ ¸æ˜¯åˆ†è€Œæ²»ä¹‹ï¼Œé‡ç‚¹åœ¨äºæŠ½è±¡çš„å¯¹è±¡ä¹‹é—´çš„å…³è”ï¼Œè€Œä¸æ˜¯å†…å®¹</p>
<p>é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ€æƒ³ä¸»è¦æ˜¯ä¸ºäº†ä»£ç å¤ç”¨ï¼Œé‡ç‚¹åœ¨äºå†…å®¹çš„å®ç°</p>
]]></content>
      <categories>
        <category>Reading</category>
      </categories>
      <tags>
        <tag>è¯»ä¹¦ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Šæ›¾å›½è—©ä¼ ã€‹</title>
    <url>/2022/12/11/Reading/%E6%9B%BE%E5%9B%BD%E8%97%A9%E4%BC%A0/</url>
    <content><![CDATA[<p><img src="/images/reading/zengGuoFan.jpg" alt="img"></p>
<p>è¿‘å‡ å¹´ï¼Œæ›¾å›½è—©å€å—æˆåŠŸå­¦çš„æ¨å´‡ï¼Œå…³äºä»–çš„ä¹¦ä¹Ÿæ˜¯é“ºå¤©ç›–åœ°ã€‚å¶ç„¶é—´çœ‹åˆ°è€ä¿ï¼ˆä¿æ•æ´ªï¼‰åœ¨æ¨èè¿™æœ¬ä¹¦ï¼Œå¸¦ç€æµ“åšçš„å…´è¶£å¼€å§‹å¯¹è¿™æœ¬ä¹¦çš„æ¢ç´¢ã€‚ã€Šæ›¾å›½è—©ä¼ ã€‹æ˜¯ä¸­å›½çŸ¥åå†å²å­¦å®¶å¼ å®æ°å…ˆç”Ÿçš„ä½œå“ï¼Œé™¤äº†è¿™æœ¬ã€Šæ›¾å›½è—©ä¼ ã€‹ä»–è¿˜è‘—æœ‰ã€Šæ›¾å›½è—©çš„æ­£é¢ä¸ä¾§é¢ã€‹ã€Šé¥¥é¥¿çš„ç››ä¸–ã€‹ã€Šå¤§æ˜ç‹æœçš„ä¸ƒå¼ é¢å­”ã€‹ç­‰ç­‰ã€‚æ•´æœ¬ä¹¦é€šè¯»ä¸‹æ¥ï¼Œä½œè€…æŒ‰ç…§æ—¶é—´é¡ºåºï¼Œä»¥æ›¾å›½è—©æ—¥è®°åŠå„ç§å†å²å‚è€ƒæ–‡çŒ®ä¸ºå²å®åŸºç¡€è¿›è¡Œäº†æ·±åº¦è§£è¯»ï¼Œå°†æ›¾å›½è—©å›½ä¹‹é‡è‡£çš„å½¢è±¡ç«‹ä½“çš„å±•ç°åœ¨äº†æˆ‘ä»¬çš„çœ¼å‰ã€‚</p>
<p>æœ¬ç¯‡ä¹Ÿæ— æ‰€è°“æ˜¯è¯»ä¹¦ç¬”è®°ã€è¯»åæ„Ÿäº¦æˆ–è€…æ˜¯ä¹¦è¯„äº†ï¼Œä¾¿æƒ³åˆ°å“ªé‡Œå†™åˆ°å“ªé‡Œå§ã€‚</p>
<h1 id="æ•…äº‹è‡ªè¿°"><a href="#æ•…äº‹è‡ªè¿°" class="headerlink" title="æ•…äº‹è‡ªè¿°"></a>æ•…äº‹è‡ªè¿°</h1><p>æ›¾å›½è—©å†ä»»æ™šæ¸…å››æœï¼Œç”Ÿäºå˜‰åº†ã€æ–‡äºé“å…‰ã€æ­¦äºå’¸ä¸°ã€å’äºåŒæ²»ï¼Œæˆ‘è¿™é‡Œçš„æ–‡ã€æ­¦åˆ†åˆ«æŒ‡å…¶äº¬å®˜æ—¶ä»£å’Œé¢†å¯¼æ¹˜å†›é˜¶æ®µã€‚</p>
<p>è€æ›¾å®¶æœ¬æ˜¯ä¸€ä¸ªæ®·å®çš„å°åœ°ä¸»å®¶åº­ï¼Œå¥ˆä½•ç¥–åŸä¸€ç›´æ²¡å†’é’çƒŸï¼Œç¥–è¾ˆä¸Šæ²¡æœ‰ä¸€ä¸ªè¯»ä¹¦äººã€‚åœ¨çˆ·çˆ·æ›¾ç‰å±çš„å½±å“ä¸‹ï¼Œå°å°çš„æ›¾å­åŸï¼ˆè¯¥æ—¶æœŸæ›¾å›½è—©æœªæ”¹åï¼‰å¼€å¯äº†ä»–çš„è¯»ä¹¦ç”Ÿæ¶¯ã€‚å±¡æˆ˜å±¡è´¥ã€å±¡è´¥å±¡æˆ˜ï¼Œè½æ¦œå…­æ¬¡ä¹‹åï¼Œé™¢è¯•ä¸­ç§€æ‰ã€ä¹¡è¯•ä¸­ä¸¾äººã€ä¼šè¯•ä¸­è¿›å£«ï¼Œä¹Ÿå°±æ˜¯åœ¨æ­¤æ­£å¼æ›´åä¸ºæ›¾å›½è—©ï¼Œå¯„ä»¥â€œå›½ä¹‹è—©ç¯±â€œä¹‹æ„ï¼Œæ­¤æ—¶ä»–æ‰äºŒåå…«å²ã€‚åœ¨æ­¤ä¹‹ååœ¨äº¬åå¹´ä¸­ï¼Œæ›¾å›½è—©ç«‹ä¸‹å­¦åšåœ£äººçš„å®æ„¿å¹¶åšéŸ§ä¸æ‹”åœ°æ²¿ç€è¿™æ¡ä»•é€”ä¹‹é“å‰è¿›ï¼Œæ­¥æ­¥å‡è¿åˆ°äºŒå“å®˜ä½ã€‚åå¹´ä¸ƒè¿ï¼Œè¿è·ƒåçº§ã€‚ç›´è‡³1852å¹´å……ä»»æ±Ÿè¥¿ä¹¡è¯•æ­£è€ƒå®˜æ‰ç»“æŸäº†ä»–çš„äº¬å®˜ç”Ÿæ¶¯ã€‚</p>
<p>åœ¨æ›¾å›½è—©æ˜¥é£å¾—æ„ä¹‹é™…ï¼Œå´çªç„¶æ”¶åˆ°æ¯äº²å»ä¸–çš„å™©è€—ï¼Œè‡´ä½¿ä»–ä¸å¾—ä¸æ”¹å˜è‡ªå·±çš„è¡Œç¨‹å›å®¶å®ˆå­ã€‚æ­¤æ—¶å¤ªå¹³å¤©å›½è¿åŠ¨è½°è½°çƒˆçƒˆå¸­å·åŠä¸ªä¸­å›½ï¼Œè€Œæ¸…å†›ä¸»åŠ›å…«æ——å’Œç»¿è¥æ—©å·²è…è´¥ä¸å ªï¼Œå’¸ä¸°çš‡å¸ä¸å¾—ä¸é¢å¸ƒå…´åŠå›¢ç»ƒçš„è¯ä¹¦ã€‚æ›¾å›½è—©èµ·åˆå†…å¿ƒæ˜¯æ‹’ç»çš„ï¼Œä½†æ˜¯å¿ƒç³»å›½å®¶çš„ä»–æœ€ç»ˆè¿˜æ˜¯å†³å®šåº”è¯ï¼Œä»¥å›¢ä¸ºè¡¨ï¼Œä»¥å†›ä¸ºé‡Œç»„å»ºèµ·äº†æ¹˜å†›ï¼Œæ®Šä¸çŸ¥è¿™æ”¯å†›é˜Ÿæˆäº†æ—¥åæŠµæŠ—å¤ªå¹³å†›çš„ä¸»åŠ›ã€‚æ²¡æœ‰ä»»ä½•å†›äº‹ç»éªŒã€åˆæ¥ä¹åˆ°å†åŠ ä¸Šæ›¾å›½è—©æ­¤æ—¶ç›´ç‡çš„æ€§æ ¼ç‰¹å¾ï¼Œç»„å»ºä¸€æ”¯åƒæ ·ä¸”æœ‰æˆ˜æ–—åŠ›çš„å†›é˜Ÿçš„éš¾åº¦å¯æƒ³è€ŒçŸ¥ï¼Œå…‹æœé‡é‡å›°éš¾æ¹˜å†›ç®—æ˜¯å»ºç«‹èµ·æ¥äº†ã€‚æŠ±ç€é¦–æˆ˜å¿…èƒœçš„å¿ƒç†æ›¾å›½è—©å†³å®šå‡ºå…µé–æ¸¯ï¼Œæœªæ›¾å¯çŸ¥è¿æ¥ä¸€åœºå¤§è´¥ï¼Œè¿™ä¹Ÿè®©ä»–çš„ä¿¡å¿ƒè·Œè½è°·åº•ä¸€åº¦è·³æ±Ÿè‡ªæ€ï¼Œå¹¸è¢«æ•‘ä¸‹ã€‚éšåå¤§å¤§å°å°æˆ˜æ–—ç»å†æ— æ•°ï¼Œæ¹˜æ½­å¤§æ·ã€ä¹æ±Ÿå¤§è´¥â€¦â€¦ 1857å¹´çˆ¶äº²å»ä¸–ï¼Œä»–å‘çš‡å¸è¯·æ±‚å›å®¶å¥”ä¸§ä¸‰ä¸ªæœˆï¼Œæœªæ›¾æƒ³å†æƒ³å¤å‡ºå´è¢«çš‡å¸è§£é™¤äº†å…µæƒã€‚</p>
<p>å¡ç¿å¤±é©¬ç„‰çŸ¥éç¦ï¼Ÿä¹Ÿæ­£æ˜¯æ¥ä¸‹æ¥ä¸¤å¹´çš„è›°ä¼è®©æ›¾å›½è—©å®Œæˆäº†è„±èƒæ¢éª¨çš„å˜åŒ–ï¼Œä»–å¼€å§‹å˜å¾—é€šäººæƒ…ä¸–æ•…ï¼Œé€‚åº”æ™šæ¸…å®˜åœºçš„ç¯å¢ƒï¼Œä½†é¢å¯¹è‡ªå·±æ—¶ä»ç„¶é€‰æ‹©åšåœ£äººã€‚è¶ç€å¤ªå¹³å†›å†…è®§çŸ³è¾¾å¼€çš„å‡ºèµ°ï¼Œå¥½å…„å¼Ÿèƒ¡æ—ç¿¼ç»™æ›¾å›½è—©äº‰å–æ¥äº†å†åº¦å‡ºå±±çš„æœºä¼šï¼Œä¹‹åä¸¤äººè”æ‰‹æ”»å…‹äº†å®‰åº†ï¼ŒæœŸé—´ä½•æ¡‚æ¸…å¼ƒåŸé€ƒè·‘ä¹Ÿæˆå°±äº†æ›¾å›½è—©å¾—åˆ°äº†æ¢¦å¯ä»¥æ±‚çš„ä¸¤æ±Ÿæ€»ç£çš„èŒä½ã€‚æ°´åˆ°æ¸ æˆåœ°1864å¹´æ­£æœˆï¼Œæ”»ç ´å¤©äº¬ï¼Œç»“æŸå›ä¹±ã€‚</p>
<p>æ­¤æ—¶æ›¾å›½è—©ä»»ä¸¤æ±Ÿæ€»ç£ï¼Œåé¢åº”è¯¥å°±æ˜¯è¢«å¤§ä¼—æ‰€ç†ŸçŸ¥çš„éƒ¨åˆ†â€”â€”ä¸»åŠæ´‹åŠ¡ã€‚é¦–å…ˆä»–å’Œè‡ªå·±çš„æ¥ç­äººæé¸¿ç« è”æ‰‹å‰¿ç­äº†åŒ—æ–¹é»„æ·®ä¸€å¸¦çš„æ»å†›èµ·ä¹‰ï¼Œéšåä¾¿æ˜¯å…´åŠæ´‹åŠ¡ï¼Œå»ºç«‹å®‰åº†å†›æ¢°æ‰€ã€æ±Ÿå—åˆ¶é€ æ€»å±€ï¼Œç¿»è¯‘å¤§é‡å¤–æ–‡ä¹¦ç±ç­‰ç­‰ã€‚1868å¹´å‡ä»»ç›´éš¶æ€»ç£å¤„ç†å®Œå¤©æ´¥æ•™æ¡ˆäº‹ä»¶å› å¤‡å—æŒ‡è´£å†æ¬¡æ‹…ä»»ä¸¤æ±Ÿæ€»ç£ï¼Œå››å¹´åä¸­å›½ä¼ ç»Ÿæ–‡åŒ–æœ€åä¸€ä¸ªå¶åƒæ›¾å›½è—©å»ä¸–ã€‚</p>
<h1 id="æ„Ÿæ‚Ÿ"><a href="#æ„Ÿæ‚Ÿ" class="headerlink" title="æ„Ÿæ‚Ÿ"></a>æ„Ÿæ‚Ÿ</h1><h2 id="è¶ŠåŠªåŠ›è¶Šå¹¸è¿"><a href="#è¶ŠåŠªåŠ›è¶Šå¹¸è¿" class="headerlink" title="è¶ŠåŠªåŠ›è¶Šå¹¸è¿"></a>è¶ŠåŠªåŠ›è¶Šå¹¸è¿</h2><p>æ›¾å›½è—©ä¸èƒ½è¯´æ˜¯å¤©èµ„å“è¶Šçš„äººï¼Œä»ä»–è¯»ä¹¦ã€æ²»å†›ç»å†ä¸éš¾çœ‹å‡ºè¿™ä¸€ç‚¹ã€‚å…³äºè¿™ä¸€ç‚¹è¿˜æœ‰ä¸€ä¸ªå¹¿ä¸ºæµä¼ çš„å°æ•…äº‹ï¼Œä¸€æ—¥é»„æ˜ï¼Œä»–åœ¨ä¹¦æ¡Œå‰èƒŒè¯µã€Šå²³é˜³æ¥¼è®°ã€‹ï¼Œä¸€ä¸ªå°å·å·å·æ½œå…¥ä»–å®¶çˆ¬åˆ°æˆ¿æ¢ä¸Šï¼Œç­‰å¾…è¿™ä¸€å®¶äººéƒ½å…¥ç¡åå·ä¸œè¥¿ã€‚å¥ˆä½•å°å·ç¡äº†å¥½å‡ è§‰ï¼Œæ›¾å›½è—©è¿˜æ²¡æœ‰èƒŒä¸‹æ¥ï¼Œå°å·æ°”æ€¥è´¥åè·³ä¸‹æˆ¿æ¢è¯´ï¼šå°±ä½ è¿™ä¸ªç¬¨æ ·è¯»ä»€ä¹ˆä¹¦ï¼Ÿéšåä»–å®Œå®Œæ•´æ•´èƒŒäº†ä¸€éï¼Œç”©é—¨è€Œå»ï¼Œç•™ä¸‹çš„æ›¾å›½è—©ç›®çªå£å‘†ä¸€äººå‡Œä¹±ã€‚çœŸå®æ€§æ— ä»è€ƒè¯ï¼Œä½†æ˜¯ç”±æ­¤å¯è§ä»–æ˜¯çœŸæŒºç¬¨çš„ï¼Œè€Œä»–æœªæ¥çš„æˆå°±æ›´å¤šæ¥è‡ªäºåŠªåŠ›ã€‚ä»–çš„äººç”Ÿå“²å­¦ä¾¿æ˜¯â€å°šæ‹™â€œï¼Œå´‡å°šç¬¨æ‹™ã€‚æ›¾å›½è—©æ›¾è¯´ï¼šâ€œå¤©ä¸‹ä¹‹è‡³æ‹™ï¼Œèƒ½èƒœå¤©ä¸‹ä¹‹ä¹‹å·§â€ã€‚ä¸€å‘³çš„è¿½æ±‚é«˜æ•ˆç‡è€Œä¸æ‹©æ‰‹æ®µã€æŠ•æœºå–å·§ç»ˆä¸èƒ½æˆå¤§æ‰ã€‚å¤©èµ‹ä¸å¤Ÿï¼ŒåŠªåŠ›æ¥å‡‘ï¼Œè€Œè¶ŠåŠªåŠ›æ‰ä¼šè¶Šå¹¸è¿ã€‚</p>
<h2 id="å†å²æ€»æ˜¯æœ‰è¿¹å¯å¾ª"><a href="#å†å²æ€»æ˜¯æœ‰è¿¹å¯å¾ª" class="headerlink" title="å†å²æ€»æ˜¯æœ‰è¿¹å¯å¾ª"></a>å†å²æ€»æ˜¯æœ‰è¿¹å¯å¾ª</h2><p>åœ¨æœ¬ä¹¦ä¸­æ›¾æœ‰è¿‡è¿™æ ·ä¸¤ä¸ªç‰‡æ®µã€‚</p>
<p>å…¶ä¸€ï¼Œåœ¨æ›¾å›½è—©å®ˆåˆ¶æœŸé—´å¤§å½»å¤§æ‚Ÿå®Œæˆèœ•å˜ï¼Œä»–çªç„¶æ„è¯†åˆ°æ‰€è°“â€å¤©ä¸‹ä¹‹è‡³æŸ”ï¼Œé©°éª‹å¤©ä¸‹ä¹‹å¿—åšâ€œã€â€å¤§æŸ”éæŸ”ï¼Œè‡³åˆšæ— åˆšâ€œçœŸæ­£çš„å«ä¹‰ã€‚è¡Œäº‹è¿‡äºæ–¹åˆšè€…ï¼Œè¡¨é¢ä¼¼ä¹æ˜¯å¼ºè€…ï¼Œå®é™…ä¸Šç¡®æ˜¯å¼±è€…ã€‚è€Œä»–ä¹‹å‰çœ‹ä¸èµ·çš„éº»æœ¨ã€åœ†æ»‘ã€æœºè¯ˆæœ‰æ—¶å€™æ‰æ˜¯è§£å†³é—®é¢˜çš„æœ€å¥½æ–¹æ³•ã€‚</p>
<p>å…¶äºŒï¼Œåœ¨æ”»æ‰“å®‰åº†æœŸé—´ï¼Œèƒ¡æ—ç¿¼åˆ›é€ å‡ºâ€å›´åŸæ‰“æ´â€œçš„æˆ˜æœ¯ï¼Œç»™åœ¨æ¹–åŒ—ä½œæˆ˜çš„æ¹˜å†›ç»Ÿå¸…å¤šéš†é˜¿çš„ä¿¡ä¸­è¯´é“ï¼Œæˆ˜äº‰çš„ç›®çš„ä¸åœ¨äºä¸€åŸä¸€æ± çš„å¾—å¤±ï¼Œè€Œåœ¨äºæ¶ˆç­å¯¹æ–¹çš„æœ‰ç”ŸåŠ›é‡ã€‚</p>
<p>è¯»åˆ°ç¬¬ä¸€ä¸ªç‰‡æ®µï¼Œè„‘æµ·ä¸­ä¸ç”±å¾—æµ®ç°å‡ºè€å­â€ä»¥æŸ”å…‹åˆšâ€œçš„æ€æƒ³ï¼Œè€Œæ›¾å›½è—©å¤§å½»å¤§æ‚Ÿåçš„æ€æƒ³ä½•å°ä¸æ˜¯å¯¹å…ˆè´¤æ€æƒ³çš„è¿›ä¸€æ­¥é˜è¿°å’Œå‡åã€‚è€Œè¯»åˆ°ç¬¬äºŒä¸ªç‰‡æ®µæ—¶ï¼Œè„‘æµ·é‡Œæµ®ç°çš„æ˜¯è§£æ”¾æˆ˜äº‰æœŸé—´ï¼Œæ¯›ä¸»å¸­åœ¨å»¶å®‰é¢å¯¹èƒ¡å®—å—äºŒåäº”ä¸‡å¤§å†›ä¸»åŠ¨æ’¤ç¦»ï¼Œå†³å®šâ€æ‹¿ä¸€ä¸ªå»¶å®‰æ¢å–ä¸€ä¸ªå…¨ä¸­å›½â€œã€‚å½“æ—¶ä¾¿æå‡ºï¼šå­˜åœ°å¤±äººï¼Œäººåœ°çš†å¤±ï¼›å­˜äººå¤±åœ°ï¼Œäººåœ°çš†å­˜ã€‚è¿™ä¸èƒ¡æ—ç¿¼è®²è¿°çš„æˆ˜äº‰ç›®çš„å¯è°“æ˜¯å¦‚å‡ºä¸€è¾™ã€‚</p>
<h2 id="å°½äººäº‹ï¼Œå¬å¤©å‘½"><a href="#å°½äººäº‹ï¼Œå¬å¤©å‘½" class="headerlink" title="å°½äººäº‹ï¼Œå¬å¤©å‘½"></a>å°½äººäº‹ï¼Œå¬å¤©å‘½</h2><p>åœ¨æ›¾å›½è—©èµ‹é—²åœ¨å®¶ä¸ºçˆ¶äº²æ²»ä¸§ä¸‰ä¸ªæœˆæœŸæ»¡ä¹‹æ—¶ï¼Œä»–å‘çš‡å¸ç”³è¯·ç»§ç»­å®ˆåˆ¶ä¸‰å¹´ï¼Œå¤ªå¹³å¤©å›½æœªç­çš‡å¸å½“ç„¶ä¸ä¼šæ‰¹å‡†è¿™ä¸ªè¯·æ±‚ã€‚äºæ˜¯æ›¾å›½è—©è¯´å‡ºäº†å®æƒ…ï¼šå“­è¯‰äº†ä¸€ç•ªè‡ªå·±çš„å§”å±ˆå’Œå›°éš¾ï¼Œå¹¶å¯¹çš‡å¸è¯´å¦‚æœä½ ä¸ç»™æˆ‘ç£æŠšå¤§æƒï¼Œæˆ‘å°±åªèƒ½åœ¨ç±ç»ˆåˆ¶ã€‚è¿™æ˜æ˜¾æ˜¯èµ¤è£¸è£¸çš„è¦æŒŸï¼Œå‡ºä¹æ›¾å›½è—©çš„é¢„æ–™ï¼Œå’¸ä¸°çš‡å¸å±…ç„¶ç­”åº”äº†ä»–çš„å®ˆåˆ¶è¯·æ±‚ï¼Œå½»å½»åº•åº•æ²¡æ”¶äº†å†›æƒã€‚è€Œåœ¨ä¸å¤ªå¹³å¤©å›½çš„å†³æˆ˜å½“ä¸­ï¼Œä½•æ¡‚æ¸…å¼ƒåŸé€ƒè·‘ï¼Œæ›¾å›½è—©æ²¡æœ‰ç´¢è¦çš‡å¸ä¾¿æŠŠä½•æ¡‚æ¸…ä¸¤æ±Ÿæ€»ç£èŒä½ç»™åˆ°äº†ä»–ã€‚</p>
<p>ä¸€æ—¦åœ¨åšä¸€ä»¶äº‹æƒ…æ—¶æœ‰äº†æå¼ºçš„åŠŸåˆ©å¿ƒï¼Œå®ç°çš„è¿‡ç¨‹å¯èƒ½å°†ä¸æ‹©æ‰‹æ®µï¼Œç›®æ ‡ä¹Ÿå¯èƒ½ä¼šèƒŒé“è€Œé©°ï¼Œæœ€ç»ˆä¸€å®šä¸ä¼šè¾¾åˆ°æœ€å®Œç¾çš„çŠ¶æ€ã€‚è€Œæœ€å¥½çš„æ–¹å¼åˆ™æ˜¯åšåˆ°â€å°½äººäº‹å¬å¤©å‘½â€œï¼Œå°½å¿ƒå°½åŠ›çš„å»åšäº‹æƒ…ï¼Œè€Œèƒ½å¦æˆåŠŸï¼Œåˆ™éœ€è¦é¡ºå…¶è‡ªç„¶ã€‚</p>
<h2 id="è„šè¸å®åœ°ï¼Œå¸¸äºåæ€"><a href="#è„šè¸å®åœ°ï¼Œå¸¸äºåæ€" class="headerlink" title="è„šè¸å®åœ°ï¼Œå¸¸äºåæ€"></a>è„šè¸å®åœ°ï¼Œå¸¸äºåæ€</h2><p>åœ¨å…«æ——å…µå’Œç»¿è¥å…µæˆ˜æ–—åŠ›å¦‚æ­¤ä½ä¸‹çš„æƒ…å†µä¸‹ï¼Œä¸€ä»‹ä¹¦ç”Ÿæ›¾å›½è—©ä¸ºä»€ä¹ˆåˆ›å»ºå‡ºæˆ˜æ–—åŠ›æ»¡æ»¡çš„æ¹˜å†›å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯åæ€çš„åŠ›é‡ï¼Œä»–è¿½æ ¹æº¯æºæ‰¾åˆ°å…«æ——ç»¿è¥çœŸæ­£ç—‡ç»“æ‰€åœ¨å¹¶åœ¨æ¹˜å†›ä¸­åŠæ—¶è°ƒæ•´å®ŒæˆåŠŸä¸šã€‚è€Œå»ºç«‹èµ·æ¥çš„æ¹˜å†›åœ¨æˆ˜æ–—æ—¶å¥‰è¡Œçš„æ—¶æ›¾å›½è—©â€ç»“ç¡¬å¯¨ï¼Œæ‰“å‘†ä»—â€œçš„æˆ˜æœ¯ï¼Œå…·ä½“æ¥è®²å°±æ˜¯â€ä»¥é™åˆ¶åŠ¨ï¼Œåå®¢ä¸ºä¸»â€œï¼ŒæŠŠè‡ªå·±çš„è¥å¯¨ç›˜ç»“å®ç­‰å¾…æ•Œäººå‰æ¥è¿›æ”»ï¼Œç­‰å¾…ä»–ä»¬éœ²å‡ºé©¬è„šæ¹˜å†›å†åæ”»ï¼Œè¿™ä¾¿æ˜¯æ•´ä¸ªé€»è¾‘ã€‚</p>
<p>ç»†ç»†çœ‹ä¸‹æ¥æ›¾å›½è—©çš„æˆ˜æœ¯ä¸€å®šä¸æ˜¯æœ€å…ˆè¿›çš„ä½†ä¸€å®šæ˜¯æœ€ç¨³å¦¥çš„ã€‚ä¸è®ºèµ°å¤šè¿œçš„è·¯ï¼Œä½†ä¸€å®šè¦ç¡®ä¿èµ°è¿‡çš„æ¯ä¸€æ­¥è·¯éƒ½æœ‰è‡ªå·±çš„è„šå°ã€‚</p>
<h2 id="ä¿æŒå¿§æ‚£æ„è¯†"><a href="#ä¿æŒå¿§æ‚£æ„è¯†" class="headerlink" title="ä¿æŒå¿§æ‚£æ„è¯†"></a>ä¿æŒå¿§æ‚£æ„è¯†</h2><p>åœ¨å¤ªå¹³å¤©å›½è¿åŠ¨è¢«å¹³å®šä¹‹åï¼Œæ¹˜å†›æ— ç–‘æˆäº†æ•´ä¸ªæ¸…ç‹æœæœ€å¼ºå¤§çš„æˆ˜æ–—åŠ›ã€‚æ›¾å›½è—©ç†Ÿè¯»å²ä¹¦ï¼Œã€Šæ˜“ä¼ ã€‹ä¸­è®²ï¼šæ—¥ä¸­åˆ™æ˜ƒï¼Œæœˆç›ˆåˆ™äºã€‚è¶Šæ˜¯è¾‰ç…Œçš„æ—¶å€™è¶Šåº”è¯¥ä¿æŒæ¸…é†’çš„å¤´è„‘ï¼Œæ‡‚å¾—è¶‹ç¦é¿ç¥¸ã€‚ä»–æ€ä¹ˆèƒ½ä¸æ˜ç™½æœå»·çš„å¿ƒæ€å‘¢ï¼Œä¸ºäº†ä¸è®©æœå»·çŒœå¿Œå†³å®šè‡ªå‰ªç¾½æ¯›è£æ’¤æ¹˜å†›ã€‚ä¸æ­¤åŒæ—¶ï¼Œä»–é»˜é»˜çš„å°†éƒ¨åˆ†ä¸»åŠ›äº¤ç»™æé¸¿ç« çš„æ·®å†›å½“ä¸­ã€‚è¿™ä¸€æ‰‹â€è£æ¹˜ç•™æ·®â€œçš„æ“ä½œå¯è°“çœŸçš„æ˜¯ç²—ä¸­æœ‰ç»†ï¼Œè¿™ä¹Ÿä¿è¯äº†å®ƒåé¢å®˜åœºç”Ÿæ¶¯çš„å»¶ç»­ã€‚</p>
<h2 id="è¯»ä¹¦æ°¸è¿œå¯ä»¥ä¿æŒç«äº‰åŠ›"><a href="#è¯»ä¹¦æ°¸è¿œå¯ä»¥ä¿æŒç«äº‰åŠ›" class="headerlink" title="è¯»ä¹¦æ°¸è¿œå¯ä»¥ä¿æŒç«äº‰åŠ›"></a>è¯»ä¹¦æ°¸è¿œå¯ä»¥ä¿æŒç«äº‰åŠ›</h2><p>é€‰å£«äººï¼Œé¢†å±±å†œã€‚æ¹˜å†›å¤§éƒ¨åˆ†äººéƒ½æ˜¯å±±å†œå³å†œæ°‘å‡ºèº«ã€‚ä½†æ˜¯æ¹˜å†›é‡è§†æ”¿æ²»æ•™è‚²ï¼Œç½—æ³½å—éƒ¨åˆ™ç´¢æ€§ç™½å¤©æ‰“ä»—ï¼Œæ™šä¸ŠæŠŠéƒ¨ä¸‹å¬é›†åˆ°ä¸€èµ·ï¼Œæ•™ä»–ä»¬è¯»ä¹¦ï¼Œå­¦ä¹ ç†å­¦ã€‚æµæ°“ä¸å¯æ€•ï¼Œå°±æ€•æµæ°“æœ‰æ–‡åŒ–ï¼Œè¿™å¥è¯å¯èƒ½ä¸æ˜¯å¾ˆæ°å½“ï¼Œä½†æ˜¯æœ‰äº†çŸ¥è¯†çš„å†œæ°‘éƒ¨é˜Ÿæˆ˜æ–—åŠ›ã€æˆ˜æ–—ç´ å…»æå‡äº†å¯ä¸æ˜¯ä¸€ä¸ªç­‰çº§ã€‚</p>
<h2 id="æ¡ƒææ»¡å¤©ä¸‹"><a href="#æ¡ƒææ»¡å¤©ä¸‹" class="headerlink" title="æ¡ƒææ»¡å¤©ä¸‹"></a>æ¡ƒææ»¡å¤©ä¸‹</h2><p>è¿™ä¸€é¡¹ä¸èƒ½ç®—ä½œæ˜¯æ„Ÿæ‚Ÿï¼Œç§°å¾—ä¸Šæ˜¯æ›¾å›½è—©çš„æˆå°±ã€‚æ™šæ¸…å¤§å¤šæ•°é‡è‡£éƒ½å¤šå¤šå°‘å°‘éƒ½å—åˆ°è¿‡æ›¾å›½è—©çš„æç‚¹ï¼Œæé¸¿ç« ã€å·¦å®—æ£ ã€æ²ˆè‘†æ¡¢ã€å½­ç‰éºŸã€èƒ¡æ—ç¿¼ç­‰ç­‰ï¼Œå°¤å…¶æ˜¯æé¸¿ç« å¯è°“æ˜¯ä¸€æ‰‹ææ‹”èµ·æ¥çš„ã€‚è‹±å›½ä¸€ä½å†å²å­¦å®¶è¯´ï¼šæ›¾å›½è—©æ˜¯ä¸­å›½æœ€æœ‰åŠ¿åŠ›çš„äººï¼Œä½†ä»–æ­»å»çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„æ€»ç£ï¼ˆç±»ä¼¼äºç°åœ¨çš„çœå§”ä¹¦è®°ï¼‰éƒ½æ›¾åšè¿‡ä»–çš„éƒ¨ä¸‹ï¼Œå¹¶ä¸”éƒ½æ˜¯ç”±ä»–æåçš„ã€‚å¦‚æœä»–å¸Œå†€ï¼Œä»–å¯èƒ½å·²ç»æˆä¸ºçš‡å¸ã€‚çœŸå®æ€§æ— ä»è€ƒè¯ï¼Œä½†ç”±æ­¤ä¹Ÿå¯çœ‹å‡ºä»–çš„å½±å“åŠ›ä¹‹å¤§</p>
<h1 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h1><p>æ›¾å›½è—©è¿™ä¸€ç”Ÿæ˜¯å¤±è´¥çš„ã€‚ä¸ºå¤©åœ°ç«‹å¿ƒã€ä¸ºç”Ÿæ°‘ç«‹å‘½ã€ä¸ºå¾€åœ£ç»§ç»å­¦ã€ä¸ºä¸‡ä¸–å¼€å¤ªå¹³ã€‚æ›¾å›½è—©ç”¨ä»–çš„ä¸€ç”Ÿæ¥è·µè¡Œå¼ è½½çš„æ¨ªæ¸ å››å¥ï¼Œä½†å¯æƒœç”Ÿä¸é€¢æ—¶ç»ˆç©¶æ˜¯æ²¡æœ‰å®Œæˆå…¨éƒ¨çš„ç†æƒ³ï¼Œæ— å¥ˆæˆä¸ºè¿½æ—¥çš„å¤¸çˆ¶ã€å¡«æµ·çš„ç²¾å«ã€‚åœ¨è¿™é‡Œå¼•ç”¨ä¸€ä¸‹æ¨è€€åœ¨â€å¾—åˆ°â€œAPPè§£è¯»æé¸¿ç« ä¸€ä¹¦ä¸­æåˆ°çš„ï¼šæ—¶åŠ¿èƒ½å¤Ÿé€ è‹±é›„ï¼Œè€Œè‹±é›„ä¹Ÿå¯ä»¥æ”¹å˜æ—¶åŠ¿ã€‚è€Œæ˜¾ç„¶ä¼ ç»Ÿä¿å®ˆçš„æ€æƒ³è®©æ›¾å›½è—©æ³¨å®šåªèƒ½æˆä¸ºæ—¶åŠ¿é€ çš„è‹±é›„ï¼Œè€Œä¸èƒ½æˆä¸ºæ”¹å˜æ—¶åŠ¿çš„è‹±é›„ã€‚è¿™ä¸æ˜¯ä»–ä¸€ä¸ªäººçš„å¤±è´¥ï¼Œè€Œæ˜¯æ•´ä¸ªè…æœ½æ”¿æƒçš„å¤±è´¥ï¼</p>
<p>æ›¾å›½è—©è¿™ä¸€ç”Ÿåˆæ˜¯æˆåŠŸçš„ã€‚ç«‹åŠŸã€ç«‹å¾·ã€ç«‹è¨€ä¸‰ä¸æœ½çš„å¢ƒç•Œä»–å…¨éƒ¨åšåˆ°äº†ã€‚ç«‹åŠŸè€Œè¨€ï¼Œä»–ä»ä¸€ä»‹ä¹¦ç”Ÿèµ·å®¶ï¼Œåˆ›å»ºå†›é˜Ÿï¼ŒæŒ½ç‹‚æ¾œäºæ—¢å€’ï¼Œæ‰¶å¤§å¦ä¹‹å°†å€¾ï¼Œä½¿ä¸­å›½ä¼ ç»Ÿæ–‡åŒ–å…é­æ¯ç­ä¹‹ç¾ï¼Œè®©æ¸…æœåˆå¯ä»¥åœ¨å†å²ä¸Šæµ“å¢¨é‡å½©çš„å¤šå†™å‡ ç¬”ï¼›ç«‹å¾·è€Œè¨€ï¼Œä»–ä»¥åœ£è´¤ä¸ºæ ‡å‡†è¦æ±‚è‡ªå·±ï¼Œé“å¾·ä¿®å…»è¿‘ä¹çº¯ç²¹ï¼›ç«‹è¨€è€Œè¨€ï¼Œæˆ‘ä¸€ä¸ªæ™®é€šäººèƒ½åœ¨è¿™é‡Œå†™è¿™ç¯‡æ–‡ç« æ„Ÿå—æ›¾å›½è—©çš„é£é‡‡ï¼Œå…¶å½±å“åŠ›ä¾¿ä¸è¨€è€Œå–»ï¼Œæ´‹æ´‹æ´’æ´’æ•°ç™¾ä¸‡å­—å…¨é›†è®©äººå—ç›ŠåŒªæµ…ã€‚</p>
<p>ä¸€ä¸‡ä¸ªäººæœ‰ä¸€ä¸‡ä¸ªå“ˆå§†é›·ç‰¹ï¼ŒåŒæ ·ä¹Ÿä¼šæœ‰ä¸€ä¸‡ä¸ªæ›¾å›½è—©ï¼Œæ¯ä¸ªäººåˆ‡å…¥è§’åº¦ä¸åŒè¯»å‡ºçš„äººç‰©è‡ªç„¶ä¸åŒï¼Œä½†å¸¦ç»™æˆ‘ä»¬æ¯ä¸ªäººçš„åŠ›é‡å´æ˜¯æ°¸æ’ä¸”ç›¸åŒçš„ï¼</p>
]]></content>
      <categories>
        <category>Reading</category>
      </categories>
      <tags>
        <tag>è¯»ä¹¦ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç®—æœºå­˜å‚¨ä½“ç³»</title>
    <url>/2023/02/07/computerSystem/%E5%AD%98%E5%82%A8%E4%BD%93%E7%B3%BB/</url>
    <content><![CDATA[<p>ä½œä¸ºè®¡ç®—æœºäº”å¤§æ ¸å¿ƒåŠŸèƒ½ï¼ˆè¿ç®—ã€å­˜å‚¨ã€æ§åˆ¶ã€è¾“å…¥ã€è¾“å‡ºï¼‰ä¹‹ä¸€çš„å­˜å‚¨ï¼Œæ— ç–‘åœ¨æ•´ä¸ªè®¡ç®—æœºä½“ç³»ç»“æ„ä¸­æœ‰ç€ä¸¾è¶³è½»é‡çš„åœ°ä½ã€‚</p>
<p>å­˜å‚¨å™¨å±äºè®¡ç®—æœºçš„è®°å¿†è£…ç½®ï¼Œç”¨äºå­˜æ”¾ç¨‹åºå’Œæ•°æ®ã€‚åœ¨æˆ‘çœ‹æ¥ç¨‹åºæ˜¯ä½œä¸ºè®¡ç®—æœºçš„çµé­‚è€Œå­˜åœ¨çš„ï¼Œå®ƒæŒ‡å¯¼äº†è®¡ç®—æœºçš„ä¸€åˆ‡è¡Œä¸ºï¼Œè€Œæ•°æ®åˆ™æ˜¯è¿™ä¸€åˆ‡è¡Œä¸ºçš„åŸºçŸ³ã€‚</p>
<p>æœ¬æ–‡å°†åŸºäºå­˜å‚¨å™¨å¯¹è®¡ç®—æœºçš„å­˜å‚¨ç³»ç»Ÿåšç®€è¦ä»‹ç»</p>
<h1 id="å­˜å‚¨å™¨åˆ†ç±»"><a href="#å­˜å‚¨å™¨åˆ†ç±»" class="headerlink" title="å­˜å‚¨å™¨åˆ†ç±»"></a>å­˜å‚¨å™¨åˆ†ç±»</h1><p><img src="/images/computerSystem/storage/storage-0.png" alt="image"></p>
<h1 id="æ•´ä½“æ¶æ„"><a href="#æ•´ä½“æ¶æ„" class="headerlink" title="æ•´ä½“æ¶æ„"></a>æ•´ä½“æ¶æ„</h1><p><img src="/images/computerSystem/storage/storage-1.png" alt="image"></p>
<h2 id="è®¾è®¡ç›®çš„"><a href="#è®¾è®¡ç›®çš„" class="headerlink" title="è®¾è®¡ç›®çš„"></a>è®¾è®¡ç›®çš„</h2><p>é€šè¿‡å­˜å‚¨å™¨åˆ†ç±»å›¾ä¸éš¾çœ‹å‡ºå­˜å‚¨å™¨çš„ç§ç±»ç¹å¤šï¼Œè€Œå¦‚ä½•åˆç†çš„ä½¿ç”¨æ¯ä¸€ç§å­˜å‚¨å™¨ç»„æˆåºå¤§çš„å­˜å‚¨ä½“ç³»ç»“æ„æ— ä¸ä½“ç°ç€å·¥ç¨‹å¸ˆä»¬çš„æ™ºæ…§ã€‚</p>
<p>å­˜å‚¨ç³»ç»Ÿè®¾è®¡çš„æ ¸å¿ƒé—®é¢˜åœ¨äºï¼š<strong>æˆæœ¬ï¼ˆå­˜å‚¨1bitï¼‰ã€å®¹é‡ã€é€Ÿåº¦ä¸‰è€…å¹³è¡¡</strong>ã€‚æ°å¥½è¿™ä¸‰è€…ä¹‹é—´åˆæ˜¯ç›¸äº’çŸ›ç›¾çš„ï¼Œä¸»è¦ä½“ç°åœ¨ï¼šå®¹é‡è¶Šé«˜ï¼Œæˆæœ¬è¶Šä½ï¼Œè€Œé€Ÿåº¦è¶Šæ…¢ï¼›é€Ÿåº¦è¶Šå—ï¼Œæˆæœ¬å°±è¶Šé«˜ï¼ˆå…¶å®ƒæƒ…å†µå¯æ ¹æ® 2.2é‡‘å­—å¡”ç« èŠ‚ ç†è§£ï¼‰ï¼Œå› æ­¤å¹³è¡¡æˆäº†å…³é”®ã€‚å› æ­¤å­˜å‚¨ä½“ç³»ç»“æ„è®¾è®¡ç›®çš„å¯æ€»ç»“ä¸ºï¼šå°†å„ç§ä¸åŒçš„å™¨ä»¶ç»„åˆæˆä¸€ä¸ªä½“ç³»ï¼Œè®©å„ç§å™¨ä»¶æ‰¬é•¿é¿çŸ­ï¼Œä»è€Œå½¢æˆä¸€ç§å¿«é€Ÿã€å¤§å®¹é‡ã€ä½æˆæœ¬çš„å†…å­˜ç³»ç»Ÿ</p>
<p>é€šè¿‡ä¼˜åŒ–å­˜å‚¨ç³»ç»Ÿçš„ç»„ç»‡æ¥ä½¿å¾—é’ˆå¯¹å…¸å‹åº”ç”¨å¹³å‡è®¿å­˜æ—¶é—´æœ€çŸ­</p>
<h2 id="é‡‘å­—å¡”"><a href="#é‡‘å­—å¡”" class="headerlink" title="é‡‘å­—å¡”"></a>é‡‘å­—å¡”</h2><p><img src="/images/computerSystem/storage/storage-2.png" alt="image"></p>
<p>è¶Šé è¿‘é‡‘å­—å¡”é¡¶ï¼Œè·ç¦»å¤„ç†å™¨è¶Šè¿‘ï¼Œè®¿é—®é€Ÿåº¦å°±è¶Šå¿«ï¼Œé€ ä»·ä¹Ÿå°±è¶Šé«˜ï¼ŒåŒæ—¶å®¹é‡ä¹Ÿä¼šæ›´å°</p>
<table>
<thead>
<tr>
<th></th>
<th>å­˜å‚¨å™¨ç§ç±»</th>
<th>ç¡¬ä»¶ï¼ˆå­˜å‚¨1bitï¼‰</th>
<th>é€Ÿåº¦</th>
</tr>
</thead>
<tbody><tr>
<td>å¯„å­˜å™¨</td>
<td>è§¦å‘å™¨</td>
<td>åå‡ ä¸ªæ™¶ä½“ç®¡</td>
<td>300ps</td>
</tr>
<tr>
<td>ç¼“å­˜</td>
<td>sram</td>
<td>6ä¸ªæ™¶ä½“ç®¡</td>
<td>L1-1nsï¼›L2-10ns</td>
</tr>
<tr>
<td>å†…å­˜</td>
<td>dram</td>
<td>1ä¸ªmosç®¡+1ä¸ªç”µå®¹</td>
<td>100ns</td>
</tr>
<tr>
<td>ç¡¬ç›˜</td>
<td>flash/ç£æ€§å­˜å‚¨â€¦</td>
<td>/</td>
<td>SSD-25usï¼›HDD-5ms</td>
</tr>
</tbody></table>
<p>é€šè¿‡è¡¨æ ¼å¯ä»¥å‘ç°å†…å­˜çš„ç»„æˆæœ‰ç”µå®¹çš„å­˜åœ¨ï¼Œå› æ­¤ä¸å†æ˜¯å•çº¯çš„é€»è¾‘ç”µè·¯æ›´ä¸èƒ½ç”¨CMOSå·¥è‰ºåˆ¶é€ ï¼Œè€ŒSRAMå´å¯ä»¥ã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆç¼“å­˜å¯ä»¥é›†æˆåˆ°èŠ¯ç‰‡å†…éƒ¨ï¼Œè€Œå†…å­˜æ˜¯å’ŒèŠ¯ç‰‡åˆ†å¼€åˆ¶é€ çš„ã€‚</p>
]]></content>
      <categories>
        <category>Computure System</category>
        <category>Storage</category>
      </categories>
      <tags>
        <tag>storage system</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Šæ ¼å±€ã€‹</title>
    <url>/2023/01/04/Reading/%E6%A0%BC%E5%B1%80/</url>
    <content><![CDATA[<p><img src="/images/reading/GeJu.jpg" alt="img"></p>
<h1 id="å¯¼è¯­"><a href="#å¯¼è¯­" class="headerlink" title="å¯¼è¯­"></a>å¯¼è¯­</h1><p>ã€Šæ ¼å±€ã€‹ä¸€ä¹¦æ˜¯å´å†›åšå£«2019å¹´å‡ºç‰ˆçš„ã€‚å´å†›åšå£«å¤´è¡”å¯è°“ä¼—å¤šï¼Œâ€œæ–‡æ´¥å›¾ä¹¦å¥–â€å¾—ä¸»ã€ç¡…è°·æŠ•èµ„äººã€çº¦ç¿°Â·éœæ™®é‡‘æ–¯å¤§å­¦å·¥å­¦é™¢è‘£äº‹ã€åŸè…¾è®¯å‰¯æ€»è£ï¼Œå‡ºç‰ˆè¿‡ã€Šæ•°å­¦ä¹‹ç¾ã€‹ã€Šæµªæ½®ä¹‹å·…ã€‹ã€Šæ–‡æ˜ä¹‹å…‰ã€‹ã€Šç¡…è°·ä¹‹è°œã€‹ç­‰ç­‰ä¸åŒå“ç±»çš„ä¹¦ç±ã€‚</p>
<p>æˆ‘è‡ªå·±å¯¹äºâ€æ ¼å±€â€œä¸€è¯çš„ç†è§£æ˜¯ä¸€ä¸ªäººå¯¹äºä¸–ç•Œè®¤çŸ¥çš„è¾¹ç•Œä»¥åŠå¯¹äº‹ç‰©è®¤çŸ¥çš„èŒƒå›´ã€‚æ•´ä¹¦é€šè¯»ä¸‹æ¥ç»™æˆ‘çš„æ„Ÿè§‰æ›´åƒæ˜¯å´å†›åšå£«å¯¹äºè‡ªå·±ç”Ÿæ´»ç»éªŒåŠåŸºäºæŸäº›å†å²äº‹ä»¶çš„è§„å¾‹æ€»ç»“ï¼Œç”šè‡³æœ‰äº›ç« èŠ‚çš„å†…å®¹å‰åéƒ½æ²¡æœ‰å¾ˆå…³è”ï¼Œå¯¹äºæœ¬ä¹¦å¤§éƒ¨åˆ†å†…å®¹æ— æ„Ÿçš„æœ¬è´¨åŸå› æˆ‘è®¤ä¸ºæ˜¯è‡ªå·±çš„ç»å†æ²¡æœ‰é‚£ä¹ˆä¸°å¯Œæ— æ³•åšåˆ°æ„ŸåŒèº«å—äº¦æˆ–è€…æ˜¯è‡ªå·±å¯¹äºè¿™æœ¬ä¹¦æ²¡æœ‰å®Œå…¨è¯»æ‡‚ã€‚é‚£ä¾¿å†™ä¸‹è‡ªå·±æ„Ÿå…´è¶£çš„éƒ¨åˆ†çš„å¿ƒå¾—å§</p>
<h1 id="æ„Ÿæ‚Ÿ"><a href="#æ„Ÿæ‚Ÿ" class="headerlink" title="æ„Ÿæ‚Ÿ"></a>æ„Ÿæ‚Ÿ</h1><h2 id="æŠ€æœ¯æ˜¯æ‰‹æ®µ-ä¸æ˜¯ç›®çš„"><a href="#æŠ€æœ¯æ˜¯æ‰‹æ®µ-ä¸æ˜¯ç›®çš„" class="headerlink" title="æŠ€æœ¯æ˜¯æ‰‹æ®µ ä¸æ˜¯ç›®çš„"></a>æŠ€æœ¯æ˜¯æ‰‹æ®µ ä¸æ˜¯ç›®çš„</h2><p>äº’è”ç½‘é£é€Ÿå‘å±•ï¼Œæ–°çš„æŠ€æœ¯ç†è®ºå¾—åˆ°è¿…é€Ÿä¸”å¹¿æ³›çš„ä¼ æ’­ã€‚å¯¹äºä¸€åæŠ€æœ¯ä»ä¸šè€…æ¥è®²ï¼Œè¦æƒ³åœ¨èŒåœºè¡Œä¸šå†…å§‹ç»ˆä¿æŒç«äº‰åŠ›ï¼Œéœ€è¦ä¸æ–­çš„å»å­¦ä¹ æ–°çš„å†…å®¹æ¥ä¿è¯è‡ªå·±ä¸ä¼šè¢«æ—¶ä»£æ‰€æ·˜æ±°ã€‚ä½†å®é™…ä¸Šï¼ŒæŠ€æœ¯ä»æ¥éƒ½æ˜¯æ‰‹æ®µè€Œä¸æ˜¯ç›®çš„ï¼Œå¦‚æœæä¸æ¸…æ¥šè¿™ä¸€ç‚¹ï¼Œå°±ä¼šä¸ºäº†æŠ€æœ¯è€Œç ”å‘æŠ€æœ¯ã€‚2022å¹´AIã€IOTå¯èƒ½æ˜¯æ—¶ä»£çš„æ½®æµï¼Œä½†10å¹´åä¸€åˆ‡éƒ½æœªæ›¾å¯çŸ¥è€Œå¯ä»¥è‚¯å®šçš„æ˜¯è®¡ç®—æœºçš„åº•å±‚åŸç†åŠçŸ¥è¯†ä»ç„¶ä¸ä¼šè½ä¼ã€‚å¯è§æ´å¯Ÿä¸€ä»¶äº‹æƒ…çš„æœ¬è´¨å¹¶å»å­¦ä¹ æ¢ç´¢æ‰æ˜¯çœŸæ­£çš„ç¡¬é“ç†ã€‚</p>
<h2 id="æœªæ¥çš„ç‰¹å¾"><a href="#æœªæ¥çš„ç‰¹å¾" class="headerlink" title="æœªæ¥çš„ç‰¹å¾"></a>æœªæ¥çš„ç‰¹å¾</h2><ul>
<li>ä¸å¯¹ç§°æ€§ã€‚æ–°æŠ€æœ¯çš„äº§ç”Ÿï¼Œæœ€æ—©æŒæ¡æ–°æŠ€æœ¯çš„å°‘æ•°äººå¯ä»¥åˆ©ç”¨æ–°æŠ€æœ¯é¢ è¦†è¿‡å»åœ¨ç›¸å…³é¢†åŸŸä¸­å æ®ç»Ÿæ²»åœ°ä½çš„ç»„ç»‡æˆ–æœºæ„ï¼›</li>
<li>å¤æ‚æ€§ã€‚å½“ä¸‹çš„çŸ¥è¯†ä½“ç³»éå¸¸å¤æ‚ï¼Œé€šå¸¸éƒ½æ˜¯è·¨å­¦ç§‘çš„è€Œä¸æ˜¯å•ä¸€ç»´åº¦çš„ï¼›</li>
<li>ä¸ç¡®å®šæ€§ã€‚æ²¡æœ‰äººèƒ½å¤Ÿé¢„æµ‹æœªæ¥</li>
</ul>
<ol>
<li>ä¸è¿‡åº¦ä¾èµ–è¿‡å»çš„æƒå¨</li>
<li>æ‹‰åŠ›ç”±äºæ¨åŠ›ï¼ˆä¸»åŠ¨è·å–è€Œä¸æ˜¯è¢«åŠ¨æ¥æ”¶ï¼‰</li>
<li>æŒ‡å—é’ˆä¼˜äºåœ°å›¾ï¼ˆæ”¹å˜ä¸€ç›´å­˜åœ¨ï¼ŒæŒæ¡æœ¬è´¨ï¼Œæ±‚æ¸”ä¸æ±‚é±¼ï¼‰</li>
<li>æ‹¥æŠ±é£é™©</li>
<li>å›é€†ç²¾ç¥ï¼ˆæ‰“ç ´è§„åˆ™ï¼‰</li>
<li>é€šæ‰èƒœäºä¸“æ‰ï¼ˆå‰æä¸€å®šæ˜¯å·²ç»åœ¨æŸä¸€æ–¹é¢å·²ç»æ˜¯ä¸“æ‰ï¼‰</li>
<li>éŸ§æ€§ä¼˜äºåŠ›é‡</li>
<li>å¼ºè°ƒæ•´ä½“æ€§</li>
</ol>
<h2 id="ä»¥æ­£å’Œï¼Œä»¥å¥‡èƒœ"><a href="#ä»¥æ­£å’Œï¼Œä»¥å¥‡èƒœ" class="headerlink" title="ä»¥æ­£å’Œï¼Œä»¥å¥‡èƒœ"></a>ä»¥æ­£å’Œï¼Œä»¥å¥‡èƒœ</h2><p>é¢å¯¹ä¸æ–­å˜åŒ–çš„æœªæ¥ï¼ŒæŠŠæ¡å¥½å¸¸æ€æ˜¯å…³é”®ï¼Œè€Œæ­£æ˜¯å¸¸æ€ï¼Œå¥‡æ˜¯éå¸¸æ€ã€‚ã€Šå­™å­å…µæ³• å…µåŠ¿ç¯‡ã€‹ä¸­å†™åˆ°ï¼šå‡¡æˆ˜è€…ï¼Œä»¥æ­£å’Œï¼Œä»¥å¥‡èƒœã€‚è¿™å¥è¯çš„æ„æ€æ˜¯ï¼šä½œæˆ˜ï¼Œè¦å…ˆæŠŠæ­£é¢çš„å…µæ’å¥½ï¼Œæ’çš„ä¸åæ–œåˆä¹æ³•åˆ™ï¼Œæ­¤ä¸ºæ­£ï¼›å¦‚æœè¿™æ—¶å€™è¿˜æœ‰å¤šä½™çš„å…µåŠ›ä½ å°±èµ¢äº†ï¼Œåœ¨ç°ä»£æ±‰è¯­å­—å…¸ä¸­ä¹Ÿå¯ä»¥ç†è§£ä¸ºï¼šå‡ºå¥‡åˆ¶èƒœã€‚â€ä»¥æ­£å’Œï¼Œä»¥å¥‡èƒœâ€æ›´åº”è¯¥æ˜¯ä¸€ä¸ªäººåšäº‹çš„å‡†åˆ™ï¼Œåœ¨åšå¥½æ­£çš„åŸºç¡€ä¸Šå‡ºå¥‡åˆ¶èƒœï¼Œä¸è¦ç›¸ä¿¡æ‰€è°“çš„å¼¯é“è¶…è½¦ï¼Œè¿™ä¸€å®šæ˜¯ä¸ç¨³å®šçš„ã€‚</p>
<h2 id="è¢«ä¿¡æ¯æ”¾å¤§çš„æ‚²è§‚"><a href="#è¢«ä¿¡æ¯æ”¾å¤§çš„æ‚²è§‚" class="headerlink" title="è¢«ä¿¡æ¯æ”¾å¤§çš„æ‚²è§‚"></a>è¢«ä¿¡æ¯æ”¾å¤§çš„æ‚²è§‚</h2><p>æˆ‘ä»¬æ˜æ˜¾èƒ½å¤Ÿæ„Ÿè§‰åˆ°ç°åœ¨çš„å¹´è½»äººæ™®éä¼šæ›´ç„¦è™‘ï¼Œä»–ä»¬ä»¿ä½›å¯¹è¿™ä¸ªä¸–ç•Œå……æ»¡æ‚²è§‚æƒ…ç»ªã€‚xxxé£æœºå¤±äº‹ã€xxxå…¬å¸å¤§è§„æ¨¡è£å‘˜ã€xxxåœ°åŒºæ´ªæ°´æˆ–ç«å±±çˆ†å‘ï¼Œè¿™äº›æ–°é—»åœ¨ç°åœ¨çœŸçš„æ˜¯å±¡è§ä¸é²œï¼Œä¹Ÿæ­£æ˜¯è¿™äº›æ–°é—»çš„å¹¿æ³›ä¼ æ’­ç»™æˆ‘ä»¬é€ æˆäº†å¾ˆå¤§çš„ç„¦è™‘æƒ…ç»ªã€‚ä½†å®é™…ä¸Šé£æœºå…¶å®æ˜¯æ¯”æ±½è½¦æ›´å®‰å…¨ã€åœ¨å¤§èŒƒå›´å†…å°±ä¸šå½¢å¼æ˜¯å‘å¥½çš„ã€ç«å±±å–·å‘åœ°æ­£æ˜¯å¤„äºæ¿å—äº¤ç•Œåœ°å¸¦ã€‚å¯ä»¥å‘ç°çœŸæ­£å¹¿æ³›ä¼ æ’­çš„è¨€è®ºå®é™…ä¸Šå¤§å¤šæ˜¯æ‚²è§‚çš„ï¼Œä»ä¿¡æ¯è®ºçš„è§’åº¦æ¥è®²ï¼Œè¶Šæ˜¯ä¸ä¼—ä¸åŒçš„è¯´æ³•ä¿¡æ¯é‡è¶Šå¤§ã€‚ç›¸åå®£ä¼ ä¹è§‚ä¸»ä¹‰çš„è§‚ç‚¹è®ºæ–‡ä¸ä»…æ²¡æœ‰äººçœ‹ç”šè‡³æ˜¯æ— æ³•å‘è¡¨çš„ã€‚å› ä¸ºæ²¡æœ‰äººä¼šå…³å¿ƒä¸€ç¯‡â€ä»Šå¹´ç»æµæŒç»­å‘å¥½â€œçš„æ–‡ç« ï¼Œå¤§å®¶éƒ½çŸ¥é“ä¹Ÿè‡ªç„¶å°±ä¸ä¼šè¿‡å¤šå…³æ³¨ã€‚é¢å¯¹å„ç§å„æ ·çš„æ–°é—»ï¼Œé€‚å½“ä¿æŒå¿§æ‚£æ„è¯†æ˜¯å¿…è¦çš„ï¼Œä½†è¯·ä¸åº”è¿‡åº¦çš„æ‚²è§‚ï¼</p>
<h2 id="äººç«‹äºå¤©åœ°ä¹‹é—´å¿…æœ‰å‡ºè·¯"><a href="#äººç«‹äºå¤©åœ°ä¹‹é—´å¿…æœ‰å‡ºè·¯" class="headerlink" title="äººç«‹äºå¤©åœ°ä¹‹é—´å¿…æœ‰å‡ºè·¯"></a>äººç«‹äºå¤©åœ°ä¹‹é—´å¿…æœ‰å‡ºè·¯</h2><p>é¢å¯¹ç”Ÿæ´»ã€å·¥ä½œã€å®¶åº­çš„å‹åŠ›ï¼Œæˆ‘ä»¬æ€»æ˜¯ä½¿è‡ªå·±å¤„äºä¸€ä¸ªå¾ˆå¿™ç¢Œçš„çŠ¶æ€ä¹‹ä¸­ï¼Œé¢å¯¹æœªæ¥å¯èƒ½å‘ç”Ÿçš„é—®é¢˜æˆ‘ä»¬ä¹Ÿå¸¸è¯´ï¼šè½¦åˆ°å±±å‰å¿…æœ‰è·¯ã€èˆ¹åˆ°æ¡¥å¤´è‡ªç„¶ç›´ã€‚ç¡®å®ï¼Œå¯¹äºæœªæ¥çš„ä¸ç¡®å®šæ€§ï¼Œæˆ‘ä»¬å§‹ç»ˆè¦åšä¿¡äººç«‹ä¸å¤©åœ°ä¹‹å‰å¿…æœ‰å‡ºè·¯ã€‚</p>
<h1 id="è¯­å½•"><a href="#è¯­å½•" class="headerlink" title="è¯­å½•"></a>è¯­å½•</h1><p>è‡ªå·±èŠ±äº†ç²¾åŠ›åšçš„äº‹æƒ…è¦å°½å¯èƒ½çš„å¯¹è‡ªå·±æœªæ¥æœ‰å¸®åŠ©ã€‚</p>
<p>è¿‡åˆ†è¿½æ±‚ç‰©è´¨å¯èƒ½ä¼šæˆä¸ºç”Ÿæ´»çš„è´Ÿæ‹…ã€‚</p>
]]></content>
      <categories>
        <category>Reading</category>
      </categories>
      <tags>
        <tag>è¯»ä¹¦ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¡¬ä»¶éšæœºæ•°æµ‹è¯•æ–¹æ³•</title>
    <url>/2022/11/26/third-party/DTRNG_Test/</url>
    <content><![CDATA[<h1 id="æµ‹è¯•æ–¹æ³•"><a href="#æµ‹è¯•æ–¹æ³•" class="headerlink" title="æµ‹è¯•æ–¹æ³•"></a>æµ‹è¯•æ–¹æ³•</h1><p>é…ç½®èŠ¯ç‰‡DTRNGç¡¬ä»¶å•å…ƒå¯„å­˜å™¨ç”Ÿæˆä¸€å®šæ•°é‡çš„æ•°æ®ï¼Œä¿å­˜æˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½¿ç”¨NISTæµ‹è¯•å¥—ä»¶è¿›è¡ŒéªŒè¯å¾—åˆ°æ˜¯å¦éšæœºçš„ç»“è®ºã€‚</p>
<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><ol>
<li>DTRNGï¼šDigital True Random Number Generatorï¼Œæ•°å­—çœŸéšæœºæ•°å‘ç”Ÿå™¨</li>
<li>NISTï¼šNational Institude of Standards and Technologyï¼Œå›½å®¶æ ‡å‡†æŠ€æœ¯ç ”ç©¶æ‰€</li>
<li>NIST-sts (Statistical Test Suite)ï¼Œç»Ÿè®¡æµ‹è¯•å¥—ä»¶ï¼š</li>
</ol>
<ul>
<li><p>æºç é“¾æ¥ï¼š<a href="https://csrc.nist.gov/projects/random-bit-generation/documentation-and-software%EF%BC%88Download%E5%8D%B3%E5%8F%AF%EF%BC%89">https://csrc.nist.gov/projects/random-bit-generation/documentation-and-softwareï¼ˆDownloadå³å¯ï¼‰</a></p>
</li>
<li><p>æ–‡æ¡£é“¾æ¥ï¼š<a href="https://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-22r1a.pdf">https://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-22r1a.pdf</a></p>
</li>
<li><p>windowså®‰è£…</p>
<p>å®˜ç½‘çš„è½¯ä»¶åŒ…æ˜¯Linuxç³»ç»Ÿä¸‹å¼€å‘çš„ï¼ŒWindowsç³»ç»Ÿéœ€è¦å…ˆä¸‹ä¸€ä¸ª<a href="https://cygwin.com/install.html">cygwinè½¯ä»¶</a>æ¥è¾…åŠ©ä½¿ç”¨</p>
<p>å¯ä»¥å‚è€ƒåšå®¢ï¼š<a href="https://blog.csdn.net/weixin_39928192/article/details/89256576">https://blog.csdn.net/weixin_39928192/article/details/89256576</a>?</p>
</li>
<li><p>Linuxå®‰è£…</p>
<p>è¿›å…¥å·¥ç¨‹æ–‡ä»¶å¤¹sts-2.1.2ç›´æ¥makeå³å¯ï¼Œå¾—åˆ° assess å¯æ‰§è¡Œç¨‹åº</p>
</li>
</ul>
<h1 id="éšæœºæµ‹è¯•é¡¹"><a href="#éšæœºæµ‹è¯•é¡¹" class="headerlink" title="éšæœºæµ‹è¯•é¡¹"></a><strong>éšæœºæµ‹è¯•é¡¹</strong></h1><p>æ¯ä¸€ä¸ªæµ‹è¯•é¡¹çš„è§£è¯»ï¼š<a href="https://blog.csdn.net/lafu5137/article/details/79593845">https://blog.csdn.net/lafu5137/article/details/79593845</a></p>
<ol>
<li>The Frequency (Monobit) Testï¼Œé¢‘ç‡æ£€æµ‹ã€‚è¯¥æ£€éªŒä¸»è¦æ˜¯çœ‹0å’Œ1åœ¨æ•´ä¸ªåºåˆ—ä¸­æ‰€å çš„æ¯”ä¾‹ï¼ˆåŸºç¡€æ£€æµ‹ï¼‰</li>
<li>Frequency Test within a Blockï¼Œå—å†…é¢‘ç‡æ£€æµ‹</li>
<li>The Runs Testï¼Œæ¸¸ç¨‹æ£€æµ‹ã€‚æ¸¸ç¨‹æŒ‡çš„æ˜¯ä¸€ä¸ªæ²¡æœ‰é—´æ–­çš„ç›¸åŒæ•°åºåˆ—</li>
<li>Tests for the Longest-Run-of-Ones in a Blockï¼Œå—å†…æœ€é•¿æ¸¸ç¨‹æ£€æµ‹</li>
<li>The Binary Matrix Rank Testï¼ŒäºŒå…ƒçŸ©é˜µç§©æ£€æµ‹</li>
<li>The Discrete Fourier Transform (Spectral) Testï¼Œç¦»æ•£å‚…ç«‹å¶å˜æ¢æ£€æµ‹</li>
<li>The Non-overlapping Template Matching Testï¼Œéé‡å æ¨¡å—åŒ¹é…æ£€æµ‹</li>
<li>The Overlapping Template Matching Testï¼Œé‡å æ¨¡å—åŒ¹é…æ£€æµ‹</li>
<li>Maurerâ€™s â€œUniversal Statisticalâ€ Testï¼ŒMaurerçš„é€šç”¨æ£€æµ‹ç»Ÿè®¡</li>
<li>The Linear Complexity Testï¼Œçº¿æ€§å¤æ‚åº¦æ£€æµ‹</li>
<li>The Serial Testï¼Œåºåˆ—æ£€æµ‹</li>
<li>The Approximate Entropy Testï¼Œè¿‘ä¼¼ç†µæ£€æµ‹</li>
<li>The Cumulative Sums (Cusums) Testï¼Œç´¯åŠ å’Œæ£€éªŒ</li>
<li>The Random Excursions Testï¼Œéšæœºæ¸¸åŠ¨æ£€æµ‹</li>
<li>The Random Excursions Variant Test.ï¼Œéšæœºæ¸¸åŠ¨çŠ¶æ€é¢‘ç‡æ£€æµ‹</li>
</ol>
<h1 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a><strong>ä½¿ç”¨æ–¹æ³•</strong></h1><p>è¯¥æµç¨‹æ˜¯åŸºäºLinuxç³»ç»Ÿè¿›è¡Œæ“ä½œçš„ï¼Œä½¿ç”¨çš„æ•°æ®ï¼šsts-2.1.2/data/data.pi</p>
<ol>
<li>å¯åŠ¨ç¨‹åºã€‚**./assess ï¼Œ**stream lengthè¯‘ä¸ºæµçš„é•¿åº¦ã€‚</li>
<li>è¾“å…¥å¾…æµ‹æ–‡ä»¶è·¯å¾„ã€‚æ ¹æ®èœå•ï¼Œé”®å…¥0å¹¶è¾“å…¥æ–‡ä»¶çš„è·¯å¾„ï¼ˆç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„éƒ½å¯ä»¥ï¼‰</li>
<li>é€‰æ‹©æµ‹è¯•é¡¹ã€‚é”®å…¥1è¡¨ç¤ºåº”ç”¨å…¨éƒ¨æµ‹è¯•é¡¹ï¼›è¾“å…¥0è¡¨ç¤ºéƒ¨åˆ†æµ‹è¯•é¡¹ï¼Œéšåè¾“å…¥ä¸€ä¸ª16ä½äºŒè¿›åˆ¶åºåˆ—é€‰æ‹©æµ‹è¯•é¡¹ã€‚</li>
<li>å‚æ•°è°ƒæ•´ã€‚å¯ä»¥æ ¹æ®èœå•åŠé€‰é¡¹å¾®è°ƒéƒ¨åˆ†å‚æ•°çš„å€¼ï¼ŒåŸºæœ¬é€‰æ‹©é»˜è®¤å³å¯ã€‚</li>
<li>è¾“å…¥æ¯”ç‰¹æµçš„ä¸ªæ•°ã€‚è¡¨ç¤ºæœ‰å¤šå°‘ä¸ªstream</li>
<li>é€‰æ‹©è¾“å…¥æ–‡ä»¶ç±»å‹ã€‚è¯¥ç±»å‹å¯¹åº”äºç¬¬äºŒæ­¥è¾“å…¥æ–‡ä»¶çš„ç±»å‹ï¼Œä¸¤ç§ç±»å‹ä¾›é€‰æ‹©ï¼šASCII / Binary</li>
</ol>
<h1 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a><strong>æ³¨æ„äº‹é¡¹</strong></h1><ol>
<li>æ¯ä¸€é¡¹æµ‹è¯•æ‰€éœ€çš„åºåˆ—çš„stream lengthæ˜¯ä¸ä¸€æ ·çš„ï¼Œç»æµ‹è¯•å¦‚æœé€‰æ‹©å…¨éƒ¨æµ‹è¯•é¡¹è‡³å°‘ä¿è¯stream length &gt;= 10000bitsï¼Œå¦åˆ™ä¼šå‡ºç°é”™è¯¯ã€‚è€Œå¦‚æœå•é¡¹æµ‹è¯•æŸ¥é˜…æ–‡æ¡£æ»¡è¶³å‚æ•°èŒƒå›´å³å¯ï¼Œæ¯”å¦‚é€‰æ‹©1é¢‘ç‡æµ‹è¯•åªéœ€ä¿è¯stream length&gt;100bitså³å¯ã€‚</li>
<li>å¿…é¡»ä¿è¯ï¼šæµé•¿åº¦ Ã— æµä¸ªæ•° &lt;= æ–‡ä»¶å¤§å°</li>
<li>å¦‚æœè¾“å…¥çš„æ–‡ä»¶æ˜¯ACSIIæ ¼å¼çš„è¯ï¼Œå¯åŠ¨ç¨‹åºæ—¶æ‰€è¾“å…¥çš„bitstreamçš„å•ä½æ˜¯byteï¼›è€Œè¾“å…¥æ–‡ä»¶ä¸ºBinaryçš„è¯bitstreamå•ä½ä¸ºbitã€‚ä¾‹å¦‚ï¼šç¬¬ä¸€æ­¥é”®å…¥./assess 10000ï¼›ç¬¬äº”æ­¥é”®å…¥10 ï¼›æ­¤æ—¶ç¬¬å…­æ­¥é€‰æ‹©0ä»£è¡¨è¾“å…¥äº†10000Ã—10Ã—8ï¼ˆbitsï¼‰ï¼Œè¾“å…¥1ä»£è¡¨è¾“å…¥äº†10000Ã—10ï¼ˆbitsï¼‰ã€‚å®é™…è¾“å…¥è¿‡ç¨‹æ˜¯è¦åç€ç†è§£ï¼Œå…ˆç¡®å®šè¾“å…¥æ–‡ä»¶ç±»å‹ï¼Œè¿›è€Œç¡®è®¤bitstreamã€numberï¼Œä¿è¯ç¬¬ä¸€ä¸ªå…¬å¼</li>
</ol>
<h1 id="æ£€æµ‹æ ‡å‡†"><a href="#æ£€æµ‹æ ‡å‡†" class="headerlink" title="æ£€æµ‹æ ‡å‡†"></a><strong>æ£€æµ‹æ ‡å‡†</strong></h1><p>æµ‹è¯•æˆåŠŸç»“æŸåˆ™ä¼šåœ¨ <strong>sts-2.1.2/experiments/AlgorithmTesting/</strong> ç›®å½•ä¸‹ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šï¼Œè€Œé’ˆå¯¹æ¯ä¸€ä¸ªé¡¹ç›®çš„ç»“æœä¼šåœ¨å…¶å­ç›®å½•ä¸‹ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šã€‚</p>
<p>æœ€ç»ˆæµ‹è¯•æŠ¥å‘ŠfinalAnalysisReport.txtä¸­P-valueéƒ½å¤§äºç­‰äº0.01å³å¯è®¤ä¸ºé€šè¿‡äº†NISTæ£€éªŒï¼Œè¿™ä¸ªæ•°æ®è¶Šå¤§è¶Šå¥½ã€‚å¦‚æœè¯¥æ•°æ®ä¸º0ï¼Œå¯èƒ½æ˜¯ç”±äºæ•°æ®é‡çš„é—®é¢˜åˆ™å¯ä»¥å»æ¯ä¸ªå­é¡¹ç›®ç»“æœä¸­å»æŸ¥çœ‹ï¼Œä¼šæœ‰SUCCESSå­—æ ·ï¼</p>
<h1 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a><strong>Q&amp;A</strong></h1><ol>
<li><p>Qï¼šSegment fault</p>
<p>Aï¼š bitstream*num &gt; fileSizeå³æµçš„é•¿åº¦ä¹˜ä»¥æµçš„ä¸ªæ•°è¶…è¿‡äº†æ–‡ä»¶çš„å¤§å°é€šå¸¸ä¼šæœ‰errorä¿¡æ¯</p>
</li>
<li><p>Qï¼šigamc: UNDERFLOWï¼Ÿ</p>
<p>Aï¼šæ•°æ®ä¸‹æº¢ï¼Œå¯èƒ½æ˜¯æ•°æ®æ ¼å¼çš„åŸå› æˆ–è€…æ•°æ®è¿‡äºä¸éšæœº</p>
</li>
<li><p>Qï¼šP-valueå…¨éƒ¨æ˜¯0ï¼Ÿ</p>
<p>Aï¼šå¯¼è‡´ <strong>igamc: UNDERFLOW</strong> çš„åŸå› éƒ½æ˜¯æœ‰å¯èƒ½çš„ï¼ŒåŒæ—¶ä¹Ÿå¯èƒ½æ˜¯å› ä¸ºæ•°æ®é‡ä¸å¤Ÿæ‰€å¯¼è‡´çš„ã€‚</p>
</li>
</ol>
]]></content>
      <categories>
        <category>Third Party</category>
      </categories>
  </entry>
  <entry>
    <title>CMake</title>
    <url>/2022/08/25/third-party/cmake/</url>
    <content><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><blockquote>
<p>å®˜ç½‘ : <a href="https://cmake.org/cmake/help/v3.15/">https://cmake.org/cmake/help/v3.15/</a></p>
</blockquote>
<p>CMakeæ˜¯è·¨å¹³å°çš„ å…è´¹å’Œå¼€æºè½¯ä»¶ï¼Œç”¨äºä½¿ç”¨ç‹¬ç«‹äºç¼–è¯‘å™¨çš„æ–¹æ³•æ„å»ºè‡ªåŠ¨åŒ–ã€æµ‹è¯•ã€æ‰“åŒ…å’Œå®‰è£…è½¯ä»¶ã€‚CMake æœ¬èº«å¹¶ä¸æ˜¯ä¸€ä¸ªæ„å»ºç³»ç»Ÿï¼›å®ƒç”Ÿæˆå¦ä¸€ä¸ªç³»ç»Ÿçš„æ„å»ºæ–‡ä»¶ã€‚å®ƒæ”¯æŒç›®å½•å±‚æ¬¡ç»“æ„å’Œä¾èµ–äºå¤šä¸ªåº“çš„åº”ç”¨ç¨‹åºã€‚å®ƒä¸åŸç”Ÿæ„å»ºç¯å¢ƒç»“åˆä½¿ç”¨ï¼Œä¾‹å¦‚Makeã€Qt Creatorã€Ninjaã€Android Studioã€Apple çš„Xcodeå’ŒMicrosoft Visual Studioã€‚ï¼ˆæ‘˜è‡ªWikiï¼‰</p>
<h1 id="CMakeLists-txt"><a href="#CMakeLists-txt" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h1><h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2><ol>
<li><p>cmakeè¦æ±‚æœ€ä½ç‰ˆæœ¬(é€‰æ‹©æ€§æ·»åŠ )</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">cmake_minimum_required(VERSION <span class="number">3.0</span><span class="number">.0</span>)</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ç¼–è¯‘å·¥ç¨‹å</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">project(xxx)</span><br><span class="line"><span class="comment">//ä¼šè‡ªåŠ¨åˆ›å»ºä¸¤ä¸ªå˜é‡ï¼ŒPROJECT_SOURCE_DIRå’ŒPROJECT_NAME</span></span><br><span class="line"><span class="comment">//${PROJECT_SOURCE_DIR}ï¼šæœ¬CMakeLists.txtæ‰€åœ¨çš„æ–‡ä»¶å¤¹è·¯å¾„</span></span><br><span class="line"><span class="comment">//${PROJECT_NAME}ï¼šæœ¬CMakeLists.txtçš„projectåç§°</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ç»™éƒ¨åˆ†æ–‡ä»¶æˆ–è·¯å¾„ç»„åˆèµ·åˆ«å, é€šè¿‡${å˜é‡}è·å–å˜é‡å†…å®¹</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">set</span>(å˜é‡ æ–‡ä»¶å/è·¯å¾„/...)</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>è®¾ç½®c / c++ ç¼–è¯‘ç¼–è¯‘å‚æ•°</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> (CMAKE_C_FLAGS <span class="string">"-Wall -O2"</span>)</span><br><span class="line"><span class="built_in">set</span> (CMAKE_CXX_FLAGS <span class="string">"-Wall -std=C++11"</span>)</span><br><span class="line">add_compile_options( -Wall )				<span class="comment">//è¯¥å‘½ä»¤è¯‘é€‰é¡¹æ˜¯é’ˆå¯¹æ‰€æœ‰ç¼–è¯‘å™¨çš„(åŒ…æ‹¬cå’Œc++ç¼–è¯‘å™¨)</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ä¸ºå½“å‰è·¯å¾„ä»¥åŠå­ç›®å½•çš„æºæ–‡ä»¶åŠ å…¥ç”±-Då¼•å…¥çš„define flag</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">add_definitions(-DFOO -DDEBUG ...)</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å¯¹å­æ–‡ä»¶å¤¹è¿›è¡Œcmakeç¼–è¯‘</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">add_subdirectory(å­æ–‡ä»¶å¤¹å) </span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ‰“å°ä¿¡æ¯</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">message() 			<span class="comment">//ç›´æ¥æ·»åŠ æ‰“å°çš„å†…å®¹å’Œå˜é‡å³å¯,ä¸éœ€è¦åŒå¼•å·</span></span><br><span class="line">message(<span class="string">"PROJECT_SOURCE_DIR = ${PROJECT_SOURCE_DIR}"</span>)</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å¸®åŠ©ä¿¡æ¯ </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="number">1.</span> æŸ¥çœ‹cmakeé»˜è®¤å˜é‡		cmake --help-variable-<span class="built_in">list</span></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<h2 id="åˆ¤æ–­è¯­å¥"><a href="#åˆ¤æ–­è¯­å¥" class="headerlink" title="åˆ¤æ–­è¯­å¥"></a>åˆ¤æ–­è¯­å¥</h2><p>ç”¨æ³•ï¼šæ ¹æ®æŸä¸ªå®ç¡®å®šç¼–è¯‘å†…å®¹ã€‚æ¯”è¾ƒå­—ç¬¦ä¸²ï¼Œç›¸åŒè¿”å›true</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (CPU_PLATFORM_BIT STREQUAL <span class="string">"64"</span>)</span><br><span class="line">    add_library(mylib generic_64bit.c)</span><br><span class="line"><span class="keyword">else</span>()</span><br><span class="line">    add_library(mylib generic_32bit.c)</span><br><span class="line">endif()  </span><br></pre></td></tr></tbody></table></figure>

<h2 id="ç¼–è¯‘ç›®æ ‡"><a href="#ç¼–è¯‘ç›®æ ‡" class="headerlink" title="ç¼–è¯‘ç›®æ ‡"></a>ç¼–è¯‘ç›®æ ‡</h2><h3 id="äºŒè¿›åˆ¶æ–‡ä»¶"><a href="#äºŒè¿›åˆ¶æ–‡ä»¶" class="headerlink" title="äºŒè¿›åˆ¶æ–‡ä»¶"></a>äºŒè¿›åˆ¶æ–‡ä»¶</h3><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">add_executable(ç›®æ ‡æ–‡ä»¶åå­—xxx æºæ–‡ä»¶)</span><br><span class="line"><span class="comment">//example: add_executable(${PROJECT_NAME} example_person.cpp)</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="åŠ¨æ€-x2F-é™æ€åº“"><a href="#åŠ¨æ€-x2F-é™æ€åº“" class="headerlink" title="åŠ¨æ€ / é™æ€åº“"></a>åŠ¨æ€ / é™æ€åº“</h3><p>å°†æŒ‡å®šçš„æºæ–‡ä»¶ç”Ÿæˆé“¾æ¥æ–‡ä»¶ï¼Œç„¶åæ·»åŠ åˆ°å·¥ç¨‹ä¸­å»</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">add_library(&lt;name&gt; [STATIC | SHARED | MODULE]</span><br><span class="line">[EXCLUDE_FROM_ALL]</span><br><span class="line">[source1] [source2] [...])</span><br><span class="line"></span><br><span class="line"><span class="comment">//&lt;name&gt;è¡¨ç¤ºåº“æ–‡ä»¶çš„åå­—ï¼Œè¯¥åº“æ–‡ä»¶ä¼šæ ¹æ®å‘½ä»¤é‡Œåˆ—å‡ºçš„æºæ–‡ä»¶æ¥åˆ›å»ºã€‚ç”Ÿæˆçš„åº“è‡ªåŠ¨è¡¥å…¨,å¦‚libxxx.so </span></span><br><span class="line"><span class="comment">//STATICã€SHAREDå’ŒMODULEçš„ä½œç”¨æ˜¯æŒ‡å®šç”Ÿæˆçš„åº“æ–‡ä»¶çš„ç±»å‹ã€‚STATICåº“æ˜¯ç›®æ ‡æ–‡ä»¶çš„å½’æ¡£æ–‡ä»¶ï¼Œåœ¨é“¾æ¥å…¶å®ƒç›®æ ‡çš„æ—¶å€™ä½¿ç”¨ã€‚SHAREDåº“ä¼šè¢«	åŠ¨æ€é“¾æ¥ï¼ˆåŠ¨æ€é“¾æ¥åº“ï¼‰ï¼Œåœ¨è¿è¡Œæ—¶ä¼šè¢«åŠ è½½ã€‚MODULEåº“æ˜¯ä¸€ç§ä¸ä¼šè¢«é“¾æ¥åˆ°å…¶å®ƒç›®æ ‡ä¸­çš„æ’ä»¶ï¼Œä½†æ˜¯å¯èƒ½ä¼šåœ¨è¿è¡Œæ—¶ä½¿ç”¨dlopen-ç³»åˆ—çš„å‡½æ•°	ã€‚é»˜è®¤çŠ¶æ€ä¸‹ï¼Œåº“æ–‡ä»¶å°†ä¼šåœ¨äºæºæ–‡ä»¶ç›®å½•æ ‘çš„æ„å»ºç›®å½•æ ‘çš„ä½ç½®è¢«åˆ›å»ºï¼Œè¯¥å‘½ä»¤ä¹Ÿä¼šåœ¨è¿™é‡Œè¢«è°ƒç”¨ã€‚</span></span><br><span class="line"><span class="comment">//source1 source2åˆ†åˆ«è¡¨ç¤ºå„ä¸ªæºæ–‡ä»¶</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="é“¾æ¥-x2F-è·¯å¾„"><a href="#é“¾æ¥-x2F-è·¯å¾„" class="headerlink" title="é“¾æ¥/è·¯å¾„"></a>é“¾æ¥/è·¯å¾„</h2><h3 id="å¤´æ–‡ä»¶è·¯å¾„"><a href="#å¤´æ–‡ä»¶è·¯å¾„" class="headerlink" title="å¤´æ–‡ä»¶è·¯å¾„"></a>å¤´æ–‡ä»¶è·¯å¾„</h3><p>æ·»åŠ å¤´æ–‡ä»¶çš„æŸ¥æ‰¾è·¯å¾„, ç›¸å½“äºå‘½ä»¤è¡Œçš„  <em><strong>-l</strong></em> å‚æ•°</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">include_directories(../thirdparty/comm/include)</span><br></pre></td></tr></tbody></table></figure>

<h3 id="é“¾æ¥åº“è·¯å¾„"><a href="#é“¾æ¥åº“è·¯å¾„" class="headerlink" title="é“¾æ¥åº“è·¯å¾„"></a>é“¾æ¥åº“è·¯å¾„</h3><p>æ·»åŠ éœ€è¦é“¾æ¥çš„åº“æ–‡ä»¶ç›®å½•, ç›¸å½“äºå‘½ä»¤è¡Œ <em><strong>-L</strong></em> å‚æ•°</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">link_directories(<span class="string">"/home/server/third/lib"</span>)</span><br></pre></td></tr></tbody></table></figure>

<h3 id="é“¾æ¥åº“"><a href="#é“¾æ¥åº“" class="headerlink" title="é“¾æ¥åº“"></a>é“¾æ¥åº“</h3><p> å°†ç›®æ ‡æ–‡ä»¶ä¸åº“æ–‡ä»¶è¿›è¡Œé“¾æ¥</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">target_link_libraries(&lt;target&gt; [item1] [item2] [...] [[debug|optimized|general] &lt;item&gt;] ...)</span><br><span class="line"> </span><br><span class="line"><span class="comment">//&lt;target&gt;æ˜¯æŒ‡é€šè¿‡add_executable()å’Œadd_library()æŒ‡ä»¤ç”Ÿæˆå·²ç»åˆ›å»ºçš„ç›®æ ‡æ–‡ä»¶</span></span><br><span class="line"><span class="comment">//[item]è¡¨ç¤ºåº“æ–‡ä»¶æ²¡æœ‰åç¼€çš„åå­—ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåº“ä¾èµ–é¡¹æ˜¯ä¼ é€’çš„ã€‚å½“è¿™ä¸ªç›®æ ‡é“¾æ¥åˆ°å¦ä¸€ä¸ªç›®æ ‡æ—¶ï¼Œé“¾æ¥åˆ°è¿™ä¸ªç›®æ ‡çš„åº“ä¹Ÿä¼šå‡ºç°åœ¨å¦ä¸€ä¸ªç›®æ ‡çš„è¿æ¥çº¿ä¸Šã€‚è¿™ä¸ªä¼ é€’çš„æ¥å£å­˜å‚¨åœ¨interface_link_librariesçš„ç›®æ ‡å±æ€§ä¸­ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®è¯¥å±æ€§ç›´æ¥é‡å†™ä¼ é€’æ¥å£ã€‚</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="å®‰è£…ï¼ˆInstallï¼‰"><a href="#å®‰è£…ï¼ˆInstallï¼‰" class="headerlink" title="å®‰è£…ï¼ˆInstallï¼‰"></a>å®‰è£…ï¼ˆInstallï¼‰</h2><ul>
<li>è¯¦æƒ…å‚è€ƒï¼š<a href="https://cmake.org/cmake/help/v3.22/command/install.html">https://cmake.org/cmake/help/v3.22/command/install.html</a></li>
<li>ä½œç”¨ï¼šç”¨äºå®šä¹‰å®‰è£…è§„åˆ™ï¼Œå®‰è£…å†…å®¹åŒ…æ‹¬å¯æ‰§è¡Œæ–‡ä»¶ï¼Œé™æ€åº“ï¼ŒåŠ¨æ€åº“ä»¥åŠæ–‡ä»¶ï¼Œç›®å½•ï¼Œè„šæœ¬ç­‰</li>
<li>ä½¿ç”¨æ–¹æ³•ï¼šmake install</li>
<li>ç›®æ ‡å®‰è£…è·¯å¾„ï¼š${CMAKE_INSTALL_PREFIX}æŒ‡å®šï¼Œé»˜è®¤/usr/local</li>
</ul>
<h3 id="ç›®æ ‡æ–‡ä»¶å®‰è£…"><a href="#ç›®æ ‡æ–‡ä»¶å®‰è£…" class="headerlink" title="ç›®æ ‡æ–‡ä»¶å®‰è£…"></a>ç›®æ ‡æ–‡ä»¶å®‰è£…</h3><p>ç›®æ ‡æ–‡ä»¶æŒ‡çš„æ˜¯æˆ‘ä»¬é€šè¿‡ add_executable / add_library å¾—åˆ°çš„äºŒè¿›åˆ¶æ–‡ä»¶æˆ–è€…åº“ï¼Œåªæœ‰è¿™äº›æ–‡ä»¶æ‰å¯ä»¥é€šè¿‡è¯¥å‘½ä»¤è£…è½½åˆ°ç›¸åº”çš„ä½ç½®</p>
<ul>
<li>å¯æ‰§è¡Œæ–‡ä»¶ï¼šRUNTIME</li>
<li>åŠ¨æ€åº“ï¼šLIBRARY</li>
<li>é™æ€åº“ï¼šARCHIVE</li>
</ul>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">install(TARGETS targets... [EXPORT &lt;export-name&gt;]</span><br><span class="line">        [RUNTIME_DEPENDENCIES args...|RUNTIME_DEPENDENCY_SET &lt;<span class="built_in">set</span>-name&gt;]</span><br><span class="line">        [[ARCHIVE|LIBRARY|RUNTIME|OBJECTS|FRAMEWORK|BUNDLE|</span><br><span class="line">          PRIVATE_HEADER|PUBLIC_HEADER|RESOURCE]</span><br><span class="line">         [DESTINATION &lt;dir&gt;]</span><br><span class="line">         [PERMISSIONS permissions...]</span><br><span class="line">         [CONFIGURATIONS [Debug|Release|...]]</span><br><span class="line">         [COMPONENT &lt;component&gt;]</span><br><span class="line">         [NAMELINK_COMPONENT &lt;component&gt;]</span><br><span class="line">         [OPTIONAL] [EXCLUDE_FROM_ALL]</span><br><span class="line">         [NAMELINK_ONLY|NAMELINK_SKIP]</span><br><span class="line">        ] [...]</span><br><span class="line">        [INCLUDES DESTINATION [&lt;dir&gt; ...]]</span><br><span class="line">        )</span><br><span class="line">        </span><br><span class="line"><span class="comment">// example:</span></span><br><span class="line">install(TARGETS mybin mystaiclib mydynamiclib</span><br><span class="line">        RUNTIME DESTINATION bin</span><br><span class="line">        ARCHIVE DESTINATION lib</span><br><span class="line">        LIBRARY DESTINATION lib)</span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ™®é€šæ–‡ä»¶å®‰è£…"><a href="#æ™®é€šæ–‡ä»¶å®‰è£…" class="headerlink" title="æ™®é€šæ–‡ä»¶å®‰è£…"></a>æ™®é€šæ–‡ä»¶å®‰è£…</h3><p>æ™®é€šæ–‡ä»¶å³éœ€è¦å¯¼å‡ºçš„å¤´æ–‡ä»¶ã€ä¾èµ–çš„ä¸‰æ–¹åº“ç­‰ç­‰ï¼Œè¯¥å‘½ä»¤åŒæ—¶å¯ä»¥æŒ‡å®šå¯¼å‡ºæ–‡ä»¶çš„æƒé™ï¼ˆé»˜è®¤644ï¼‰</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">install(&lt;FILES|PROGRAMS&gt; files...</span><br><span class="line">        TYPE &lt;type&gt; | DESTINATION &lt;dir&gt;</span><br><span class="line">        [PERMISSIONS permissions...]</span><br><span class="line">        [CONFIGURATIONS [Debug|Release|...]]</span><br><span class="line">        [COMPONENT &lt;component&gt;]</span><br><span class="line">        [RENAME &lt;name&gt;] [OPTIONAL] [EXCLUDE_FROM_ALL])</span><br><span class="line">        </span><br><span class="line"><span class="comment">// example</span></span><br><span class="line">install(FILES mylib.h DESTINATION include)</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç›®å½•å®‰è£…"><a href="#ç›®å½•å®‰è£…" class="headerlink" title="ç›®å½•å®‰è£…"></a>ç›®å½•å®‰è£…</h3><p>å‚æ•°ä»‹ç»ï¼š</p>
<ul>
<li>DIRECTORYï¼šåé¢è¿æ¥çš„æ˜¯æ‰€åœ¨Sourceç›®å½•çš„ç›¸å¯¹è·¯å¾„ï¼ˆç»“å°¾æ˜¯å¦æ˜¯â€/â€œå¯¹æ‹·è´ç»“æœæœ‰ä¸€å®šå½±å“ï¼‰</li>
<li>PATTERNï¼šä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œè¿‡æ»¤</li>
<li>PERMISSIONSï¼šæŒ‡å®šPATTERNè¿‡æ»¤åçš„æ–‡ä»¶æƒé™ã€‚</li>
</ul>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">install(DIRECTORY dirs...</span><br><span class="line">        TYPE &lt;type&gt; | DESTINATION &lt;dir&gt;</span><br><span class="line">        [FILE_PERMISSIONS permissions...]</span><br><span class="line">        [DIRECTORY_PERMISSIONS permissions...]</span><br><span class="line">        [USE_SOURCE_PERMISSIONS] [OPTIONAL] [MESSAGE_NEVER]</span><br><span class="line">        [CONFIGURATIONS [Debug|Release|...]]</span><br><span class="line">        [COMPONENT &lt;component&gt;] [EXCLUDE_FROM_ALL]</span><br><span class="line">        [FILES_MATCHING]</span><br><span class="line">        [[PATTERN &lt;pattern&gt; | REGEX &lt;regex&gt;]</span><br><span class="line">         [EXCLUDE] [PERMISSIONS permissions...]] [...])</span><br><span class="line"></span><br><span class="line"><span class="comment">// example</span></span><br><span class="line">install(DIRECTORY src/ DESTINATION include/myproj  FILES_MATCHING PATTERN <span class="string">"*.h"</span>)</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><ol>
<li><p>Q: ç¼–è¯‘å‚æ•°æ·»åŠ äº†-lpthread å‚æ•°, ä½†æ˜¯è¿˜æ˜¯æŠ¥undefined reference to `pthread_createâ€™ </p>
<p>A : éœ€è¦ä½¿ç”¨target_link_libraries( target thread) åœ¨è¿™é‡Œé“¾æ¥threadåº“</p>
</li>
<li><p>Q: å¦‚æœåœ¨å¤šçº§çš„ç›®å½•ä¸‹ç¼–è¯‘, å§‹ç»ˆæ‰¾ä¸åˆ°é—®é¢˜æŠ¥ undefineçš„é—®é¢˜ ?</p>
<p>A : çœ‹ä¸€ä¸‹æ˜¯ä¸æ˜¯é“¾æ¥çš„åº“æˆ–ç›®æ ‡æ–‡ä»¶æ ¼å¼ä¸åŒ, ä¸€ä¸ªc ä¸€ä¸ªc++ , è¿™æ ·å°±ä¼šå¯¼è‡´æ‰¾ä¸åˆ°ç¬¦å·é”™è¯¯</p>
</li>
<li><p>Q: undefined reference to `typeinfo for xxxBase_classâ€™ ?</p>
<p>A: åŸºç±»çš„æ„é€ å’Œææ„å‡½æ•°éœ€è¦åŠ { };  å¦åˆ™å°±ä¼šæŠ¥è¿™ä¸ªé—®é¢˜</p>
</li>
</ol>
<h1 id="Makefile"><a href="#Makefile" class="headerlink" title="Makefile"></a>Makefile</h1><h2 id="åŸºæœ¬"><a href="#åŸºæœ¬" class="headerlink" title="åŸºæœ¬"></a>åŸºæœ¬</h2><h3 id="PHYON"><a href="#PHYON" class="headerlink" title="PHYON"></a>PHYON</h3><p>.PHONY åœ¨ makefile ä¸­è¡¨ç¤ºå®šä¹‰ä¼ªç›®æ ‡ã€‚æ‰€è°“ä¼ªç›®æ ‡ï¼Œå°±æ˜¯å®ƒä¸ä»£è¡¨ä¸€ä¸ªçœŸæ­£çš„æ–‡ä»¶åï¼Œåœ¨æ‰§è¡Œ make æ—¶å¯ä»¥æŒ‡å®šè¿™ä¸ªç›®æ ‡æ¥æ‰§è¡Œå…¶æ‰€åœ¨è§„åˆ™å®šä¹‰çš„å‘½ä»¤</p>
<h2 id="èµ‹å€¼è¯­å¥"><a href="#èµ‹å€¼è¯­å¥" class="headerlink" title="èµ‹å€¼è¯­å¥"></a>èµ‹å€¼è¯­å¥</h2><ul>
<li><p>=</p>
<p>æœ€åŸºæœ¬çš„èµ‹å€¼æ–¹å¼ï¼Œè¯­å¥ä¸åœ¨æ–‡ä¸­çš„ä½ç½®æ— å…³ï¼Œç³»ç»Ÿè‡ªåŠ¨æ¨å¯¼å°†æœ€ç»ˆçš„èµ‹å€¼ä½œä¸ºå˜é‡çš„å€¼</p>
<figure class="highlight makefile"><table><tbody><tr><td class="code"><pre><span class="line">str=123</span><br><span class="line"><span class="section">target:</span></span><br><span class="line">	@echo  <span class="variable">$(str)</span></span><br><span class="line">str=456</span><br><span class="line"><span class="comment"># æœ€ç»ˆç»“æœï¼š456</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ï¼š=</p>
<p>è¦†ç›–å¼èµ‹å€¼ã€‚å¦‚æœå˜é‡åœ¨ä¹‹å‰å®šä¹‰èµ‹å€¼è¿‡ï¼Œæœ¬æ¬¡çš„å€¼å°†æ›´æ–°å˜é‡ã€‚è¯¥ç¬¦å·èµ‹å€¼åªèƒ½æ¨å¯¼è¯¥ç¬¦å·ä½ç½®ä¹‹å‰çš„å€¼</p>
<figure class="highlight makefile"><table><tbody><tr><td class="code"><pre><span class="line">str:=<span class="variable">$(str1)</span>123</span><br><span class="line">str1=456</span><br><span class="line"><span class="section">target:</span></span><br><span class="line">	@echo  <span class="variable">$(str)</span></span><br><span class="line"><span class="comment"># æœ€ç»ˆç»“æœï¼š123ï¼ˆå°†stré»˜è®¤ä¸ºç©ºå­—ç¬¦ï¼‰</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ï¼Ÿ=</p>
<p>å¦‚æœå½“å‰å˜é‡åœ¨ä¹‹å‰è¢«èµ‹å€¼è¿‡ï¼Œåˆ™æ­¤æ¬¡èµ‹å€¼ä¸æ‰§è¡Œï¼Œå¦åˆ™æ‰§è¡Œ</p>
<figure class="highlight makefile"><table><tbody><tr><td class="code"><pre><span class="line">str=123</span><br><span class="line">str?=456</span><br><span class="line"><span class="section">target:</span></span><br><span class="line">	@echo  <span class="variable">$(str)</span></span><br><span class="line"><span class="comment"># æœ€ç»ˆç»“æœ 123</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>+=</p>
<p>è¿½åŠ èµ‹å€¼ã€‚æ—§å€¼ä¿æŒä¸å˜ï¼Œå°†æ–°å€¼é»è´´åˆ°æ—§å€¼åé¢</p>
<figure class="highlight makefile"><table><tbody><tr><td class="code"><pre><span class="line">str=123</span><br><span class="line">str+=456</span><br><span class="line"><span class="section">target:</span></span><br><span class="line">	@echo  <span class="variable">$(str)</span></span><br><span class="line"><span class="comment"># æœ€ç»ˆç»“æœï¼š123 456</span></span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h2 id="é€šé…ç¬¦"><a href="#é€šé…ç¬¦" class="headerlink" title="é€šé…ç¬¦"></a>é€šé…ç¬¦</h2><table>
<thead>
<tr>
<th>é€šé…ç¬¦</th>
<th>ä½¿ç”¨è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>*</td>
<td>åŒ¹é…0ä¸ªæˆ–è€…æ˜¯ä»»æ„ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>?</td>
<td>åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>[]</td>
<td>æˆ‘ä»¬å¯ä»¥æŒ‡å®šåŒ¹é…çš„å­—ç¬¦æ”¾åœ¨ â€œ[]â€ ä¸­</td>
</tr>
<tr>
<td>%</td>
<td>åŒ¹é…ä»»æ„ä¸ªå­—ç¬¦</td>
</tr>
</tbody></table>
<h2 id="è‡ªåŠ¨åŒ–å˜é‡"><a href="#è‡ªåŠ¨åŒ–å˜é‡" class="headerlink" title="è‡ªåŠ¨åŒ–å˜é‡"></a>è‡ªåŠ¨åŒ–å˜é‡</h2><table>
<thead>
<tr>
<th>è‡ªåŠ¨åŒ–å˜é‡</th>
<th align="center">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>$@</td>
<td align="center">è¡¨ç¤ºè§„åˆ™çš„ç›®æ ‡æ–‡ä»¶åã€‚å¦‚æœç›®æ ‡æ˜¯ä¸€ä¸ªæ–‡æ¡£æ–‡ä»¶ï¼ˆLinux ä¸­ï¼Œä¸€èˆ¬æˆ .a æ–‡ä»¶ä¸ºæ–‡æ¡£æ–‡ä»¶ï¼Œä¹Ÿæˆä¸ºé™æ€çš„åº“æ–‡ä»¶ï¼‰ï¼Œ é‚£ä¹ˆå®ƒä»£è¡¨è¿™ä¸ªæ–‡æ¡£çš„æ–‡ä»¶åã€‚åœ¨å¤šç›®æ ‡æ¨¡å¼è§„åˆ™ä¸­ï¼Œå®ƒä»£è¡¨çš„æ˜¯è§¦å‘è§„åˆ™è¢«æ‰§è¡Œçš„æ–‡ä»¶åã€‚</td>
</tr>
<tr>
<td>$%</td>
<td align="center">å½“ç›®æ ‡æ–‡ä»¶æ˜¯ä¸€ä¸ªé™æ€åº“æ–‡ä»¶æ—¶ï¼Œä»£è¡¨é™æ€åº“çš„ä¸€ä¸ªæˆå‘˜åã€‚</td>
</tr>
<tr>
<td>$&lt;</td>
<td align="center">è§„åˆ™çš„ç¬¬ä¸€ä¸ªä¾èµ–çš„æ–‡ä»¶åã€‚å¦‚æœæ˜¯ä¸€ä¸ªç›®æ ‡æ–‡ä»¶ä½¿ç”¨éšå«çš„è§„åˆ™æ¥é‡å»ºï¼Œåˆ™å®ƒä»£è¡¨ç”±éšå«è§„åˆ™åŠ å…¥çš„ç¬¬ä¸€ä¸ªä¾èµ–æ–‡ä»¶ã€‚</td>
</tr>
<tr>
<td>$?</td>
<td align="center">æ‰€æœ‰æ¯”ç›®æ ‡æ–‡ä»¶æ›´æ–°çš„ä¾èµ–æ–‡ä»¶åˆ—è¡¨ï¼Œç©ºæ ¼åˆ†éš”ã€‚å¦‚æœç›®æ ‡æ–‡ä»¶æ—¶é™æ€åº“æ–‡ä»¶ï¼Œä»£è¡¨çš„æ˜¯åº“æ–‡ä»¶ï¼ˆ.o æ–‡ä»¶ï¼‰ã€‚</td>
</tr>
<tr>
<td>$^</td>
<td align="center">ä»£è¡¨çš„æ˜¯æ‰€æœ‰ä¾èµ–æ–‡ä»¶åˆ—è¡¨ï¼Œä½¿ç”¨ç©ºæ ¼åˆ†éš”ã€‚å¦‚æœç›®æ ‡æ˜¯é™æ€åº“æ–‡ä»¶ï¼Œå®ƒæ‰€ä»£è¡¨çš„åªèƒ½æ˜¯æ‰€æœ‰çš„åº“æˆå‘˜ï¼ˆ.o æ–‡ä»¶ï¼‰åã€‚ ä¸€ä¸ªæ–‡ä»¶å¯é‡å¤çš„å‡ºç°åœ¨ç›®æ ‡çš„ä¾èµ–ä¸­ï¼Œå˜é‡  $ åªè®°å½•å®ƒçš„ç¬¬ä¸€æ¬¡å¼•ç”¨çš„æƒ…å†µã€‚å°±æ˜¯è¯´å˜é‡ $ ä¼šå»æ‰é‡å¤çš„ä¾èµ–æ–‡ä»¶ã€‚</td>
</tr>
<tr>
<td>$+</td>
<td align="center">ç±»ä¼¼â€œ$^â€ï¼Œä½†æ˜¯å®ƒä¿ç•™äº†ä¾èµ–æ–‡ä»¶ä¸­é‡å¤å‡ºç°çš„æ–‡ä»¶ã€‚ä¸»è¦ç”¨åœ¨ç¨‹åºé“¾æ¥æ—¶åº“çš„äº¤å‰å¼•ç”¨åœºåˆã€‚</td>
</tr>
<tr>
<td>$*</td>
<td align="center">åœ¨æ¨¡å¼è§„åˆ™å’Œé™æ€æ¨¡å¼è§„åˆ™ä¸­ï¼Œä»£è¡¨â€œèŒâ€ã€‚â€œèŒâ€æ˜¯ç›®æ ‡æ¨¡å¼ä¸­â€œ%â€æ‰€ä»£è¡¨çš„éƒ¨åˆ†ï¼ˆå½“æ–‡ä»¶åä¸­å­˜åœ¨ç›®å½•æ—¶ï¼Œ â€œèŒâ€ä¹ŸåŒ…å«ç›®å½•éƒ¨åˆ†ï¼‰ã€‚</td>
</tr>
</tbody></table>
<h2 id="ç‰¹æ®Šå‡½æ•°"><a href="#ç‰¹æ®Šå‡½æ•°" class="headerlink" title="ç‰¹æ®Šå‡½æ•°"></a>ç‰¹æ®Šå‡½æ•°</h2><h3 id="æ·»åŠ å‰ç¼€"><a href="#æ·»åŠ å‰ç¼€" class="headerlink" title="æ·»åŠ å‰ç¼€"></a>æ·»åŠ å‰ç¼€</h3><ul>
<li>å‡½æ•°åï¼šaddprefix( )</li>
<li>è¯­æ³•ï¼š$(addprefix PREFIX/,${NAMEâ€¦})</li>
<li>å‡½æ•°åŠŸèƒ½ï¼šä¸ºâ€œNAMESâ€¦â€ä¸­çš„æ¯ä¸€ä¸ªæ–‡ä»¶åæ·»åŠ å‰ç¼€â€œPREFIXâ€ã€‚å‚æ•°â€œNAMESâ€¦â€æ˜¯ç©ºæ ¼åˆ†å‰²çš„æ–‡ä»¶ååºåˆ—ï¼Œå°†â€œPREFIXâ€æ·»åŠ åˆ°æ­¤åºåˆ—çš„æ¯ä¸€ä¸ªæ–‡ä»¶åä¹‹å‰ã€‚</li>
<li>è¿”å›å€¼ï¼šä»¥å•ç©ºæ ¼åˆ†å‰²çš„æ·»åŠ äº†å‰ç¼€â€œPREFIXâ€çš„æ–‡ä»¶ååºåˆ—ã€‚</li>
</ul>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">$(addprefix src/,foo bar)</span><br><span class="line"><span class="comment">//è¿”å›å€¼ä¸ºâ€œsrc/foo src/barâ€</span></span><br></pre></td></tr></tbody></table></figure>



<h3 id="è¿‡æ»¤å™¨"><a href="#è¿‡æ»¤å™¨" class="headerlink" title="è¿‡æ»¤å™¨"></a>è¿‡æ»¤å™¨</h3><ul>
<li>å‡½æ•°åï¼šfilter( )</li>
<li>è¯­æ³•ï¼š$(filter SUFFIXâ€¦,$(SOURCES))</li>
<li>ä½œç”¨ï¼šä¿ç•™å­—ä¸² â€œ $(SOURCES)â€ ä¸­æ‰€æœ‰ç¬¦åˆæ¨¡å¼ â€œ SUFFIX â€ çš„å•è¯</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">sources := main.c AT.txt</span><br><span class="line">foo : $(sources)</span><br><span class="line">    cc $(filter %.c,%.s,$(sources)) -o foo</span><br></pre></td></tr></tbody></table></figure>



<h2 id="æ‰“å°"><a href="#æ‰“å°" class="headerlink" title="æ‰“å°"></a>æ‰“å°</h2><p>ç”¨äºMakefileçš„Debugï¼Œæ‰“å°åˆ†ä¸ºä¸‰ä¸ªç­‰çº§ï¼šinfoã€warningã€error</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">$(info SRC = $(SRC))</span><br><span class="line">$(warning INC = $(INC))</span><br><span class="line"><span class="comment">//æ³¨æ„ï¼šæ‰§è¡Œåˆ°errorä¼šç›´æ¥stopé€€å‡º</span></span><br><span class="line">$(error INC = $(INC))</span><br></pre></td></tr></tbody></table></figure>



]]></content>
      <categories>
        <category>Linux</category>
        <category>Tools</category>
      </categories>
      <tags>
        <tag>Makefile</tag>
        <tag>CmakeLists.txt</tag>
      </tags>
  </entry>
  <entry>
    <title>LwIP+websocket</title>
    <url>/2023/04/19/third-party/lwip+websocket/</url>
    <content><![CDATA[<h1 id="WebSocketæµç¨‹"><a href="#WebSocketæµç¨‹" class="headerlink" title="WebSocketæµç¨‹"></a>WebSocketæµç¨‹</h1><blockquote>
<p>websocket <a href="https://github.com/dhbaird/easywsclient">https://github.com/dhbaird/easywsclient</a></p>
</blockquote>
<h2 id="Serverç«¯"><a href="#Serverç«¯" class="headerlink" title="Serverç«¯"></a>Serverç«¯</h2><ol>
<li>socket()</li>
<li>bind()</li>
<li>listen()</li>
<li>accept()</li>
<li>recv()</li>
</ol>
<h2 id="Clientç«¯"><a href="#Clientç«¯" class="headerlink" title="Clientç«¯"></a>Clientç«¯</h2><ol>
<li>socket()</li>
<li>connect()</li>
<li>send()</li>
</ol>
<h1 id="Lwip-API"><a href="#Lwip-API" class="headerlink" title="Lwip-API"></a>Lwip-API</h1><h2 id="lwip-socket"><a href="#lwip-socket" class="headerlink" title="lwip_socket"></a>lwip_socket</h2><ul>
<li><p>åŠŸèƒ½ï¼šç”¨äºæ ¹æ®æŒ‡å®šçš„åœ°å€æ—ã€æ•°æ®ç±»å‹å’Œåè®®æ¥åˆ†é…ä¸€ä¸ªå¥—æ¥å£çš„æè¿°å­—åŠå…¶æ‰€ç”¨çš„èµ„æºçš„å‡½æ•°</p>
</li>
<li><p>å‡½æ•°åŸå‹</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> socket	(	 	domain,			\</span></span><br><span class="line"><span class="meta"> 						type,			\</span></span><br><span class="line"><span class="meta"> 						protocol 		\</span></span><br><span class="line"><span class="meta">				)	   lwip_socket(domain,type,protocol)</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å‚æ•°é€‰é¡¹</p>
<ul>
<li><p>domainï¼šåœ°å€æ—AF_INETï¼ˆIP_V4ï¼‰ã€AF_INET6(IP_V6)</p>
</li>
<li><p>typeï¼š</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> SOCK_STREAM     1 <span class="comment">//æµå¼å¥—æ¥å­—æä¾›å¯é çš„ã€é¢å‘è¿æ¥çš„é€šä¿¡æµï¼›å®ƒä½¿ç”¨TCP åè®®ï¼Œä»è€Œä¿è¯äº†æ•°æ®ä¼ è¾“çš„æ­£ç¡®æ€§å’Œé¡ºåºæ€§ã€‚</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SOCK_DGRAM      2<span class="comment">// æ•°æ®æŠ¥å¥—æ¥å­—å®šä¹‰äº†ä¸€ç§æ— è¿æ¥çš„æœ ï¼Œæ•°æ®é€šè¿‡ç›¸äº’ç‹¬ç«‹çš„æŠ¥æ–‡è¿›è¡Œä¼ è¾“ï¼Œæ˜¯æ— åºçš„ï¼Œå¹¶ä¸”ä¸ä¿è¯æ˜¯å¯é ã€æ— å·®é”™çš„ã€‚å®ƒä½¿ç”¨æ•°æ®æŠ¥åè®®UDPã€‚</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SOCK_RAW        3<span class="comment">// åŸå§‹å¥—æ¥å­—å…è®¸å¯¹åº•å±‚åè®®å¦‚IPæˆ–ICMPè¿›è¡Œç›´æ¥è®¿é—®ï¼ŒåŠŸèƒ½å¼ºå¤§ä½†ä½¿ç”¨è¾ƒä¸ºä¸ä¾¿ï¼Œä¸»è¦ç”¨äºä¸€äº›åè®®çš„å¼€å‘ã€‚</span></span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ptotocol</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> IPPROTO_IP      0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IPPROTO_ICMP    1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IPPROTO_TCP     6</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IPPROTO_UDP     17</span></span><br><span class="line"><span class="comment">// ä¸€èˆ¬è‡ªåŠ¨è®¾ç½®ä¸º0, ç³»ç»Ÿè‡ªåŠ¨è®¾ç½®åˆé€‚çš„åè®®</span></span><br></pre></td></tr></tbody></table></figure></li>
</ul>
</li>
</ul>
<h2 id="lwip-connect"><a href="#lwip-connect" class="headerlink" title="lwip_connect"></a>lwip_connect</h2><ul>
<li><p>å‡½æ•°åŠŸèƒ½ï¼šç”¨äºå»ºç«‹ä¸æŒ‡å®šsocketçš„è¿æ¥ã€‚ä¸€èˆ¬ç”¨äºå®¢æˆ·ç«¯ï¼Œ</p>
</li>
<li><p>å‡½æ•°åŸå‹</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> connect	(	 	s,		\</span></span><br><span class="line"><span class="meta"> 						name,	\</span></span><br><span class="line"><span class="meta"> 						namelen \</span></span><br><span class="line"><span class="meta">				)	   lwip_connect(s,name,namelen)</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å‚æ•°</p>
<ul>
<li>s ï¼šsocket()è¿”å›æ–‡ä»¶æè¿°ç¬¦ä»£è¡¨çš„å¥—æ¥å­—</li>
<li>const struct sockaddr *nameï¼šå­˜æ”¾äº†æœåŠ¡ç«¯ç”¨äºé€šä¿¡çš„åœ°å€å’Œç«¯å£ã€‚</li>
<li>socklen_t namelenï¼šnameå‚æ•°ç»“æ„ä½“çš„é•¿åº¦ã€‚</li>
</ul>
</li>
</ul>
<h2 id="lwip-setsockopt"><a href="#lwip-setsockopt" class="headerlink" title="lwip_setsockopt"></a>lwip_setsockopt</h2><ul>
<li><p>åŠŸèƒ½ï¼šè®¾ç½®ä¸æŸä¸ªå¥—æ¥å­—å…³è”çš„é€‰é¡¹ï¼Œå½“æ“ä½œå¥—æ¥å­—é€‰é¡¹æ—¶ï¼Œé€‰é¡¹ä½äºçš„å±‚å’Œé€‰é¡¹çš„åç§°å¿…é¡»ç»™å‡º</p>
</li>
<li><p>å‡½æ•°åŸå‹ï¼š</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">å‡½æ•°åŸå‹ï¼š<span class="type">int</span> <span class="title function_">setsockopt</span><span class="params">(<span class="type">int</span> sock, 			<span class="comment">//å°†è¦è¢«è®¾ç½®é€‰é¡¹çš„å¥—æ¥å­—</span></span></span><br><span class="line"><span class="params">						<span class="type">int</span> level, 			<span class="comment">//é€‰é¡¹æ‰€åœ¨çš„åè®®å±‚</span></span></span><br><span class="line"><span class="params">						<span class="type">int</span> optname, 		<span class="comment">//éœ€è¦è®¿é—®çš„é€‰é¡¹å</span></span></span><br><span class="line"><span class="params">						<span class="type">const</span> <span class="type">void</span> *optval, <span class="comment">//æŒ‡å‘åŒ…å«æ–°é€‰é¡¹å€¼å¾—ç¼“å†²</span></span></span><br><span class="line"><span class="params">						<span class="type">socklen_t</span> optlen)</span>	<span class="comment">//ç°é€‰é¡¹çš„é•¿åº¦</span></span><br><span class="line">è¿” å› å€¼ï¼šæˆåŠŸè¿”å›0ï¼›å¤±è´¥è¿”å›-1</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å‚æ•°é€‰é¡¹</p>
<ul>
<li><p>levelï¼šå‚æ•°ï¼ˆlevelï¼‰è¯¦ç»†è¯´æ˜ï¼šlevelæ˜¯æŒ‡å®šæ§åˆ¶å¥—æ¥å­—çš„å±‚æ¬¡ï¼Œå¯ä»¥å–å¦‚ä¸‹ä¸‰ç§å€¼</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">é€‰é¡¹åç§°(optname)ã€€ã€€ã€€è¯´æ˜ã€€ã€€ã€€ã€€ã€€          ã€€ã€€ã€€ã€€æ•°æ®ç±»å‹</span><br><span class="line">========================================================================</span><br><span class="line">SO_BROADCASTã€€ã€€ã€€ã€€ã€€ å…è®¸å‘é€å¹¿æ’­æ•°æ®ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ <span class="type">int</span></span><br><span class="line">SO_DEBUGã€€ã€€ã€€ã€€ã€€ã€€ã€€  å…è®¸è°ƒè¯•ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<span class="type">int</span></span><br><span class="line">SO_DONTROUTEã€€ã€€ã€€ã€€ã€€ã€€ä¸æŸ¥æ‰¾ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<span class="type">int</span></span><br><span class="line">SO_ERRORã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€è·å¾—å¥—æ¥å­—é”™è¯¯ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<span class="type">int</span></span><br><span class="line">SO_KEEPALIVEã€€ã€€ã€€ã€€ã€€ã€€ä¿æŒè¿æ¥ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<span class="type">int</span></span><br><span class="line">SO_LINGERã€€ã€€ã€€ã€€ã€€ã€€ã€€ å»¶è¿Ÿå…³é—­è¿æ¥ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<span class="keyword">struct</span> linger</span><br><span class="line">SO_OOBINLINEã€€ã€€ã€€ã€€ã€€ã€€å¸¦å¤–æ•°æ®æ”¾å…¥æ­£å¸¸æ•°æ®æµã€€ã€€ã€€ã€€ã€€<span class="type">int</span></span><br><span class="line">SO_RCVBUFã€€ã€€ã€€ã€€ã€€ã€€ã€€ æ¥æ”¶ç¼“å†²åŒºå¤§å°ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<span class="type">int</span></span><br><span class="line">SO_SNDBUFã€€ã€€ã€€ã€€ã€€ã€€ã€€ å‘é€ç¼“å†²åŒºå¤§å°ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<span class="type">int</span></span><br><span class="line">SO_RCVLOWATã€€ã€€ã€€ã€€ã€€ã€€ æ¥æ”¶ç¼“å†²åŒºä¸‹é™ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<span class="type">int</span></span><br><span class="line">SO_SNDLOWATã€€ã€€ã€€ã€€ã€€ã€€ å‘é€ç¼“å†²åŒºä¸‹é™ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<span class="type">int</span></span><br><span class="line">SO_RCVTIMEOã€€ã€€ã€€ã€€ã€€ã€€ æ¥æ”¶è¶…æ—¶ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<span class="keyword">struct</span> timeval</span><br><span class="line">SO_SNDTIMEOã€€ã€€ã€€ã€€ã€€ã€€ å‘é€è¶…æ—¶ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<span class="keyword">struct</span> timeval</span><br><span class="line">SO_REUSERADDRã€€ã€€ã€€ã€€ã€€ å…è®¸é‡ç”¨æœ¬åœ°åœ°å€å’Œç«¯å£ã€€ã€€ã€€ã€€ã€€<span class="type">int</span></span><br><span class="line">SO_TYPEã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ è·å¾—å¥—æ¥å­—ç±»å‹ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<span class="type">int</span></span><br><span class="line">SO_BSDCOMPATã€€ã€€ã€€ã€€ã€€ã€€ä¸BSDç³»ç»Ÿå…¼å®¹ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ <span class="type">int</span></span><br><span class="line">========================================================================</span><br><span class="line"><span class="comment">// SOL_SOCKETï¼šé€šç”¨å¥—æ¥å­—é€‰é¡¹</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">é€‰é¡¹åç§°(optname)ã€€ã€€ã€€è¯´æ˜ã€€ã€€ã€€ã€€ã€€          ã€€ã€€ã€€ã€€æ•°æ®ç±»å‹</span><br><span class="line">========================================================================</span><br><span class="line">IP_HDRINCLã€€ã€€ã€€ã€€ã€€ã€€ã€€åœ¨æ•°æ®åŒ…ä¸­åŒ…å«IPé¦–éƒ¨ã€€ã€€ã€€ã€€ã€€ã€€<span class="type">int</span></span><br><span class="line">IP_OPTINOSã€€ã€€ã€€ã€€ã€€ã€€ã€€IPé¦–éƒ¨é€‰é¡¹ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<span class="type">int</span></span><br><span class="line">IP_TOSã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ç±»å‹</span><br><span class="line">IP_TTLã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ç”Ÿå­˜æ—¶é—´ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ <span class="type">int</span></span><br><span class="line">========================================================================</span><br><span class="line"><span class="comment">//IPPROTO_IPï¼šIPé€‰é¡¹</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">é€‰é¡¹åç§°(optname)ã€€ã€€ã€€è¯´æ˜ã€€ã€€ã€€ã€€ã€€          ã€€ã€€ã€€ã€€æ•°æ®ç±»å‹</span><br><span class="line">========================================================================</span><br><span class="line">TCP_MAXSEGã€€ã€€ã€€ã€€ã€€ã€€TCPæœ€å¤§æ•°æ®æ®µçš„å¤§å°ã€€ã€€ã€€ã€€ã€€ã€€ã€€ <span class="type">int</span></span><br><span class="line">TCP_NODELAYã€€ã€€ã€€ã€€ã€€ ä¸ä½¿ç”¨Nagleç®—æ³•ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ <span class="type">int</span></span><br><span class="line">========================================================================</span><br><span class="line"><span class="comment">// IPPROTO_TCPï¼šTCPé€‰é¡¹  </span></span><br></pre></td></tr></tbody></table></figure></li>
</ul>
</li>
</ul>
<h2 id="lwip-fcntl"><a href="#lwip-fcntl" class="headerlink" title="lwip_fcntl"></a>lwip_fcntl</h2><ul>
<li>åŠŸèƒ½ï¼šfcntl çš„æœ€å°å®ç°ã€‚ ç›®å‰ä»…å®ç°äº†å‘½ä»¤ F_GETFL å’Œ F_SETFLã€‚ åªæœ‰æ ‡å¿— O_NONBLOCK è¢«å®ç°ã€‚</li>
</ul>
<h2 id="lwip-send-x2F-lwip-sendto-x2F-lwip-write"><a href="#lwip-send-x2F-lwip-sendto-x2F-lwip-write" class="headerlink" title="lwip_send / lwip_sendto / lwip_write"></a>lwip_send / lwip_sendto / lwip_write</h2><ul>
<li><p>åŠŸèƒ½ï¼šå‘é€æ•°æ®</p>
</li>
<li><p>åŒºåˆ«ï¼š</p>
<ul>
<li>lwip_sendï¼šæ ¸å¿ƒï¼Œ æœ€ç»ˆçš„è°ƒç”¨</li>
<li>lwip_writeï¼šç›´æ¥è°ƒç”¨lwip_send</li>
<li>Lwip_sendtoï¼šç›¸è¾ƒäºlwip_toå¤šäº†è¿œç¨‹ä¸»æœºçš„ipåœ°å€å’Œç«¯å£å·ç›¸å…³çš„å‚æ•°ï¼Œå¤„ç†ä¸­å¤šäº†netconn_connectçš„è°ƒç”¨ï¼ˆlwip_connect + lwip_sendï¼‰</li>
</ul>
</li>
<li><p>å‡½æ•°åŸå‹</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> sendmsg	(	 	s,			\</span></span><br><span class="line"><span class="meta"> 						message,	\</span></span><br><span class="line"><span class="meta"> 						flags 		\</span></span><br><span class="line"><span class="meta">				)	   lwip_sendmsg(s,message,flags)</span></span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h2 id="lwip-select"><a href="#lwip-select" class="headerlink" title="lwip_select"></a>lwip_select</h2><ul>
<li><p>åŠŸèƒ½ï¼šç”¨äºI/Oå¤šè·¯å¤ç”¨çš„APIï¼Œä½¿ç”¨selectå¯ä»¥åŒæ—¶ç›‘å¬å¤šä¸ªsocketçš„çŠ¶æ€ï¼Œä»¥ä¾¿è¯»å†™æ•°æ®</p>
</li>
<li><p>åŸå‹</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> select	(	maxfdp1,		\</span></span><br><span class="line"><span class="meta"> 					readset,		\</span></span><br><span class="line"><span class="meta"> 					writeset,		\</span></span><br><span class="line"><span class="meta"> 					exceptset,		\</span></span><br><span class="line"><span class="meta"> 					timeout 		\</span></span><br><span class="line"><span class="meta">				)	lwip_select(maxfdp1,readset,writeset,exceptset,timeout)</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å‚æ•°å«ä¹‰</p>
<ul>
<li><p>maxfdp1ï¼šè¦æ£€æŸ¥çš„æœ€å¤§æ–‡ä»¶æè¿°ç¬¦çš„æ•°ç›®ï¼Œä¸€èˆ¬æ˜¯æœ€å¤§dp+1</p>
</li>
<li><p>readset/writeset/exceptsetï¼š</p>
<p>fd_setç±»å‹ï¼ŒæŒ‡å‘éœ€è¦ç›‘å¬çš„å¯è¯»ã€å¯å†™å’Œå¼‚å¸¸äº‹ä»¶çš„æ–‡ä»¶æè¿°ç¬¦é›†åˆ</p>
</li>
</ul>
</li>
</ul>
<h2 id="lwip-recv"><a href="#lwip-recv" class="headerlink" title="lwip_recv"></a>lwip_recv</h2><ul>
<li><p>å‡½æ•°åŠŸèƒ½ï¼šæ¥å—æ•°æ®</p>
</li>
<li><p>å‡½æ•°åŸå‹</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> recv	(	 	s,	\</span></span><br><span class="line"><span class="meta"> 						mem,\</span></span><br><span class="line"><span class="meta"> 						len,\</span></span><br><span class="line"><span class="meta"> 						flags \</span></span><br><span class="line"><span class="meta">				)	   lwip_recv(s,mem,len,flags)</span></span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h1 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h1><ol>
<li><p>Qï¼šè°ƒç”¨lwip_send / lwip_recvæ—¶å‡ºç°WSAEWOULDBLOCK / WSAEINPROGRESS</p>
<p>Aï¼šæœ¬è´¨ä¸Šä»¥ä¸Šä¸¤ä¸ªé”™è¯¯ç ä¸æ˜¯é”™è¯¯ï¼Œè€Œæ˜¯ä¸€ç§è­¦å‘Šï¼Œæ¥æ”¶æ–¹å‘Šè¯‰å‘é€æ–¹å®ƒç°åœ¨å¤„äºbusyçŠ¶æ€</p>
<p>â€‹		WSAEWOULDBLOCKçš„æ„æ€æ˜¯output bufferå·²ç»æ»¡äº†ï¼Œæ— æ³•å†å†™å…¥æ•°æ®ã€‚æŒ‰ç…§ç½‘ä¸Šåšä¸»çš„è¯´æ³•ï¼Œåœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹å…¶å®ä¸ä¼šå‡ºç°bufferæ»¡çš„æƒ…å†µï¼Œè€Œæ˜¯		å¤„äºbusyçŠ¶æ€ã€‚æˆ‘ç†è§£çš„è¿™ä¸overrunçš„æ„æ€å·®ä¸å¤šï¼Œåªä¸è¿‡è¿™é‡Œä¸ä¼šå¯¹æ•°æ®æ­£ç¡®æ€§ã€å®Œæ•´æ€§é€ æˆå½±å“ï¼Œæ¥æ”¶æ–¹å‘Šè¯‰æˆ‘å®ƒçš„ç¼“å†²åŒºæ»¡äº†æˆ–è€…æ•°æ®å·²ç»å¤„ç†		ä¸è¿‡æ¥äº†ï¼Œå®ƒä¸å†æ¥å—æ•°æ®äº†ï¼Œæ‰€ä»¥ç»™æˆ‘ä»¬ä¸€ä¸ªå¼‚å¸¸ã€‚</p>
<p>â€‹		WSAEINPROGRESS:ä¸€ä¸ªé˜»å¡çš„WINDOWSå¥—æ¥å£è°ƒç”¨æ­£åœ¨è¿è¡Œä¸­ã€‚</p>
<p>è§£å†³ï¼šå½“å‡ºç° WSAEWOULDBLOCK å¼‚å¸¸åç›´åˆ°ç©ºå‡º Output Buffer æ—¶ï¼Œç³»ç»Ÿä¼šå‘é€ä¸€ä¸ª FD_WRITE ç»™å‘é€æ–¹ã€‚æˆ‘ä»¬å®Œå…¨å¯ä»¥åœ¨ç­‰æ”¶åˆ° FD_WRITE æ¶ˆæ¯åå†é‡æ–°å‘é€ä»å‡ºç°å¼‚å¸¸å¼€å§‹çš„æ•°æ®åŒ…å³å¯ï¼ˆè¯¥åŒ…éœ€è¦å…¨éƒ¨é‡æ–°å‘é€ï¼‰ã€‚</p>
<blockquote>
<p><a href="https://bbs.csdn.net/topics/70198557">å‚è€ƒé“¾æ¥</a></p>
</blockquote>
</li>
<li></li>
</ol>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ul>
<li><p><a href="https://blog.csdn.net/wwwyue1985/article/details/113789192">Lwipä¹‹APIæ¥å£ä¸åŸç†</a></p>
</li>
<li><p><a href="https://blog.csdn.net/qq_39854159/article/details/120693512">LWIPå­¦ä¹ ä¹‹Socket ï¼ˆAPIç¯‡ï¼‰</a></p>
</li>
<li><p><a href="https://www.nongnu.org/lwip/2_0_x/group__socket.html#gae3d13671f622e17c17317c9a16dfd0ee">Lwip API</a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>Third Party</category>
      </categories>
      <tags>
        <tag>lwip websocket</tag>
      </tags>
  </entry>
  <entry>
    <title>51jobçˆ¬è™«é¡¹ç›®</title>
    <url>/2022/12/03/item/51job/</url>
    <content><![CDATA[<h1 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h1><p>ç´§æ¥ç€è±†ç“£çˆ¬è™«çš„é¡¹ç›®ï¼Œè¯¥é¡¹ç›®ä½œä¸ºå…¶åçš„ç»ƒä¹ å’Œæ‰©å±•ï¼Œç®—æ˜¯ä¸€ä¸ªè¾ƒä¸ºä¸é”™çš„ä¸Šæ‰‹ç»ƒä¹ ã€‚æœ¬æ–‡æ‰€æ¶‰åŠçš„æ˜¯å¯¹äº51jobæ•°æ®çš„çˆ¬å–ã€è§£æå’Œä¿å­˜ã€‚å¯¹äºæ•°æ®å¯è§†åŒ–æ“ä½œï¼Œåœ¨åç»­ä¼šæŒç»­æ›´æ–°ï¼Œè¯·å…³æ³¨ï¼<br>åœ¨ä¸‹é¢ä»£ç ä¸­æœ‰äº›å‡½æ•°å†…éƒ¨è°ƒç”¨äº†å…¶ä»–å‡½æ•°ï¼Œéœ€è¦è¡¥å…¨å„ä¸ªéƒ¨åˆ†çš„å‡½æ•°ã€‚å¦‚æœéœ€è¦æºç è¯·ç§ä¿¡æˆ–è€…è¯„è®ºã€‚</p>
<blockquote>
<p>å…·ä½“å…³äºåº“çš„æ“ä½œæˆ‘é€‰æ‹©äº†ä¸€äº›å®˜æ–¹æ–‡æ¡£å’Œè¾ƒå¥½ç†è§£çš„è§£è¯»æ–‡ç« åšé“¾æ¥ï¼ŒçŸ¥è¯†ç‚¹æ¯”è¾ƒå…¨é¢è¯·å‚è€ƒä¸‹åˆ—è¡¨ã€‚</p>
</blockquote>
<ul>
<li><p><a href="https://python-selenium-zh.readthedocs.io/zh_CN/latest/">è¯¦æƒ…é¡µURLè·å–æ¨¡å—ï¼šselenium</a></p>
</li>
<li><p><a href="https://requests.readthedocs.io/zh_CN/latest/">URLå¤„ç†ç¬¬ä¸‰æ–¹æ¨¡å—ï¼šrequests</a></p>
</li>
<li><p><a href="https://www.jianshu.com/p/9135d7833d6d">æ•°æ®æå–etreeæ¨¡å—ï¼šlxml</a></p>
</li>
<li><p><a href="https://docs.python.org/zh-cn/3.7/library/sqlite3.html">æ•°æ®åº“ä¿å­˜æ¨¡å—ï¼šsqlite3</a></p>
</li>
<li><p><a href="https://www.cnblogs.com/python-robot/p/9958352.html">æœ¬åœ°æ–‡ä»¶ä¿å­˜æ¨¡å—ï¼šxlwt</a></p>
</li>
</ul>
<h1 id="æ•°æ®çˆ¬å–ä¸è§£æ"><a href="#æ•°æ®çˆ¬å–ä¸è§£æ" class="headerlink" title="æ•°æ®çˆ¬å–ä¸è§£æ"></a>æ•°æ®çˆ¬å–ä¸è§£æ</h1><h2 id="è¯¦æƒ…é¡µé“¾æ¥çš„è·å–ï¼šselenium"><a href="#è¯¦æƒ…é¡µé“¾æ¥çš„è·å–ï¼šselenium" class="headerlink" title="è¯¦æƒ…é¡µé“¾æ¥çš„è·å–ï¼šselenium"></a>è¯¦æƒ…é¡µé“¾æ¥çš„è·å–ï¼šselenium</h2><p>seleniumä½œä¸ºwebè‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ï¼Œç›®å‰åœ¨pythonçˆ¬è™«ä¸­åº”ç”¨ä¹Ÿè¶Šæ¥è¶Šå¹¿æ³›ã€‚å…¶ä¸»è¦åº”ç”¨åŸç†æ˜¯ï¼šé€šè¿‡å®Œå…¨æ¨¡æ‹Ÿæµè§ˆå™¨çš„æ“ä½œï¼Œæ¯”å¦‚è¾“å…¥æ¡†è¾“å…¥ã€ç‚¹å‡»è¶…é“¾æ¥å…ƒç´ ã€ä¸‹æ‹‰æ»šåŠ¨æ¡ç­‰ç­‰æ¥æ‹¿åˆ°jsæ¸²æŸ“ä¹‹åçš„ä»£ç ã€‚<br>å¿…è¦æ€§ï¼šä¹‹å‰ç”¨çš„requestsæ˜¯å¯¹ä¸€ä¸ªé¡µé¢å‘é€è¯·æ±‚ï¼Œåªèƒ½è·å¾—å½“å‰åŠ è½½å‡ºæ¥çš„éƒ¨åˆ†é¡µé¢å³æœ€åˆçš„æºä»£ç ï¼ŒåŠ¨æ€åŠ è½½çš„æ•°æ®æ˜¯è·å–ä¸åˆ°çš„ï¼Œæ¯”å¦‚jsæ¸²æŸ“åçš„ä»£ç ã€ä¸‹æ‹‰æ»šè½®å¾—åˆ°çš„æ•°æ®å’Œä¸€äº›æ¡†å†…éšè—å…ƒç´ ç­‰ç­‰ã€‚<br>å¯¹äºseleniumçš„è§£è¯»ï¼Œ<a href="https://blog.csdn.net/heartbeat196/article/details/113831482">è¯·ç‚¹å‡»click</a>ï¼</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#è·å¾—æ‰€æœ‰ç½‘é¡µè¯¦æƒ…é¡µé“¾æ¥</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_link</span>():</span><br><span class="line">    linklist = []</span><br><span class="line">    <span class="comment">#åˆ›å»ºé©±åŠ¨å™¨å¯¹è±¡</span></span><br><span class="line">    wd = webdriver.Chrome(<span class="string">r'C:\Program Files\Google\Chrome\Application\chromedriver.exe'</span>)</span><br><span class="line">    wd.implicitly_wait(<span class="number">5</span>)</span><br><span class="line">    <span class="comment">#è®¿é—®51jobç½‘ç«™</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">21</span>):</span><br><span class="line">        wd.get(<span class="string">f"https://search.51job.com/list/010000,000000,0000,00,9,99,keyword,2,<span class="subst">{i}</span>.html?"</span>)</span><br><span class="line">        <span class="comment">#æŸ¥æ‰¾æ¯æ¯ä¸€æ¡ä¿¡æ¯é“¾æ¥è¿›å…¥è¯¦æƒ…é¡µ</span></span><br><span class="line">        joblists = wd.find_elements_by_xpath(<span class="string">'//div[@class="j_joblist"]/div/a'</span>)</span><br><span class="line">        <span class="keyword">for</span> joblist <span class="keyword">in</span> joblists:</span><br><span class="line">            con_link = joblist.get_attribute(<span class="string">"href"</span>)</span><br><span class="line">            linklist.append(con_link)</span><br><span class="line">    wd.quit()</span><br><span class="line">    <span class="keyword">return</span> linklist</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ³¨é‡Šï¼š</p>
<ol>
<li>ä»£ç ä¸­çš„ webdriver.Chromeï¼Œåé¢æ˜¯è‡ªå·±æ‰€ç”¨çš„é©±åŠ¨å™¨çš„æœ¬åœ°åœ°å€ã€‚</li>
<li>webdriverå¯¹è±¡wdï¼Œè°ƒç”¨ getæ–¹æ³•ï¼Œåé¢æ‹¬å·å†…ä¸ºè‡ªå·±æ‰€è¦è®¿é—®çš„ç½‘é¡µé“¾æ¥åœ°å€ã€‚</li>
</ol>
</blockquote>
<h2 id="æ•°æ®çˆ¬å–ä¸è§£æï¼šxpath"><a href="#æ•°æ®çˆ¬å–ä¸è§£æï¼šxpath" class="headerlink" title="æ•°æ®çˆ¬å–ä¸è§£æï¼šxpath"></a>æ•°æ®çˆ¬å–ä¸è§£æï¼šxpath</h2><p>ç”±äºè‡ªå·±ä¹ æƒ¯äºä½¿ç”¨xpathæ–¹æ³•è§£æï¼Œåœ¨æ­¤åªåšxpathè§£æçš„æ–¹æ³•ï¼Œå¦‚æœéœ€è¦reæ­£åˆ™è¡¨è¾¾å¼æˆ–è€…BeautifulSoupè§£æï¼Œè¯„è®ºåç»­ä¼šæ›´æ–°ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_data</span>():</span><br><span class="line">    job_information = []</span><br><span class="line">    url_lists = get_link()</span><br><span class="line">    <span class="keyword">for</span> i,url <span class="keyword">in</span> <span class="built_in">enumerate</span>(url_lists):</span><br><span class="line">        datalist=[]</span><br><span class="line">        header = {</span><br><span class="line">            <span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0(Windows NT 10.0;Win64;x64)AppleWebKit/537.36(KHTML,likeGecko)Chrome/88.0.4324.150Safari/537.36"</span></span><br><span class="line">        }</span><br><span class="line">        response = requests.get(url, headers=header)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            html = response.content.decode(<span class="string">"gbk"</span>)</span><br><span class="line">            data = etree.HTML(html)</span><br><span class="line">            link = url</span><br><span class="line">            datalist.append(link)		<span class="comment">#å­˜å…¥å²—ä½é“¾æ¥</span></span><br><span class="line">            title = data.xpath(<span class="string">r'//div[@class="cn"]/h1/@title'</span>)[<span class="number">0</span>]</span><br><span class="line">            datalist.append(title)		<span class="comment">#å­˜å…¥å²—ä½åç§°</span></span><br><span class="line">            salary = data.xpath(<span class="string">r'//div[@class="cn"]/strong/text()'</span>)[<span class="number">0</span>]</span><br><span class="line">            datalist.append(salary)</span><br><span class="line">            information = data.xpath(<span class="string">r'//p[@class="msg ltype"]/@title'</span>)[<span class="number">0</span>]</span><br><span class="line">            information = re.sub(<span class="string">r"\s+"</span>, <span class="string">""</span>, information)  <span class="comment"># å»é™¤ç©ºç™½æ ¼</span></span><br><span class="line">            experience = information.split(<span class="string">"|"</span>)[<span class="number">1</span>]</span><br><span class="line">            datalist.append(experience)</span><br><span class="line">            education = information.split(<span class="string">"|"</span>)[<span class="number">2</span>]</span><br><span class="line">            datalist.append(education)</span><br><span class="line">            num = information.split(<span class="string">"|"</span>)[<span class="number">3</span>]</span><br><span class="line">            datalist.append(num)</span><br><span class="line">            place = data.xpath(<span class="string">r'//p[@class="fp"]/text()'</span>)[<span class="number">0</span>]</span><br><span class="line">            datalist.append(place)</span><br><span class="line">            treatment = data.xpath(<span class="string">r'//span[@class="sp4"]/text()'</span>)</span><br><span class="line">            treatment = <span class="string">" "</span>.join(treatment)</span><br><span class="line">            datalist.append(treatment)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"-----ç¬¬{}æ¡------"</span>.<span class="built_in">format</span>(i))</span><br><span class="line">            job_information.append(datalist)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"-----ç¬¬{}æ¡å‡ºé”™ï¼ŒåŸå› æ˜¯{}------"</span>.<span class="built_in">format</span>(i,e))</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="comment">#print(job_information)		#æµ‹è¯•</span></span><br><span class="line">    <span class="keyword">return</span> job_information</span><br></pre></td></tr></tbody></table></figure>
<h1 id="æ•°æ®å­˜å‚¨"><a href="#æ•°æ®å­˜å‚¨" class="headerlink" title="æ•°æ®å­˜å‚¨"></a>æ•°æ®å­˜å‚¨</h1><h2 id="Excelæœ¬åœ°ä¿å­˜"><a href="#Excelæœ¬åœ°ä¿å­˜" class="headerlink" title="Excelæœ¬åœ°ä¿å­˜"></a>Excelæœ¬åœ°ä¿å­˜</h2><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">save_data_excel</span>(<span class="params">datalist</span>):</span><br><span class="line">    workbook = xlwt.Workbook(encoding=<span class="string">"gbk"</span>, style_compression=<span class="number">0</span>)</span><br><span class="line">    worksheet = workbook.add_sheet(<span class="string">"python"</span>)</span><br><span class="line">    col = [<span class="string">"é“¾æ¥"</span>, <span class="string">"å²—ä½åç§°"</span>, <span class="string">"è–ªèµ„"</span>, <span class="string">"å·¥ä½œç»éªŒ"</span>, <span class="string">"å­¦å†"</span>, <span class="string">"æ‹›è˜äººæ•°"</span>, <span class="string">"å·¥ä½œåœ°ç‚¹"</span>, <span class="string">"ç¦åˆ©"</span>]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">8</span>):</span><br><span class="line">        worksheet.write(<span class="number">0</span>, i, col[i])</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(datalist)):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">8</span>):</span><br><span class="line">            worksheet.write(i+<span class="number">1</span>,j,datalist[i][j])</span><br><span class="line">    workbook.save(<span class="string">"åŒ—äº¬-pythonå·¥ä½œ.xls"</span>)</span><br></pre></td></tr></tbody></table></figure>
<h2 id="Excelæ•°æ®ä¿å­˜ç»“æœå±•ç¤º"><a href="#Excelæ•°æ®ä¿å­˜ç»“æœå±•ç¤º" class="headerlink" title="Excelæ•°æ®ä¿å­˜ç»“æœå±•ç¤º"></a>Excelæ•°æ®ä¿å­˜ç»“æœå±•ç¤º</h2><p><img src="/images/item/51job-1.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="sqliteæ•°æ®åº“ä¿å­˜"><a href="#sqliteæ•°æ®åº“ä¿å­˜" class="headerlink" title="sqliteæ•°æ®åº“ä¿å­˜"></a>sqliteæ•°æ®åº“ä¿å­˜</h2><p>åœ¨æ­¤éƒ¨åˆ†åªå†™äº†æ•°æ®åº“ä¿å­˜çš„å·¥ä½œï¼Œæ•°æ®åº“çš„åˆå§‹åŒ–åˆ›å»ºéœ€å‡½æ•°sql_initéœ€è¦æ·»åŠ å³å¯ä½¿ç”¨ã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">save_data_sql</span>(<span class="params">datalist,dbpath</span>):</span><br><span class="line">    sql_init(dbpath)</span><br><span class="line">    conn = sqlite3.connect(dbpath)</span><br><span class="line">    cur = conn.cursor()</span><br><span class="line">    <span class="keyword">for</span> data <span class="keyword">in</span> datalist:</span><br><span class="line">        <span class="keyword">for</span> index <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(data)):</span><br><span class="line">            data[index] = <span class="string">'"'</span> + data[index] + <span class="string">'"'</span></span><br><span class="line">        sql = <span class="string">'''</span></span><br><span class="line"><span class="string">        insert into job_information(</span></span><br><span class="line"><span class="string">            link,title,salary,experience,education,num,place,treatment)</span></span><br><span class="line"><span class="string">            values(%s)'''</span>%<span class="string">","</span>.join(data)</span><br><span class="line">        <span class="comment">#print(sql)     #æµ‹è¯•sqlè¯­å¥æ˜¯å¦æ­£ç¡®</span></span><br><span class="line">        cur.execute(sql)</span><br><span class="line">        conn.commit()</span><br><span class="line">    cur.close()</span><br><span class="line">    conn.close()</span><br></pre></td></tr></tbody></table></figure>
<h2 id="sqliteæ•°æ®åº“ä¿å­˜ç»“æœå±•ç¤º"><a href="#sqliteæ•°æ®åº“ä¿å­˜ç»“æœå±•ç¤º" class="headerlink" title="sqliteæ•°æ®åº“ä¿å­˜ç»“æœå±•ç¤º"></a>sqliteæ•°æ®åº“ä¿å­˜ç»“æœå±•ç¤º</h2><p><img src="/images/item/51job-2.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h1 id="æ•°æ®å¯è§†åŒ–"><a href="#æ•°æ®å¯è§†åŒ–" class="headerlink" title="æ•°æ®å¯è§†åŒ–"></a>æ•°æ®å¯è§†åŒ–</h1><p>null</p>
]]></content>
      <categories>
        <category>Item</category>
      </categories>
  </entry>
  <entry>
    <title>è±†ç“£ç”µå½±Top250æ•°æ®çˆ¬å–ã€æ•°æ®åˆ†æåŠæ•°æ®å¯è§†åŒ–</title>
    <url>/2022/12/03/item/doubanTop250Spider/</url>
    <content><![CDATA[<h1 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h1><p>åœ¨çˆ¬è™«å­¦ä¹ ä¸­ï¼Œä¸€å¥—å®Œæ•´çš„é¡¹ç›®å®æˆ˜å¯¹äºä»£ç å’Œè®¡ç®—æœºæ€ç»´èƒ½åŠ›æœ‰å¾ˆå¤§çš„æå‡ã€‚æœ¬æ–‡åŸºäºBç«™è§†é¢‘<a href="https://www.bilibili.com/video/BV12E411A7ZQ?from=search&amp;seid=4741588992451392787">ã€ŠPythonçˆ¬è™«åŸºç¡€5å¤©é€Ÿæˆï¼ˆ2021å…¨æ–°åˆé›†ï¼‰Pythonå…¥é—¨+æ•°æ®å¯è§†åŒ–ã€‹</a>å…³äº â€œè±†ç“£ç”µå½±Top250â€ é¡¹ç›®åšå‡ºçš„æ€»ç»“ã€æ‹“å±•ä¸åˆ†äº«ã€‚<br>åœ¨æœ¬æ–‡ä¸­ï¼Œåªå±•ç¤ºæ•°æ®çˆ¬å–åˆ°æ•°æ®ä¿å­˜çš„å·¥ä½œï¼Œæ•°æ®å¯è§†åŒ–éƒ¨åˆ†åªåšéƒ¨åˆ†åˆ†æå’Œç»“æœå±•ç¤ºã€‚å…·ä½“å…³äºåº“çš„æ“ä½œæˆ‘é€‰æ‹©äº†ä¸€äº›å®˜æ–¹æ–‡æ¡£åšé“¾æ¥ï¼ŒçŸ¥è¯†ç‚¹æ¯”è¾ƒå…¨é¢è¯·å‚è€ƒä¸‹åˆ—è¡¨ã€‚å¦‚æœæƒ³è¦é¡¹ç›®æºä»£ç ï¼Œè¯·è¯„è®ºæˆ–ç§ä¿¡ã€‚</p>
<ul>
<li><a href="https://docs.python.org/zh-cn/3.7/library/urllib.html?highlight=urllib">URLå¤„ç†ç³»ç»Ÿæ¨¡å—ï¼šurllib</a></li>
<li><a href="https://requests.readthedocs.io/zh_CN/latest/">URLå¤„ç†ç¬¬ä¸‰æ–¹æ¨¡å—ï¼šrequests</a></li>
<li><a href="https://beautifulsoup.readthedocs.io/zh_CN/v4.4.0/">æ•°æ®æå–bs4æ¨¡å—ï¼šBeautifulSoup</a></li>
<li><a href="https://docs.python.org/zh-cn/3.7/library/re.html">æ•°æ®æå–æ­£åˆ™è¡¨è¾¾å¼æ¨¡å—ï¼šre</a></li>
<li><a href="https://www.jianshu.com/p/9135d7833d6d">æ•°æ®æå–æ¨¡å— ï¼šlxml</a></li>
<li><a href="https://docs.python.org/zh-cn/3.7/library/sqlite3.html">æ•°æ®åº“ä¿å­˜æ¨¡å—ï¼šsqlite3</a></li>
<li><a href="https://www.cnblogs.com/python-robot/p/9958352.html">æœ¬åœ°æ–‡ä»¶ä¿å­˜æ¨¡å—ï¼šxlwt</a></li>
</ul>
<h1 id="æ•°æ®çˆ¬å–ä¸è§£æ"><a href="#æ•°æ®çˆ¬å–ä¸è§£æ" class="headerlink" title="æ•°æ®çˆ¬å–ä¸è§£æ"></a>æ•°æ®çˆ¬å–ä¸è§£æ</h1><h2 id="æ•°æ®çˆ¬å–"><a href="#æ•°æ®çˆ¬å–" class="headerlink" title="æ•°æ®çˆ¬å–"></a>æ•°æ®çˆ¬å–</h2><p>æ•°æ®çˆ¬å–å·¥ä½œæ˜¯æ•´ä¸ªå·¥ç¨‹çš„ç¬¬ä¸€æ­¥ï¼Œè¿™ä¸€é˜¶æ®µæ‰€è¦åšçš„å·¥ä½œæ˜¯å°†ç½‘é¡µä¸Šå¸¦æœ‰æˆ‘ä»¬éœ€è¦çš„ä¿¡æ¯çš„ç½‘é¡µæºç æŠ“å–ä¸‹æ¥ã€‚<strong>å»ºè®®åœ¨æ­¤æ­¥éª¤æ—¶ï¼Œå¦‚æœæ•°æ®é‡ä¸å¤§å…¨éƒ¨æŠ“å–ä¿å­˜åˆ°æœ¬åœ°ï¼›å¦‚æœæ•°æ®é‡å¾ˆå¤§ï¼Œåˆ™å…ˆä¿å­˜ä¸€ç»„åˆ°å¤šç»„æ•°æ®åˆ°æœ¬åœ°</strong>ã€‚åœ¨æ¥ä¸‹çš„æ•°æ®è§£ææ—¶é€šè¿‡æœ¬åœ°æ–‡ä»¶è§£æï¼Œè¿™æ ·åšä¼šé¿å…åé¢å¤šæ¬¡è®¿é—®ç½‘ç«™è€Œè¢«å°ipï¼Œå½“ç„¶é’ˆå¯¹è¢«å°ipæœ‰ç›¸åº”çš„è§£å†³åŠæ³•ï¼Œä½†æ˜¯è¿™äº›å†…å®¹æ¶‰åŠåˆ°ç½‘ç»œçŸ¥è¯†ï¼Œå»ºè®®åé¢å†å­¦ã€‚</p>
<h3 id="urllibæ–¹æ³•"><a href="#urllibæ–¹æ³•" class="headerlink" title="urllibæ–¹æ³•"></a>urllibæ–¹æ³•</h3><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line">base_url = <span class="string">"https://movie.douban.com/top250?start="</span></span><br><span class="line">header = {</span><br><span class="line">    <span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.150 Safari/537.36"</span></span><br><span class="line">}</span><br><span class="line"><span class="comment">#æ„å»ºè¯·æ±‚</span></span><br><span class="line">req = urllib.request.Request(url=base_url,headers=header)</span><br><span class="line"><span class="comment">#å¾—åˆ°å“åº”</span></span><br><span class="line">response = urllib.request.urlopen(req)</span><br><span class="line">html = response.read().decode(<span class="string">"utf-8"</span>)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">"top250_first_page.html"</span>,<span class="string">"w"</span>,encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(html)</span><br></pre></td></tr></tbody></table></figure>
<h3 id="requestsæ–¹æ³•"><a href="#requestsæ–¹æ³•" class="headerlink" title="requestsæ–¹æ³•"></a>requestsæ–¹æ³•</h3><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">base_url = <span class="string">"https://movie.douban.com/top250?start="</span></span><br><span class="line">header = {</span><br><span class="line">    <span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.150 Safari/537.36"</span></span><br><span class="line">}</span><br><span class="line">response = requests.get(url=base_url,headers=header)</span><br><span class="line">data = response.content.decode()</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">"top250_first_page.html"</span>,<span class="string">"w"</span>,encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(data)</span><br></pre></td></tr></tbody></table></figure>
<h2 id="æ•°æ®è§£æ"><a href="#æ•°æ®è§£æ" class="headerlink" title="æ•°æ®è§£æ"></a>æ•°æ®è§£æ</h2><p>æ•°æ®è§£æä½œä¸ºç¬¬äºŒæ­¥æ˜¯æ•´ä¸ªå·¥ç¨‹çš„æ ¸å¿ƒï¼Œè¿™ä¸€æ­¥ç›´æ¥å†³å®šäº† æˆ‘ä»¬æ˜¯å¦èƒ½å¤Ÿåœ¨æµ·é‡çš„æ•°æ®ä¸­åªå¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„æ•°æ®ã€‚çˆ¬è™«ä¸­ä¸‰ç§é‡è¦çš„æ•°æ®è§£æçš„æ–¹æ³•åˆ†åˆ«æ˜¯ï¼šBeautifulSoupã€reæ­£åˆ™è¡¨è¾¾å¼å’Œxpathï¼Œä¸‰ç§æ–¹æ³•æ²¡æœ‰ä¼˜åŠ£å¥½åï¼ŒæŒ‰ç…§æˆ‘å‰é¢ç»™å‡ºçš„æ–‡æ¡£ï¼Œè‡ªå·±ç”¨å¥½ä¸€ç§å³å¯æ»¡è¶³éœ€æ±‚ï¼Œå½“ç„¶ä¸‰ç§æ–¹æ³•æ ¹æ®åœºæ™¯ä½¿ç”¨æ˜¯æœ€é«˜æ•ˆçš„ï¼Œå¦‚æœä½ æ˜¯å¤§ä½¬çš„è¯ğŸ‘ã€‚<br>æˆ‘è‡ªå·±å¸¸ç”¨çš„æ˜¯xpathæ–¹æ³•ã€‚ç¬¬ä¸€ï¼Œxpathè·¯å¾„å¯ä»¥ç›´æ¥åœ¨ç½‘é¡µä¸Šè¿›è¡Œå¤åˆ¶ï¼›ç¬¬äºŒï¼Œå¯ä»¥é€šè¿‡<a href="https://blog.csdn.net/heartbeat196/article/details/113790232">XPath Helperå·¥å…·</a>è¿›è¡Œæ›´å¥½çš„æµ‹è¯•ï¼Œæˆ‘åœ¨ä¹‹å‰çš„åšå®¢æœ‰æåˆ°å¯ä»¥<a href="https://blog.csdn.net/heartbeat196/article/details/113790232">ç‚¹å‡»</a>æŸ¥çœ‹ã€‚ä¸‹é¢æˆ‘ç”¨ä¸‰ç§ä¸åŒçš„æ–¹æ³•å¯¹ä¿å­˜åˆ°æœ¬åœ°çš„ä¸€é¡µä¸Šçš„æ•°æ®è¿›è¡Œäº†è§£æã€‚</p>
<h3 id="BeaufifulSoup"><a href="#BeaufifulSoup" class="headerlink" title="BeaufifulSoup"></a>BeaufifulSoup</h3><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="comment">#å°†è¦è§£æçš„ç½‘ç«™æ‰“å¼€</span></span><br><span class="line">html = <span class="built_in">open</span>(<span class="string">"top250_first_page.html"</span>,<span class="string">"rb"</span>)</span><br><span class="line"><span class="comment">#æ„å»ºBeautifulSoupå¯¹è±¡</span></span><br><span class="line">soup = BeautifulSoup(html,<span class="string">"html.parser"</span>)</span><br><span class="line"><span class="comment">#å¾—åˆ°æ¯ä¸€å—çš„å†…å®¹</span></span><br><span class="line">blocks = soup.select(<span class="string">".grid_view .item"</span>)</span><br><span class="line"><span class="comment">#æ„å»ºç”µå½±åˆ—è¡¨</span></span><br><span class="line">movie_list = []</span><br><span class="line"><span class="comment">#ç”µå½±é“¾æ¥å’Œç”µå½±å›¾ç‰‡é“¾æ¥</span></span><br><span class="line"><span class="keyword">for</span> index,block <span class="keyword">in</span> <span class="built_in">enumerate</span>(blocks):</span><br><span class="line">    movie_dict = {}</span><br><span class="line">    movie_dict[<span class="string">"movie_href"</span>] = block.select(<span class="string">"a"</span>)[<span class="number">0</span>].get(<span class="string">"href"</span>)       <span class="comment">#ç”µå½±è¯¦æƒ…é¡µé“¾æ¥</span></span><br><span class="line">    movie_dict[<span class="string">"pic_href"</span>] = block.select(<span class="string">"img"</span>)[<span class="number">0</span>].get(<span class="string">"src"</span>)        <span class="comment">#ç”µå½±é“¾æ¥</span></span><br><span class="line">    title = block.select(<span class="string">".title"</span>)                      <span class="comment">#ç”µå½±åå­—</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(title)==<span class="number">2</span>:</span><br><span class="line">        movie_dict[<span class="string">"c_title"</span>] = block.select(<span class="string">".title"</span>)[<span class="number">0</span>].text            <span class="comment">#ç”µå½±ä¸­æ–‡åå­—</span></span><br><span class="line">        o_title = block.select(<span class="string">".title"</span>)[<span class="number">1</span>].text            <span class="comment"># ç”µå½±ä¸­æ–‡åå­—</span></span><br><span class="line">        movie_dict[<span class="string">"o_title"</span>] = o_title.replace(<span class="string">"/"</span>,<span class="string">""</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        movie_dict[<span class="string">"c_title"</span>] = block.select(<span class="string">".title"</span>)[<span class="number">0</span>].text            <span class="comment">#ç”µå½±ä¸­æ–‡åå­—</span></span><br><span class="line">        movie_dict[<span class="string">"o_title"</span>] = <span class="string">" "</span>                                       <span class="comment">#ç”µå½±å¤–æ–‡åå­—</span></span><br><span class="line">    movie_dict[<span class="string">"rate"</span>] = block.select(<span class="string">".star .rating_num"</span>)[<span class="number">0</span>].text        <span class="comment">#ç”µå½±è¯„åˆ†</span></span><br><span class="line">    movie_dict[<span class="string">"judge"</span>] = block.select(<span class="string">".star span"</span>)[<span class="number">3</span>].text[:-<span class="number">3</span>]         <span class="comment">#è¯„åˆ†äººæ•°</span></span><br><span class="line">    bd = block.select(<span class="string">".bd p"</span>)[<span class="number">0</span>].text</span><br><span class="line">    movie_dict[<span class="string">"bd"</span>] = re.sub(<span class="string">" "</span>,<span class="string">""</span>,bd)</span><br><span class="line">    movie_dict[<span class="string">"inq"</span>] = block.select(<span class="string">".quote .inq"</span>)[<span class="number">0</span>].text.replace(<span class="string">"ã€‚"</span>,<span class="string">""</span>)</span><br><span class="line">    movie_list.append(movie_dict)</span><br><span class="line"><span class="comment">#æ‰“å°æµ‹è¯•</span></span><br><span class="line"><span class="built_in">print</span>(movie_list)</span><br></pre></td></tr></tbody></table></figure>
<h3 id="xpath"><a href="#xpath" class="headerlink" title="xpath"></a>xpath</h3><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="comment">#å°†è¦è§£æçš„ç½‘ç«™æ‰“å¼€</span></span><br><span class="line">html = <span class="built_in">open</span>(<span class="string">"top250_first_page.html"</span>,<span class="string">"rb"</span>)</span><br><span class="line">content = html.read().decode(<span class="string">"utf-8"</span>)</span><br><span class="line"><span class="comment">#æ„å»ºetreeå¯¹è±¡</span></span><br><span class="line">data = etree.HTML(content)</span><br><span class="line"><span class="comment">#è·å–å¤šä¸ªç”µå½±ä¿¡æ¯åˆ—è¡¨</span></span><br><span class="line">divs = data.xpath(<span class="string">'//div[@class="item"]'</span>)</span><br><span class="line"><span class="keyword">for</span> div <span class="keyword">in</span> divs:</span><br><span class="line">    movie_dict = { }</span><br><span class="line">    movie_dict[<span class="string">"movie_href"</span>] = div.xpath(<span class="string">'div[@class="pic"]/a/@href'</span>)</span><br><span class="line">    <span class="comment">#print(movie_href)          #æµ‹è¯•</span></span><br><span class="line">    movie_dict[<span class="string">"pic_href"</span>] = div.xpath(<span class="string">'div[@class="pic"]//img/@src'</span>)</span><br><span class="line">    <span class="comment">#print(pic_href)           #æµ‹è¯•</span></span><br><span class="line">    title = div.xpath(<span class="string">'div[@class="info"]//a/span[@class="title"]/text()'</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(title)==<span class="number">2</span>:</span><br><span class="line">        movie_dict[<span class="string">"c_title"</span>] = title[<span class="number">0</span>]</span><br><span class="line">        o_title = title[<span class="number">1</span>].replace(<span class="string">"/"</span>,<span class="string">""</span>)</span><br><span class="line">        movie_dict[<span class="string">"o_title"</span>] = <span class="string">""</span>.join(o_title.split())</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        movie_dict[<span class="string">"c_title"</span>] = title[<span class="number">0</span>]</span><br><span class="line">        movie_dict[<span class="string">"o_title"</span>] = <span class="string">" "</span></span><br><span class="line">    <span class="comment">#print(c_title,o_title)      #æµ‹è¯•</span></span><br><span class="line">    movie_dict[<span class="string">"rate"</span>] = div.xpath(<span class="string">'div//div[2]/div/span[2]/text()'</span>)</span><br><span class="line">    <span class="comment">#print(rate)                #æµ‹è¯•</span></span><br><span class="line">    judge = div.xpath(<span class="string">'div//div[2]/div/span[4]/text()'</span>)</span><br><span class="line">    movie_dict[<span class="string">"judge"</span>] = (<span class="built_in">str</span>(judge))[<span class="number">2</span>:-<span class="number">5</span>]</span><br><span class="line">    <span class="comment">#print(judge)                #æµ‹è¯•</span></span><br><span class="line">    bd = <span class="built_in">str</span>(div.xpath(<span class="string">'div//div[@class="bd"]/p[1]/text()'</span>))</span><br><span class="line">    movie_dict[<span class="string">"bd"</span>] = bd.replace(<span class="string">" "</span>,<span class="string">""</span>).replace(<span class="string">r"\xa0"</span>,<span class="string">""</span>).replace(<span class="string">r"\r"</span>,<span class="string">""</span>).replace(<span class="string">r"\n"</span>,<span class="string">""</span>)</span><br><span class="line">    <span class="comment">#print(bd)                   #æµ‹è¯•</span></span><br><span class="line">    <span class="built_in">print</span>(movie_dict)</span><br></pre></td></tr></tbody></table></figure>
<h3 id="reæ­£åˆ™è¡¨è¾¾å¼"><a href="#reæ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="reæ­£åˆ™è¡¨è¾¾å¼"></a>reæ­£åˆ™è¡¨è¾¾å¼</h3><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="comment">#å½±ç‰‡è¯¦æƒ…é“¾æ¥è§„åˆ™</span></span><br><span class="line">findLink = re.<span class="built_in">compile</span>(<span class="string">r'&lt;a href="(.*?)"&gt;'</span>)        <span class="comment">#åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œè¡¨ç¤ºè§„åˆ™ï¼ˆå­—ç¬¦ä¸²çš„æ¨¡å¼ï¼‰</span></span><br><span class="line"><span class="comment">#å½±ç‰‡å›¾ç‰‡è§„åˆ™</span></span><br><span class="line">findSrclink = re.<span class="built_in">compile</span>(<span class="string">r'&lt;img.*src="(.*?)"'</span>,re.S)</span><br><span class="line"><span class="comment">#å½±ç‰‡ç‰‡åè§„åˆ™</span></span><br><span class="line">findTitle = re.<span class="built_in">compile</span>(<span class="string">r'&lt;span class="title"&gt;(.*)&lt;/span&gt;'</span>)</span><br><span class="line"><span class="comment">#å½±ç‰‡çš„è¯„åˆ†è§„åˆ™</span></span><br><span class="line">findGrade = re.<span class="built_in">compile</span>(<span class="string">r'&lt;span class="rating_num" property="v:average"&gt;(.*)&lt;/span&gt;'</span>)</span><br><span class="line"><span class="comment">#è¯„ä»·äººæ•°è§„åˆ™</span></span><br><span class="line">findJud = re.<span class="built_in">compile</span>(<span class="string">r'&lt;span&gt;(.*)äººè¯„ä»·&lt;/span&gt;'</span>)</span><br><span class="line"><span class="comment">#æ‰¾åˆ°æ¦‚å†µ</span></span><br><span class="line">findInq = re.<span class="built_in">compile</span>(<span class="string">r'&lt;span class="inq"&gt;(.*)&lt;/span&gt;'</span>)</span><br><span class="line"><span class="comment">#å½±ç‰‡ç›¸å…³å†…å®¹</span></span><br><span class="line">findBd = re.<span class="built_in">compile</span>(<span class="string">r'&lt;p class=""&gt;(.*?)&lt;/p&gt;'</span>,re.S)</span><br><span class="line"><span class="comment">#å°†è¦è§£æçš„ç½‘ç«™æ‰“å¼€</span></span><br><span class="line">html = <span class="built_in">open</span>(<span class="string">"top250_first_page.html"</span>,<span class="string">"rb"</span>)</span><br><span class="line">content = html.read().decode(<span class="string">"utf-8"</span>)</span><br><span class="line">datalist = []</span><br><span class="line">soup = BeautifulSoup(content, <span class="string">"html.parser"</span>)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> soup.find_all(<span class="string">"div"</span>,class_ = <span class="string">"item"</span>):</span><br><span class="line">    item = <span class="built_in">str</span>(item)</span><br><span class="line">    <span class="comment">#print(html)                                             #æµ‹è¯•ç”µå½±ä¿¡æ¯çš„ä¸€å°æ®µæœ‰æ²¡æœ‰å†…è§£ææ‹¿åˆ°</span></span><br><span class="line">    data = [ ]</span><br><span class="line">    title = re.findall(findTitle,item)</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">len</span>(title)==<span class="number">2</span>):</span><br><span class="line">        Ctitle = title[<span class="number">0</span>]</span><br><span class="line">        data.append(Ctitle)</span><br><span class="line">        Ftitle = title[<span class="number">1</span>]</span><br><span class="line">        Ftitle = title[<span class="number">1</span>].replace(<span class="string">"/"</span>, <span class="string">""</span>)</span><br><span class="line">        Ftitle = <span class="string">""</span>.join(Ftitle.split())</span><br><span class="line">        data.append(Ftitle)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        Ctitle = title[<span class="number">0</span>]</span><br><span class="line">        data.append(Ctitle)</span><br><span class="line">        Ftitle = <span class="string">" "</span></span><br><span class="line">        data.append(Ftitle)</span><br><span class="line">    link = re.findall(findLink,item)[<span class="number">0</span>]</span><br><span class="line">    data.append(link)</span><br><span class="line">    srclink = re.findall(findSrclink,item)[<span class="number">0</span>]</span><br><span class="line">    data.append(srclink)</span><br><span class="line">    grade = re.findall(findGrade,item)[<span class="number">0</span>]</span><br><span class="line">    data.append(grade)</span><br><span class="line">    judge = re.findall(findJud,item)[<span class="number">0</span>]</span><br><span class="line">    data.append(judge)</span><br><span class="line">    inq = re.findall(findInq,item)[<span class="number">0</span>]</span><br><span class="line">    data.append(inq)</span><br><span class="line">    bd = re.findall(findBd,item)[<span class="number">0</span>]</span><br><span class="line">    bd = re.sub(<span class="string">'&lt;br(\s+)?/&gt;(\s+)?'</span>,<span class="string">" "</span>,bd)</span><br><span class="line">    bd = re.sub(<span class="string">"/"</span>,<span class="string">" "</span>,bd)</span><br><span class="line">    bd = <span class="string">""</span>.join(bd.split())</span><br><span class="line">    data.append(bd)</span><br><span class="line">    datalist.append(data)</span><br><span class="line"><span class="built_in">print</span>(datalist)            <span class="comment">#æµ‹è¯•æ‰€æœ‰åˆ—è¡¨æ˜¯å¦è¢«æ‰“å°</span></span><br></pre></td></tr></tbody></table></figure>
<h1 id="æ•°æ®å­˜å‚¨"><a href="#æ•°æ®å­˜å‚¨" class="headerlink" title="æ•°æ®å­˜å‚¨"></a>æ•°æ®å­˜å‚¨</h1><h2 id="æœ¬åœ°excelä¿å­˜"><a href="#æœ¬åœ°excelä¿å­˜" class="headerlink" title="æœ¬åœ°excelä¿å­˜"></a>æœ¬åœ°excelä¿å­˜</h2><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> xlwt</span><br><span class="line">workbook = xlwt.Workbook(encoding=<span class="string">"utf-8"</span>, style_compression=<span class="number">0</span>)</span><br><span class="line">worksheet = workbook.add_sheet(<span class="string">"è±†ç“£ç”µå½±250"</span>)</span><br><span class="line">col = [<span class="string">"ä¸­æ–‡å"</span>, <span class="string">"å¤–æ–‡å"</span>, <span class="string">"ç”µå½±é“¾æ¥"</span>, <span class="string">"å›¾ç‰‡é“¾æ¥"</span>, <span class="string">"è¯„åˆ†"</span>, <span class="string">"è¯„ä»·äººæ•°"</span>, <span class="string">"æ¦‚è¯„"</span>, <span class="string">"æ¦‚è¿°"</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">8</span>):</span><br><span class="line">    worksheet.write(<span class="number">0</span>, i, col[i])</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(datalist)):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">8</span>):</span><br><span class="line">        worksheet.write(i + <span class="number">1</span>, j, datalist[i][j])</span><br><span class="line">workbook.save(<span class="string">"è±†ç“£top250_firstPage.xls"</span>)</span><br></pre></td></tr></tbody></table></figure>
<h2 id="sqliteæ•°æ®åº“ä¿å­˜"><a href="#sqliteæ•°æ®åº“ä¿å­˜" class="headerlink" title="sqliteæ•°æ®åº“ä¿å­˜"></a>sqliteæ•°æ®åº“ä¿å­˜</h2><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sqlite3</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">init_db</span>(<span class="params">dbpath</span>):</span><br><span class="line">    sql = <span class="string">'''</span></span><br><span class="line"><span class="string">        create table movie250 </span></span><br><span class="line"><span class="string">        (</span></span><br><span class="line"><span class="string">        id integer primary key autoincrement,</span></span><br><span class="line"><span class="string">        info_link text,</span></span><br><span class="line"><span class="string">        pic_link text,</span></span><br><span class="line"><span class="string">        cname varchar,</span></span><br><span class="line"><span class="string">        ename varchar,</span></span><br><span class="line"><span class="string">        score numeric ,</span></span><br><span class="line"><span class="string">        rated numeric ,</span></span><br><span class="line"><span class="string">        instroduction text,</span></span><br><span class="line"><span class="string">        info text</span></span><br><span class="line"><span class="string">        )</span></span><br><span class="line"><span class="string">    '''</span>  <span class="comment"># åˆ›å»ºæ•°æ®è¡¨</span></span><br><span class="line">    conn = sqlite3.connect(dbpath)</span><br><span class="line">    cursor = conn.cursor()</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    conn.commit()</span><br><span class="line">    conn.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">saveData2DB</span>(<span class="params">datalist, dbpath</span>):</span><br><span class="line">    <span class="comment">#init_db(dbpath)</span></span><br><span class="line">    conn = sqlite3.connect(dbpath)</span><br><span class="line">    cur = conn.cursor()</span><br><span class="line">    <span class="keyword">for</span> data <span class="keyword">in</span> datalist:</span><br><span class="line">        <span class="keyword">for</span> index <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(data)):</span><br><span class="line">        	data[index] = <span class="string">'"'</span> + data[index] + <span class="string">'"'</span></span><br><span class="line">        sql = <span class="string">'''</span></span><br><span class="line"><span class="string">                insert into movie250 (</span></span><br><span class="line"><span class="string">                info_link,pic_link,cname,ename,score,rated,instroduction,info) </span></span><br><span class="line"><span class="string">                values(%s)'''</span> % <span class="string">","</span>.join(data)</span><br><span class="line">        cur.execute(sql)</span><br><span class="line">        conn.commit()</span><br><span class="line">    cur.close()</span><br><span class="line">    conn.close()</span><br><span class="line">saveData2DB(datalist,<span class="string">"movie.db"</span>)</span><br></pre></td></tr></tbody></table></figure>
<h3 id="ç»“æœå±•ç¤º"><a href="#ç»“æœå±•ç¤º" class="headerlink" title="ç»“æœå±•ç¤º"></a>ç»“æœå±•ç¤º</h3><p><img src="/images/item/douban-1.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="/images/item/douban-2.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h1 id="æ•°æ®å¯è§†åŒ–"><a href="#æ•°æ®å¯è§†åŒ–" class="headerlink" title="æ•°æ®å¯è§†åŒ–"></a>æ•°æ®å¯è§†åŒ–</h1><h2 id="Flask"><a href="#Flask" class="headerlink" title="Flask"></a><a href="https://dormousehole.readthedocs.io/en/latest/">Flask</a></h2><p>Flask æ˜¯ä¸€ä¸ªå¾®å‹çš„ Python å¼€å‘çš„ Web æ¡†æ¶ï¼ŒåŸºäºWerkzeug WSGIå·¥å…·ç®±å’ŒJinja2 æ¨¡æ¿å¼•æ“ã€‚ Flaskä½¿ç”¨BSDæˆæƒã€‚ Flaskä¹Ÿè¢«ç§°ä¸ºâ€œmicroframeworkâ€ï¼Œå› ä¸ºå®ƒä½¿ç”¨ç®€å•çš„æ ¸å¿ƒï¼Œç”¨extensionå¢åŠ å…¶ä»–åŠŸèƒ½ã€‚Flaskæ²¡æœ‰é»˜è®¤ä½¿ç”¨çš„æ•°æ®åº“ã€çª—ä½“éªŒè¯å·¥å…·ã€‚<br>ç®€å•æ¥è¯´åœ¨æ­¤é¡¹ç›®ä¸­ï¼ŒFlaskæ¡†æ¶ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæœ¬åœ°ç½‘é¡µå¹³å°å±•ç¤ºæ•°æ®ã€‚æˆ‘ä»¬æ ¹æ®ä¸åŒçš„è·¯ç”±åœ°å€è¿›è¡Œåˆ°ä¸åŒçš„é¡µé¢è®¿é—®ã€‚å¦‚ä¸‹å›¾æ˜¯é¦–ç•Œé¢ï¼Œé€šè¿‡ä¸åŒçš„é“¾æ¥åœ°å€å¯ä»¥å®ç°é¡µé¢è·³è½¬ï¼Œå½“ç„¶åªæ˜¯æœ¬åœ°ï¼<br><img src="/images/item/douban-3.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="Echarts"><a href="#Echarts" class="headerlink" title="Echarts"></a><a href="https://echarts.apache.org/en/index.html">Echarts</a></h2><p>Echartsæ˜¯ä¸€ä¸ªçº¯åŸºäºjsçš„å›¾è¡¨åº“ï¼Œå¯ä»¥æµç•…çš„è¿è¡Œåœ¨ PC å’Œç§»åŠ¨è®¾å¤‡ä¸Šã€‚åœ¨æœ¬é¡¹ç›®ä¸­å¯ä»¥å°†æ•°æ®è¿›è¡Œç»Ÿè®¡åˆ†ç±»ä»è€Œç”¨ä¸åŒçš„å±•ç¤ºæ–¹æ³•è¿›è¡Œå±•ç°ã€‚åœ¨Echartsä¸­å¯ä»¥æ”¯æŒçš„å›¾è¡¨ç±»å‹æœ‰å¾ˆå¤šï¼ŒåŒæ—¶å…¶æœ‰ä¸€ä¸ªå¾ˆå¥½çš„ç‚¹åœ¨äºå®ƒèƒ½æ»¡è¶³æˆ‘ä»¬å®æ—¶ä¿®æ”¹æŸ¥çœ‹ï¼Œæœ€ç»ˆå½¢æˆè‡ªå·±æƒ³è¦çš„å›¾ï¼Œä¾¿å°†jsä»£ç å¤åˆ¶ç²˜è´´åˆ°æˆ‘ä»¬æ‰€éœ€è¦çš„ç½‘é¡µä»£ç çš„åœ°æ–¹ã€‚<br>ç”±äºåœ¨é¡µé¢å†…æœ‰åŠ¨æ€æ˜¾ç¤ºï¼Œæ‰€ä»¥ä¸åœ¨è¿›è¡Œå±•ç¤ºã€‚</p>
<h2 id="WordCloud"><a href="#WordCloud" class="headerlink" title="WordCloud"></a>WordCloud</h2><p>è¯äº‘å±•ç¤ºæ–¹æ³•æ˜¯è¿‘äº›å¹´æ¥è¾ƒä¸ºå¸¸ç”¨çš„æ•°æ®å¯è§†åŒ–æ–¹æ³•ã€‚å…¶ä¸»è¦æ˜¯é€šè¿‡åˆ†è¯æŠ€æœ¯å°†ä¸€ç¯‡æ–‡ç« æˆ–è€…ä¸€æ®µè¯åˆ†æˆè‹¥å¹²å•è¯ï¼Œç„¶åç»Ÿè®¡è¿™äº›è¯å‡ºç°çš„é¢‘ç‡ï¼Œæˆ‘ä»¬æ ¹æ®è‡ªå®šä¹‰åŒ–è®¾ç½®ç”»å¸ƒå’Œè¿™äº›è¯å‡ºç°çš„é¢œè‰²å¤§å°ç­‰ç­‰æ¥å¾—åˆ°æŸä¸ªè¯äº‘ã€‚è¯äº‘ä¸­é‡è¦çš„æ˜¯ç”»å¸ƒçš„é…ç½®ã€è‡ªå·±æ‰€è¦å®šä¹‰çš„å½¢å¼æ˜¯ä»€ä¹ˆæ ·å­ï¼Œå…¶ä»–æ›´å¤šçš„æ˜¯æŸäº›å›ºå®šçš„æ–¹æ³•ã€‚ä¸‹å›¾ä¸ºæˆ‘é€šè¿‡çˆ¬å–æ¯›ä¸æ˜“çš„æ­Œè¯å†…å®¹è·å¾—æ¯›ä¸æ˜“çš„æ­Œè¯è¯äº‘å›¾ï¼Œå¦‚æœéœ€è¦æ­¤é¡¹ç›®æºç æˆ–è€…æ–¹æ³•è¯·ç§ä¿¡ã€‚<br><img src="/images/item/douban-4.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h1 id="æ–°æ‰‹é—®é¢˜æ€»ç»“ä¸è§£å†³æ–¹æ³•"><a href="#æ–°æ‰‹é—®é¢˜æ€»ç»“ä¸è§£å†³æ–¹æ³•" class="headerlink" title="æ–°æ‰‹é—®é¢˜æ€»ç»“ä¸è§£å†³æ–¹æ³•"></a>æ–°æ‰‹é—®é¢˜æ€»ç»“ä¸è§£å†³æ–¹æ³•</h1><h2 id="ipè¢«å°"><a href="#ipè¢«å°" class="headerlink" title="ipè¢«å°"></a>ipè¢«å°</h2><p>ipè¢«å°å¯èƒ½æ˜¯æ–°æ‰‹åœ¨çˆ¬è™«å­¦ä¹ é˜¶æ®µé‡åˆ°çš„æœ€å¤§çš„é—®é¢˜ã€‚é¦–å…ˆå¦‚æœæ˜¯åˆå­¦æƒ³è¦å°½å¿«å®ç°ä¸€äº›æˆæœæ—¶ï¼Œå»ºè®®åœ¨åˆç†èŒƒå›´å†…å‡å°‘çˆ¬å–æ¬¡æ•°ï¼Œå¦‚æœæˆ‘ä»¬èƒ½è·å¾—ç½‘é¡µå†…å®¹äº†é¦–å…ˆå°†å…¶å­˜åˆ°æœ¬åœ°æ–‡ä»¶å¤¹ä¸‹è¿›è¡Œåç»­çš„æµ‹è¯•å’Œè§£æã€‚ä¿—è¯è¯´ï¼šä¸Šæœ‰æ”¿ç­–ä¸‹æœ‰å¯¹ç­–ï¼Œé¢å¯¹ipè¢«å°ï¼šåŸºç¡€é˜¶æ®µæˆ‘ä»¬å¯ä»¥æ·»åŠ è¯·æ±‚å¤´ï¼Œå°½å¯èƒ½çš„è¿›è¡Œä¼ªè£…åƒä¸€ä¸ªæµè§ˆå™¨åœ¨è®¿é—®ï¼›å†è¿›ä¸€æ­¥æˆ‘ä»¬å¯ä»¥è‡ªå·±æ„å»ºä»£ç†ipå‡½æ•°ï¼Œä»¿ç…§æºç æ·»åŠ å…è´¹ipï¼Œæ„å»ºhandlerå¤„ç†å™¨ä½¿ç”¨openeræ–¹æ³•ä¹Ÿå¯ä»¥ï¼›å¦‚æœæœ‰èƒ½åŠ›çš„è¯ï¼Œå¯ä»¥å­¦ä¹ ä»£ç†ipæ± çš„æ–¹æ³•æ¥è§£å†³è¯¥é—®é¢˜ã€‚<br>å½“ç„¶ï¼Œçˆ¬è™«æˆ‘ä»¬æ˜¯è¦åœ¨åˆæ³•èŒƒå›´å†…è¿›è¡ŒæŠ“å–ï¼Œå¦‚æœæŸäº›æ•°æ®æ˜¯æœºå¯†æˆ–è€…ä¸èƒ½è®¿é—®çš„ï¼Œæˆ‘ä»¬è¿˜ä¸€ç›´è®¿é—®å¯èƒ½å°±å¾ˆå¿«æœ‰è‡ªå·±çš„å°æ‰‹é•¯å­äº†ğŸ”“ã€‚æˆ‘ä»¬åªçˆ¬å–æˆ‘ä»¬å¯ä»¥è®¿é—®åˆ°çš„ï¼Œçˆ¬è™«åªæ˜¯æé«˜æ•ˆç‡ï¼Œä¸æ˜¯ç¿»è¿‡ç¦å¢™ã€‚</p>
<h2 id="æŸ¥çœ‹ç½‘é¡µæºç å’Œâ€F12-Elementsâ€åä¸ä¸€è‡´"><a href="#æŸ¥çœ‹ç½‘é¡µæºç å’Œâ€F12-Elementsâ€åä¸ä¸€è‡´" class="headerlink" title="æŸ¥çœ‹ç½‘é¡µæºç å’Œâ€F12 Elementsâ€åä¸ä¸€è‡´"></a>æŸ¥çœ‹ç½‘é¡µæºç å’Œâ€F12 Elementsâ€åä¸ä¸€è‡´</h2><p>è¯¥é—®é¢˜å¯ä»¥æ€»ç»“ä¸ºç”¨ä¸€èˆ¬æ–¹æ³•æœ‰äº›éœ€è¦çš„å…ƒç´ æŠ“å–ä¸åˆ°ã€‚åœ¨æœ¬æ¬¡é¡¹ç›®ä¸­æˆ‘ä»¬çˆ¬å–çš„é¡µé¢æ˜¯é™æ€ç½‘é¡µæ‰€ä»¥å¯ä»¥ç›´æ¥æŠ“å–ï¼Œä½†æ˜¯å¯¹äºåŠ¨æ€ç½‘é¡µå°±ä¼šæ— èƒ½ä¸ºåŠ›ã€‚<br>æŸ¥çœ‹ç½‘é¡µæºç ï¼šæœ€åŸå§‹çš„ä»£ç ï¼ŒæŒ‡çš„æ˜¯æœåŠ¡å™¨ç›´æ¥å‘é€åˆ°æµè§ˆå™¨çš„ä»£ç ã€‚<br>F12æ£€æŸ¥å…ƒç´ ï¼šjsæ¸²æŸ“åçš„ä»£ç ã€‚è€Œç¡®å®çš„éƒ¨åˆ†å°±æ˜¯jsæ‰€æ¸²æŸ“çš„ã€‚<br>å¦‚æœæˆ‘ä»¬æƒ³è¦æŠ“å–è¿™éƒ¨åˆ†ä»£ç å¯ä»¥é‡‡å–ä»¥ä¸‹ä¸¤ç§æ–¹æ³•ï¼š</p>
<ol>
<li>åœ¨é¡µé¢ä¸Šè¿›è¡ŒæŠ“åŒ…ï¼Œè·å–è¡¨å•çš„å…ƒç´ å’Œjsé“¾æ¥æäº¤è¯·æ±‚</li>
<li>é€šè¿‡seleniumæŠ€æœ¯ï¼Œæ¨¡æ‹Ÿç”¨æˆ·æ‰“å¼€ç½‘é¡µï¼Œè¿›è¡Œè‡ªåŠ¨åŒ–çš„æŠ“å–ã€‚</li>
</ol>
<h2 id="å…¶ä»–é—®é¢˜"><a href="#å…¶ä»–é—®é¢˜" class="headerlink" title="å…¶ä»–é—®é¢˜"></a>å…¶ä»–é—®é¢˜</h2><p>ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜æ˜¯æˆ‘åœ¨è¿™ä¸ªé¡¹ç›®ä¸­æ‰€é‡åˆ°çš„ï¼Œå½“ç„¶åœ¨é¢å¯¹æ›´å¤æ‚çš„çˆ¬è™«å·¥ä½œæ—¶ï¼Œä¼šæœ‰æ›´åŠ ç¹ççš„é—®é¢˜å‡ºç°ã€‚è¿˜æœ‰ä¸€äº›å…¶ä»–é—®é¢˜ï¼Œæˆ‘å°†å…¶æ€»ç»“ä¸ºåŸºç¡€çŸ¥è¯†é—®é¢˜ã€‚åœ¨å¾ˆå¤šåˆå­¦çš„æ—¶å€™ï¼Œæˆ‘ä»¬è·å¾—çš„æ•°æ®å¾€å¾€ä»¥ä¸åŒçš„æ ¼å¼è¿›è¡Œå­˜å‚¨ï¼Œä½†æ˜¯æŸäº›æ–¹æ³•åªèƒ½é’ˆå¯¹æŸäº›å›ºå®šæ•°æ®æ ¼å¼ï¼Œè¿™äº›éœ€è¦æˆ‘ä»¬æèµ·æ³¨æ„ï¼›è¿˜æœ‰å°±æ˜¯æˆ‘ä»¬ä¸å¯é¿å…çš„é©¬è™é—®é¢˜ï¼Œå…³é”®è¯æ‹¼å†™é”™è¯¯ï¼Œå˜é‡ä¹¦å†™é”™è¯¯ç­‰ç­‰ï¼Œè¿™äº›æœ€å¥½çš„è§£å†³åŠæ³•å°±æ˜¯å­°èƒ½ç”Ÿå·§ã€‚<br>æœ€åå°±æ˜¯å»ºè®®å¤§å®¶åœ¨å®Œæˆä¸€ä¸ªé¡¹ç›®æ—¶é€‰æ‹©åˆ†å—æŒ‰ç…§ä¸åŒçš„æ¨¡å—å»ç»ƒä¹ æµ‹è¯•ï¼Œæœ€ç»ˆå®Œæˆé¡¹ç›®ã€‚</p>
]]></content>
      <categories>
        <category>Item</category>
      </categories>
  </entry>
  <entry>
    <title>LwIPåè®®æ ˆ</title>
    <url>/2022/11/30/third-party/lwip/</url>
    <content><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><blockquote>
<p>Lwipå®˜ç½‘ï¼š<a href="https://savannah.nongnu.org/projects/lwip/">https://savannah.nongnu.org/projects/lwip/</a></p>
</blockquote>
<p>LWIPï¼ˆlight weight ipï¼‰è½»å‹IPåè®®ï¼Œæœ‰æ— æ“ä½œç³»ç»Ÿçš„æ”¯æŒéƒ½å¯ä»¥è¿è¡Œã€‚LwIPå®ç°çš„é‡ç‚¹æ˜¯åœ¨ä¿æŒTCPåè®®ä¸»è¦åŠŸèƒ½çš„åŸºç¡€ä¸Šå‡å°‘å¯¹RAM çš„å ç”¨ï¼Œå®ƒåªéœ€åå‡ KBçš„RAMå’Œ40Kå·¦å³çš„ROMå°±å¯ä»¥è¿è¡Œï¼Œè¿™ä½¿LwIPåè®®æ ˆé€‚åˆåœ¨ä½ç«¯çš„åµŒå…¥å¼ç³»ç»Ÿä¸­ä½¿ç”¨ã€‚</p>
<p>LWIPæ”¯æŒçš„åè®®ç§ç±»ï¼š</p>
<ul>
<li>DNSï¼ŒåŸŸåè§£æï¼›</li>
<li>SNMPï¼Œç®€å•ç½‘ç»œç®¡ç†åè®®ï¼›</li>
<li>DHCPï¼ŒåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼›</li>
<li>UDP åè®®ï¼Œç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼›</li>
<li>TCP åè®®ï¼Œæ”¯æŒ TCP æ‹¥å¡æ§åˆ¶ï¼Œ RTT ä¼°è®¡ï¼Œå¿«é€Ÿæ¢å¤ä¸é‡ä¼ ç­‰ï¼›</li>
<li>IP åè®®ï¼ŒåŒ…æ‹¬ IPv4 å’Œ IPv6ï¼Œæ”¯æŒ IP åˆ†ç‰‡ä¸é‡è£…ï¼Œæ”¯æŒå¤šç½‘ç»œæ¥å£ä¸‹æ•°æ®è½¬å‘ï¼›</li>
<li>AUTOIPï¼Œ IP åœ°å€è‡ªåŠ¨é…ç½®ï¼›</li>
<li>ICMP åè®®ï¼Œç”¨äºç½‘ç»œè°ƒè¯•ä¸ç»´æŠ¤ï¼›</li>
<li>IGMP åè®®ï¼Œç”¨äºç½‘ç»œç»„ç®¡ç†ï¼Œå¯ä»¥å®ç°å¤šæ’­æ•°æ®çš„æ¥æ”¶ï¼›</li>
<li>ARP åè®®ï¼Œä»¥å¤ªç½‘åœ°å€è§£æåè®®ï¼›</li>
<li>PPPï¼Œç‚¹å¯¹ç‚¹åè®®ï¼Œæ”¯æŒ PPPoE</li>
</ul>
<h1 id="LwIPæ¶æ„"><a href="#LwIPæ¶æ„" class="headerlink" title="LwIPæ¶æ„"></a>LwIPæ¶æ„</h1><p>LwIP ç¬¦åˆ TCP/IP æ¨¡å‹æ¶æ„ï¼Œè§„å®šäº†æ•°æ®çš„æ ¼å¼ã€ä¼ è¾“ã€è·¯ç”±å’Œæ¥æ”¶ï¼Œä»¥å®ç°ç«¯åˆ°ç«¯çš„é€šä¿¡ã€‚ æ­¤æ¨¡å‹åŒ…æ‹¬å››ä¸ªæŠ½è±¡å±‚ï¼Œç”¨äºæ ¹æ®æ¶‰åŠçš„ç½‘ç»œèŒƒå›´ï¼Œå¯¹æ‰€æœ‰ç›¸å…³åè®®æ’åºã€‚è¿™å‡  å±‚ä»ä½åˆ°é«˜ä¾æ¬¡ä¸ºï¼š</p>
<ul>
<li><p>é“¾è·¯å±‚åŒ…å«äº†å±€åŸŸç½‘çš„å•ç½‘æ®µ ï¼ˆé“¾è·¯ï¼‰é€šä¿¡æŠ€æœ¯</p>
</li>
<li><p>ç½‘é™…å±‚ ï¼ˆIPï¼‰å°†ç‹¬ç«‹çš„ç½‘ç»œè¿æ¥èµ·æ¥ï¼Œå»ºç«‹äº’è”</p>
</li>
<li><p>ä¼ è¾“å±‚å¤„ç†ä¸»æœºç«¯å£åˆ°ä¸»æœºç«¯å£çš„é€šä¿¡</p>
</li>
<li><p>åº”ç”¨å±‚åœ¨å®ç°å¤šä¸ªåº”ç”¨è¿›ç¨‹ç›¸äº’é€šä¿¡çš„åŒæ—¶ï¼Œå®Œæˆåº”ç”¨æ‰€éœ€çš„æœåŠ¡ ï¼ˆä¾‹å¦‚ï¼šæ•°æ®å¤„ç†ï¼‰</p>
<p><img src="/images/third-party/lwip.png"></p>
</li>
</ul>
<h1 id="ç¼–ç¨‹æ¨¡å¼"><a href="#ç¼–ç¨‹æ¨¡å¼" class="headerlink" title="ç¼–ç¨‹æ¨¡å¼"></a>ç¼–ç¨‹æ¨¡å¼</h1><h2 id="RAW-API"><a href="#RAW-API" class="headerlink" title="RAW API"></a>RAW API</h2><p>å†…æ ¸å›è°ƒå‹APIï¼Œå½“åˆå§‹åŒ–åº”ç”¨æ—¶ï¼Œç”¨æˆ·éœ€è¦ä¸ºä¸åŒå†…æ ¸äº‹ä»¶æ³¨å†Œæ‰€éœ€çš„å›è°ƒå‡½æ•° ï¼ˆä¾‹å¦‚ TCP_Sentã€ TCP_errorâ€¦ï¼‰ã€‚å½“ç›¸åº”äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œ LwIP ä¼šè‡ªå‘åœ°è°ƒç”¨ç›¸å…³çš„å›è°ƒå‡½æ•°ã€‚<em>æ²¡æœ‰æ“ä½œç³»ç»Ÿæ”¯æŒä¸­ï¼Œåªèƒ½ä½¿ç”¨RAW APIå¼€å‘</em></p>
<table>
<thead>
<tr>
<th></th>
<th>API</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>TCPè¿æ¥å»ºç«‹</td>
<td>tcp_new</td>
<td>å»ºç«‹ä¸€ä¸ªæ–°çš„ TCP PCB ï¼ˆåè®®æ§åˆ¶å—ï¼‰ã€‚</td>
</tr>
<tr>
<td></td>
<td>tcp_bind</td>
<td>å°† TCP PCB ç»‘å®šåˆ°æœ¬åœ° IP åœ°å€å’Œç«¯å£ã€‚</td>
</tr>
<tr>
<td></td>
<td>tcp_listen</td>
<td>å¯åŠ¨ TCP PCB ä¸Šçš„ç›‘å¬è¿›ç¨‹ã€‚</td>
</tr>
<tr>
<td></td>
<td>tcp_accept</td>
<td>æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œè¿æ¥æˆåŠŸå»ºç«‹åè°ƒç”¨ã€‚</td>
</tr>
<tr>
<td></td>
<td>tcp_connect</td>
<td>å‘é€è¿æ¥å»ºç«‹è¯·æ±‚ã€‚</td>
</tr>
<tr>
<td>å‘é€TCPæ•°æ®</td>
<td>tcp_write</td>
<td>å°†å‘é€æ•°æ®å†™å…¥ TCP ç¼“å†²åŒºä¸­ã€‚</td>
</tr>
<tr>
<td></td>
<td>tcp_sent</td>
<td>æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œæ•°æ®å‘é€æˆåŠŸåè°ƒç”¨ã€‚</td>
</tr>
<tr>
<td></td>
<td>tcp_output</td>
<td>å‘é€ TCP ç¼“å†²åŒºä¸­çš„æ•°æ®</td>
</tr>
<tr>
<td>æ¥æ”¶TCPæ•°æ®</td>
<td>tcp_recv</td>
<td>æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œ TCP æ¥æ”¶åˆ°æ•°æ®åè°ƒç”¨</td>
</tr>
<tr>
<td>åº”ç”¨è½®è¯¢</td>
<td>tcp_poll</td>
<td>æ³¨å†Œå›è°ƒå‡½æ•°ï¼ŒTCPæ…¢å®šæ—¶å™¨è°ƒç”¨ï¼ˆ500msä¸€æ¬¡ï¼‰ã€‚</td>
</tr>
<tr>
<td>å…³é—­å¹¶ç»ˆæ­¢è¿æ¥</td>
<td>tcp_close</td>
<td>ä¸»åŠ¨å…³é—­ã€‚</td>
</tr>
<tr>
<td></td>
<td>tcp_err</td>
<td>æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œå‡ºé”™æ—¶è°ƒç”¨ã€‚</td>
</tr>
<tr>
<td></td>
<td>tcp_abort</td>
<td>ä¸­æ­¢è¿æ¥ï¼Œå‘è¿œç¨‹ä¸»æœºå‘é€ RSTã€‚</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>udp_new</td>
<td>åˆ›å»ºæ–°çš„ UDP PCBã€‚</td>
</tr>
<tr>
<td></td>
<td>udp_remove</td>
<td>ç§»é™¤ UDP PCB å¹¶é‡Šæ”¾ç›¸å…³èµ„æºã€‚</td>
</tr>
<tr>
<td></td>
<td>udp_bind</td>
<td>å°† UDP PCB ä¸æœ¬åœ° IP åœ°å€å’Œç«¯å£ç»‘å®šã€‚</td>
</tr>
<tr>
<td></td>
<td>udp_connect</td>
<td>å»ºç«‹ UDP PCB è¿œç¨‹ IP åœ°å€å’Œç«¯å£ã€‚</td>
</tr>
<tr>
<td></td>
<td>udp_disconnect</td>
<td>ç§»é™¤ UDP PCB è¿œç¨‹ IP å’Œç«¯å£ã€‚</td>
</tr>
<tr>
<td></td>
<td>udp_send</td>
<td>å‘é€ UDP æ•°æ®</td>
</tr>
<tr>
<td></td>
<td>udp_recv</td>
<td>æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œå½“æ”¶åˆ°æ–°æ•°æ®æŠ¥æ—¶å³å¯¹å…¶è°ƒç”¨ã€‚</td>
</tr>
</tbody></table>
<h2 id="Netconn-API"><a href="#Netconn-API" class="headerlink" title="Netconn API"></a>Netconn API</h2><p>Netconn API ä¸ºé«˜å±‚æœ‰åº APIï¼Œå…¶æ‰§è¡Œæ¨¡å‹åŸºäºå…¸å‹çš„é˜»å¡å¼æ‰“å¼€ - è¯» - å†™ - å…³é—­æœºåˆ¶ã€‚ è‹¥è¦æ­£å¸¸å·¥ä½œï¼Œæ­¤ API å¿…é¡»å¤„äºå¤šçº¿ç¨‹å·¥ä½œæ¨¡å¼ï¼Œè¯¥æ¨¡å¼éœ€ä¸º LwIP TCP/IP æ ˆå®ç°ä¸“ç”¨çº¿ç¨‹ï¼Œ å¹¶ / æˆ–ä¸ºåº”ç”¨å®ç°å¤šä¸ªçº¿ç¨‹ã€‚</p>
<p>åŸºäºæ“ä½œç³»ç»Ÿçš„IPCæœºåˆ¶ï¼ˆå³ä¿¡å·é‡å’Œé‚®ç®±æœºåˆ¶ï¼‰å®ç°çš„ï¼Œå°†LWIPå†…æ ¸ä»£ç å’Œç½‘ç»œåº”ç”¨ç¨‹åºåˆ†ç¦»æˆäº†ç‹¬ç«‹çš„çº¿ç¨‹ï¼Œå› æ­¤LWIPå†…æ ¸çº¿ç¨‹å°±åªè´Ÿè´£æ•°æ®åŒ…çš„TCP/IPå°è£…å’Œæ‹†å°ï¼Œè€Œä¸ç”¨è¿›è¡Œæ•°æ®çš„åº”ç”¨å±‚å¤„ç†ï¼Œå¤§å¤§æé«˜äº†ç³»ç»Ÿå¯¹ç½‘ç»œæ•°æ®åŒ…çš„å¤„ç†æ•ˆç‡</p>
<table>
<thead>
<tr>
<th>API</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>netconn_new</td>
<td>åˆ›å»ºä¸€ä¸ªæ–°è¿æ¥ã€‚</td>
</tr>
<tr>
<td>netconn_delete</td>
<td>åˆ é™¤ä¸€ä¸ªå·²æœ‰è¿æ¥ã€‚</td>
</tr>
<tr>
<td>netconn_bind</td>
<td>å°†è¿æ¥ç»‘å®šåˆ°æœ¬åœ° IP åœ°å€å’Œç«¯å£ã€‚</td>
</tr>
<tr>
<td>netconn_connect</td>
<td>è¿æ¥è¿œç¨‹ IP åœ°å€å’Œç«¯å£ã€‚</td>
</tr>
<tr>
<td>netconn_send</td>
<td>é€šè¿‡ UDP å‘é€æ•°æ®ã€‚</td>
</tr>
<tr>
<td>netconn_recv</td>
<td>æ¥æ”¶æ•°æ®ã€‚</td>
</tr>
<tr>
<td>netconn_listen</td>
<td>ç½® TCP netconn å¤„äºç›‘å¬æ¨¡å¼ã€‚</td>
</tr>
<tr>
<td>netconn_accept</td>
<td>æ¥å—æ­£åœ¨ç›‘å¬çŠ¶æ€çš„ TCP è¿æ¥ä¸Šçš„ä¼ å…¥è¿æ¥ã€‚</td>
</tr>
<tr>
<td>netconn_write</td>
<td>é€šè¿‡ TCP æ•°æ® ï¼ˆå°†æ•°æ®å†™å…¥ TCP ç¼“å†²åŒºï¼‰ã€‚</td>
</tr>
<tr>
<td>netconn_close</td>
<td>ä¸»åŠ¨å…³é—­ TCP netconnã€‚</td>
</tr>
</tbody></table>
<h2 id="Socket-API"><a href="#Socket-API" class="headerlink" title="Socket API"></a>Socket API</h2><p>äº†æ ‡å‡† BSD å¥—æ¥å­— APIã€‚å®ƒæ˜¯æœ‰åº APIï¼Œåœ¨å†…éƒ¨æ„å»ºäº Netconn API ä¹‹ä¸Šï¼Œå¯¹ç½‘ç»œè¿æ¥è¿›è¡Œäº†é«˜çº§çš„æŠ½è±¡ï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥åƒæ“ä½œæ–‡ä»¶ä¸€æ ·æ“ä½œç½‘ç»œè¿æ¥	</p>
<table>
<thead>
<tr>
<th>API</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>socket</td>
<td>åˆ›å»ºä¸€ä¸ªæ–°å¥—æ¥å­—ã€‚</td>
</tr>
<tr>
<td>bind</td>
<td>å°†å¥—æ¥å­—ç»‘å®šåˆ° IP åœ°å€å’Œç«¯å£ã€‚</td>
</tr>
<tr>
<td>listen</td>
<td>ç›‘å¬å¥—æ¥å­—è¿æ¥ã€‚</td>
</tr>
<tr>
<td>connect</td>
<td>å°†å¥—æ¥å­—è¿æ¥åˆ°è¿œç¨‹ä¸»æœº IP åœ°å€å’Œç«¯å£ã€‚</td>
</tr>
<tr>
<td>accept</td>
<td>åœ¨å¥—æ¥å­—ä¸Šæ¥å—æ–°è¿æ¥ã€‚</td>
</tr>
<tr>
<td>read</td>
<td>ä»å¥—æ¥å­—è¯»å–æ•°æ®ã€‚</td>
</tr>
<tr>
<td>write</td>
<td>å‘å¥—æ¥å­—å†™å…¥æ•°æ®ã€‚</td>
</tr>
<tr>
<td>close</td>
<td>å…³é—­å¥—æ¥å­— ï¼ˆåˆ é™¤å¥—æ¥å­—ï¼‰ã€‚</td>
</tr>
</tbody></table>
<h1 id="LwIPé…ç½®"><a href="#LwIPé…ç½®" class="headerlink" title="LwIPé…ç½®"></a>LwIPé…ç½®</h1><p>lwipopts.h æ–‡ä»¶å…è®¸ç”¨æˆ·å……åˆ†é…ç½®æ ˆåŠå…¶æ‰€æœ‰æ¨¡å—ã€‚ç”¨æˆ·ä¸éœ€è¦å®šä¹‰ æ‰€æœ‰ LwIP é€‰é¡¹ï¼šå¦‚æœæœªå®šä¹‰æŸé€‰é¡¹ï¼Œåˆ™ä½¿ç”¨ opt.h æ–‡ä»¶ä¸­å®šä¹‰çš„é»˜è®¤å€¼ã€‚å› æ­¤ï¼Œ lwipopts.h æä¾›äº†è¦†ç›–è®¸å¤š lwIP è¡Œä¸ºçš„æ–¹æ³•ã€‚</p>
<table>
<thead>
<tr>
<th><strong>Lwip å†…å­˜é€‰é¡¹</strong></th>
<th><strong>å«ä¹‰</strong></th>
</tr>
</thead>
<tbody><tr>
<td>MEM_SIZE</td>
<td>LwIP å †å†…å­˜å¤§å°ï¼šç”¨äºæ‰€æœ‰ LwIP åŠ¨æ€å†…å­˜åˆ†é…</td>
</tr>
<tr>
<td>MEMP_NUM_PBUF</td>
<td>MEM_REF å’Œ MEM_ROM pbuf æ€»æ•°</td>
</tr>
<tr>
<td>MEMP_NUM_UDP_PCB</td>
<td>UDP PCB ç»“æ„ä½“çš„æ€»æ•°</td>
</tr>
<tr>
<td>MEMP_NUM_TCP_PCB</td>
<td>TCP PCB ç»“æ„ä½“çš„æ€»æ•°</td>
</tr>
<tr>
<td>MEMP_NUM_TCP_PCB_LISTEN</td>
<td>å¤„äºç›‘å¬çŠ¶æ€çš„ TCP PCB æ€»æ•°</td>
</tr>
<tr>
<td>MEMP_NUM_TCP_SEG</td>
<td>æœ€å¤šåŒæ—¶åœ¨ TCP ç¼“å†²é˜Ÿåˆ—ä¸­çš„æŠ¥æ–‡æ®µæ•°é‡</td>
</tr>
<tr>
<td>PBUF_POOL_SIZE</td>
<td>PBUF_POOL ç±»å‹çš„ pbuf æ€»æ•°</td>
</tr>
<tr>
<td>PBUF_POOL_BUFSIZE</td>
<td>PBUF_POOL ç±»å‹ pbuf çš„å¤§å°</td>
</tr>
<tr>
<td>TCP_MSS</td>
<td>æœ€å¤§ TCP æŠ¥æ–‡æ®µ ï¼ˆMTU - IP æŠ¥å¤´å¤§å° - TCP æŠ¥å¤´å¤§å°ï¼‰</td>
</tr>
<tr>
<td>TCP_SND_BUF</td>
<td>å¯¹äºä¸€ä¸ªè¿æ¥ï¼Œ TCP çš„å‘é€ç¼“å†²ç©ºé—´</td>
</tr>
<tr>
<td>TCP_SND_QUEUELEN</td>
<td>TCP å‘é€é˜Ÿåˆ—ä¸­ pbuf çš„æœ€å¤§æ•°</td>
</tr>
<tr>
<td>TCP_WND</td>
<td>TCP æ¥æ”¶çª—å¤§å°</td>
</tr>
</tbody></table>
<h1 id="LwIPå†…å­˜ç®¡ç†"><a href="#LwIPå†…å­˜ç®¡ç†" class="headerlink" title="LwIPå†…å­˜ç®¡ç†"></a>LwIPå†…å­˜ç®¡ç†</h1><p>LwIPæœ‰ä¸¤ç§å†…å­˜ç®¡ç†æ–¹å¼ï¼šå†…å­˜æ± ã€å†…å­˜å †</p>
<p>å‚è€ƒé“¾æ¥ï¼š<a href="https://blog.csdn.net/jiangjunjie_2005/article/details/26051399#t9">https://blog.csdn.net/jiangjunjie_2005/article/details/26051399#t9</a></p>
<h1 id="å®ç°TCPæœåŠ¡å™¨"><a href="#å®ç°TCPæœåŠ¡å™¨" class="headerlink" title="å®ç°TCPæœåŠ¡å™¨"></a>å®ç°TCPæœåŠ¡å™¨</h1><blockquote>
<p>echoserverå®ç°ï¼š<a href="https://github.com/yangLieee/codebackup/tree/master/iperf">https://github.com/yangLieee/codebackup/tree/master/iperf</a></p>
</blockquote>
<ol>
<li><p>æ–°å»ºæ§åˆ¶å— </p>
<p>ä½¿ç”¨tcp_new()å‡½æ•°å»ºç«‹ä¸€ä¸ªTCPæ§åˆ¶å—ã€‚</p>
</li>
<li><p>ç»‘å®šæ§åˆ¶å—</p>
<p>å¯¹äºæœåŠ¡å™¨æ¥è¯´ï¼Œæ–°å»ºä¸€ä¸ªæ§åˆ¶å¿«åï¼Œéœ€è¦åœ¨æ§åˆ¶å—ä¸Šç»‘å®šæœ¬åœ°IPå’Œç«¯å£ï¼Œä»¥æ–¹ä¾¿å®¢æˆ·ç«¯çš„è¿æ¥ã€‚</p>
</li>
<li><p>æ§åˆ¶å—ä¾¦å¬</p>
<p>ä½¿ç”¨tcp_listenå‡½æ•°ï¼Œå¯¹äºæœåŠ¡å™¨æ¥è¯´ï¼Œéœ€è¦æ˜¾æ€§è°ƒç”¨tcp_listenå‡½æ•°ä»¥ä½¿æ§åˆ¶å—è¿›å…¥ç›‘å¬çŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ã€‚</p>
</li>
<li><p>å»ºç«‹è¿æ¥</p>
<p>åœ¨tcp_listenå‡½æ•°è¿›å…¥æœåŠ¡å™¨ç›‘å¬çŠ¶æ€åï¼Œéœ€è¦é©¬ä¸Šä½¿ç”¨tcp_acceptå‡½æ•°æ¥æ³¨å†Œä¸€ä¸ªæ¥æ”¶å¤„ç†å‡½æ•°ï¼Œå› ä¸ºä¸€æ—¦æœ‰å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚è¢«æˆåŠŸå»ºç«‹åï¼ŒæœåŠ¡å™¨å°±ä¼šè°ƒç”¨è¿™ä¸ªå¤„ç†å‡½æ•°ã€‚</p>
</li>
<li><p>æ¥å—å¹¶å¤„ç†æ•°æ®</p>
<p>ä¸€æ—¦è¿æ¥æˆåŠŸï¼Œacceptå›è°ƒå‡½æ•°ä¼šè°ƒç”¨tcp_recvå‡½æ•°æ³¨å†Œä¸€ä¸ªæ¥æ”¶å®Œæˆçš„å¤„ç†å‡½æ•°ã€‚å¯¹äºæœåŠ¡å™¨æ¥è¯´ï¼Œæ¥æ”¶åˆ°äº†å®¢æˆ·ç«¯çš„æ•°æ®æˆ–æ“ä½œè¦æ±‚ï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸€å›è°ƒå‡½æ•°è¿›è¡Œå¤„ç†ã€‚è¿™å…¶å®æ˜¯ä¸€ä¸ªå¤æ‚çš„è¿‡ç¨‹ï¼šæ¥æ”¶åˆ°æ•°æ®åï¼Œé¦–å…ˆé€šçŸ¥æ›´æ–°æ¥å—çª—å£ï¼ˆä½¿ç”¨tcp_recvedå‡½æ•°ï¼‰ï¼Œå¤„ç†å¹¶å‘é€æ•°æ®ï¼ˆä½¿ç”¨tcp_writeå‡½æ•°ï¼‰ï¼Œæ•°æ®å‘é€æˆåŠŸåˆ™æ¸…é™¤å·²å‘é€çš„æ•°æ®ï¼ˆä½¿ç”¨tcp_sentå‡½æ•°ï¼‰ï¼Œæœ€åå…³é—­è¿æ¥ï¼ˆä½¿ç”¨å‡½æ•°tcp_closeï¼‰ã€‚</p>
</li>
</ol>
<h1 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h1><ol>
<li><p>Qï¼š<a href="https://blog.csdn.net/tanmx219/article/details/105930028">tcp_recvdæ­£ç¡®è°ƒç”¨æ–¹æ³•</a>ï¼Ÿ</p>
<p>Aï¼šå¾ˆå¤šæºç æ˜¯åœ¨tcp_server_sentå‘é€å‡½æ•°ä¸­è°ƒtcp_recvdï¼Œå¦‚æœç”¨æˆ·ä¸æ˜¯ç”¨æ¥echoï¼ˆç«‹å³å‘å›ç›¸åŒçš„æŠ¥æ–‡ï¼‰ï¼Œè€Œæ˜¯çœŸæ­£è¦å¤„ç†äº‹åŠ¡çš„æ—¶å€™ï¼Œè¿™ç§ç”¨æ³•æ˜¯é”™è¯¯çš„ï¼šæ­¤æ—¶ï¼Œæ¥æ”¶çª—å£å¤§å°ç”±å‘é€çª—å£å†³å®šï¼Œå¦‚æœæ²¡æœ‰å‘é€æ–°æ•°æ®ï¼Œæ¥æ”¶çª—å£å°±ä¼šè¶Šæ¥è¶Šå°ï¼Œç›´åˆ°æœ€åæ— æ³•æ¥æ”¶æ•°æ®ã€‚<strong>æ­£ç¡®çš„ç”¨æ³•æ˜¯ï¼šåœ¨æ”¶åˆ°æ•°æ®åï¼Œåº”ç”¨å±‚è°ƒç”¨tcp_recvedå‡½æ•°æ¢å¤åŸæ¥çš„çª—å£å¤§å°ï¼›è€Œåœ¨å‘é€å‡½æ•°ä¸­ï¼Œä¸ç”¨ç®¡çª—å£çš„äº‹ï¼</strong></p>
</li>
<li><p>Qï¼šè°ƒç”¨lwip iperfæ¥å£ï¼Œæ— æ³•å…³é—­server?</p>
<p>Aï¼šlwip iperfåªæ˜¯å®ç°å½“clientæ–­å¼€è¿æ¥åˆ é™¤æ‰å…¶ç›¸å…³pcbç»“æ„ä½“ï¼Œè€Œæ²¡æœ‰æ–­å¼€tcpè¿æ¥æ²¡æœ‰é‡Šæ”¾ç›‘å¬ç«¯å£ï¼Œä»¿ç…§lwiperf_tcp_closeå‡½æ•°å®ç°ä¸€ä¸ªæ–°çš„é’ˆå¯¹serverå…³é—­çš„æ¥å£å³å¯</p>
</li>
</ol>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol>
<li><a href="https://www.kancloud.cn/jiejietop/tcpip/988613">LwIPåº”ç”¨å¼€å‘æŒ‡å—</a></li>
<li><a href="https://blog.csdn.net/weixin_54217950/article/details/121344759">ç½‘ç»œåŸºç¡€ä¹‹åè®®æ ˆ</a></li>
<li><a href="https://www.st.com/resource/zh/user_manual/um1713-developing-applications-on-stm32cube-with-lwip-tcpip-stack-stmicroelectronics.pdf">ä½¿ç”¨ LwIP TCP/IP æ ˆåœ¨ STM32Cube ä¸Šå¼€å‘åº”ç”¨</a></li>
<li><a href="https://blog.51cto.com/u_15262460/2883223">LwIPä½¿ç”¨ç»éªŒ</a></li>
<li><a href="https://blog.csdn.net/zhzht19861011/article/details/125322654">TCPå›è°ƒå‡½æ•°æ˜¯ä½•æ—¶è°ƒç”¨çš„</a></li>
<li><a href="https://blog.csdn.net/zhzht19861011/article/details/125278742">åè®®æ ˆä»€ä¹ˆæƒ…å†µä¸‹å‘é€ RST æ ‡å¿—</a></li>
</ol>
]]></content>
      <categories>
        <category>Third Party</category>
      </categories>
      <tags>
        <tag>lwip</tag>
      </tags>
  </entry>
  <entry>
    <title>Mplayerç¼–è¯‘åŠä½¿ç”¨è¯´æ˜</title>
    <url>/2023/03/07/third-party/mplayer/</url>
    <content><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><blockquote>
<p>å®˜ç½‘ï¼š<a href="http://www.mplayerhq.hu/design7/news.html">http://www.mplayerhq.hu/design7/news.html</a></p>
</blockquote>
<p><strong>MPlayer</strong>æ˜¯ä¸€æ¬¾å¼€æºçš„å¤šåª’ä½“æ’­æ”¾å™¨ï¼Œä»¥GNUé€šç”¨å…¬å…±è®¸å¯è¯å‘å¸ƒã€‚æ­¤æ¬¾è½¯ä»¶å¯åœ¨å„ä¸»æµæ“ä½œç³»ç»Ÿä½¿ç”¨ï¼Œä¾‹å¦‚Linuxå’Œå…¶ä»–ç±»Unixæ“ä½œç³»ç»Ÿã€å¾®è½¯Windowsç³»ç»ŸåŠè‹¹æœç”µè„‘çš„Mac OS ç³»ç»Ÿã€‚MPlayeræ˜¯å»ºåŸºäºå‘½ä»¤è¡Œç•Œé¢ï¼Œåœ¨å„æ“ä½œç³»ç»Ÿå¯é€‰æ‹©å®‰è£…ä¸åŒçš„å›¾å½¢ç•Œé¢ã€‚</p>
<h1 id="ubuntuä¸‹ç¼–è¯‘è¿‡ç¨‹"><a href="#ubuntuä¸‹ç¼–è¯‘è¿‡ç¨‹" class="headerlink" title="ubuntuä¸‹ç¼–è¯‘è¿‡ç¨‹"></a>ubuntuä¸‹ç¼–è¯‘è¿‡ç¨‹</h1><ol>
<li><p>ä¸‹è½½å¹¶è§£å‹æºç æ–‡ä»¶<a href="http://www.mplayerhq.hu/design7/news.html">click here</a></p>
</li>
<li><p>ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼ˆç›®å‰ç›´æ¥èµ°é»˜è®¤å‚æ•°é€‰é¡¹ï¼‰</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç›´æ¥æ‰§è¡Œ./configureé”™è¯¯ï¼Œ--yasm=<span class="string">''</span>å‚æ•°æ˜¯æ ¹æ®æç¤ºæ²¡æœ‰æ‰¾åˆ°yasmï¼Œå¯é€šè¿‡è¯¥å‘½ä»¤ç›´æ¥æ‰§è¡Œ</span></span><br><span class="line">./configure --yasm=''</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>ç¼–è¯‘</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">make</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">makeå®Œæˆæ—¢å¯çœ‹åˆ°æ–‡ä»¶å¤¹ä¸‹å­˜åœ¨mplayerå¯æ‰§è¡Œæ–‡ä»¶</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å®‰è£…</p>
</li>
</ol>
   <figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†mplayeråŠä¾èµ–çš„åº“æ–‡ä»¶è¿›è¡Œå®‰è£…, ä¸å®‰è£…ä¹Ÿå¯ä»¥è¿›è¡Œä½¿ç”¨</span></span><br><span class="line">sudo make install</span><br></pre></td></tr></tbody></table></figure>

<h1 id="æºç æ–‡ä»¶"><a href="#æºç æ–‡ä»¶" class="headerlink" title="æºç æ–‡ä»¶"></a>æºç æ–‡ä»¶</h1><ul>
<li><p>vd__*	</p>
<p><strong>video decode</strong>  ä¸è§£ç ç›¸å…³çš„,è§£ç å™¨åªæ˜¯è´Ÿè´£æŠŠè§£ç å®Œæˆçš„å¸§ä¼ è¾“ç»™voï¼Œå¦‚ä½•æ˜¾ç¤ºæ˜¯voçš„å‡½æ•°å®ç°;</p>
</li>
<li><p>vf__*  </p>
<p><strong>video filter</strong>  æ‰€æœ‰è¿‡æ»¤å™¨çš„å®šä¹‰ï¼Œå½“å‘½ä»¤è¡Œè¾“å…¥-vfçš„å‚æ•°ï¼Œè§„åˆ™ä¼šå»ç›¸åº”çš„filterå‡½æ•°è§£æã€‚ä¾‹å¦‚ï¼š -vf rotate=2,vf_rotate.cçš„å‡½æ•°è¿›è¡Œè¿›è¡Œrotateå‡½æ•°çš„è§£æã€‚</p>
</li>
<li><p>vo_*</p>
<p><strong>video output</strong>   è¾“å‡ºçš„å‡½æ•°å®šä¹‰ï¼Œæ¯ä¸€ä¸ªå‡½æ•°å¯¹åº”å®ç°ä¸€ç§æˆ–å‡ ç§çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼švo_md5sum.cå¾—åˆ°md5çš„ä¸€ä¸ªå€¼</p>
</li>
<li><p>DOCS æ–‡æ¡£</p>
</li>
</ul>
<h1 id="mplayeræµç¨‹"><a href="#mplayeræµç¨‹" class="headerlink" title="mplayeræµç¨‹"></a>mplayeræµç¨‹</h1><ol>
<li><p>è°ƒç”¨ AddExceptï¼ˆï¼‰æ³¨å†Œå¼‚å¸¸å¤„ç†å‡½æ•°</p>
</li>
<li><p>initmplayer();   //åˆå§‹åŒ–ï¼Œåˆ›å»ºå¿«è¿›å’Œæš‚åœçš„ä¿¡å·é‡</p>
</li>
<li><p>InitTimer();åˆå§‹åŒ–è®¡æ—¶å™¨</p>
</li>
<li><p>mp_msg_init();åˆå§‹åŒ–æ¶ˆæ¯ç³»ç»Ÿ</p>
</li>
<li><p>set_path_env();è®¾ç½®è·¯å¾„ã€ç¯å¢ƒ</p>
</li>
<li><p>ipu_image_start();ipuåˆå§‹åŒ–</p>
</li>
<li><p>mplayer_showmode(1);è®¾ç½®æ˜¾ç¤ºæ¨¡å¼</p>
</li>
<li><p>parse_codec_cfg(NULL);è§£æcodecé…ç½®å¯„å­˜å™¨</p>
</li>
<li><p>æ‰“å¼€æ•°æ®æµ</p>
</li>
<li><p>åˆ†ææ’­æ”¾æ ‘</p>
</li>
<li><p>æ·»åŠ æ’­æ”¾æ ‘åˆ—è¡¨</p>
</li>
<li><p>åˆå§‹åŒ–é¢„å¡«å……ç¼“å­˜</p>
</li>
<li><p>æ‰“å¼€æ’­æ”¾çš„æ–‡ä»¶</p>
</li>
<li><p>åˆ›å»ºbuffer</p>
</li>
<li><p>æ‰“å¼€æ•°æ®æµ</p>
</li>
<li><p>æ£€æµ‹æ•°æ®æµç±»å‹ï¼ˆéŸ³é¢‘æ ¼å¼å’Œè§†é¢‘æ ¼å¼ï¼‰</p>
</li>
<li><p>åˆ†æéŸ³é¢‘æµè§†é¢‘æµçš„ä¿¡æ¯ï¼ˆåŸå§‹è§†é¢‘å°ºå¯¸ã€åˆ†è¾¨ç‡ã€å¸§é¢‘ç‡ã€ç æµå¤§å°ï¼‰</p>
</li>
<li><p>å¯åŠ¨ç›¸åº”çš„åˆ†ç¦»å™¨</p>
</li>
<li><p>åˆ†æå‰ªè¾‘ä¿¡æ¯</p>
</li>
<li><p>åˆå§‹åŒ–codecï¼ˆå¤šåª’ä½“æ•°å­—ä¿¡å·ç¼–è§£ç å™¨ï¼‰</p>
</li>
<li><p>é€‰æ‹©æ‰“å¼€ç›¸åº”çš„è§†é¢‘è§£ç å™¨</p>
</li>
<li><p>åˆå§‹åŒ–è§†é¢‘è§£ç å™¨ï¼Œåˆ†æè§†é¢‘æµä¿¡æ¯</p>
</li>
<li><p>é€‰æ‹©æ‰“å¼€ç›¸åº”çš„éŸ³é¢‘è§£ç å™¨</p>
</li>
<li><p>åˆå§‹åŒ–éŸ³é¢‘è§£ç å™¨ã€PCMï¼Œåˆ†æéŸ³é¢‘ä¿¡æ¯</p>
</li>
<li><p>åŒæ­¥éŸ³é¢‘è§†é¢‘è¾“å‡º</p>
</li>
<li><p>å¼€å§‹æ’­æ”¾</p>
</li>
</ol>
<h1 id="å‘½ä»¤è¡Œå‚æ•°"><a href="#å‘½ä»¤è¡Œå‚æ•°" class="headerlink" title="å‘½ä»¤è¡Œå‚æ•°"></a>å‘½ä»¤è¡Œå‚æ•°</h1><ul>
<li><p>-list-options æ‰“ å° æ‰€æœ‰ å¯ ç”¨ çš„ é€‰ é¡¹</p>
</li>
<li><p>-vf   é€‰æ‹©è§†é¢‘ç›¸å…³å‚æ•°</p>
<ul>
<li><p>format é€‰æ‹©è§£ç ä¹‹åçš„æ ¼å¼è¾“å‡º</p>
</li>
<li><ul>
<li>NV12  /  NV21</li>
<li>BGRA</li>
<li>RGB</li>
</ul>
</li>
<li><p>rotate  é€‰æ‹©æ—‹è½¬çš„è§’åº¦è¾“å‡º</p>
</li>
<li><ul>
<li>1  é¡ºæ—¶é’ˆæ—‹è½¬90</li>
<li>2  é¡ºæ—¶é’ˆæ—‹è½¬270</li>
<li>4  æ—‹è½¬0åº¦</li>
</ul>
</li>
</ul>
</li>
<li><p>-slave  ä»æ¨¡å¼ï¼Œmplayerä¼šä»æ ‡å‡†è¾“å…¥è¯»ä¸€ä¸ªæ¢è¡Œç¬¦ï¼ˆ/nï¼‰åˆ†éš”å¼€çš„å‘½ä»¤ã€‚</p>
</li>
<li><p>-quiet   å»é™¤æ‚é¡¹ä¿¡æ¯, ä½¿ æ§åˆ¶å±å¹•è¾“å‡ºç®€ç•¥ï¼›å°¤å…¶æ˜¯é˜»æ­¢æ˜¾ç¤ºçŠ¶æ€è¡Œï¼ˆå³ A: 0.7 V: 0.6 A-V: 0.068 â€¦ï¼‰</p>
</li>
<li><p>-speed &lt;0.01 - 100&gt;é€‰æ‹©æ’­æ”¾é€Ÿç‡</p>
</li>
<li><p>-vo æŒ‡å®šè§†é¢‘è¾“å‡ºé©±åŠ¨çš„ä¼˜å…ˆçº§åˆ—è¡¨</p>
</li>
<li><p>-vc  é€‰æ‹©ç¼–è§£ç å™¨ï¼Œ  -vc help å¯ä»¥åˆ—å‡ºæ‰€æœ‰è§†é¢‘è§£ç å™¨ï¼Œå…¶ä¸­ä¸­æ‹¬å·é‡Œé¢æ˜¯.dllçš„æ˜¯æˆ‘ä»¬æ— æ³•ä½¿ç”¨çš„</p>
</li>
<li><ul>
<li>ffm264   264è½¯è§£ç </li>
<li>ffh264v4l2m2m  264ç¡¬è§£ç </li>
</ul>
</li>
<li><p>-ao æŒ‡å®šéŸ³é¢‘è¾“å‡ºé©±åŠ¨çš„ä¼˜å…ˆçº§åˆ—è¡¨</p>
</li>
<li><p>-ac æŒ‡å®šéŸ³é¢‘è§£ç å™¨ä¼˜å…ˆçº§åˆ—è¡¨</p>
</li>
<li><p>-zoom -x 800 -y 400 æŒ‡ä»¤æ’­æ”¾çª—ä½“çš„å¤§å°</p>
</li>
<li><p>-input  è¾“å…¥</p>
</li>
<li><ul>
<li>cmdlist  åˆ—å‡ºæ‰€æœ‰å¯ç»‘å®šæŒ‰é”®çš„å‘½ä»¤</li>
<li>file å‘½ä»¤è¾“å…¥é€šé“ã€‚åˆ¶å®šè¾“å…¥fifoçš„åå­—ï¼Œå†™å…¥æ§åˆ¶å‘½ä»¤ï¼Œä¸slaveå‚æ•°ä¸€èµ·ä½¿ç”¨</li>
</ul>
</li>
</ul>
<h1 id="slaveæ¨¡å¼"><a href="#slaveæ¨¡å¼" class="headerlink" title="slaveæ¨¡å¼"></a>slaveæ¨¡å¼</h1><h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p>MPlayerä¸ºåå°è¿è¡Œå…¶ä»–ç¨‹åºï¼Œä¸å†æˆªè·é”®ç›˜äº‹ä»¶ï¼ŒMPlayerä¼šä»æ ‡å‡†è¾“å…¥è¯»ä¸€ä¸ªæ¢è¡Œç¬¦ï¼ˆ/nï¼‰åˆ†éš”å¼€çš„å‘½ä»¤ã€‚</p>
<p>å¤§å¤šæ•°slaveæ¨¡å¼å‘½ä»¤ç›¸å½“äºå‘½ä»¤è¡Œé€‰é¡¹ã€‚</p>
<ul>
<li><p>å‘½ä»¤è¡Œæ’­æ”¾é€šè¿‡ -input file= å‚æ•°ç›‘å¬æŸä¸ªç®¡é“</p>
</li>
<li><p>å¦èµ·ä¸€ä¸ªçº¿ç¨‹ï¼Œåˆ›å»ºåŒåç®¡é“å¹¶è¾“å…¥6.2æ‰€ç¤ºæ§åˆ¶å‚æ•°å³å¯è¾¾åˆ°æ§åˆ¶mplayerçš„æ•ˆæœ</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mkfifo</span> /tmp/fifofile</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">mplayer -slave -input file=/tmp/fifofile &lt;movie&gt;</span></span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<p>å…·ä½“ä½¿ç”¨è¯´æ˜å¯ä»¥å‚è€ƒæºæ–‡ä»¶ä¸‹DOCS/tech/slave.txt</p>
<h2 id="æ§åˆ¶å‚æ•°"><a href="#æ§åˆ¶å‚æ•°" class="headerlink" title="æ§åˆ¶å‚æ•°"></a>æ§åˆ¶å‚æ•°</h2><p><strong>mplayer -input cmdlist</strong> å‘½ä»¤å¯ä»¥æ‰“å°å‡ºä¸€ä»½å¯ä»¥è¾“å…¥æ¸…å•</p>
<ul>
<li>get_file_name  æ‰“å°å½“å‰æ–‡ä»¶å</li>
<li>get_percent_pos   æ‰“å°å‡ºæ–‡ä»¶ä¸­çš„å½“å‰ä½ç½®ä¸ºæ•´æ•°ç™¾åˆ†æ¯”(0-100ï¼‰</li>
<li>get_time_length   æ‰“å°å½“å‰æ–‡ä»¶é•¿åº¦ç”¨ç§’è¡¨ç¤º</li>
<li>get_time_pos   æ‰“å°æ–‡ä»¶å½“å‰ä½ç½®ç”¨ç§’è¡¨ç¤º</li>
<li>seek  å®šä½ç”µå½±çš„æŸäº›åœ°æ–¹<ul>
<li>0 æ˜¯ä¸€ä¸ªç›¸å¯¹å®šä½+/- ï¼ˆé»˜è®¤å€¼ï¼‰</li>
<li>1 æ˜¯å®šä½ï¼…åœ¨ç”µå½±é‡Œ</li>
<li>2 æ˜¯å¯»æ±‚ä¸€ä¸ªç»å¯¹ä½ç½®çš„ç§’ã€‚</li>
</ul>
</li>
<li>quit   æ¨å‡ºmplayerè¿›ç¨‹</li>
<li>stop   åœæ­¢æ’­æ”¾</li>
<li>exit   ä»OSDèœå•é€€å‡ºæ§åˆ¶å°ã€‚ä¸åƒâ€™quitâ€™ï¼Œä¸é€€å‡ºMPlayerçš„</li>
</ul>
<h2 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h2><p>é’ˆå¯¹slaveä½¿ç”¨æ–¹æ³•ï¼Œç®€å•å†™äº†å‡ ä¸ªå‡½æ•°ä½œä¸ºå‚è€ƒç¤ºä¾‹</p>
<p>githubä»“åº“ï¼ˆmplayerInterfaceæ–‡ä»¶å¤¹ï¼‰ï¼š<a href="https://github.com/yangLieee/codebackup.git">click here</a></p>
<h1 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h1><ol>
<li><p>MPlayer interrupted by signal 13 in module: key_events ï¼Ÿ</p>
<p>å› ä¸ºMplayeræ˜¯é€šè¿‡æ¢è¡Œç¬¦(â€œ\nâ€)æ¥åˆ†éš”ä¸åŒçš„å‘½ä»¤ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ç¼–ç¨‹ä¸­ä¸ç®¡æ˜¯å†™å…¥åˆ°ç®¡é“æ–‡ä»¶è¿˜æ˜¯å†™å…¥åˆ°QTçš„è¿›ç¨‹ä¸­åœ¨å‘½ä»¤åé¢ä¸€å®šè¦åŠ å…¥æ¢è¡Œç¬¦(â€œ\nâ€),è¿™æ ·Mplayeræ‰èƒ½è¾¨åˆ«ã€‚</p>
</li>
<li><p>åªæœ‰åœ¨ä¸²å£æœ‰è¾“å‡ºï¼Œadb shellæ²¡æœ‰è¾“å‡º </p>
<p>é”™è¯¯ä¿¡æ¯ï¼šCannot find HOME directory.</p>
<p>è§£å†³æ–¹æ³•ï¼šsetenv(â€œHOMEâ€ï¼Œâ€œ/â€ï¼Œâ€œ1â€)</p>
</li>
<li><p>åœ¨voéƒ¨åˆ†æ·»åŠ  rotateåŠŸèƒ½ ä¹‹å, åªæœ‰ä¸€ä¸ªæ–¹å‘å¯ä»¥æ­£å¸¸æ˜¾ç¤º?</p>
</li>
</ol>
<p>   å¯¹äºnv12æ ¼å¼çš„å›¾ç‰‡å’Œæ•°æ®, uv_strideå’Œstrideè¿™ä¸¤ä¸ªå‚æ•°å½±å“LCDæœ€ç»ˆæ˜¾ç¤ºçš„æ•ˆæœ. åœ¨æ—‹è½¬ä¹‹åéœ€è¦å°†å¯¹åº”çš„å®½é«˜å¯¹åº”åˆ°ç›¸åº”çš„strideä¸­, æœ€ç»ˆå¯ä»¥æ­£å¸¸æ˜¾ç¤º</p>
<ol start="4">
<li><p>mpiè¢«mplayerç”¨æ¥å­˜å‚¨è§£ç ä¹‹åçš„å›¾åƒï¼ˆmp_image.hä¸­å®šä¹‰ï¼‰ï¼Œå¾—åˆ°mpiä¹‹åï¼Œvfè¢«è°ƒç”¨ï¼Œæ•´ä¸ªfilteré“¾ä¸Šé’‰filteréƒ½è¢«è°ƒç”¨äº†ä¸€éåŒ…æ‹¬æœ€åçš„vo; åœ¨voçš„put_imageé‡ŒæŠŠå›¾åƒè¾“å‡ºåˆ°æ˜¾ç¤ºå™¨ä¸Šã€‚è¿™ä¸ªæ—¶å€™éœ€è¦è€ƒè™‘å›¾åƒçš„å­˜å‚¨æ–¹æ³•ï¼Œå³ç”¨å“ªç§é¢œè‰²ç©ºé—´ã€‚</p>
</li>
<li><p><a href="https://blog.csdn.net/willand1981/article/details/5783107">https://blog.csdn.net/willand1981/article/details/5783107</a></p>
</li>
</ol>
<h1 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h1><ul>
<li><p><a href="http://www.mplayerhq.hu/DOCS/man/zh_CN/mplayer.1.html">Mplayerå’Œmencoderä½¿ç”¨æ–‡æ¡£ç®€ä»‹</a></p>
</li>
<li><p><a href="http://www.mplayerhq.hu/DOCS/HTML/zh_CN/index.html">Mplayerä½¿ç”¨æ–‡æ¡£</a></p>
</li>
<li><p><a href="https://blog.csdn.net/qizheguang/article/details/50552810">mplayeræµç¨‹åŠç›¸å…³å‡½æ•°è¯´æ˜</a></p>
</li>
<li><p><a href="https://blog.csdn.net/liangkaiming/article/details/5790893">slave æ¨¡å¼æ–‡æ¡£</a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>Third Party</category>
      </categories>
  </entry>
  <entry>
    <title>XPath Helperå®‰è£…åŠä½¿ç”¨</title>
    <url>/2022/12/03/third-party/xpath/</url>
    <content><![CDATA[<h1 id="å¼•è¯­"><a href="#å¼•è¯­" class="headerlink" title="å¼•è¯­"></a>å¼•è¯­</h1><p><em>åœ¨çˆ¬è™«å„ä¸ªåº”ç”¨åœºæ™¯ä¸‹ï¼Œæ•°æ®è§£æä¸ºå…¶ä¸­é‡è¦çš„ä¸€ç¯ã€‚è€Œåœ¨æ•°æ®è§£æä¸­ï¼ŒBeautifulSoupã€Xpathä»¥åŠæ­£åˆ™è¡¨è¾¾å¼ç­‰å¤šç§æ–¹æ³•å‡ä¸ºåˆ©å™¨ï¼Œåœ¨å®é™…åº”ç”¨ä¸­æ ¹æ®ä¸åŒåœºæ™¯é€‰æ‹©ä¸åŒçš„æ–¹æ³•æ˜¯æœ€é«˜æ•ˆçš„ï¼Œä½†æ˜¯å¯¹å„ä¸ªæ–¹æ³•çš„æŒæ¡ç¨‹åº¦è¦æ±‚å¾ˆé«˜ã€‚äº‹å®ä¸Šï¼Œç²¾é€šä¸€ç§æ–¹æ³•å°±å·²ç»æ»¡è¶³éœ€è¦äº†ï¼Œå†æ­¤åŸºç¡€ä¹‹ä¸Šï¼Œç”¨è¾…åŠ©å·¥å…·å¸®åŠ©ç†è§£æé«˜æ•ˆç‡ã€‚<br>æœ¬æ–‡å°†æä¾›ç»™â€œçˆ¬è™«å¤§å¸ˆä»¬â€ä½¿ç”¨xpathæ–¹æ³•çš„è¾…åŠ©å·¥å…·XPath Helperæ’ä»¶ã€‚</em></p>
<h1 id="XPath-Helperç®€ä»‹"><a href="#XPath-Helperç®€ä»‹" class="headerlink" title="XPath Helperç®€ä»‹"></a>XPath Helperç®€ä»‹</h1><p>XPathå³ä¸ºXMLè·¯å¾„è¯­è¨€ï¼Œå®ƒæ˜¯ä¸€ç§ç”¨æ¥ç¡®å®šXML(æ ‡å‡†é€šç”¨æ ‡è®°è¯­è¨€çš„å­é›†)æ–‡æ¡£ä¸­æŸéƒ¨åˆ†ä½ç½®çš„è¯­è¨€ã€‚XPathåŸºäºXMLçš„æ ‘çŠ¶ç»“æ„ï¼Œæä¾›åœ¨æ•°æ®ç»“æ„æ ‘ä¸­æ‰¾å¯»èŠ‚ç‚¹çš„èƒ½åŠ›ã€‚èµ·åˆXPathçš„æå‡ºçš„åˆè¡·æ˜¯å°†å…¶ä½œä¸ºä¸€ä¸ªé€šç”¨çš„ã€ä»‹äºXPointerä¸XSLé—´çš„è¯­æ³•æ¨¡å‹ã€‚<br>XPath Helperæ˜¯ä¸€æ¬¾ä¸“ç”¨äºchromeå†…æ ¸æµè§ˆå™¨çš„å®ç”¨å‹çˆ¬è™«ç½‘é¡µè§£æå·¥å…·ã€‚XPath Helperæ’ä»¶åŠŸèƒ½å¼ºåŠ²ï¼Œæ”¯æŒè¿›è¡ŒXPathæŸ¥è¯¢åŠŸèƒ½ã€‚XPath Helpæ’ä»¶å¯ä»¥å¸®åŠ©ç”¨æˆ·åœ¨å„ç±»ç½‘ç«™ä¸Šé€šè¿‡æŒ‰shifté”®é€‰æ‹©æƒ³è¦æŸ¥çœ‹çš„é¡µé¢å…ƒç´ æ¥æå–æŸ¥è¯¢å…¶ä»£ç ï¼ŒåŒæ—¶è¿˜æ”¯æŒç”¨æˆ·å¯¹æŸ¥è¯¢å‡ºæ¥çš„ä»£ç è¿›è¡Œç¼–è¾‘ï¼Œè€Œç¼–è¾‘å‡ºçš„ç»“æœå°†ç«‹å³æ˜¾ç¤ºåœ¨æ—è¾¹çš„ç»“æœæ¡†ä¸­ã€‚</p>
<h1 id="XPath-Helperå®‰è£…æ–¹æ³•"><a href="#XPath-Helperå®‰è£…æ–¹æ³•" class="headerlink" title="XPath Helperå®‰è£…æ–¹æ³•"></a>XPath Helperå®‰è£…æ–¹æ³•</h1><ol>
<li>æ ¹æ®ä¸‹é¢çš„é“¾æ¥å°†æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°ã€‚<br>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/18_Ws5qjHW9skhE1cb1jtYA">https://pan.baidu.com/s/18_Ws5qjHW9skhE1cb1jtYA</a><br>æå–ç ï¼šx0no</li>
<li>ä¸‹è½½å®Œæˆåï¼Œå°†æ–‡ä»¶çš„åç¼€åæ”¹ä¸ºâ€œ.zipâ€ï¼Œå¹¶è¿›è¡Œè§£å‹ã€‚</li>
<li>è§£å‹ä¹‹åæœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œå°†æ–‡ä»¶åä¸ºâ€œ2.0.2_0.crxâ€åç¼€åæ”¹ä¸ºâ€œ.zipâ€ï¼Œå¹¶å¯¹å…¶è¿›è¡ŒäºŒæ¬¡è§£å‹ã€‚<br>==è‡³æ­¤ï¼Œæ‰€æœ‰å¼¹å‡ºçš„æç¤ºè¯­å¥å…¨éƒ¨é€‰æ‹©  æ˜¯==</li>
<li>äºŒæ¬¡è§£å‹å®Œæˆï¼Œè·å¾—å¦‚ä¸‹å›¾æ‰€ç¤ºçš„æ–‡ä»¶å¤¹ã€‚å¦‚æœçº¢è‰²æ¡†å†…æ–‡ä»¶å¤¹å¦‚å›¾æ‰€ç¤ºï¼Œå°†â€œ_metadataâ€æ”¹ä¸ºâ€œmetadataâ€ã€‚å¦‚æœé»˜è®¤å°±æ˜¯â€œmetadataâ€åˆ™ä¸éœ€è¦åšä»»ä½•æ“ä½œã€‚<br><img src="/images/third-party/xpath-1.png"></li>
<li>è¿›å…¥è‡ªå·±å¯¹åº”çš„æµè§ˆå™¨ã€‚åœ¨æ­¤ï¼Œæˆ‘ä»¥Googleæµè§ˆå™¨ä¸ºåŸºç¡€æ“ä½œã€‚<br><strong>ç‚¹å‡»è°·æ­Œå³ä¸Šè§’çš„ä¸‰ä¸ªç‚¹çš„æŒ‰é’®<br>é€‰æ‹©æ›´å¤šå·¥å…·â€”â€”&gt;é€‰æ‹©æ‰©å±•ç¨‹åº<br>è¿›å…¥ï¼Œæ‰“å¼€å¼€å‘è€…æ¨¡å¼ï¼ŒåŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åºï¼Œé€‰æ‹©ç›¸åº”çš„å·²è§£å‹çš„æ–‡ä»¶ï¼Œç¡®è®¤ï¼<br>é‡å¯æµè§ˆå™¨ï¼Œç¡®è®¤å¯ä»¥æ­£å¸¸ä½¿ç”¨</strong></li>
<li>å¦‚ä¸‹å›¾è¡¨ç¤ºåˆ›å»ºæˆåŠŸã€‚<img src="/images/third-party/xpath-2.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li>
</ol>
<h1 id="XPath-Helperç®€å•ä½¿ç”¨æ–¹æ³•"><a href="#XPath-Helperç®€å•ä½¿ç”¨æ–¹æ³•" class="headerlink" title="XPath Helperç®€å•ä½¿ç”¨æ–¹æ³•"></a>XPath Helperç®€å•ä½¿ç”¨æ–¹æ³•</h1><h2 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h2><ol>
<li>è·å–é¡µé¢å…ƒç´ çš„xpathåœ°å€ã€‚</li>
<li>éªŒè¯ç”¨æˆ·è‡ªå·±å†™çš„xpathåœ°å€æ˜¯å¦æ­£ç¡®ã€‚</li>
</ol>
<h2 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h2><ul>
<li>æ‰“å¼€/å…³é—­XPath Helperå¿«æ·é”®ï¼šCtrl+Shift+x</li>
<li>æ‰“å¼€Xpath Helperåçš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤º<br> <img src="/images/third-party/xpath-3.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li>
<li>æ‰“å¼€è¯¥æ’ä»¶çš„æƒ…å†µä¸‹ï¼ŒæŒ‰ä½Shiftåœ¨é¡µé¢å†…è¿›è¡Œç§»åŠ¨ï¼Œé¼ æ ‡æ‰€ç»è¿‡ä¹‹å¤„ä¼šæœ‰é»„è‰²æ–¹æ¡†æ˜¾ç¤ºï¼Œä¸‹å›¾ä¸ºåœ¨CSDNé¦–é¡µï¼Œé€‰ä¸­æ ‡é¢˜å¼•å¯¼æ¡†çš„ç»“æœã€‚å·¦ä¾§çš„queryæ¡†å†…å³ä¸ºé€‰ä¸­å†…å®¹çš„xpathåœ°å€ã€‚<br><img src="/images/third-party/xpath-4.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li>
<li>å¦‚æœä½œä¸ºéªŒè¯çš„æ–¹æ³•ï¼Œåœ¨queryæ¡†å†…å†™å…¥è‡ªå·±å†™å…¥xpathåœ°å€ï¼Œçœ‹resultæ¡†å†…æ˜¯å¦æ˜¯è‡ªå·±æƒ³è¦æŠ“å–çš„å…ƒç´ ï¼Œå¦‚æœä¸æ­£ç¡®ï¼Œå¯ä»¥å®æ—¶åœ¨queryå†…è¿›è¡Œä¿®æ”¹ï¼Œç›´è‡³è·å¾—æ­£ç¡®xpathåœ°å€ã€‚<br><img src="/images/third-party/xpath-5.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li>
</ul>
]]></content>
      <categories>
        <category>Third Party</category>
      </categories>
  </entry>
  <entry>
    <title>æ™ºèƒ½å®¶å±…æ¨¡å‹è®¾è®¡</title>
    <url>/2022/12/03/item/smartHome/</url>
    <content><![CDATA[<h1 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h1><p>ä¼´éšç€é€šä¿¡æŠ€æœ¯çš„ä¸æ–­å‘å±•å’Œç¤¾ä¼šç¯å¢ƒçš„è¿›æ­¥ï¼Œäººä»¬å¯¹æ›´æ™ºèƒ½åŒ–çš„ç”Ÿæ´»æœ‰äº†æ›´é«˜çš„è¿½æ±‚ã€‚ç‰©è”ç½‘æ™ºèƒ½å®¶å±…å·²ç»ä¸èƒ½ç®—æ˜¯æ–°é²œçš„åè¯äº†ï¼Œå…¶å•å“åŠäº’è”åº”ç”¨ä¹Ÿéƒ½å·²ç»éå¸¸å¹¿æ³›äº†ã€‚æœ¬è®¾è®¡åŸºäºSTM32å•ç‰‡æœºï¼Œé€šè¿‡ESP8266æ— çº¿é€šä¿¡æ¨¡å—ä»¥åŠè¿æ¥ç›¸åº”çš„ä¼ æ„Ÿå™¨åŠå¤–è®¾å¯¹æ™ºèƒ½å®¶å±…çš„åœºæ™¯è¿›è¡Œæ¨¡æ‹Ÿã€‚æœ¬æ–‡æœ€åˆå†™äºä»Šå¹´6æœˆï¼Œç°åœ¨ä»äº‹åµŒå…¥å¼å·¥ä½œä¸€æ®µæ—¶é—´åç°åœ¨å†æ¬¡å°†æˆ‘çš„æ¯•ä¸šè®¾è®¡é‡æ–°è¿›è¡Œæ•´ç†å’Œæ€è€ƒï¼Œå¸Œæœ›èƒ½å¯¹è¯»è€…æœ‰æ‰€å¸®åŠ©ï¼</p>
<h1 id="è®¾è®¡æ€è·¯"><a href="#è®¾è®¡æ€è·¯" class="headerlink" title="è®¾è®¡æ€è·¯"></a>è®¾è®¡æ€è·¯</h1><p>å¯¹äºä»»ä½•ä¸€ä¸ªé¡¹ç›®æˆ–è€…å·¥ç¨‹çš„å¼€å§‹ç¬¬ä¸€æ­¥æ°¸è¿œæ˜¯å…ˆæ˜ç¡®éœ€æ±‚ï¼ŒçŸ¥é“è‡ªå·±åšæˆä»€ä¹ˆæ ·å­çš„ä¸œè¥¿ã€‚åœ¨æˆ‘å‚è€ƒäº†ä¸€äº›èµ„æ–™å¹¶é˜…è¯»äº†å‡ ç¯‡æ–‡çŒ®åï¼Œå¯¹å…¶æœ‰äº†åˆè®¤è¯†ã€‚æˆ‘ç†è§£çš„æ™ºèƒ½å®¶å±…å°±æ˜¯ä»æ„ŸçŸ¥å±‚å‡ºå‘å¯¹ç¯å¢ƒè¿›è¡Œç›‘æµ‹ï¼Œé€šè¿‡ä¼ è¾“å±‚éµä»ä¸€å®šçš„ç½‘ç»œåè®®å¯¹æ•°æ®è¿›è¡Œä¼ è¾“åŒæ—¶é€šè¿‡è½¯ä»¶å¯¹æ•°æ®è¿›è¡Œæ•´ç†åˆ†æï¼Œå¹¶åœ¨åº”ç”¨å±‚ï¼ˆå®¶å…·çŠ¶æ€ï¼‰åšå‡ºç›¸åº”çš„åŠ¨ä½œã€‚æœ€ç»ˆæˆ‘å°†è¯¥æµç¨‹æ•´ç†æˆä¸‹å›¾æ‰€ç¤ºçš„å®ç‰©æ¨¡æ‹Ÿï¼Œè¿›è€Œå¯¹å…¶è¿›è¡Œæ¨¡å—çš„æŠ½è±¡ã€‚åŸºäºæ­¤ï¼Œè¿›è¡Œä¸‹é¢çš„ç¡¬ä»¶è®¾è®¡é€‰å‹åŠè½¯ä»¶å®ç°ç­‰ç­‰ã€‚<br><img src="/images/item/smarthome-1.png"></p>
<h1 id="ç¡¬ä»¶è®¾è®¡"><a href="#ç¡¬ä»¶è®¾è®¡" class="headerlink" title="ç¡¬ä»¶è®¾è®¡"></a>ç¡¬ä»¶è®¾è®¡</h1><h2 id="ç¡¬ä»¶é€‰å‹åŸåˆ™"><a href="#ç¡¬ä»¶é€‰å‹åŸåˆ™" class="headerlink" title="ç¡¬ä»¶é€‰å‹åŸåˆ™"></a>ç¡¬ä»¶é€‰å‹åŸåˆ™</h2><p>ç”±äºè¯¥é¡¹ç›®æ˜¯æ¨¡å‹è®¾è®¡ï¼Œå¯¹äºç¡¬ä»¶çš„é€‰å‹æ•´ä½“ä¸Šæ˜¯ä»¥==ä½æˆæœ¬ã€ä½åŠŸè€—ã€é«˜é›†æˆã€é«˜ä»¿çœŸåº¦==ä¸ºåŸåˆ™çš„ã€‚</p>
<ul>
<li>æ»¡è¶³åŠŸèƒ½åŠæ€§èƒ½éœ€æ±‚ã€‚æœ¬è®¾è®¡çš„ä¾§é‡ç‚¹ä¸åœ¨äºæ•°æ®çš„ç²¾ç¡®å’Œæ§åˆ¶çš„çµæ•ï¼Œæ•…æ²¡æœ‰ä¸¥æ ¼å‚æ•°è¦æ±‚ã€‚</li>
<li>æ˜“ä¸Šæ‰‹çš„â€œå¤§ä¼—â€äº§å“ã€‚å¯¹äºè¿™äº›å…ƒä»¶æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„æ‰¾åˆ°ç›¸å…³èµ„æ–™ï¼Œè€Œä¸”é¿å…è¸©å‘ã€‚</li>
<li>å…¼å®¹æ€§ã€‚ç”±äºæ˜¯æ¨¡å—åŒ–è®¾è®¡ï¼Œå¯¹äºéƒ¨åˆ†æ¨¡å—çš„å…¼å®¹æ€§æ˜¯è¦æœ‰ä¸€å®šçš„è¦æ±‚çš„ã€‚</li>
</ul>
<h2 id="ç¡¬ä»¶é€‰å‹"><a href="#ç¡¬ä»¶é€‰å‹" class="headerlink" title="ç¡¬ä»¶é€‰å‹"></a>ç¡¬ä»¶é€‰å‹</h2><p>å¦‚ä¸‹æ˜¯å¯¹äºç¡¬ä»¶çš„é€‰å‹åŠç›¸å…³ä»‹ç»ï¼Œæœ€åé™„æœ‰ä¸€å¼ æ‰€æœ‰ç”¨åˆ°çš„ç¡¬ä»¶çš„å›¾ç‰‡ã€‚</p>
<p><em><strong>1. ä¸»æ§æ¨¡å—â€”-STM32F103C8T6</strong></em></p>
<p>   æˆ‘ç›¸ä¿¡51åº”è¯¥æ˜¯å¤§éƒ¨åˆ†ç”µå­åŒå­¦å…¥æ‰‹çš„ç¬¬ä¸€æ¬¾å•ç‰‡æœºã€‚è¯šç„¶ï¼Œ51æœ‰å…¶çµæ´»è½»å·§ä¹‹å¤„ï¼Œä½†æ˜¯stm32å…·æœ‰å¼ºå¤§å¤–è®¾æ¥å£å’Œè¾ƒé«˜çš„è¿è¡Œé€Ÿåº¦ï¼ˆSTM32F103çš„CPUæœ€é«˜é€Ÿåº¦è¾¾72 MHzï¼Œå…·æœ‰16KB ~ 1MB Flashã€å¤šç§æ§åˆ¶å¤–è®¾ã€USBå…¨é€Ÿæ¥å£å’ŒCANï¼›å¤šè¾¾112ä¸ªå¿«é€ŸI/Oå£ã€11ä¸ªå®šæ—¶å™¨å’Œ13ä¸ªé€šä¿¡æ¥å£ï¼‰ æ­¤å¤–STM32è¿˜æä¾›äº†ä¸‰ç§çœç”µæ¨¡å¼å’Œä¸¤ç§è°ƒè¯•æ–¹å¼ã€‚å…¶çµæ´»çš„è°ƒè¯•æ–¹æ³•ã€å¤šæ ·çš„åŠŸèƒ½ç‰¹ç‚¹å’Œè¾ƒä¼˜çš„æ€§èƒ½å‚æ•°åŒæ ·ä¹Ÿæ˜¯é€‰æ‹©STM32ä½œä¸ºä¸»æ§èŠ¯ç‰‡çš„åŸå› ã€‚  </p>
<p><em><strong>2. æ— çº¿é€šä¿¡æ¨¡å—â€”-ESP01Sæ— çº¿é€šä¿¡æ¨¡å—</strong></em></p>
<p>   åŸºäºæ­¤æ¨¡å—é¦–å…ˆè€ƒè™‘çš„æ˜¯é€šä¿¡æ–¹å¼ï¼Œå¦‚æœä¸è°ˆåº”ç”¨åœºæ™¯ï¼Œæ¯”è¾ƒä¼ è¾“é€Ÿåº¦ã€ä¼ è¾“è·ç¦»å’Œå®‰å…¨æ€§ï¼Œzigbeeå’Œè“ç‰™ä¼šæ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚ä½†æ˜¯åœ¨æ™ºèƒ½å®¶å±…çš„åœºæ™¯ä¸‹ï¼Œwifiæ— ç–‘ä¼šæ˜¯æ›´ä¼˜é€‰ï¼Œå› ä¸ºå½“ä¸‹wifiå·²ç»åŸºæœ¬æ™®åŠåˆ°äº†æ¯ä¸ªå®¶åº­ï¼Œæ¨¡æ‹Ÿè¿˜åŸåº¦ä¼šæ›´é«˜ã€‚æ¥ä¸‹æ¥æ˜¯å…·ä½“èŠ¯ç‰‡çš„é€‰æ‹©ï¼Œå®‰ä¿¡å¯çš„ESP8266æ¨¡ç»„å¾ˆå¤šéƒ½å¯ä»¥åœ¨è¯¥åœºæ™¯ä¸‹åº”ç”¨ï¼Œå…¶å…·ä½“çš„åŒºåˆ†ä¸»è¦ä½“ç°åœ¨å°è£…æ–¹å¼ã€ç¡¬ä»¶é…ç½®ã€èµ„æºå¼•è„šç­‰ç­‰æ–¹é¢ã€‚å…·ä½“çš„åŒºåˆ†å¯ä»¥å‚è€ƒå®‰ä¿¡å¯å®˜ç½‘ç»™å‡ºçš„æ–‡æ¡£è¯´æ˜ï¼Œ<a href="https://www.ai-thinker.com/product/esp8266">please click</a>ï¼</p>
<p><em><strong>3. ç¯å¢ƒç›‘æµ‹æ¨¡å—</strong></em></p>
<ul>
<li><p>æ¸©æ¹¿åº¦ç›‘æµ‹â€”-DHT11</p>
<blockquote>
<p>  DHT11æ˜¯ä¸€æ¬¾æœ‰å·²æ ¡å‡†æ•°å­—ä¿¡å·è¾“å‡ºçš„æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ã€‚æ­¤ä¼ æ„Ÿå™¨ä½¿ç”¨èµ·æ¥ç®€å•ï¼Œç²¾åº¦å’Œæ€§èƒ½å‚æ•°è¶³å¤Ÿæ»¡è¶³ç¯å¢ƒç›‘æµ‹çš„åœºæ™¯ã€‚å…¶éµä»å•æ€»çº¿åè®®ï¼Œæœ‰ä¸¥æ ¼çš„æ—¶åºè¦æ±‚ã€‚ä¸»æœºå…ˆè¦å‘é€ä¸€ä¸ªè‡³å°‘18msçš„ä½ç”µå¹³ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒDHT11å†…éƒ¨å®ŒæˆADè½¬æ¢ç­‰æ“ä½œï¼Œå½“ä¸»æœºæ‹‰é«˜åï¼Œæœ‰20-40usæ—¶é—´ï¼Œè¿™ä¸ªæ—¶é—´ç”¨äºä¸»æœºåšè¾“å…¥è¾“å‡ºåˆ‡æ¢ï¼Œå½“ä¸»æœºé‡Šæ”¾æ€»çº¿æ§åˆ¶æƒï¼ˆæ­¤æ—¶ä¸»æœºä¸ºè¾“å…¥çŠ¶æ€ï¼Œæ€»çº¿è¢«ä¸Šæ‹‰ç”µé˜»æ‹‰é«˜ï¼‰ï¼ŒDHT11å°è¯•å°†æ€»çº¿æ‹‰ä½ï¼ŒæˆåŠŸæ‹‰ä½åå°±å¼€å§‹å‡†å¤‡å‘é€æ•°æ®äº†ï¼Œå†æ‹‰é«˜ä¸€æ¬¡å°±å¼€å§‹ä¼ è¾“æ•°æ®äº†ã€‚</p>
</blockquote>
</li>
<li><p>ç©ºæ°”è´¨é‡ç›‘æµ‹â€”-MQ135<br> &gt; MQç³»åˆ—ä¼ æ„Ÿå™¨æ˜¯ç›‘æµ‹ç©ºæ°”ç¯å¢ƒæœ€å¸¸ç”¨çš„ä¼ æ„Ÿå™¨ï¼Œå¤§æ¦‚åå‡ ä¸ªéƒ½æ˜¯é’ˆå¯¹ä¸åŒæ±¡æŸ“ç‰©è¿›è¡Œæ£€æµ‹çš„ï¼Œæœ¬æ¬¡å®éªŒæˆ‘ä»¬é‡‡ç”¨çš„æ˜¯MQ135ï¼Œä¸»è¦é’ˆå¯¹æ°¨æ°”ã€è‹¯ã€é…’ç²¾ã€çƒŸé›¾é¢—ç²’è¿›è¡Œç©ºæ°”è´¨é‡æ£€æµ‹ï¼ŒåŒæ ·æ ¹æ®è‡ªå·±çš„éœ€æ±‚å¯ä»¥é€‰æ‹©å…¶ä»–å‹å·çš„ä¼ æ„Ÿå™¨å§ï¼Œæ¯”å¦‚çƒŸé›¾ã€é…’ç²¾ã€ä¸€æ°§åŒ–ç¢³ç­‰ç­‰ã€‚</p>
</li>
<li><p>å…‰ç…§ç›‘æµ‹â€”-BH1750</p>
<blockquote>
<p> BH1750ä¼ æ„Ÿå™¨æœ‰æ¥è¿‘è§†è§‰çµæ•åº¦çš„å…‰è°±çµæ•åº¦ç‰¹æ€§ï¼Œå®ƒæ”¯æŒI2CBUSæ¥å£ï¼Œæ”¯æŒ1.8vé€»è¾‘è¾“å…¥æ¥å£ã€‚ä¼ æ„Ÿå™¨æœ‰ä¸¤ç§å¯é€‰çš„I2Cslaveåœ°å€ï¼Œæ— éœ€å…¶ä»–å¤–éƒ¨ä»¶ã€‚å…‰æºä¾èµ–æ€§å¼±ï¼Œå—çº¢å¤–çº¿å½±å“å¾ˆå°ã€‚ä¼ æ„Ÿå™¨é€šè¿‡é™ä½åŠŸç‡åŠŸèƒ½ï¼Œå®ç°ä½ç”µæµåŒ–ã€‚</p>
</blockquote>
</li>
</ul>
<p><em><strong>4. æ•°æ®å±•ç¤ºæ¨¡å—â€”-OLED</strong></em></p>
<p>   æ•°æ®æ˜¾ç¤ºæ— éå°±æ˜¯OLEDã€LCDã€TFTå±å¹•ç­‰ç­‰ã€‚è¯¥æ¨¡å—çš„ä½œç”¨æ˜¯å¯¹ç›‘æµ‹åˆ°çš„ç¯å¢ƒæ•°æ®åŠå®¶å…·çš„çŠ¶æ€è¿›è¡Œå®æ—¶æ˜¾ç¤ºã€‚OLEDç›¸è¾ƒäºLCDå±å¹•åˆ™ä¸éœ€è¦èƒŒå…‰å±‚ï¼ŒåŒæ ·ä¹Ÿä¸éœ€è¦å‘å‡ºå…‰äº®çš„æ¶²æ™¶å±‚ï¼›è€Œç›¸è¾ƒäºTFTæœ‰æ›´é«˜çš„æ€§ä»·æ¯”ï¼Œæœ€ç»ˆé€‰æ‹©äº†0.96å¯¸OLEDå±å¹•ã€‚</p>
<p><em><strong>5. å®¶å…·æ¨¡æ‹Ÿæ¨¡å—</strong></em></p>
<p>   å®¶å…·æ¨¡æ‹Ÿæ¨¡å—ä¸»è¦æ˜¯æ¨¡æ‹Ÿåˆ°äº†é—¨ã€çª—ã€ç¯å’Œé£æ‰‡ã€‚å…·ä½“æ˜¯é€šè¿‡æ­¥è¿›ç”µæœºã€èˆµæœºã€LEDç¯å’Œé£æ‰‡æ¨¡å—å®ç°çš„ã€‚è€Œåº”ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œé…ç½®IOå£çš„å·¥ä½œæ¨¡å¼ï¼Œæ§åˆ¶GPIOå£è¾“å‡ºçš„é«˜ä½ç”µå¹³å³å¯ã€‚<br>   <img src="/images/item/smarthome-2.png"></p>
<h2 id="PCBè®¾è®¡"><a href="#PCBè®¾è®¡" class="headerlink" title="PCBè®¾è®¡"></a>PCBè®¾è®¡</h2><p>å¯¹äºä»¥ä¸Šä¼—å¤šå…ƒä»¶å’Œæ¨¡å—ï¼Œå¦‚æœç”¨å¯¼çº¿ç›´æ¥è¿æ¥èµ·æ¥çš„è¯ï¼Œæˆ‘åªèƒ½æƒ³åˆ°ä¸€ä¸ªè¯å½¢å®¹ï¼šä¸€å›¢ä¹±éº»ï¼å› æ­¤è®¾è®¡PCBæ¿å°±æˆäº†è§£å†³è¯¥é—®é¢˜çš„æœ€å¥½æ–¹æ³•ã€‚å¯èƒ½æœ‰çš„åŒå­¦åœ¨å¤§å­¦æœŸé—´å­¦ä¹ è¿‡å¦‚ä½•ç”»æ¿æ‰“æ¿ï¼Œæœ‰äº›åŒå­¦æ²¡æœ‰æ¥è§¦è¿‡ï¼Œä»¥æˆ‘è‡ªå·±çš„ç»éªŒæ¥è®²ï¼Œå­¦ä¹ ä¸€ä¸¤å‘¨æ—¶é—´å¯¹äºç»˜åˆ¶è¯¥é¡¹ç›®PCBå·²ç»ç»°ç»°æœ‰ä½™ã€‚è¯¥é¡¹ç›®å¹¶ä¸éœ€è¦åœ¨æ¿å­ä¸Šæœ‰å„ä¸ªç”µè·¯çš„è®¾è®¡ï¼ˆæœ‰èƒ½åŠ›çš„åŒå­¦å¯ä»¥è®¾è®¡ä¸€ä¸ªç”µæºç”µè·¯ï¼‰ï¼Œå› æ­¤åªéœ€è¦å¸ƒå±€å¸ƒçº¿å³å¯è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œä»¥ä¸‹æ˜¯æˆ‘æ‰€è®¾è®¡çš„æ¿å­ ã€‚</p>
<p>è¯¥éƒ¨åˆ†çš„è®¾è®¡è®©è‡ªå·±å¯¹äºæ•´ä¸ªç¡¬ä»¶èµ„æºçš„äº†è§£åŠä½¿ç”¨æœ‰ä¸€ä¸ªæ–°çš„è®¤è¯†ã€‚åœ¨ä¸»æ§èŠ¯ç‰‡æœ‰é™çš„ç¡¬ä»¶èµ„æºã€æœ‰é™ç©ºé—´çš„ç”µè·¯æ¿ä¸Šï¼Œå¦‚ä½•èƒ½å……åˆ†åˆ©ç”¨æ¯ä¸ªå…ƒä»¶çš„å½¢çŠ¶å¤§å°å’Œæ€§èƒ½ç‰¹ç‚¹æ¥åšåˆ°å½¼æ­¤ä¹‹é—´çš„äº¤äº’æ˜¯è¯¥éƒ¨åˆ†çš„é‡éš¾ç‚¹ã€‚<br>==Tipsï¼šé˜…è¯»æ¯æ ¹pinçš„åŠŸèƒ½ï¼Œåˆ†é…å¥½ä¸»æ§èŠ¯ç‰‡çš„å„ä¸ªç®¡è„šèµ„æº==</p>
<p><img src="/images/item/smarthome-3.png"></p>
<h1 id="è½¯ä»¶è®¾è®¡"><a href="#è½¯ä»¶è®¾è®¡" class="headerlink" title="è½¯ä»¶è®¾è®¡"></a>è½¯ä»¶è®¾è®¡</h1><p>æ•´ä¸ªä»£ç å·¥ç¨‹å†…å®¹ç›¸å¯¹è¾ƒå¤§ï¼Œåœ¨æ­¤å°±ä¸è¿›è¡Œè¯¦ç»†çš„å±•ç¤ºäº†å¦‚æœæœ‰éœ€è¦å¯ä»¥ç§ä¿¡æˆ‘ã€‚åœ¨æ­¤åªå±•ç¤ºéƒ¨åˆ†ä¸»å‡½æ•°ä»£ç å’Œç›¸å…³å¤´æ–‡ä»¶ç­‰ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œæ•°æ®ä¸Šäº‘æ ¼å¼å®šä¹‰ã€å‘½ä»¤ä¸‹å‘ã€å„ä¸ªæ¨¡å—çš„é©±åŠ¨å‡½æ•°åŒæ ·é‡è¦ï¼</p>
<h2 id="å¤´æ–‡ä»¶"><a href="#å¤´æ–‡ä»¶" class="headerlink" title="å¤´æ–‡ä»¶"></a>å¤´æ–‡ä»¶</h2><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"stm32f10x.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"stdio.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"math.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"delay.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"string.h"</span>	</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"dht11.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"BH1750.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"adc.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"led.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"OLED_I2C.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"usart.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"timer.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"exti.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"key.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"door_bsp.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"fan.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"esp8266.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"MqttKit.h"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"onenet.h"</span></span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="ä¸»å‡½æ•°"><a href="#ä¸»å‡½æ•°" class="headerlink" title="ä¸»å‡½æ•°"></a>ä¸»å‡½æ•°</h2><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>{</span>					<span class="comment">//å®šä¹‰ç»“æ„ä½“</span></span><br><span class="line">	<span class="type">uint8_t</span> temp;				<span class="comment">//æ¸©åº¦</span></span><br><span class="line">	<span class="type">uint8_t</span> humi;				<span class="comment">//æ¹¿åº¦</span></span><br><span class="line">	<span class="type">float</span> mq;					<span class="comment">//MQ135ä¼ æ„Ÿå™¨</span></span><br><span class="line">	<span class="type">float</span> sun;					<span class="comment">//å…‰ç…§å¼ºåº¦ä¼ æ„Ÿå™¨</span></span><br><span class="line">	<span class="type">uint8_t</span> LED_FLAG;			<span class="comment">//LED</span></span><br><span class="line">	<span class="type">uint8_t</span> FAN_FLAG;			<span class="comment">//é£æ‰‡</span></span><br><span class="line">	<span class="type">uint8_t</span> DOOR_FLAG;			<span class="comment">//æ­¥è¿›ç”µæœº</span></span><br><span class="line">	<span class="type">uint8_t</span> WARNING_FLAG;		<span class="comment">//æ­¥è¿›ç”µæœº</span></span><br><span class="line">}SendData;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> SendData send_data;</span><br><span class="line"><span class="keyword">extern</span> <span class="type">uint8_t</span> cmd_rev_flag;</span><br><span class="line">SendData send_data = {<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0</span> , <span class="number">0</span> , <span class="number">0</span> ,<span class="number">0</span>};	<span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line"><span class="type">uint8_t</span> cmd_rev_flag = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">{</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">char</span> *data_ptr = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">short</span> timeCount = <span class="number">0</span>;	<span class="comment">//å‘é€é—´éš”å˜é‡</span></span><br><span class="line">	Hardware_Init();</span><br><span class="line">	Net_Init();</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">	{  		</span><br><span class="line">		<span class="keyword">if</span>(++timeCount &gt;= <span class="number">200</span> || (cmd_rev_flag == <span class="number">1</span>))	</span><br><span class="line">{	</span><br><span class="line">			DHT11_Read_Data(&amp;send_data.temp,&amp;send_data.humi);</span><br><span class="line">			send_data.mq=(<span class="type">float</span>)(Get_Adc_Average(ADC_Channel_1,<span class="number">10</span>))*(<span class="number">3.3</span>/<span class="number">4096</span>);	</span><br><span class="line">			send_data.sun = LIght_Intensity();										 </span><br><span class="line">			OneNet_SendData();	<span class="comment">//å‘é€æ•°æ®</span></span><br><span class="line">			timeCount = <span class="number">0</span>;</span><br><span class="line">			cmd_rev_flag=<span class="number">0</span>;</span><br><span class="line">			ESP8266_Clear();</span><br><span class="line">		}</span><br><span class="line">		data_ptr = ESP8266_GetIPD(<span class="number">0</span>);		<span class="comment">//æ£€æŸ¥æ˜¯å¦æœ‰ä¸‹å‘æŒ‡å®š</span></span><br><span class="line">		<span class="keyword">if</span>(data_ptr != <span class="literal">NULL</span>)</span><br><span class="line">			OneNet_RevPro(data_ptr);</span><br><span class="line">		delay_ms(<span class="number">10</span>);</span><br><span class="line">	}		 </span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h2 id="ç¡¬ä»¶åˆå§‹åŒ–"><a href="#ç¡¬ä»¶åˆå§‹åŒ–" class="headerlink" title="ç¡¬ä»¶åˆå§‹åŒ–"></a>ç¡¬ä»¶åˆå§‹åŒ–</h2><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">Hardware_Init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">{</span><br><span class="line">	delay_init();	    		<span class="comment">//å»¶æ—¶å‡½æ•°åˆå§‹åŒ–</span></span><br><span class="line">	TIM2_Int_Init(<span class="number">4999</span>,<span class="number">7199</span>);  	<span class="comment">//ç”¨äºOLEDæ˜¾ç¤º</span></span><br><span class="line">	Usart1_Init(<span class="number">115200</span>);		<span class="comment">//ä¸²å£è°ƒè¯•</span></span><br><span class="line">	Usart2_Init(<span class="number">115200</span>);		<span class="comment">//esp8266--stm32é€šä¿¡</span></span><br><span class="line">	OLED_Init();				<span class="comment">//OLEDåˆå§‹åŒ–</span></span><br><span class="line">	OLED_CLS();</span><br><span class="line">	KEY_Init();					<span class="comment">//æŒ‰é”®åˆå§‹åŒ–</span></span><br><span class="line">	NVIC_PriorityGroupConfig(NVIC_PriorityGroup_2);</span><br><span class="line">								<span class="comment">//è®¾ç½®ä¸­æ–­ä¼˜å…ˆçº§åˆ†ç»„2ï¼Œä¸ºåé¢å¤–éƒ¨ä¸­æ–­åšåŸºç¡€</span></span><br><span class="line">	EXTIX_Init();				<span class="comment">//åˆ¤æ–­é”®å€¼æ‰§è¡Œæ“ä½œ</span></span><br><span class="line">	DHT11_Init();				<span class="comment">//æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨åˆå§‹åŒ–</span></span><br><span class="line">	Adc_Init();					<span class="comment">//ç©ºæ°”æ£€æµ‹åˆå§‹åŒ–</span></span><br><span class="line">	BH1750_Init();				<span class="comment">//å…‰ç…§</span></span><br><span class="line">	TIM3_Int_Init(<span class="number">4999</span>,<span class="number">7199</span>);  	<span class="comment">//æŠ¥è­¦æ˜¾ç¤º</span></span><br><span class="line">	ESP8266_Init();				<span class="comment">//åˆå§‹åŒ–ESP8266</span></span><br><span class="line">	<span class="keyword">while</span>(OneNet_DevLink())		<span class="comment">//æ¥å…¥OneNET</span></span><br><span class="line">	delay_ms(<span class="number">500</span>);</span><br><span class="line">}	</span><br></pre></td></tr></tbody></table></figure>

<h1 id="äº‘å¹³å°é€‰æ‹©"><a href="#äº‘å¹³å°é€‰æ‹©" class="headerlink" title="äº‘å¹³å°é€‰æ‹©"></a>äº‘å¹³å°é€‰æ‹©</h1><p>æœ¬è®¾è®¡è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„éƒ¨åˆ†å°±æ˜¯å¯¹äºäº‘å¹³å°çš„é€‰æ‹©ï¼Œæœ¬é¡¹ç›®é€‰æ‹©çš„æ˜¯ä¸­å›½ç§»åŠ¨ç‰©è”ç½‘äº‘å¹³å°OneNETã€‚å½“ç„¶ï¼Œå¦‚æœæœ‰èƒ½åŠ›çš„åŒå­¦è‡ªå·±åšä¸ªappæ›´å¥½ã€‚</p>
<p>ç›®å‰å¾ˆå¤šäº‘å¹³å°å‚å•†éƒ½æ”¯æŒäº†å¯¹äºä¸ªäººå¼€å‘è€…çš„ç‰©è”ç½‘åº”ç”¨çš„éœ€æ±‚ï¼Œæˆ‘è§åˆ°ç”¨åˆ°æœ€å¤šçš„åŒ…æ‹¬é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€æœºæ™ºäº‘ã€OneNETç­‰ç­‰ã€‚è¿™äº›å¹³å°å¯¹å¯¹äºä¸ªäººå¼€å‘è€…è¿˜æ˜¯å¾ˆæœ‰å¥½çš„ï¼Œæœ‰ç€æ¯”è¾ƒå®Œå–„çš„æµç¨‹ã€‚æˆ‘ä¸ªäººä½¿ç”¨è¿‡æœºæ™ºäº‘å’ŒOneNETï¼Œå¯¹æ­¤åšå‡ºä»¥ä¸‹å»ºè®®ã€‚</p>
<ul>
<li>OneNETï¼šæ›´é€‚åˆå·²æœ‰å·¥ç¨‹æ–‡ä»¶ï¼Œåœ¨æ­¤åŸºç¡€ä¹‹ä¸Šè¿›è¡Œé€šä¿¡éƒ¨åˆ†çš„å¼€å‘ã€‚å…¶å¯¹äºæœ€ç»ˆçš„ç•Œé¢è®¾è®¡å¾ˆå¼€æ”¾ï¼Œå¯ä»¥è‡ªè¡Œè®¾è®¡å›¾æ ‡åŠæ˜¾ç¤ºæ–¹å¼ç­‰ï¼›</li>
<li>æœºæ™ºäº‘ï¼šé€‚åˆæ²¡æœ‰å·¥ç¨‹æ–‡ä»¶ï¼Œä»åˆšå¼€å§‹å°±é€‰æ‹©ä½¿ç”¨è¯¥ç‰©è”ç½‘äº‘å¹³å°ã€‚å¯ä»¥åœ¨å¹³å°ä¸Šç”Ÿæˆä»£ç åŒ…è¿›è¡Œå¼€å‘ï¼›</li>
</ul>
<h1 id="ç»“æœå±•ç¤º"><a href="#ç»“æœå±•ç¤º" class="headerlink" title="ç»“æœå±•ç¤º"></a>ç»“æœå±•ç¤º</h1><h2 id="å®ç‰©å›¾ä¸æ‰‹æœºç•Œé¢"><a href="#å®ç‰©å›¾ä¸æ‰‹æœºç•Œé¢" class="headerlink" title="å®ç‰©å›¾ä¸æ‰‹æœºç•Œé¢"></a>å®ç‰©å›¾ä¸æ‰‹æœºç•Œé¢</h2><p><img src="/images/item/smarthome-4.png"></p>
<h2 id="äº‘å¹³å°æ•°æ®å¯è§†åŒ–ç•Œé¢"><a href="#äº‘å¹³å°æ•°æ®å¯è§†åŒ–ç•Œé¢" class="headerlink" title="äº‘å¹³å°æ•°æ®å¯è§†åŒ–ç•Œé¢"></a>äº‘å¹³å°æ•°æ®å¯è§†åŒ–ç•Œé¢</h2><p><img src="/images/item/smarthome-5.png"></p>
<h2 id="äº‘å¹³å°æ§åˆ¶ç•Œé¢"><a href="#äº‘å¹³å°æ§åˆ¶ç•Œé¢" class="headerlink" title="äº‘å¹³å°æ§åˆ¶ç•Œé¢"></a>äº‘å¹³å°æ§åˆ¶ç•Œé¢</h2><p><img src="/images/item/smarthome-6.png"></p>
<h1 id="å®ç°åŠŸèƒ½åŠæ‰©å±•"><a href="#å®ç°åŠŸèƒ½åŠæ‰©å±•" class="headerlink" title="å®ç°åŠŸèƒ½åŠæ‰©å±•"></a>å®ç°åŠŸèƒ½åŠæ‰©å±•</h1><h2 id="å®ç°åŠŸèƒ½"><a href="#å®ç°åŠŸèƒ½" class="headerlink" title="å®ç°åŠŸèƒ½"></a>å®ç°åŠŸèƒ½</h2><ul>
<li><p>ç›‘æµ‹ï¼šç©ºæ°”ä¸­æ¸©åº¦ã€æ¹¿åº¦ã€å…‰ç…§å’Œç©ºæ°”è´¨é‡ç­‰ç¯å¢ƒå› ç´ ï¼›</p>
</li>
<li><p>æ§åˆ¶ï¼šæ¨¡æ‹Ÿçš„â€œå®¶å±…â€ï¼šé—¨ã€ç¯ã€çª—å¸˜ã€é£æ‰‡ï¼›</p>
</li>
<li><p>æ˜¾ç¤ºï¼šOLEDæ˜¾ç¤ºã€æ‰‹æœºæ˜¾ç¤ºã€ç”µè„‘æ˜¾ç¤ºï¼›</p>
</li>
<li><p>æ§åˆ¶æ–¹å¼ï¼šæŒ‰é”®æ§åˆ¶ã€æ‰‹æœºæ§åˆ¶ã€ç”µè„‘æ§åˆ¶ï¼›</p>
</li>
<li><p>æŠ¥è­¦ï¼šè®¾ç½®ç¯å¢ƒå› ç´ é˜ˆå€¼ï¼Œè¶…æ ‡å¼€å‘æ¿çš„ç¯äº®èµ·ï¼ˆå¯æ”¹æˆèœ‚é¸£å™¨ï¼‰</p>
</li>
<li><p>ä»¥ä¸Šæ‰€æœ‰ç¯å¢ƒåŠå®¶å…·çŠ¶æ€éƒ½å¯ä»¥å¯è§†åŒ–æ˜¾ç¤º</p>
</li>
</ul>
<h2 id="å¯æ‰©å±•åŠŸèƒ½"><a href="#å¯æ‰©å±•åŠŸèƒ½" class="headerlink" title="å¯æ‰©å±•åŠŸèƒ½"></a>å¯æ‰©å±•åŠŸèƒ½</h2><p>è¯¥ç³»ç»Ÿå…·æœ‰å¾ˆé«˜çš„æ‰©å±•æ€§ï¼Œåšå‡ºåŸºç¡€æ¨¡å‹ä¹‹åå¯ä»¥è¿›è¡ŒäºŒæ¬¡å¼€å‘ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å°†ç¡¬ä»¶èµ„æºåˆ†é…å¥½ã€‚</p>
<ul>
<li>è¯­éŸ³æ¨¡å—ã€‚è¯­éŸ³æ§åˆ¶æ™ºèƒ½å®¶å±…çš„çŠ¶æ€ã€‚</li>
<li>å®‰é˜²ç³»ç»Ÿã€‚æ·»åŠ æŒ‡çº¹ã€RFIDã€é¢éƒ¨è¯†åˆ«ç­‰å¼€é—¨æ–¹å¼ã€‚</li>
<li>å‘Šè­¦ç³»ç»Ÿã€‚ç›®å‰åªæ˜¯é‡åˆ°å‘Šè­¦å¹³å°è‡ªåŠ¨æé†’ï¼Œå¯ä»¥æ·»åŠ çŸ­ä¿¡é€šçŸ¥åŠŸèƒ½ã€‚</li>
<li>æ¨¡å¼é€‰æ‹©ã€‚å±…å®¶å¤šç§æ¨¡å¼è‡ªåŠ¨åˆ‡æ¢ï¼Œå¨±ä¹æ¨¡å¼ã€ä¼‘æ¯æ¨¡å¼ã€ç¦»å®¶æ¨¡å¼ç­‰ç­‰ï¼Œå®¶å…·å¯ä»¥å¯¹åº”ç€ä¸åŒçŠ¶æ€ã€‚</li>
<li>â€¦â€¦</li>
</ul>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æœ¬è®¾è®¡å¯¹äºæ™ºèƒ½å®¶å±…æ§åˆ¶ç³»ç»Ÿçš„æ¨¡æ‹Ÿä»ä¼ ç»Ÿåˆ°æ™ºèƒ½ã€ä»å‰ç«¯åˆ°åç«¯ï¼Œè¦†ç›–é¢ã€è¿˜åŸåº¦è¿˜æ˜¯æ¯”è¾ƒé«˜çš„ï¼›å…¶æ¬¡ï¼Œç³»ç»Ÿçš„å…¼å®¹æ€§å’Œå¯æ‰©å±•ç§»æ¤æ€§è¾ƒé«˜ï¼ŒåŸºäºæ­¤å¯ä»¥è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œå¯ä»¥æ‰©å±•çš„å†…å®¹æˆ‘åœ¨ä¸Šé¢ä¹Ÿæœ‰æ€»ç»“ã€‚æˆ‘è®¤ä¸ºç›¸å¯¹å®¹æ˜“ä¸Šæ‰‹çš„å°±æ˜¯å¯¹äºç›‘æµ‹åˆ°çš„æ•°æ®è¿›è¡Œè¿›ä¸€æ­¥åˆ†æåº”ç”¨ã€‚æœ€åå°±æ˜¯å…¶åº”ç”¨æ€§ï¼Œå½“è‡ªå·±è®¾è®¡å¥½ç”µæºæ¨¡å—å¯ä»¥ç‹¬ç«‹ä¾›ç”µåå°±å¯ä»¥ç›´æ¥åº”ç”¨åˆ°ç”Ÿæ´»ä¸­ï¼Œå³ä½¿ä¸åšæ¯•è®¾diyä¸€ä¸ªç¯å¢ƒç›‘æµ‹çš„ç³»ç»Ÿä¹Ÿæ˜¯ä¸é”™çš„ã€‚æ•´ä½“æ¥è¯´ï¼Œæœ¬è®¾è®¡å®ç°çš„åŠŸèƒ½æ˜¯ï¼šå››æµ‹ä¸‰æ˜¾ä¸¤æ§ä¸€å¹³å°ï¼ŒåŸºæœ¬å®ç°äº†æ™ºèƒ½å®¶å±…æ¨¡æ‹Ÿçš„åŸºæœ¬çš„è¦æ±‚ã€‚åŒæ ·è¯¥é¡¹ç›®è¿˜å¯ä»¥åº”ç”¨åˆ°ç¯å¢ƒç›‘æµ‹ç­‰æ–¹é¢çš„ï¼Œä½†æ˜¯å…¶ä¾§é‡ç‚¹æ›´è¦åå‘æ•°æ®çš„åˆ†æå’Œå¤„ç†ã€‚</p>
<p>è¡Œæ–‡è‡³æ­¤å°±ç»“æŸå•¦ï¼Œå¦‚æœæœ‰ä¸è¶³ä¹‹å¤„æˆ–è€…æ›´å¥½çš„æƒ³æ³•å¯ä»¥ä¸€èµ·äº¤æµ ~</p>
]]></content>
      <categories>
        <category>Item</category>
      </categories>
      <tags>
        <tag>æ¯•ä¸šè®¾è®¡</tag>
      </tags>
  </entry>
  <entry>
    <title>sqlite</title>
    <url>/2023/04/11/third-party/sqlite3/</url>
    <content><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><blockquote>
<p>sqliteä¸­æ–‡ç½‘ç«™ï¼š<a href="https://www.sqlite.net.cn/">https://www.sqlite.net.cn/</a></p>
</blockquote>
<p>SQLiteæ˜¯ä¸€ç§Cè¯­è¨€åº“ï¼Œå®ƒå®ç°äº†ä¸€ä¸ª&nbsp;å°å‹ã€å¿«é€Ÿã€è‡ªåŒ…å«ã€é«˜å¯é æ€§ï¼Œ&nbsp;åŠŸèƒ½é½å…¨çš„SQLæ•°æ®åº“å¼•æ“ã€‚SQLiteæ˜¯ä¸–ç•Œä¸Šæœ€å¸¸ç”¨çš„æ•°æ®åº“å¼•æ“ï¼Œå¹¿æ³›åº”ç”¨äºåµŒå…¥å¼é¢†åŸŸã€‚</p>
<p>ä¸å¤§å¤šæ•°å…¶ä»–SQLæ•°æ®åº“ä¸åŒï¼ŒSQLiteæ²¡æœ‰å•ç‹¬çš„æœåŠ¡å™¨è¿›ç¨‹ã€‚SQLiteç›´æ¥è¯»å–å’Œå†™å…¥æ™®é€šç£ç›˜æ–‡ä»¶ã€‚å…·æœ‰å¤šä¸ªè¡¨ï¼Œç´¢å¼•ï¼Œè§¦å‘å™¨å’Œè§†å›¾çš„å®Œæ•´SQLæ•°æ®åº“åŒ…å«åœ¨å•ä¸ªç£ç›˜æ–‡ä»¶ä¸­ã€‚</p>
<h1 id="Shellå‘½ä»¤"><a href="#Shellå‘½ä»¤" class="headerlink" title="Shellå‘½ä»¤"></a>Shellå‘½ä»¤</h1><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºæ•°æ®åº“</span></span><br><span class="line"># sqlite3 test.db</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢æ•°æ®åº“</span></span><br><span class="line"># .database</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºè¡¨æ ¼</span></span><br><span class="line"># CREATE TABLE <span class="title function_">user</span><span class="params">(Id integer PRIMARY KEY, name text)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥è¯¢è¡¨æ ¼</span></span><br><span class="line"># .tables</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ’å…¥æ•°æ®</span></span><br><span class="line">#  INSERT INTO user <span class="title function_">VALUES</span><span class="params">(<span class="number">1</span>, <span class="string">'å°å¼ '</span>)</span>;</span><br><span class="line">#  INSERT INTO user <span class="title function_">VALUES</span><span class="params">(<span class="number">2</span>, <span class="string">'å°é™ˆ'</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢æ•°æ®(ä¸€å®šè¦æœ‰åˆ†å·)</span></span><br><span class="line"><span class="meta"># select * from user;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é€€å‡ºå‘½ä»¤è¡Œç¯å¢ƒ</span></span><br><span class="line"># .quit / .<span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜¾ç¤ºæ•°æ®åº“ç»“æ„</span></span><br><span class="line"># .schema</span><br></pre></td></tr></tbody></table></figure>

<h1 id="çº¦æŸ"><a href="#çº¦æŸ" class="headerlink" title="çº¦æŸ"></a>çº¦æŸ</h1><p>çº¦æŸå°±æ˜¯ç”¨æ¥è¿›ä¸€æ­¥æè¿°æ¯ä¸€åˆ—æ•°æ®å±æ€§çš„ã€‚</p>
<h2 id="éç©º-NOT-NULL"><a href="#éç©º-NOT-NULL" class="headerlink" title="éç©º NOT NULL"></a>éç©º NOT NULL</h2><p>æœ‰ä¸€äº›å­—æ®µæˆ‘ä»¬å¯èƒ½ä¸€æ—¶ä¸çŸ¥åˆ°è¯¥å¡«äº›ä»€ä¹ˆï¼ŒåŒæ—¶å®ƒä¹Ÿæ²¡è®¾å®šé»˜è®¤å€¼ï¼Œ å½“æ·»åŠ æ•°æ®æ—¶ï¼Œæˆ‘ä»¬æŠŠè¿™æ ·çš„å­—æ®µç©ºç€ä¸å¡«ï¼Œç³»ç»Ÿè®¤ä¸ºä»–æ˜¯ NULL å€¼ã€‚ä½†æ˜¯è¿˜æœ‰å¦å¤–ä¸€ç±»å­—æ®µï¼Œå¿…é¡»è¢«å¡«ä¸Šæ•°æ®ï¼Œå¦‚æœä¸å¡«ï¼Œç³»ç»Ÿå°±ä¼šæŠ¥é”™ã€‚ è¿™æ ·çš„å­—æ®µè¢«ç§°ä¸º NOT NULL éç©ºå­—æ®µ,éœ€è¦åœ¨å®šä¹‰è¡¨çš„æ—¶å€™äº‹å…ˆå£°æ˜ã€‚</p>
<h2 id="å”¯ä¸€-UNIQUE"><a href="#å”¯ä¸€-UNIQUE" class="headerlink" title="å”¯ä¸€ UNIQUE"></a>å”¯ä¸€ UNIQUE</h2><p>é™¤äº†ä¸»åˆ—ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€äº›åˆ—ä¹Ÿä¸èƒ½æœ‰é‡å¤å€¼ã€‚</p>
<h2 id="ä¸»é”®-PRIMARY-KEY"><a href="#ä¸»é”®-PRIMARY-KEY" class="headerlink" title="ä¸»é”® PRIMARY KEY"></a>ä¸»é”® PRIMARY KEY</h2><p>ä¸€èˆ¬æ˜¯æ•´æ•°æˆ–è€…å­—ç¬¦ä¸²ï¼Œåªè¦ä¿è¯å”¯ä¸€å°±è¡Œã€‚ åœ¨ SQLite ä¸­ï¼Œä¸»é”®å¦‚æœæ˜¯æ•´æ•°ç±»å‹ï¼Œè¯¥åˆ—çš„å€¼å¯ä»¥è‡ªåŠ¨å¢é•¿ã€‚</p>
<h2 id="å¤–é”®-FOREIGN-KEY"><a href="#å¤–é”®-FOREIGN-KEY" class="headerlink" title="å¤–é”® FOREIGN KEY"></a>å¤–é”® FOREIGN KEY</h2><p>æˆ‘ä»¬çš„æ•°æ®åº“ä¸­å·²ç»æœ‰ Teachers è¡¨äº†ï¼Œå‡å¦‚æˆ‘ä»¬å†å»ºç«‹ä¸€ä¸ª Students è¡¨ï¼Œ è¦æ±‚ Students è¡¨ä¸­çš„æ¯ä¸€ä¸ªå­¦ç”Ÿéƒ½å¯¹åº”ä¸€ä¸ª Teachers è¡¨ä¸­çš„æ•™å¸ˆã€‚ å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨ Students è¡¨ä¸­å»ºç«‹ä¸€ä¸ª TeacherId å­—æ®µï¼Œä¿å­˜å¯¹åº”æ•™å¸ˆçš„ Id å·ï¼Œ è¿™æ ·ï¼Œå­¦ç”Ÿå’Œæ•™å¸ˆä¹‹é—´å°±å»ºç«‹äº†å…³ç³»ã€‚ é—®é¢˜æ˜¯ï¼šæˆ‘ä»¬æœ‰å¯èƒ½ç»™å­¦ç”Ÿå­˜å…¥ä¸€ä¸ªä¸åœ¨ Teachers è¡¨ä¸­çš„ TeacherId å€¼ï¼Œ è€Œä¸”å‘ç°ä¸äº†è¿™ä¸ªé”™è¯¯ã€‚ è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥æŠŠ Students è¡¨ä¸­ TeacherId å­—æ®µå£°æ˜ä¸ºä¸€ä¸ªå¤–é”®ï¼Œ è®©å®ƒçš„å€¼å¯¹åº”åˆ° Teachers è¡¨ä¸­çš„ Id å­—æ®µä¸Šã€‚ è¿™æ ·ï¼Œä¸€æ—¦åœ¨ Students è¡¨ä¸­å­˜å…¥ä¸€ä¸ªä¸å­˜åœ¨çš„æ•™å¸ˆ Id ï¼Œç³»ç»Ÿå°±ä¼šæŠ¥é”™ã€‚</p>
<h2 id="é»˜è®¤å€¼-DEFAULT"><a href="#é»˜è®¤å€¼-DEFAULT" class="headerlink" title="é»˜è®¤å€¼ DEFAULT"></a>é»˜è®¤å€¼ DEFAULT</h2><p>æœ‰ä¸€äº›ç‰¹åˆ«çš„å­—æ®µåˆ—ï¼Œåœ¨æ¯ä¸€æ¡è®°å½•ä¸­ï¼Œä»–çš„å€¼åŸºæœ¬ä¸Šéƒ½æ˜¯ä¸€æ ·çš„ã€‚åªæ˜¯åœ¨ä¸ªåˆ«æƒ…å†µä¸‹æ‰æ”¹ä¸ºåˆ«çš„å€¼ï¼Œè¿™æ ·çš„å­—æ®µåˆ—æˆ‘ä»¬å¯ä»¥ç»™ä»–è®¾ä¸€ä¸ªé»˜è®¤å€¼ã€‚</p>
<h2 id="æ¡ä»¶æ£€æŸ¥-CHECK"><a href="#æ¡ä»¶æ£€æŸ¥-CHECK" class="headerlink" title="æ¡ä»¶æ£€æŸ¥ CHECK"></a>æ¡ä»¶æ£€æŸ¥ CHECK</h2><p>æŸäº›å€¼å¿…é¡»ç¬¦åˆä¸€å®šçš„æ¡ä»¶æ‰å…è®¸å­˜å…¥ï¼Œè¿™æ˜¯å°±éœ€è¦ç”¨åˆ°è¿™ä¸ª CHECK çº¦æŸã€‚</p>
<h1 id="VFSåœ¨linuxä¸‹æ¶æ„å›¾"><a href="#VFSåœ¨linuxä¸‹æ¶æ„å›¾" class="headerlink" title="VFSåœ¨linuxä¸‹æ¶æ„å›¾"></a>VFSåœ¨linuxä¸‹æ¶æ„å›¾</h1><p>Linuxç³»ç»Ÿçš„Userä½¿ç”¨GLIBCï¼ˆPOSIXæ ‡å‡†ã€GUN Cè¿è¡Œæ—¶åº“ï¼‰ä½œä¸ºåº”ç”¨ç¨‹åºçš„è¿è¡Œæ—¶åº“ï¼Œç„¶åé€šè¿‡æ“ä½œç³»ç»Ÿï¼Œå°†å…¶è½¬æ¢ä¸ºç³»ç»Ÿè°ƒç”¨SCIï¼ˆsystem-call interfaceï¼‰ï¼ŒSCIæ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸å®šä¹‰çš„ç³»ç»Ÿè°ƒç”¨æ¥å£ï¼Œè¿™å±‚æŠ½è±¡å…è®¸ç”¨æˆ·ç¨‹åºçš„I/Oæ“ä½œè½¬æ¢ä¸ºå†…æ ¸çš„æ¥å£è°ƒç”¨ã€‚VFSæä¾›äº†ä¸€ä¸ªæŠ½è±¡å±‚ï¼Œå°†POSIX APIæ¥å£ä¸ä¸åŒå­˜å‚¨è®¾å¤‡çš„å…·ä½“æ¥å£å®ç°è¿›è¡Œäº†åˆ†ç¦»ï¼Œä½¿å¾—åº•å±‚çš„æ–‡ä»¶ç³»ç»Ÿç±»å‹ã€è®¾å¤‡ç±»å‹å¯¹ä¸Šå±‚åº”ç”¨ç¨‹åºé€æ˜ã€‚</p>
<p><img src="/images/third-party/sqlite.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h1 id="sqlite3-vfs"><a href="#sqlite3-vfs" class="headerlink" title="sqlite3 vfs"></a>sqlite3 vfs</h1><p>APIï¼š<a href="https://www.sqlite.net.cn/cintro.html">https://www.sqlite.net.cn/cintro.html</a></p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// æ³¨å†Œä¸€ä¸ªVFSç³»ç»Ÿï¼Œæ”¯æŒå¤šä¸ªåˆ›å»ºé€šè¿‡ç¬¬äºŒä¸ªå‚æ•°ä½¿èƒ½</span></span><br><span class="line"># sqlite3_vfs_register(sqlite3_vfs *pVfs, <span class="type">int</span> makeDflt)</span><br><span class="line"><span class="comment">// ä½¿ç”¨demo vfsæ›¿æ¢é»˜è®¤çš„vfs</span></span><br><span class="line"># sqlite3_open_v2(<span class="string">"demo.db"</span>, &amp;db, SQLITE_OPEN_READWRITE, <span class="string">"demo"</span>);</span><br></pre></td></tr></tbody></table></figure>



<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://blog.51cto.com/u_15169172/2710683">ä¸€æ–‡ææ‡‚åµŒå…¥å¼æ•°æ®åº“sqlite3</a></p>
]]></content>
      <categories>
        <category>Third Party</category>
      </categories>
      <tags>
        <tag>sqlite</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”µæ± ç”µé‡æ£€æµ‹</title>
    <url>/2023/03/06/work-expericence/%E7%94%B5%E6%B1%A0%E7%94%B5%E9%87%8F%E6%A3%80%E6%B5%8B/</url>
    <content><![CDATA[<p>è¿‘æœŸåœ¨åšå…³äºç”µæ± ç”µé‡æ£€æµ‹çš„å·¥ä½œï¼Œè€Œç¡¬ä»¶ç”µè·¯å¹¶æ²¡æœ‰ä½¿ç”¨åº“ä»‘è®¡ï¼ˆåœ¨éƒ¨åˆ†åµŒå…¥å¼åœºæ™¯ä¸‹æˆæœ¬å¤ªé«˜ï¼‰ï¼Œè€Œæ˜¯ä½¿ç”¨åˆ†å‹ç”µè·¯ADCé‡‡æ ·ã€‚åŸºäºæ­¤å¯¹ç›¸å…³å­¦ä¹ åˆ°çš„å†…å®¹åšæ€»ç»“å’Œåˆ†äº«</p>
<h1 id="éš¾ç‚¹"><a href="#éš¾ç‚¹" class="headerlink" title="éš¾ç‚¹"></a>éš¾ç‚¹</h1><ul>
<li>é”‚ç”µæ± çš„æ”¾ç”µéçº¿æ€§ï¼›</li>
<li>å……æ”¾ç”µç¬é—´ï¼Œç”µå‹å€¼æ˜¯çªå˜çš„</li>
<li>é”‚ç”µæ± éšç€ä½¿ç”¨ç”µé‡å‡å°‘ï¼Œéœ€è¦å®ç°è‡ªåŠ¨æ ¡å‡†</li>
<li>â€¦â€¦</li>
</ul>
<h1 id="å……ç”µICåŸºç¡€åŸç†"><a href="#å……ç”µICåŸºç¡€åŸç†" class="headerlink" title="å……ç”µICåŸºç¡€åŸç†"></a>å……ç”µICåŸºç¡€åŸç†</h1><h2 id="ICå……ç”µé˜¶æ®µ"><a href="#ICå……ç”µé˜¶æ®µ" class="headerlink" title="ICå……ç”µé˜¶æ®µ"></a>ICå……ç”µé˜¶æ®µ</h2><ul>
<li><p>æ¶“æµå……ç”µï¼ˆTrickle Chargeï¼‰</p>
<p>æ¶“æµå……ç”µé˜¶æ®µé€šå¸¸åªåœ¨ç”µæ± ç”µå‹ä½äºä¸€ä¸ªæä½æ°´å¹³æ—¶é‡‡ç”¨ã€‚</p>
<p>åœ¨è¿™ç§çŠ¶æ€ä¸‹ï¼Œç”µæ± ç»„çš„å†…éƒ¨ä¿æŠ¤ IC å¯èƒ½ç”±äºæ·±åº¦æ”¾ç”µæˆ–å‘ç”Ÿè¿‡æµäº‹ä»¶å·²ç»æ–­å¼€äº†ç”µæ± ã€‚å……ç”µå™¨ IC æä¾›ä¸€ä¸ªå°ç”µæµï¼ˆé€šå¸¸ä¸º 50mAï¼‰ä¸ºç”µæ± ç»„çš„ç”µå®¹å……ç”µï¼Œä»¥è§¦å‘ä¿æŠ¤ IC ï¼Œåˆä¸Šå…¶ FETé‡æ–°è¿æ¥ç”µæ± ã€‚è™½ç„¶æ¶“æµå……ç”µé€šå¸¸åªæŒç»­å‡ ç§’é’Ÿï¼Œä½†å……ç”µå™¨ IC ä»ç„¶éœ€è¦é›†æˆä¸€ä¸ªå®šæ—¶å™¨ã€‚å¦‚æœç”µæ± ç»„åœ¨ä¸€å®šæ—¶é—´å†…æœªé‡æ–°è¿æ¥ï¼Œåˆ™å®šæ—¶å™¨åœæ­¢å……ç”µï¼Œå› ä¸ºè¿™è¡¨æ˜ç”µæ± å·²æŸåã€‚</p>
</li>
<li><p>é¢„å……ç”µï¼ˆPreChargeï¼‰</p>
<p>ä¸€æ—¦ç”µæ± ç»„é‡æ–°è¿æ¥æˆ–å¤„äºæ”¾ç”µçŠ¶æ€ï¼Œå°±è¿›å…¥é¢„å……ç”µé˜¶æ®µã€‚</p>
<p>é¢„å……ç”µæœŸé—´ï¼Œå……ç”µICå¼€å§‹ä»¥ä¸€ä¸ªè¾ƒä½çš„ç”µæµæ°´å¹³ä¸ºè€—å°½çš„ç”µæ± å®‰å…¨å……ç”µï¼Œè¯¥ç”µæµé€šå¸¸ä¸º C / 10ï¼ˆC ä¸ºå®¹é‡ï¼Œä»¥ mAh ä¸ºå•ä½ï¼‰ã€‚é¢„å……ç”µä½¿ç”µæ± ç”µå‹ç¼“æ…¢ä¸Šå‡ã€‚å…¶ç›®çš„æ˜¯åœ¨ä½ç”µæµæ°´å¹³ä¸‹å¯¹ç”µæ± è¿›è¡Œå®‰å…¨çš„å……ç”µï¼Œä»¥é˜²æ­¢æŸåç”µæ± ï¼Œç›´åˆ°å…¶ç”µå‹è¾¾åˆ°ä¸€ä¸ªè¾ƒé«˜çš„æ°´å¹³ã€‚</p>
</li>
<li><p>æ’æµå……ç”µï¼ˆConstant Current Chargeï¼‰</p>
<p>æ’æµï¼ˆCCï¼‰å……ç”µä¹Ÿè¢«ç§°ä½œå¿«é€Ÿå……ç”µé˜¶æ®µï¼Œæ’æµå……ç”µåœ¨é¢„å……ç”µä¹‹åå¼€å§‹ã€‚</p>
<p>åœ¨æ’æµå……ç”µé˜¶æ®µï¼Œç”µæ± å¯ä»¥å®‰å…¨åœ°å¤„ç† 0.5C è‡³3C ä¹‹é—´çš„è¾ƒé«˜å……ç”µç”µæµã€‚æ’æµå……ç”µä¼šæŒç»­åˆ°ç”µæ± ç”µå‹è¾¾åˆ°â€œæ»¡ç”µâ€æˆ–æµ®åŠ¨ç”µå‹æ°´å¹³ï¼Œç„¶åè¿›å…¥æ’å‹å……ç”µé˜¶æ®µã€‚</p>
</li>
<li><p>æ’å‹å……ç”µï¼ˆConstant voltage Chargeï¼‰</p>
<p>å……ç”µå™¨ IC ä¼šåœ¨æ’æµå……ç”µæœŸé—´ç›‘æµ‹ç”µæ± ç”µå‹ã€‚ä¸€æ—¦ç”µæ± è¾¾åˆ°æ’å‹å……ç”µé˜ˆå€¼ï¼Œå……ç”µå™¨ICå°±ä¼šä»æ’æµè½¬æ¢è‡³æ’å‹è°ƒèŠ‚é˜¶æ®µã€‚å½“å……ç”µå™¨ IC ç›‘æµ‹åˆ°å¤–éƒ¨ç”µæ± ç»„ç”µå‹è¶…è¿‡äº†ç”µæ± ç»„ä¸­çš„å®é™…ç”µæ± ç”µå‹ï¼Œå°±å¼€å§‹æ‰§è¡Œæ’å‹å……ç”µã€‚è¿™æ˜¯ç”±äºå­˜åœ¨å†…éƒ¨ç”µæ± ç”µé˜»ã€PCB ç”µé˜»å’Œæ¥è‡ªä¿æŠ¤ FET å’Œå•ç”µæ± çš„ç­‰æ•ˆä¸²è”ç”µé˜» (ESR)ã€‚å……ç”µå™¨ IC ä¸åº”å…è®¸ç”µæ± ç”µå‹è¶…è¿‡å…¶æœ€å¤§æµ®åŠ¨ç”µå‹ï¼Œä»¥ä¿è¯å®‰å…¨çš„è¿è¡Œã€‚</p>
</li>
<li><p>æˆªæ­¢é˜¶æ®µ</p>
<p>å¯¹äºæµ®å……å‹å……ç”µèŠ¯ç‰‡ï¼Œå½“è¾¾åˆ°æµ®å……é˜ˆå€¼ï¼Œè¾“å‡ºæ’å®šç”µå‹</p>
<p>å¯¹äºå…³æ–­å‹å……ç”µèŠ¯ç‰‡ï¼Œå½“å……ç”µå……æ»¡ï¼ŒèŠ¯ç‰‡å¤„äºå…³æ–­å¾…æœºçŠ¶æ€ï¼Œæ— å……ç”µç”µæµ</p>
</li>
</ul>
<h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><ol>
<li>å¯¹äºICå„ä¸ªå……ç”µé˜¶æ®µéœ€è¦å‚è€ƒICçš„æ‰‹å†Œæœ€ç»ˆç¡®å®šæœ‰å“ªäº›é˜¶æ®µï¼Œæœ‰äº›å°†æ¶“æµå……ç”µå’Œé¢„å……ç”µåˆæˆä¸€ä¸ªé˜¶æ®µå¤„ç†ï¼Œæ‰€ä»¥éœ€è¦å…·ä½“åˆ†æã€‚</li>
<li>æœ‰äº›å……ç”µICæä¾›äº†å¯ç¼–ç¨‹é…ç½®é˜ˆå€¼çš„åŠŸèƒ½ï¼Œå³é€šè¿‡è¿æ¥ä¸åŒçš„é˜»å€¼æ¥å¯¹å…¶è¿›è¡Œè®¾ç½®ï¼Œå¦‚æœæ²¡æœ‰éœ€è¦å‚è€ƒæ‰‹å†Œç¡®å®šæ¯ä¸ªé˜¶æ®µçš„é˜ˆå€¼åˆ†åˆ«æ˜¯å¤šå°‘ã€‚é…ç½®çš„é˜ˆå€¼èƒ½å¤Ÿæä¾›ä¸€å±‚é¢å¤–çš„å®‰å…¨ä¿æŠ¤ï¼Œä¿æŠ¤ç”µæ± å…å—è¿‡å‹ã€è¿‡çƒ­æ¡ä»¶ä»¥åŠè¿‡è½½çš„å½±å“ï¼Œä»è€Œé¿å…ç”µæ± çš„æ°¸ä¹…æŸåæˆ–å®¹é‡é™çº§ã€‚</li>
</ol>
<h1 id="æµç¨‹æ•´ç†"><a href="#æµç¨‹æ•´ç†" class="headerlink" title="æµç¨‹æ•´ç†"></a>æµç¨‹æ•´ç†</h1><ol>
<li><p>é…ç½® ADC</p>
<p>ä¸­æ–­æ¨¡å¼ã€è®¾ç½®é‡å¤é‡‡æ ·æ—¶é—´ã€è®¾ç½®é‡‡æ ·æ¬¡æ•°</p>
<ul>
<li>Vadc = adcNumer(ADCé‡‡æ ·æ•°æ®) x Vrefï¼ˆADCåŸºå‡†ç”µå‹ï¼‰/  ï¼ˆ2^ADCé‡åŒ–ä½æ•°ï¼‰</li>
<li>Vbat = kï¼ˆç”µé˜»åˆ†å‹ç³»æ•°æ¯”ï¼‰ Ã—  Vadc</li>
</ul>
</li>
<li><p>é…ç½® Timer</p>
<p>é…ç½®ADCé‡‡æ ·çš„æ—¶é—´å³å¤šä¹…è¿›è¡Œä¸€æ¬¡ç”µæ± ç”µé‡æ£€æµ‹</p>
</li>
<li><p>å¯åŠ¨ç”µæ± ç”µé‡æ£€æµ‹ä¸»çº¿ç¨‹</p>
</li>
<li><p>ç­‰å¾…USBæ’æ‹”äº‹ä»¶ä¸­æ–­æˆ–è€…Timeræ—¶é—´è§¦å‘ç”µæ± æ£€æµ‹</p>
<ul>
<li>æ‰“å¼€ADCé‡‡æ ·é€šé“</li>
<li>è·å–ADCæ•°æ®</li>
<li>å…³é—­ADCé‡‡æ ·é€šé“</li>
<li>è®¡ç®—æœ€ç»ˆè¾“å‡ºçš„ç”µæ± ç”µé‡</li>
</ul>
</li>
</ol>
<h1 id="ä¼ªä»£ç "><a href="#ä¼ªä»£ç " class="headerlink" title="ä¼ªä»£ç "></a>ä¼ªä»£ç </h1><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/************************************   ADC    *******************************/</span></span><br><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">adc_interrupt_cb</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">{</span><br><span class="line">    <span class="comment">// calculate adc voltage</span></span><br><span class="line">    <span class="comment">// æ ¡å‡†ï¼šé‡‡é›†å¤šæ¬¡å»æ‰ä¸€ä¸ªæœ€å°å€¼ã€å»æ‰ä¸€ä¸ªæœ€å¤§å€¼ï¼Œå–å¹³å‡å€¼</span></span><br><span class="line">}</span><br><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">adc_init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">{</span><br><span class="line">    <span class="comment">// config adc interrupt mode and callback</span></span><br><span class="line">    <span class="comment">// config adc sampling times</span></span><br><span class="line">    <span class="comment">// enable adc channels</span></span><br><span class="line">}</span><br><span class="line"><span class="comment">/************************************   USB    *******************************/</span></span><br><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">usb_interrupt_callback</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">{</span><br><span class="line">    <span class="comment">// get usb charging / discharging state</span></span><br><span class="line">    <span class="comment">// put battery detect time to default</span></span><br><span class="line">    <span class="comment">// enable adc sampling(enter adc_interrupt_cb)</span></span><br><span class="line">}   </span><br><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">usb_init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">{</span><br><span class="line">    <span class="comment">// request drv_bus gpio</span></span><br><span class="line">    <span class="comment">// config  drv_bus interrupt and trigger mode</span></span><br><span class="line">    <span class="comment">// config  interrupt callback</span></span><br><span class="line">}</span><br><span class="line"><span class="comment">/***********************************    TIMER     ***************************/</span></span><br><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">timer_interrupt_cb</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">{</span><br><span class="line">    <span class="comment">// enable adc sampling(enter adc_interrupt_cb)</span></span><br><span class="line">}</span><br><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">timer_init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">{</span><br><span class="line">    <span class="comment">// config timer</span></span><br><span class="line">    <span class="comment">// config default battery detect time to timer</span></span><br><span class="line">    <span class="comment">// config timer interrupt callback</span></span><br><span class="line">}</span><br><span class="line"><span class="comment">/***********************************   BATTERY    ***************************/</span></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">get_battery_voltage</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">{</span><br><span class="line">    <span class="comment">// enable channels</span></span><br><span class="line">    <span class="comment">// get battery voltage</span></span><br><span class="line">    <span class="comment">// disable channels</span></span><br><span class="line">}</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">adjust_battery_voltage</span><span class="params">(<span class="type">int</span> vbat)</span></span><br><span class="line">{</span><br><span class="line">    <span class="comment">// record pre_percent pre_voltage</span></span><br><span class="line">    <span class="comment">// record voltage and timestamp, calculate new battery detect time</span></span><br><span class="line">    <span class="comment">// other optimize ways</span></span><br><span class="line">}</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">calculate_battery_percent</span><span class="params">(<span class="type">int</span> vbat)</span></span><br><span class="line">{</span><br><span class="line">    <span class="comment">// éœ€è¦å‚å®¶æä¾›ç”µæ± å……æ”¾ç”µç”µæ± å®¹é‡ç™¾åˆ†æ¯”å¯¹åº”çš„ç”µå‹</span></span><br><span class="line">    <span class="comment">// æŸ¥è¡¨===&gt;è®¡ç®—å‡ºç™¾åˆ†æ¯”</span></span><br><span class="line">    <span class="comment">// ç­–ç•¥ï¼š</span></span><br><span class="line">    <span class="comment">//   æœ€ç»ˆçš„ç™¾åˆ†æ¯”ç›¸è¾ƒäºä¸Šä¸€æ¬¡æ˜¯å¦æœ‰è·³å˜ï¼Œ+-1ï¼›</span></span><br><span class="line">    <span class="comment">//   å……ç”µç™¾åˆ†æ¯”å‡å°‘ï¼Œæ”¾ç”µç™¾åˆ†æ¯”å¢åŠ ã€‚ä¸è¢«å…è®¸ï¼Œéœ€è¦å¯¹è¿™ä¸¤ç§æƒ…å†µå¤„ç†æ‰</span></span><br><span class="line">}</span><br><span class="line"><span class="comment">//ç”µæ± ç”µé‡æ£€æµ‹å‡½æ•°å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">battery_detect_thread</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">{</span><br><span class="line">    adc_init();</span><br><span class="line">    usb_init();</span><br><span class="line">    timer_init();</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>) {</span><br><span class="line">        <span class="comment">// calculate battery percent</span></span><br><span class="line">        <span class="type">int</span> vbat = get_battery_voltage();</span><br><span class="line">        vbat = adjust_battery_voltage(vbat);</span><br><span class="line">        <span class="type">int</span> percent = calculate_battery_percent(vbat);</span><br><span class="line">    }</span><br><span class="line">    adc_deinit();</span><br><span class="line">    usb_deinit();</span><br><span class="line">    timer_deinit();</span><br><span class="line">}   </span><br></pre></td></tr></tbody></table></figure>

<h1 id="è¯¯å·®æ¥æº"><a href="#è¯¯å·®æ¥æº" class="headerlink" title="è¯¯å·®æ¥æº"></a>è¯¯å·®æ¥æº</h1><ol>
<li>ADCé‡åŒ–è¯¯å·®</li>
<li>åˆ†å‹ç”µé˜»å€¼ä¸å‡†ç¡®ï¼Œå¯¼è‡´åˆ†å‹æ¯”ä¸ç¡®å®šå¸¦æ¥çš„è¯¯å·®</li>
<li>OCVè¡¨æ ¼å†…è®°å½•çš„æ˜¯é˜¶æ®µæ€§çš„ç”µå‹ä¸å®¹é‡æ¯”ï¼Œæ¯ä¸€æ ¼å®é™…ä¸Šä¸æ˜¯çº¿æ€§å˜åŒ–çš„ï¼Œä½†åœ¨å®é™…å¤„ç†è¿‡ç¨‹ä¸­æŒ‰ç…§çº¿æ€§æ¥å¤„ç†</li>
</ol>
<h1 id="æ ¡å‡†è¯¯å·®åŠä¼˜åŒ–ç­–ç•¥"><a href="#æ ¡å‡†è¯¯å·®åŠä¼˜åŒ–ç­–ç•¥" class="headerlink" title="æ ¡å‡†è¯¯å·®åŠä¼˜åŒ–ç­–ç•¥"></a>æ ¡å‡†è¯¯å·®åŠä¼˜åŒ–ç­–ç•¥</h1><ol>
<li><p>ADCé‡‡æ ·</p>
<p>å¹³å‡å€¼æ»¤æ³¢ã€‚å–åæ¬¡adcæ•°æ®ï¼Œå»æ‰æœ€å¤§å€¼ã€æœ€å°å€¼å–å¹³å‡å€¼</p>
</li>
<li><p>æ’å…¥usb / æ‹”å‡ºusbç¬é—´è§¦å‘ç”µæ± æ£€æµ‹</p>
</li>
<li><p>è®°å½•æœ€è¿‘åæ¬¡é‡‡æ ·çš„ç»“æœåŠsysTimeï¼Œè®¡ç®—æ‰ç”µæˆ–ä¸Šç”µ1%å®¹é‡æ‰€æ¶ˆè€—çš„æ—¶é—´ï¼Œä»è€Œå¯ä»¥è®¡ç®—å‡ºä¸‹ä¸€æ¬¡æ£€æµ‹çš„æ—¶é—´é—´éš”</p>
</li>
<li><p>åœ¨æœ€ç»ˆç”µæ± ç”µé‡çš„æ˜¾ç¤ºä¸Šï¼Œéœ€è¦é€æ­¥é€’å¢é€¼è¿‘é‡‡é›†çš„å€¼ä¸èƒ½çªå˜</p>
</li>
<li><p>æ ¡å‡†ï¼šæ ¹æ®ä¸€ä¸ªç¡®å®šçŠ¶æ€ä¸‹ï¼Œç¡®å®šçš„ç”µå‹å€¼å’Œæˆ‘ä»¬é‡‡é›†åˆ°çš„ç”µå‹å€¼ï¼Œè®¡ç®—å‡ºåå·®ï¼Œæ ¡å‡†</p>
</li>
</ol>
<h1 id="ç¼©å†™è¡¨"><a href="#ç¼©å†™è¡¨" class="headerlink" title="ç¼©å†™è¡¨"></a>ç¼©å†™è¡¨</h1><ul>
<li><p>OCVï¼šOpen Circuitt Voltage  å¼€è·¯ç”µå‹</p>
</li>
<li><p>CVï¼šCyclic Voltammetry å¾ªç¯ä¼å®‰æ³•ï¼ˆæ”¹å˜ç”µä½ä»¥å¾—åˆ°æ°§åŒ–è¿˜åŸç”µæµæ–¹å‘ä¹‹æ–¹æ³•ï¼‰</p>
</li>
<li><p>UVLOï¼šUnder Voltage Lock Out æ¬ å‹é”å®šï¼ˆè¾“å…¥ç”µå‹ä½äºæŸä¸€å€¼æ—¶ï¼Œç”µæºèŠ¯ç‰‡ä¸å·¥ä½œï¼Œå¤„äºä¿æŠ¤çŠ¶æ€ï¼‰</p>
</li>
<li><p>OVPï¼šOver Voltage Protection  è¿‡å‹ä¿æŠ¤</p>
</li>
<li><p>UVPï¼šUnder voltage Protection  æ¬ å‹ä¿æŠ¤</p>
</li>
<li><p>ASOCï¼šAbsolute State-Of-Charge  ç»å¯¹ç”µè·çŠ¶æ€ ï¼ˆç»å¯¹è·ç”µçŠ¶æ€åˆ™æ˜¯ä¸€ä¸ªå½“ç”µæ± åˆ¶é€ å®Œæˆæ—¶ï¼Œæ ¹æ®æ‰€è®¾è®¡çš„å›ºå®šå®¹é‡å€¼æ‰€è®¡ç®—å‡ºæ¥çš„çš„å‚è€ƒå€¼ï¼‰</p>
</li>
<li><p>RSOCï¼š Relative State-Of-Charge ç›¸å¯¹ç”µè·çŠ¶æ€ï¼ˆç›¸å¯¹è·ç”µçŠ¶æ€çš„èŒƒå›´æ˜¯ 0% - 100%ï¼‰</p>
</li>
</ul>
<p>ä¸€ä¸ªå…¨æ–°å®Œå…¨å……ç”µç”µæ± çš„ç»å¯¹è·ç”µçŠ¶æ€æ˜¯100%ï¼›è€Œè€åŒ–çš„ç”µæ± å³ä¾¿å®Œå…¨å……ç”µï¼Œåœ¨ä¸åŒå……æ”¾ç”µæƒ…å†µä¸­ä¹Ÿæ— æ³•åˆ°100%ã€‚</p>
<h1 id="ICåŸç†å›¾åŠå…¶å®ƒå‚è€ƒèµ„æ–™"><a href="#ICåŸç†å›¾åŠå…¶å®ƒå‚è€ƒèµ„æ–™" class="headerlink" title="ICåŸç†å›¾åŠå…¶å®ƒå‚è€ƒèµ„æ–™"></a>ICåŸç†å›¾åŠå…¶å®ƒå‚è€ƒèµ„æ–™</h1><ol>
<li><a href="https://www.dioo.com/uploads/product/20210521/77eaa63f9de5e6b03018958741f47a52.pdf">DIO58056</a></li>
<li><a href="https://www.docin.com/p-2290652672.html">SY8602</a></li>
<li><a href="https://www.ti.com.cn/cn/lit/an/zhcaaf7/zhcaaf7.pdf">TIç”µé‡è®¡è®¾è®¡æŒ‡å¯¼</a></li>
<li><a href="https://blog.csdn.net/Linux_LR/article/details/119787382">ADCç”µé‡æ£€æµ‹ä¸æ ¡å‡†</a></li>
</ol>
]]></content>
      <categories>
        <category>Work Experience</category>
      </categories>
  </entry>
  <entry>
    <title>ADC</title>
    <url>/2023/03/18/computerSystem/Peripherals/ADC/</url>
    <content><![CDATA[<h1 id="ADCåŸºç¡€"><a href="#ADCåŸºç¡€" class="headerlink" title="ADCåŸºç¡€"></a>ADCåŸºç¡€</h1><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><ul>
<li>ADCï¼šAnalog to Digital Converterï¼Œæ¨¡æ•°è½¬æ¢å™¨</li>
<li>æ¨¡æ‹Ÿä¿¡å·ï¼šéšæ—¶é—´å˜åŒ–è¿ç»­çš„ä¿¡å·ï¼Œä¸€æ®µæ—¶é—´å†…æœ‰æ— æ•°ä¸ªå–å€¼ </li>
<li>æ•°å­—ä¿¡å·ï¼šéšæ—¶é—´å˜åŒ–ç¦»æ•£çš„ä¿¡å·ï¼Œä¸€æ®µæ—¶é—´å†…æœ‰å›ºå®šä¸ªæ•°çš„å–å€¼</li>
</ul>
<h2 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h2><ol>
<li><strong>é‡‡æ · Samplingï¼š</strong>æŒ‰ç…§ä¸€å®šçš„é¢‘ç‡å¯¹æ¨¡æ‹Ÿä¿¡å·çš„ç¬æ—¶æ—¶åˆ»è¿›è¡Œæ ·æœ¬é‡‡é›†ï¼›</li>
<li><strong>é‡åŒ– Quantizationï¼š</strong>å¯¹é‡‡æ ·ç‚¹çš„å¹…åº¦èµ‹äºˆå…·ä½“çš„æ•°å€¼ï¼›</li>
<li><strong>ç¼–ç  Encodingï¼š</strong>æŒ‰ç…§ä¸€å®šçš„æ ¼å¼è®°å½•æ•°æ®ï¼›</li>
</ol>
<p><img src="/images/computerSystem/Peripherals/ADC.png" alt="image"></p>
<h2 id="æ€§èƒ½æŒ‡æ ‡"><a href="#æ€§èƒ½æŒ‡æ ‡" class="headerlink" title="æ€§èƒ½æŒ‡æ ‡"></a>æ€§èƒ½æŒ‡æ ‡</h2><ol>
<li><strong>é‡‡æ ·é€Ÿç‡ / æ—¶é’Ÿé¢‘ç‡</strong>ï¼šå•ä½æ—¶é—´å†…èƒ½è¿›è¡Œé‡‡æ ·çš„æ¬¡æ•°	</li>
<li><strong>ä½å®½ / åˆ†è¾¨ç‡ï¼š</strong>è¾“å…¥ä¿¡å·å€¼çš„æœ€å°å˜åŒ–</li>
<li>å…¶å®ƒç»†åŒ–æŒ‡æ ‡<ul>
<li>DLNï¼šå¾®åˆ†éçº¿æ€§ï¼Œç›¸å¯¹æŒ‡æ ‡</li>
<li>ILNï¼š ç§¯åˆ†éçº¿æ€§ï¼Œç»å¯¹æŒ‡æ ‡</li>
<li>SFDRï¼šæ— æ‚æ•£åŠ¨æ€èŒƒå›´</li>
</ul>
</li>
</ol>
<h2 id="ç±»å‹"><a href="#ç±»å‹" class="headerlink" title="ç±»å‹"></a>ç±»å‹</h2><h3 id="SAR"><a href="#SAR" class="headerlink" title="SAR"></a>SAR</h3><ul>
<li>SARï¼šSuccessive Approximation Registerï¼Œé€æ¬¡é€¼è¿‘å‹</li>
<li>åŸç†ï¼šäºŒåˆ†æŸ¥æ‰¾</li>
<li>ç‰¹ç‚¹ï¼šä½å»¶è¿Ÿï¼Œä½åŠŸè€—</li>
</ul>
<h3 id="âˆ†-âˆ‘"><a href="#âˆ†-âˆ‘" class="headerlink" title="âˆ† -âˆ‘"></a><strong>âˆ† -âˆ‘</strong></h3><ul>
<li>âˆ† -âˆ‘ ï¼šDelta-Sigma ADC</li>
<li>åŸç†ï¼šå°±æ˜¯æŠŠå¾…æµ‹ä¿¡å·Vinä¸å‚è€ƒç”µå‹ä¹‹é—´çš„å·®å€¼è¿›è¡Œä¸æ–­çš„ç´¯ç§¯å¹¶é€šè¿‡åé¦ˆä»¤è¿™ä¸ªå·®å€¼è¶‹äºé›¶ï¼ˆå°ºå­é‡çº¸ï¼‰</li>
<li>ç‰¹ç‚¹ï¼šç²¾åº¦é«˜ï¼Œå»¶è¿Ÿç›¸è¾ƒäºSARé«˜</li>
</ul>
<h2 id="ä¿¡å·è¯¯å·®æ¥æº"><a href="#ä¿¡å·è¯¯å·®æ¥æº" class="headerlink" title="ä¿¡å·è¯¯å·®æ¥æº"></a>ä¿¡å·è¯¯å·®æ¥æº</h2><ul>
<li>ç”µç£è¾å°„ EMI</li>
<li>ç”µè·¯æ¿è®¾è®¡ç¼ºé™·</li>
<li>ç”µæºç”µå‹çš„å˜åŒ–</li>
<li>ç¯å¢ƒçš„å˜åŒ–</li>
<li>é‡åŒ–è¯¯å·®ï¼ˆå†…éƒ¨ï¼‰</li>
</ul>
<h1 id="SAR-A-x2F-D-Controller"><a href="#SAR-A-x2F-D-Controller" class="headerlink" title="SAR A/D Controller"></a>SAR A/D Controller</h1><p>è¯¥éƒ¨åˆ†æ¶‰å¯†ä¸åšå…·ä½“è¯´æ˜</p>
<h2 id="é€»è¾‘æ¡†å›¾"><a href="#é€»è¾‘æ¡†å›¾" class="headerlink" title="é€»è¾‘æ¡†å›¾"></a>é€»è¾‘æ¡†å›¾</h2><h2 id="åŠŸèƒ½ç‰¹æ€§"><a href="#åŠŸèƒ½ç‰¹æ€§" class="headerlink" title="åŠŸèƒ½ç‰¹æ€§"></a>åŠŸèƒ½ç‰¹æ€§</h2><h2 id="å¯„å­˜å™¨"><a href="#å¯„å­˜å™¨" class="headerlink" title="å¯„å­˜å™¨"></a>å¯„å­˜å™¨</h2><h1 id="ä½¿ç”¨æ–¹å¼"><a href="#ä½¿ç”¨æ–¹å¼" class="headerlink" title="ä½¿ç”¨æ–¹å¼"></a>ä½¿ç”¨æ–¹å¼</h1><ul>
<li><p>è½®è¯¢Polling</p>
</li>
<li><p>ä¸­æ–­Interrupt</p>
<p>ä½¿ç”¨ä¸­æ–­æ–¹å¼é‡‡æ ·å®Œæˆåä¼šè‡ªåŠ¨è¿›å…¥ä¸­æ–­æœåŠ¡å‡½æ•°ã€‚èŠ‚çº¦CPUèµ„æº</p>
</li>
<li><p>å®šæ—¶å™¨è§¦å‘</p>
</li>
<li><p>DMA</p>
</li>
</ul>
<h1 id="ç»“æœè®¡ç®—"><a href="#ç»“æœè®¡ç®—" class="headerlink" title="ç»“æœè®¡ç®—"></a>ç»“æœè®¡ç®—</h1><p>Vout = ADATA / ( 2 ^ Resolution) Ã— Vref_ADC</p>
<h1 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h1><ul>
<li><p>ADC Clock Divide å¯„å­˜å™¨åˆ†é¢‘ç³»æ•°è®¡ç®—å…¬å¼x1600ä¸x2000ä¸ä¸€è‡´</p>
</li>
<li><p>ADVDATn(0-3)å¯„å­˜å™¨è¯»å‡ºç»“æœå AUXEN(0-3) å¯„å­˜å™¨è‡ªåŠ¨æ¸…é›¶ï¼ˆä½†æ˜¯å¦‚æœå°†é‡‡æ ·æ¨¡å¼è®¾ç½®ä¸ºé‡å¤é‡‡æ ·æ¨¡å¼åˆ™ä¸ä¼šè‡ªåŠ¨æ¸…é›¶ï¼‰</p>
</li>
<li><p>ADC æœ€ç»ˆè®¡ç®—å¾—åˆ°çš„ç»“æœå¯èƒ½æ˜¯ä¸­é—´ç»“æœï¼Œéœ€è¦å¯¹ç…§åŸç†å›¾çœ‹æ˜¯å¦æœ‰åˆ†å‹ï¼Œè¿›ä¸€æ­¥è®¡ç®—æœ€ç»ˆç»“æœ</p>
</li>
</ul>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ul>
<li><a href="https://www.ti.com/seclit/eb/slyw038c/slyw038c.pdf">æ¨¡æ‹Ÿå·¥ç¨‹å¸ˆå£è¢‹å‚è€ƒæŒ‡å—</a></li>
<li><a href="https://training.ti.com/ti-precision-labs-adcs">TIé«˜ç²¾åº¦å®éªŒå®¤åŸ¹è®­è§†é¢‘</a></li>
</ul>
]]></content>
      <categories>
        <category>Computure System</category>
        <category>ADC</category>
      </categories>
  </entry>
  <entry>
    <title>IIS</title>
    <url>/2023/04/05/computerSystem/protocol/IIS/</url>
    <content><![CDATA[<p>ADCå°†æ¨¡æ‹Ÿä¿¡å·è½¬æ¢ä¸ºæ•°å­—ä¿¡å·ï¼Œè€Œæ•°å­—ä¿¡å·çš„éŸ³é¢‘æ•°æ®åˆ™æ˜¯æŒ‰ç…§ä¸€å®šæ ‡å‡†ï¼ˆç¡¬ä»¶ä¼ è¾“åè®®ï¼‰ä¼ å…¥SOCä¸­è¿›è¡Œå¤„ç†ï¼›åŒç†DACå°†æ•°å­—ä¿¡å·è½¬æ¢ä¸ºæ¨¡æ‹Ÿä¿¡å·ï¼Œæ¨¡æ‹Ÿä¿¡å·çš„éŸ³é¢‘æ•°æ®ä¹Ÿæ˜¯æŒ‰ç…§åŒæ ·çš„æ ‡å‡†å°†æ•°æ®ä¼ è¾“åˆ°å–‡å­è¿›è¡Œå£°éŸ³çš„æ’­æ”¾</p>
<h1 id="æ•°å­—éŸ³é¢‘ä¿¡å·ä¼ è¾“æ ‡å‡†"><a href="#æ•°å­—éŸ³é¢‘ä¿¡å·ä¼ è¾“æ ‡å‡†" class="headerlink" title="æ•°å­—éŸ³é¢‘ä¿¡å·ä¼ è¾“æ ‡å‡†"></a>æ•°å­—éŸ³é¢‘ä¿¡å·ä¼ è¾“æ ‡å‡†</h1><h2 id="ç±»å‹"><a href="#ç±»å‹" class="headerlink" title="ç±»å‹"></a>ç±»å‹</h2><p>æ•°å­—éŸ³é¢‘ä¿¡å·ä¼ è¾“æ ‡å‡†ä¹Ÿå¯ä»¥ç§°ä½œéŸ³é¢‘ç¡¬ä»¶ä¼ è¾“åè®®ï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p>
<ul>
<li>I2Sï¼šIntegrated Interchip Soundï¼Œé›†æˆç”µè·¯å†…éƒ¨éŸ³é¢‘</li>
<li>PCMï¼šPulse Code Modulationï¼Œè„‰å†²ç¼–ç è°ƒåˆ¶</li>
<li>PDMï¼šPulse Density Modulationï¼Œè„‰å†²å¯†åº¦è°ƒåˆ¶</li>
<li>S/PDIFï¼šSony/Philips Digital Interfaceï¼Œç´¢å°¼/é£åˆ©æµ¦æ•°å­—æ¥å£</li>
</ul>
<h2 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h2><p>PCMï¼šå•å£°é“ï¼Œæ—¶å»¶å°ã€‚æ‰“ç”µè¯ä¹‹é—´çš„æ•°æ®ï¼›</p>
<p>I2Sï¼šåŒå£°é“ï¼Œé€Ÿåº¦å¿«ã€‚ä¸»è¦ç”¨äºä¼ è¾“éŸ³ä¹ï¼›</p>
<p>PDMï¼šå°ºå¯¸å—é™çš„åœºæ™¯ã€‚æ‰‹æœºcpuåˆ°è“ç‰™çš„é€šè¯å®æ—¶éŸ³é¢‘ï¼›</p>
<p>S/PDIFï¼šç”¨äºæ¿é—´é•¿è·ç¦»åŠéœ€è¦ç”µç¼†è¿æ¥çš„åœºåˆ</p>
<h1 id="I2SåŸºç¡€"><a href="#I2SåŸºç¡€" class="headerlink" title="I2SåŸºç¡€"></a>I2SåŸºç¡€</h1><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><p>I2S(Inter-IC Sound)æ€»çº¿,  åˆç§°é›†æˆç”µè·¯å†…ç½®éŸ³é¢‘æ€»çº¿ï¼Œæ˜¯é£åˆ©æµ¦åŠå¯¼ä½“å…¬å¸(ç°ä¸ºæ©æ™ºæµ¦åŠå¯¼ä½“å…¬å¸)é’ˆå¯¹æ•°å­—éŸ³é¢‘è®¾å¤‡ä¹‹é—´çš„éŸ³é¢‘æ•°æ®ä¼ è¾“è€Œåˆ¶å®šçš„ä¸€ç§æ€»çº¿æ ‡å‡†ã€‚</p>
<p>è¯¥æ€»çº¿ä¸“é—¨ç”¨äºéŸ³é¢‘è®¾å¤‡ä¹‹é—´çš„æ•°æ®ä¼ è¾“ï¼Œå¹¿æ³›åº”ç”¨äºå„ç§å¤šåª’ä½“ç³»ç»Ÿã€‚</p>
<p>å®ƒé‡‡ç”¨äº†ç‹¬ç«‹çš„å¯¼çº¿ä¼ è¾“æ—¶é’Ÿä¸æ•°æ®ä¿¡å·çš„è®¾è®¡ï¼Œé€šè¿‡å°†æ•°æ®å’Œæ—¶é’Ÿä¿¡å·åˆ†ç¦»ï¼Œé¿å…äº†å› æ—¶å·®è¯±å‘çš„å¤±çœŸï¼Œä¸ºç”¨æˆ·èŠ‚çœäº†è´­ä¹°æŠµæŠ—éŸ³é¢‘æŠ–åŠ¨çš„ä¸“ä¸šè®¾å¤‡çš„è´¹ç”¨ã€‚</p>
<h2 id="ä¿¡å·å®šä¹‰"><a href="#ä¿¡å·å®šä¹‰" class="headerlink" title="ä¿¡å·å®šä¹‰"></a>ä¿¡å·å®šä¹‰</h2><h3 id="WS"><a href="#WS" class="headerlink" title="WS"></a>WS</h3><p>WSï¼šWord Selectï¼Œå·¦å³å£°é“é€‰æ‹©ä¿¡å·ï¼ˆä¹Ÿç§°å¸§æ—¶é’Ÿ Left Right Clockï¼‰</p>
<p>æ ‡å‡†I2Så®šä¹‰ï¼šWS=0ï¼Œè¡¨ç¤ºæ­£åœ¨ä¼ è¾“å·¦å£°é“çš„æ•°æ®ï¼›WS=1ï¼Œè¡¨ç¤ºæ­£åœ¨ä¼ è¾“å³å£°é“çš„æ•°æ®ã€‚</p>
<h3 id="SCK"><a href="#SCK" class="headerlink" title="SCK"></a>SCK</h3><p>SCKï¼šSerial Clockï¼Œä¸²è¡Œæ—¶é’Ÿä¿¡å·ï¼ˆä¹Ÿç§°ä½æ—¶é’ŸBit Clockï¼‰</p>
<p>SCKæ˜¯æ¨¡å—å†…çš„åŒæ­¥ä¿¡å·ï¼Œä»æ¨¡å¼æ—¶ç”±å¤–éƒ¨æä¾›ï¼Œä¸»æ¨¡å¼æ—¶ç”±æ¨¡å—å†…éƒ¨è‡ªå·±äº§ç”Ÿã€‚å¯¹åº”æ•°å­—éŸ³é¢‘çš„æ¯ä¸€ä½æ•°æ®ï¼ŒSCKéƒ½æœ‰ä¸€ä¸ªè„‰å†²ã€‚</p>
<h3 id="SD"><a href="#SD" class="headerlink" title="SD"></a>SD</h3><p>SDï¼šSerial Dataï¼Œä¸²è¡Œæ•°æ®ä¿¡å·ï¼ˆåˆ†æ—¶å¤ç”¨ï¼‰</p>
<p>SDä»¥äºŒè¿›åˆ¶è¡¥ç å½¢å¼åœ¨æ•°æ®çº¿ä¸Šä¼ è¾“ï¼Œå¹¶ä¸”æŒ‰ç…§ç”±é«˜ä½(MSB)åˆ°ä½ä½(LSB)ä¾æ¬¡è¿›è¡Œä¼ è¾“ã€‚ä¹‹æ‰€ä»¥è¿™æ ·è®¾è®¡æ˜¯ä¸ºäº†ä¿è¯é‡è¦çš„æ•°æ®èƒ½å¤Ÿä¿å­˜ä¸‹æ¥ã€‚å› ä¸ºå‘é€è®¾å¤‡å’Œæ¥æ”¶è®¾å¤‡çš„å­—é•¿å¯èƒ½ä¸ä¸€æ ·ï¼Œå¦‚æœæ¥æ”¶è®¾å¤‡æ¥å—çš„å­—é•¿æ¯”è§„å®šçš„å­—é•¿é•¿çš„è¯å°±ä¼šäº§ç”Ÿæˆªæ–­ï¼Œå°†è¶…å‡ºå­—é•¿éƒ¨åˆ†å¿½ç•¥ï¼Œç›¸åå¦‚æœæ¥æ”¶è®¾å¤‡æ¥æ”¶çš„å­—é•¿æ¯”è§„å®šå­—é•¿çŸ­å°±ä¼šå°†ç©ºä½è¡¥0ã€‚è¿™æ ·ç¡®ä¿äº†æœ€é«˜æœ‰æ•ˆä½èƒ½å¤Ÿä¼ è¾“ã€‚</p>
<ul>
<li>LSBï¼šLeast Significant Bitï¼Œæœ€ä½æœ‰æ•ˆä½</li>
<li>MSBï¼šMost Significant Bitï¼Œæœ€é«˜æœ‰æ•ˆä½</li>
</ul>
<blockquote>
<p>å‘é€å™¨å¯ä»¥åœ¨æ—¶é’Ÿè„‰å†²çš„å‰æ²¿æˆ–åæ²¿å‘é€æ•°æ®,ï¼Œè¿™å¯ä»¥åœ¨ç›¸åº”çš„æ§åˆ¶å¯„å­˜å™¨ä¸­é…ç½®ã€‚ä½†æ˜¯æ¥æ”¶å™¨ä»…åœ¨æ—¶é’Ÿè„‰å†²çš„å‰æ²¿é”å­˜ä¸²è¡Œæ•°æ®å’Œ WSã€‚</p>
</blockquote>
<h3 id="MCLK"><a href="#MCLK" class="headerlink" title="MCLK"></a>MCLK</h3><p>é™¤æ­¤ä¹‹å¤–ï¼Œé€šå¸¸è¿˜æœ‰è¿˜æœ‰ä¸€ä¸ªSYSCLKï¼ˆMCLKï¼‰ï¼Œç”¨äºæä¾›ç»™éŸ³é¢‘åŠŸæ”¾å·¥ä½œæ—¶é’Ÿï¼Œé€šå¸¸æ˜¯2/4/8å€çš„BCLK</p>
<h2 id="ç³»ç»Ÿæ¡†å›¾"><a href="#ç³»ç»Ÿæ¡†å›¾" class="headerlink" title="ç³»ç»Ÿæ¡†å›¾"></a>ç³»ç»Ÿæ¡†å›¾</h2><ul>
<li>åªæœ‰ä¸€ä¸ªä¸»è®¾å¤‡ï¼Œå¹¶ä¸”SCKå’ŒWSä¿¡å·ä¸€å®šæ˜¯ä¸»è®¾å¤‡äº§ç”Ÿ</li>
<li>åœ¨å¤æ‚ç³»ç»Ÿä¸­ï¼Œé€šå¸¸æœ‰å¤šä¸ªå‘é€å™¨å’Œæ¥æ”¶å™¨ï¼Œæ­¤æ—¶é€šå¸¸æœ‰å¤–éƒ¨æ§åˆ¶å™¨è¿›è¡Œæ§åˆ¶</li>
</ul>
<p><img src="/images/computerSystem/protocol/I2S-1.png" alt="image"></p>
<h1 id="å…¸å‹I2Sæ—¶åºå›¾"><a href="#å…¸å‹I2Sæ—¶åºå›¾" class="headerlink" title="å…¸å‹I2Sæ—¶åºå›¾"></a>å…¸å‹I2Sæ—¶åºå›¾</h1><blockquote>
<p>è¯´æ˜ï¼šæœ¬éƒ¨åˆ†çš„ä½œå›¾æ˜¯ä»¥ä½å®½ä¸º16bitä¸ºä¾‹è¿›è¡Œè¯´æ˜</p>
<p>å¯ä»¥å‚è€ƒæ–‡ç« å°¾TI CODECæ–‡ä¸­å¯¹äºæ—¶åºçš„æè¿°</p>
</blockquote>
<p>éšç€æŠ€æœ¯çš„å‘å±•ï¼ŒI2Sä¹Ÿå‡ºç°äº†ä¸€äº›å˜ç§ï¼Œä½†æ˜¯æ¢æ±¤ä¸æ¢è¯åè®®æ ¸å¿ƒæ˜¯ä¸å˜çš„ã€‚</p>
<p>æ ¹æ®SDç›¸è¾ƒäºLRCLKçš„ä½ç½®çš„ä¸åŒåˆ†ä¸ºä¸‰ç§æ¨¡å¼ï¼šI2Sæ ¼å¼ï¼ˆPHILIPSæ¨¡å¼ï¼‰ã€å·¦å¯¹é½æ ¼å¼ï¼ˆè¾ƒå°‘ä½¿ç”¨ï¼‰ã€å³å¯¹é½æ ¼å¼ï¼ˆæ—¥æœ¬æ ¼å¼/SONYæ ¼å¼ï¼‰</p>
<h2 id="å…±é€šç‰¹æ€§"><a href="#å…±é€šç‰¹æ€§" class="headerlink" title="å…±é€šç‰¹æ€§"></a>å…±é€šç‰¹æ€§</h2><ol>
<li><p>WSå«å­—é€‰æ‹©ï¼Œå³æ¯ä¸€ä¸ªé«˜ä½ç”µå¹³æŒç»­æ—¶é—´å†…ä¼ è¾“çš„æ˜¯ä¸€ä¸ªå­—ï¼ˆ32bitï¼‰çš„æ•°æ®ï¼›</p>
</li>
<li><p>SCKå«ä½æ—¶é’Ÿï¼Œç”¨äºåŒæ­¥æ•°æ®ä¼ è¾“ï¼Œæ³¢å½¢ä¸ºæ–¹æ³¢ï¼ˆå¯¹åº”WSä¸€ä¸ªå‘¨æœŸæœ€å¤§æœ‰64ä¸ªæ–¹æ³¢ï¼‰</p>
</li>
<li><p>WSçš„é¢‘ç‡ç­‰äºé‡‡æ ·é¢‘ç‡ã€‚å‡è®¾é‡‡æ ·é¢‘ç‡44.1khzï¼Œå³1ç§’å†…æœ‰44100é‡‡æ ·ç‚¹ï¼ˆ44100ä¸ªå‘¨æœŸï¼‰</p>
</li>
<li><p>SCKçš„é¢‘ç‡ = å£°é“æ•° * é‡‡æ ·é¢‘ç‡ * é‡‡æ ·ä½æ•°ã€‚</p>
</li>
</ol>
<h2 id="I2Sæ ¼å¼"><a href="#I2Sæ ¼å¼" class="headerlink" title="I2Sæ ¼å¼"></a>I2Sæ ¼å¼</h2><ul>
<li><p>å·¦å£°é“çš„MSBåœ¨å­—æ—¶é’Ÿä¸‹é™æ²¿åçš„ç¬¬äºŒä¸ªä½æ—¶é’Ÿä¸Šå‡æ²¿æœ‰æ•ˆã€‚ åŒæ ·ï¼Œå³å£°é“çš„MSBåœ¨å­—æ—¶é’Ÿä¸Šå‡æ²¿åçš„ç¬¬äºŒä¸ªä½æ—¶é’Ÿä¸Šå‡æ²¿æœ‰æ•ˆ</p>
</li>
<li><p>SCKå»¶è¿Ÿä¸€ä¸ªæ—¶é’Ÿä½å¼€å§‹ä¼ è¾“æ•°æ®ï¼ˆä¸ºæ¥æ”¶å™¨æä¾›äº†æ—¶é—´æ¥å­˜å‚¨å·²ç»æ¥æ”¶çš„å­—ï¼Œå¹¶æ¸…é™¤ä¸‹ä¸€ä¸ªå­—çš„è¾“å…¥å¯„å­˜å™¨ï¼‰</p>
</li>
</ul>
<p><img src="/images/computerSystem/protocol/I2S-2.png" alt="image"></p>
<h2 id="å·¦å¯¹é½"><a href="#å·¦å¯¹é½" class="headerlink" title="å·¦å¯¹é½"></a>å·¦å¯¹é½</h2><ul>
<li>å·¦å¯¹é½æ¨¡å¼ä¸‹ï¼Œå³å£°é“çš„ MSB åœ¨å­—æ—¶é’Ÿä¸‹é™æ²¿ä¹‹åçš„ä½æ—¶é’Ÿä¸Šå‡æ²¿æœ‰æ•ˆã€‚ åŒæ ·ï¼Œå·¦å£°é“çš„MSBåœ¨å­—æ—¶é’Ÿä¸Šå‡æ²¿ä¹‹åçš„ä½æ—¶é’Ÿä¸Šå‡æ²¿æœ‰æ•ˆ</li>
</ul>
<p><img src="/images/computerSystem/protocol/I2S-3.png" alt="image"></p>
<h2 id="å³å¯¹é½"><a href="#å³å¯¹é½" class="headerlink" title="å³å¯¹é½"></a>å³å¯¹é½</h2><ul>
<li><p>å³å¯¹é½æ¨¡å¼ï¼Œå·¦å£°é“çš„ LSB åœ¨å­—æ—¶é’Ÿä¸‹é™æ²¿ä¹‹å‰çš„ä½æ—¶é’Ÿä¸Šå‡æ²¿æœ‰æ•ˆã€‚ åŒæ ·ï¼Œå³å£°é“çš„ LSB åœ¨å­—æ—¶é’Ÿä¸Šå‡æ²¿ä¹‹å‰çš„ä½æ—¶é’Ÿä¸Šå‡æ²¿æœ‰æ•ˆã€‚</p>
</li>
<li><p>æ¥æ”¶è®¾å¤‡å¿…é¡»äº‹å…ˆçŸ¥é“å¾…ä¼ æ•°æ®çš„å­—é•¿</p>
</li>
</ul>
<p><img src="/images/computerSystem/protocol/I2S-4.png" alt="image"></p>
<h1 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h1><ul>
<li><p>å‘é€ç«¯å’Œæ¥æ”¶ç«¯çš„æ•°æ®æ ¼å¼è¦ä¸€è‡´ï¼ŒåŒä¸ºå·¦å¯¹é½ã€å³å¯¹é½æˆ–I2Sæ ¼å¼</p>
</li>
<li><p>æ ‡å‡†å·¦å¯¹é½å’Œæ ‡å‡†å³å¯¹é½æ¨¡å¼çš„LRCK/WSé«˜ä½ç”µå¹³å¯¹åº”çš„å·¦å³å£°é“ä¸æ ‡å‡†I2Sæ¨¡å¼çš„è§„å®šç›¸åã€‚I2Sï¼š0ï¼šLï¼Œ1ï¼šRï¼›å·¦å¯¹é½/å³å¯¹é½ï¼š0ï¼šRï¼Œ1ï¼šLï¼›</p>
</li>
</ul>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ul>
<li><a href="http://users.ece.utexas.edu/~bevans/courses/realtime/lectures/10_Data_Conversion/AP_Understanding_PDM_Digital_Audio.pdf">Understanding PDM Digital Audio</a> </li>
<li><a href="https://www.sparkfun.com/datasheets/BreakoutBoards/I2SBUS.pdf">I2S Bus Specification</a></li>
<li><a href="https://www.elprocus.com/i2s-protocol/">I2S Protocol : Working, Differences &amp; Its Applications</a></li>
<li><a href="https://www.crifan.com/common_audio_interface_tdm_pdm_i2s_pcm/">éŸ³é¢‘æ¥å£ï¼šTDMï¼ŒPDMï¼ŒI2Sï¼ŒPCM ç®€ä»‹</a></li>
<li><a href="https://www.ti.com.cn/cn/lit/ds/symlink/tlv320aic31.pdf">TI CODECæ‰‹å†Œ</a></li>
</ul>
]]></content>
      <categories>
        <category>Computure System</category>
        <category>protocol</category>
      </categories>
      <tags>
        <tag>storage system</tag>
        <tag>I2S</tag>
      </tags>
  </entry>
  <entry>
    <title>GPIO</title>
    <url>/2022/09/22/computerSystem/Peripherals/GPIO/</url>
    <content><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>GPIOï¼šGeneral Purpose Input Outputï¼Œé€šç”¨è¾“å…¥è¾“å‡ºï¼Œç®€ç§°ä¸ºâ€œIOå£â€ï¼ŒèŠ¯ç‰‡ä¸å¤–å›´è®¾å¤‡äº¤äº’çš„ç¡¬ä»¶æ¥å£</p>
<h1 id="åŸºæœ¬ç»“æ„"><a href="#åŸºæœ¬ç»“æ„" class="headerlink" title="åŸºæœ¬ç»“æ„"></a>åŸºæœ¬ç»“æ„</h1><p>ä»¥ä¸‹å›¾ç‰‡æ¥è‡ªSTM32çš„GPIOç¡¬ä»¶ç”µè·¯å›¾</p>
<p><img src="/images/computerSystem/Peripherals/GPIO-1.png" alt="image"></p>
<p>æ–½å¯†ç‰¹è§¦å‘å™¨ï¼šåœ¨æ­£å‘é€’å¢å’Œè´Ÿå‘é€’å‡ä¸¤ä¸ªæ–¹å‘æœ‰ä¸åŒçš„é˜ˆå€¼ï¼Œæœ‰ä¸€å®šçš„æŠ—å¹²æ‰°èƒ½åŠ›ï¼Œå¤–éƒ¨çš„å°æ‰°åŠ¨ä¸ä¼šå¯¼è‡´cpuè¯¯åˆ¤ï¼Œç›´è‡³å‰§çƒˆå˜åŒ–æˆ–è€…çœŸçš„æœ‰ç”µå¹³çš„å˜åŒ–ã€‚</p>
<h1 id="å·¥ä½œæ¨¡å¼"><a href="#å·¥ä½œæ¨¡å¼" class="headerlink" title="å·¥ä½œæ¨¡å¼"></a>å·¥ä½œæ¨¡å¼</h1><h2 id="è¾“å…¥ï¼ˆ4ï¼‰"><a href="#è¾“å…¥ï¼ˆ4ï¼‰" class="headerlink" title="è¾“å…¥ï¼ˆ4ï¼‰"></a>è¾“å…¥ï¼ˆ4ï¼‰</h2><ol>
<li>æµ®ç©ºè¾“å…¥ï¼šå¤šç”¨äºå¤–éƒ¨æŒ‰é”®è¾“å…¥ï¼ŒioçŠ¶æ€ä¸ç¡®å®šå®Œå…¨ç”±å¤–éƒ¨è¾“å…¥å†³å®š</li>
<li>ä¸Šæ‹‰è¾“å…¥ï¼šIOå£è¾“å…¥è®¾å®šä¸ºé«˜ç”µå¹³è¾“å…¥ï¼ˆ1ï¼‰ï¼Œæ£€æµ‹ä½ç”µå¹³æˆ–ä¸‹é™æ²¿</li>
<li>ä¸‹æ‹‰è¾“å…¥ï¼šIOå£è¾“å…¥è®¾å®šä¸ºä½ç”µå¹³è¾“å…¥ï¼ˆ0ï¼‰</li>
<li>æ¨¡æ‹Ÿè¾“å…¥ï¼šADCæ¨¡æ‹Ÿè¾“å…¥ï¼Œæµ‹é‡å¤–éƒ¨ç”µå‹å¹…å€¼ä¸é€šè¿‡TTL</li>
</ol>
<h2 id="è¾“å‡ºï¼ˆ4ï¼‰"><a href="#è¾“å‡ºï¼ˆ4ï¼‰" class="headerlink" title="è¾“å‡ºï¼ˆ4ï¼‰"></a>è¾“å‡ºï¼ˆ4ï¼‰</h2><ol>
<li>æ¨æŒ½è¾“å‡ºï¼šè¾“å‡ºé«˜ä½ç”µå¹³</li>
<li>å¼€æ¼è¾“å‡ºï¼šåªæœ‰ä¸€ä¸ªNMOSå¯¼é€šï¼Œåªèƒ½è¾“å‡ºä½ç”µå¹³+é«˜é˜»æ€ï¼Œä¸èƒ½è¾“å‡ºé«˜ç”µå¹³ï¼›å½“NMOSå¯¼é€šè¾“å‡ºä½ç”µå¹³ï¼Œæˆªè‡³è¾“å‡ºé«˜é˜»æ€ã€‚ç”¨ä½œçº¿ä¸ï¼Œç”µå¹³ä¸åŒ¹é…çš„åœºåˆï¼Œå¤–éƒ¨ä¸Šæ‹‰</li>
<li>å¤ç”¨æ¨æŒ½è¾“å‡ºï¼šéœ€è¦è¾“å‡ºé«˜ä½ç”µå¹³çš„å…¶ä»–æ¨¡å¼ï¼Œå¦‚ï¼šspi uart</li>
<li>å¤ç”¨å¼€æ¼è¾“å‡ºï¼šæ™®é€ši2cå¤„äºè¯¥æ¨¡å¼</li>
</ol>
<h1 id="GPIOå¯„å­˜å™¨"><a href="#GPIOå¯„å­˜å™¨" class="headerlink" title="GPIOå¯„å­˜å™¨"></a>GPIOå¯„å­˜å™¨</h1><h2 id="é€šç”¨å¯„å­˜å™¨"><a href="#é€šç”¨å¯„å­˜å™¨" class="headerlink" title="é€šç”¨å¯„å­˜å™¨"></a>é€šç”¨å¯„å­˜å™¨</h2><p>ä»¥stm32ä¸ºä¾‹</p>
<ul>
<li>GPIO ç«¯å£æ¨¡å¼å¯„å­˜å™¨ (GPIOx_MODER) (x = Aâ€¦I)</li>
<li>GPIO ç«¯å£è¾“å‡ºç±»å‹å¯„å­˜å™¨ (GPIOx_OTYPER) (x = Aâ€¦I)</li>
<li>GPIO ç«¯å£è¾“å‡ºé€Ÿåº¦å¯„å­˜å™¨ (GPIOx_OSPEEDR) (x = Aâ€¦I/)</li>
<li>GPIO ç«¯å£ä¸Šæ‹‰/ä¸‹æ‹‰å¯„å­˜å™¨ (GPIOx_PUPDR) (x = Aâ€¦I/)</li>
<li>GPIO ç«¯å£è¾“å…¥æ•°æ®å¯„å­˜å™¨ (GPIOx_IDR) (x = Aâ€¦I)</li>
<li>GPIO ç«¯å£è¾“å‡ºæ•°æ®å¯„å­˜å™¨ (GPIOx_ODR) (x = Aâ€¦I)</li>
<li>GPIO ç«¯å£ç½®ä½/å¤ä½å¯„å­˜å™¨ (GPIOx_BSRR) (x = Aâ€¦I)</li>
</ul>
<h2 id="GPIO-Shadow"><a href="#GPIO-Shadow" class="headerlink" title="GPIO Shadow"></a>GPIO Shadow</h2><p>ç”±äºè®¾ç½®æŸä¸ªæ¨¡å¼çš„è¿‡ç¨‹ä¸­é…ç½®çš„ä¸åªæ˜¯ä¸€ä¸ªå¯„å­˜å™¨ï¼Œé…ç½®è¿‡ç¨‹ä¸­å°±å¯èƒ½å‡ºç°åˆ«çš„çŠ¶æ€çš„äº§ç”Ÿï¼Œå¯¼è‡´é”™è¯¯ã€‚è€Œä½¿ç”¨shadowå¯„å­˜å™¨ï¼Œå¯ä»¥å…ˆå°†æ‰€æœ‰éœ€è¦é…ç½®çš„å¯„å­˜å™¨åˆ†åˆ«è®¾ç½®è¿›å»ï¼Œä½†ä¸ç”Ÿæ•ˆï¼Œç›´è‡³å…¨éƒ¨è®¾ç½®å®Œæ¯•ï¼Œå†æŒ‡å®šGPIDå³è¦æ˜ å°„çš„ç»„ä¸Šå»ç”Ÿæ•ˆï¼é¿å…äº†ä¸­é—´éå¿…è¦çŠ¶æ€çš„äº§ç”Ÿã€‚</p>
<h1 id="ç”¨æˆ·å±‚åº”ç”¨"><a href="#ç”¨æˆ·å±‚åº”ç”¨" class="headerlink" title="ç”¨æˆ·å±‚åº”ç”¨"></a>ç”¨æˆ·å±‚åº”ç”¨</h1><h2 id="é…ç½®GPIO"><a href="#é…ç½®GPIO" class="headerlink" title="é…ç½®GPIO"></a>é…ç½®GPIO</h2><p>åœ¨å†…æ ¸å¯¼å‡º gpio èŠ‚ç‚¹çš„å‰æä¸‹ï¼Œ å¯ä»¥æ“ä½œ/sys/class/gpio èŠ‚ç‚¹ï¼Œ æ§åˆ¶ gpio è¾“å…¥è¾“å‡º</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">å¯¼å‡ºèŠ‚ç‚¹ï¼š  echo <span class="number">20</span> &gt; /sys/<span class="class"><span class="keyword">class</span>/<span class="title">gpio</span>/<span class="title">export</span></span></span><br><span class="line"><span class="class">è®¾ç½®æ–¹å‘ï¼š  <span class="title">echo</span> [<span class="title">out</span> / <span class="title">in</span>] &gt;</span> /sys/<span class="class"><span class="keyword">class</span>/<span class="title">gpio</span>/<span class="title">gpio20</span>/<span class="title">direction</span></span></span><br><span class="line"><span class="class">è®¾ç½®å€¼ï¼š    <span class="title">echo</span> [0 / 1] &gt;</span> sys/<span class="class"><span class="keyword">class</span>/<span class="title">gpio</span>/<span class="title">gpio19</span>/<span class="title">value</span></span></span><br><span class="line"><span class="class">è®¾ç½®è§¦å‘æ¨¡å¼ï¼š<span class="title">echo</span> [<span class="title">none</span> / <span class="title">rising</span> / <span class="title">falling</span> /  <span class="title">both</span>] &gt;</span> sys/<span class="class"><span class="keyword">class</span>/<span class="title">gpio</span>/<span class="title">gpio19</span>/<span class="title">edge</span></span></span><br><span class="line"><span class="class">ç¿»è½¬å±æ€§ï¼š  <span class="title">echo</span> [0 / 1] &gt;</span> sys/<span class="class"><span class="keyword">class</span>/<span class="title">gpio</span>/<span class="title">gpio19</span>/<span class="title">active_low</span></span></span><br><span class="line"><span class="class">ç§»é™¤èŠ‚ç‚¹ï¼š  <span class="title">echo</span> 20 &gt;</span> /sys/<span class="class"><span class="keyword">class</span>/<span class="title">gpio</span>/<span class="title">unexport</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>æ³¨æ„äº‹é¡¹</p>
<ul>
<li>direction<br>å¦‚æœå†…æ ¸ä¸æ”¯æŒæ”¹å˜ GPIO çš„æ–¹å‘ï¼Œæˆ–è€…åœ¨å¯¼å‡ºæ—¶å†…æ ¸ä»£ç æ²¡æœ‰æ˜ç¡®å…è®¸ç”¨æˆ·ç©ºé—´å¯ä»¥é‡æ–°é…ç½® GPIO æ–¹å‘ï¼Œ é‚£ä¹ˆè¿™ä¸ªå±æ€§å°†ä¸å­˜åœ¨ã€‚</li>
<li>value<br>è¾“å‡ºæ—¶ï¼Œæ§åˆ¶é«˜ä½ç”µå¹³ï¼›è¾“å…¥æ—¶ï¼Œè·å–é«˜ä½ç”µå¹³</li>
<li>edge<br>æ§åˆ¶ä¸­æ–­è§¦å‘æ¨¡å¼ï¼Œå¼•è„šè¢«é…ç½®ä¸ºä¸­æ–­åå¯ä»¥ä½¿ç”¨poll() å‡½æ•°ç›‘å¬å¼•è„š<br>éä¸­æ–­å¼•è„šã€ä¸Šå‡æ²¿è§¦å‘ã€ä¸‹é™æ²¿è§¦å‘ã€è¾¹æ²¿è§¦å‘</li>
<li>active_low<br>ç”¨äºç¿»è½¬ç”µå¹³ï¼Œå½“å¤–éƒ¨æœ‰æ•ˆä¿¡å·ä¸GPIOæœ‰æ•ˆä¿¡å·ä¸ä¸€è‡´ï¼ˆå³0å¯èƒ½è¡¨ç¤ºæœ‰æ•ˆï¼Œ1ä¹Ÿæœ‰å¯èƒ½è¡¨ç¤ºæœ‰æ•ˆï¼‰</li>
</ul>
<h2 id="æŸ¥çœ‹GPIOé…ç½®"><a href="#æŸ¥çœ‹GPIOé…ç½®" class="headerlink" title="æŸ¥çœ‹GPIOé…ç½®"></a>æŸ¥çœ‹GPIOé…ç½®</h2><p>ä¸åŒçš„å‚å•†å¯¹äºGPIOé…ç½®ç»“æœçš„æŸ¥çœ‹æ–¹å¼æœ‰æ‰€ä¸åŒï¼Œä»¥ä¸‹ä»¥Ingenic-x2000ä¸ºä¾‹å¯¹åº”ç›¸å…³çš„æ‰‹å†Œå¯ä»¥ç¡®å®šç›¸åº”çš„IOçŠ¶æ€</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">/<span class="meta"># cat /sys/devices/platform/apb/10010000.pinctrl/dump_gpio</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœå¦‚ä¸‹å›¾, ä¸‹é¢ä¼šæœ‰æ¯ä¸€ä¸ªGPIOçŠ¶æ€</span></span><br><span class="line">REG 	|+++GPA++|+++GPB++|+++GPC++|+++GPD++|</span><br><span class="line"></span><br><span class="line">INL 	|<span class="number">0</span>c3fffff|<span class="number">67f</span>6036f|<span class="number">0110f</span>ef4|<span class="number">0f</span>7fffff|</span><br><span class="line">INT 	|<span class="number">02b</span>00000|<span class="number">30440000</span>|<span class="number">00000081</span>|<span class="number">00000100</span>|</span><br><span class="line">MSK 	|<span class="number">194f</span>cfff|ce0a0040|<span class="number">74f</span>f0076|<span class="number">003f</span>feff|</span><br><span class="line">PAT1 	|<span class="number">0265</span>cfff|f6440000|<span class="number">77</span>efc0fb|<span class="number">003f</span>fbff|</span><br><span class="line">PAT0 	|<span class="number">0f</span>8a3000|<span class="number">1033</span>efc0|<span class="number">88100005</span>|<span class="number">00000400</span>|</span><br><span class="line">EDG 	|<span class="number">3f</span>ffff00|f6037f00|<span class="number">10f</span>ff400|<span class="number">7f</span>ffff00|</span><br><span class="line">PLUP 	|<span class="number">14000000</span>|<span class="number">41800000</span>|<span class="number">00200001</span>|<span class="number">00000100</span>|</span><br><span class="line">PLDWN 	|<span class="number">00000000</span>|<span class="number">800000</span>c0|<span class="number">00100002</span>|<span class="number">00000000</span>|</span><br><span class="line">FLAG 	|<span class="number">00000000</span>|<span class="number">00000000</span>|<span class="number">00000000</span>|<span class="number">00000000</span>|</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h1 id="ç›¸å…³åŠŸèƒ½"><a href="#ç›¸å…³åŠŸèƒ½" class="headerlink" title="ç›¸å…³åŠŸèƒ½"></a>ç›¸å…³åŠŸèƒ½</h1><p>åœ¨ä½åŠŸè€—åœºæ™¯ä¸‹ï¼Œç³»ç»Ÿä¼‘çœ ä»¥åéƒ¨åˆ†ç¡¬ä»¶æ—¶é’Ÿå¯èƒ½å…³é—­ã€‚ä½†æ˜¯GPIOä¸ä¾èµ–æ—¶é’Ÿï¼Œæ•…å¯ä»¥é…ç½®IOä½œä¸ºä¸­æ–­æºå¯¹CPUè¿›è¡Œå”¤é†’</p>
]]></content>
      <categories>
        <category>Computure System</category>
        <category>GPIO</category>
      </categories>
  </entry>
  <entry>
    <title>DDRåŸºç¡€ä¸åŸç†</title>
    <url>/2023/04/05/computerSystem/storage/DDR/</url>
    <content><![CDATA[<p><a href="https://yanglieee.com/2023/02/07/computerSystem/%E5%AD%98%E5%82%A8%E4%BD%93%E7%B3%BB/">å‰é¢çš„æ–‡ç« </a>å¯¹SRAMçš„Cacheåšäº†è¯¦ç»†åˆ†æï¼Œè€Œè¿™éƒ¨åˆ†å°†å¯¹å¦ä¸€ç§éšæœºå­˜å–å™¨åŠ¨æ€éšæœºå­˜å‚¨å™¨DRAMåšè¿›ä¸€æ­¥è¯´æ˜ã€‚æœ¬æ–‡å¤§éƒ¨åˆ†æ˜¯åŸºäºBranchEducationçš„è§†é¢‘å†…å®¹å’Œå…¶å®ƒæ–‡ç« è¿›è¡Œè¡Œæ–‡çš„ï¼Œæ–‡ç« æˆªå›¾å…¨éƒ¨æ¥è‡ªè§†é¢‘ï¼Œéƒ¨åˆ†æ˜¯è‡ªå·±æ‰€ç”»ï¼Œè§†é¢‘è¿æ¥æ”¾åœ¨æœ€åçš„å‚è€ƒèµ„æ–™éƒ¨åˆ†ã€‚</p>
<h1 id="DRAM"><a href="#DRAM" class="headerlink" title="DRAM"></a>DRAM</h1><p>DRAMï¼šDynamic Random Access Memoryï¼ŒåŠ¨æ€éšæœºå­˜å‚¨å™¨ã€‚</p>
<p>åœ¨DRAMçš„åˆ†ç±»ä¸­ï¼ŒSDRAMï¼ˆSynchronous DRAMï¼‰åŒæ­¥åŠ¨æ€éšæœºå­˜å‚¨å™¨åœ¨å„ä¸ªè¡Œä¸šåˆ™å è¾ƒå¤§çš„æ¯”ä¾‹ã€‚è€Œæˆ‘ä»¬ç»å¸¸å¬åˆ°çš„DDRï¼ˆDouble Data Rate SDRAMï¼‰å³åŒå€é€Ÿç‡SDRAMåˆ™åˆæ˜¯SDRAMä¸­çš„ä¸»è¦ä»£è¡¨ï¼Œæœ¬ç¯‡å°†ç€é‡å¯¹DDRåŸç†è¿›è¡Œåˆ†æ</p>
<p>DRAMæ˜¯ç¨‹åºè¿è¡Œçš„å’Œä¸´æ—¶æ•°æ®å­˜å‚¨çš„åª’ä»‹ï¼Œæ— è®ºæ˜¯è®¡ç®—æœºè¿˜æ˜¯æ‰‹æœºçš„å‚æ•°ä¸»å­˜å¤§å°å³æŒ‡çš„æ˜¯DRAMçš„å¤§å°ã€‚åœ¨å·¥ä½œä¸­æˆ‘ä»¬å…¶å®å¾ˆå°‘åŒºåˆ†DDRå’ŒDRAMï¼Œä¸¥æ ¼æ¥è¯´DDRåªèƒ½æ˜¯DRAMä¸­çš„ä¸€ç§ï¼Œwhateverï¼Œå·¥ä½œä¸­ä¸å½±å“æ­£å¸¸ç†è§£å’Œä½¿ç”¨å°±å¥½ã€‚</p>
<h1 id="DDR-SDRAM"><a href="#DDR-SDRAM" class="headerlink" title="DDR SDRAM"></a>DDR SDRAM</h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><blockquote>
<p>Wikiï¼š<a href="https://en.wikipedia.org/wiki/DDR_SDRAM">è‹±æ–‡</a>ï¼›<a href="https://zh.m.wikipedia.org/wiki/DDR_SDRAM">ä¸­æ–‡</a></p>
</blockquote>
<ul>
<li><p>DDR SDRAMï¼šDouble Data Rate Synchronous Dynamic Random Access Memoryï¼ŒåŒå€æ•°æ®ç‡åŒæ­¥åŠ¨æ€éšæœºå­˜å–å­˜å‚¨å™¨ã€‚ä¹‹æ‰€ä»¥â€œåŒæ­¥â€æ˜¯æŒ‡å†…å­˜çš„å·¥ä½œéœ€è¦åŒæ­¥æ—¶é’Ÿï¼Œå‘½ä»¤çš„å‘é€å’Œæ•°æ®çš„ä¼ è¾“éƒ½è¦ä»¥æ­¤ä¸ºåŸºå‡†ï¼›â€œåŠ¨æ€â€åˆ™æ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦ä¸ºå…¶æä¾›ç”µå‹å®šæ—¶åˆ·æ–°æ¥ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼Œæ‰ç”µåˆ™æ•°æ®ä¸¢å¤±ï¼›â€œåŒå€â€åˆ™æ˜¯ç”±äºå…¶åœ¨æ—¶é’Ÿçš„ä¸Šå‡æ²¿å’Œä¸‹é™æ²¿éƒ½å¯ä»¥è¿›è¡Œæ•°æ®çš„ä¼ è¾“</p>
</li>
<li><p>LPDDR SDRAMï¼šLow-Power Double Data Rate SDRAMï¼Œæ˜¯ä¸€ç§åŠŸè€—è¾ƒä½çš„åŒæ­¥åŠ¨æ€éšæœºå­˜å–å­˜å‚¨å™¨ï¼Œä¸»è¦ç”¨äºç§»åŠ¨è®¡ç®—æœºå’Œæ‰‹æœºç­‰è®¾å¤‡ã€‚è¾ƒæ—§çš„å˜ä½“ä¹Ÿç§°ä¸ºç§»åŠ¨ DDRï¼Œç¼©å†™ä¸º mDDRã€‚ç°ä»£ LPDDR SDRAM ä¸DDR SDRAMæˆªç„¶ä¸åŒï¼Œå…·æœ‰å¤šç§å·®å¼‚ï¼Œç”šè‡³LPDDR æŠ€æœ¯æ ‡å‡†æ˜¯ç‹¬ç«‹äº DDR æ ‡å‡†å¼€å‘çš„ã€‚ï¼ˆæœ¬ç¯‡ä¸å¯¹æ­¤åšè¯¦ç»†è¯´æ˜ï¼‰</p>
</li>
</ul>
<h2 id="å„ç‰ˆæœ¬å‚æ•°å¯¹æ¯”"><a href="#å„ç‰ˆæœ¬å‚æ•°å¯¹æ¯”" class="headerlink" title="å„ç‰ˆæœ¬å‚æ•°å¯¹æ¯”"></a>å„ç‰ˆæœ¬å‚æ•°å¯¹æ¯”</h2><table>
<thead>
<tr>
<th align="center">DDR SDRAM Standard</th>
<th align="center">Bus clock (MHz)</th>
<th align="center">Internal rate (MHz)</th>
<th align="center">Prefetch (min burst)</th>
<th align="center">Transfer Rate (MT/s)</th>
<th align="center">Voltage</th>
<th align="center"><a href="https://zh.m.wikipedia.org/wiki/DIMM">DIMM</a> pins</th>
<th align="center"><a href="https://zh.m.wikipedia.org/wiki/SO-DIMM">SO-DIMM</a> pins</th>
<th align="center"><a href="https://zh.m.wikipedia.org/w/index.php?title=MicroDIMM&amp;action=edit&amp;redlink=1">MicroDIMM</a> pins</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>DDR</strong></td>
<td align="center">100â€“200</td>
<td align="center">100â€“200</td>
<td align="center">2n</td>
<td align="center">200â€“400</td>
<td align="center">2.5/2.6</td>
<td align="center">184</td>
<td align="center">200</td>
<td align="center">172</td>
</tr>
<tr>
<td align="center"><a href="https://zh.m.wikipedia.org/wiki/DDR2_SDRAM">DDR2</a></td>
<td align="center">200â€“533</td>
<td align="center">100â€“266</td>
<td align="center">4n</td>
<td align="center">400â€“1066</td>
<td align="center">1.8</td>
<td align="center">240</td>
<td align="center">200</td>
<td align="center">214</td>
</tr>
<tr>
<td align="center"><a href="https://zh.m.wikipedia.org/wiki/DDR3_SDRAM">DDR3</a></td>
<td align="center">400â€“1066</td>
<td align="center">100â€“266</td>
<td align="center">8n</td>
<td align="center">800â€“2400</td>
<td align="center">1.5</td>
<td align="center">240</td>
<td align="center">204</td>
<td align="center">214</td>
</tr>
<tr>
<td align="center"><a href="https://zh.m.wikipedia.org/wiki/DDR4_SDRAM">DDR4</a></td>
<td align="center">800â€“1200</td>
<td align="center">200â€“300</td>
<td align="center">16n</td>
<td align="center">1600â€“5067</td>
<td align="center">1.2</td>
<td align="center">288</td>
<td align="center">260</td>
<td align="center">214</td>
</tr>
</tbody></table>
<h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><ul>
<li><p>channelï¼šé€šé“ï¼Œå±äºæ§åˆ¶å™¨ç«¯çš„æ¦‚å¿µã€‚å¯ä»¥ç®€å•ç†è§£ä¸ºä¸€ä¸ªé€šé“å¯¹åº”ä¸€ä¸ªDDRæ§åˆ¶å™¨ï¼Œæ¯ä¸ªé€šé“æ‹¥æœ‰ä¸€ç»„åœ°å€çº¿ã€æ§åˆ¶çº¿å’Œæ•°æ®çº¿</p>
</li>
<li><p>SIMMï¼šSingle In-line Memory Moduleï¼Œå•åˆ—å†…å­˜æ¨¡ç»„ã€‚å†…å­˜æ¨¡ç»„ç”µè·¯æ¿ä¸ä¸»æ¿æ’æ§½çš„æ¥å£åªæœ‰ä¸€åˆ—å¼•è„š</p>
</li>
<li><p>DIMMï¼šDouble In-line Memory Moduleï¼ŒåŒåˆ—å†…å­˜æ¨¡ç»„ï¼Œä¸»æ¿ä¸Šçš„ä¸€ä¸ªå†…å­˜æ’æ§½ï¼Œå†…å­˜æ¨¡ç»„ç”µè·¯æ¿ä¸ä¸»æ¿æ’æ§½çš„æ¥å£æœ‰ä¸¤åˆ—å¼•è„šã€‚ä¸€ä¸ªChannelå¯ä»¥åŒ…æ‹¬å¤šä¸ªDIMMã€‚</p>
</li>
<li><p>Rankï¼šCPUåœ¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå–æ•°æ®çš„å¤§å°å–å†³äºæ•°æ®æ€»çº¿çš„ä½å®½ï¼ˆè¿™ä¸ªä½å®½è¢«ç§°ä¸ºç‰©ç† Bankï¼ˆPhysical Bank)ï¼Œé€šå¸¸å†…å­˜é¢—ç²’éƒ½æ²¡æœ‰P-Bankå¤§å°çš„ä½å®½ï¼Œè¿™æ—¶å°±éœ€è¦å¤šä¸ªå†…å­˜é¢—ç²’ç»„åˆèµ·æ¥æ»¡è¶³CPUçš„ä¸€æ¬¡è®¿å­˜ã€‚å‡è®¾P-Bank=64bitå³64ä½æ•°æ®æ€»çº¿ï¼Œè€Œå†…å­˜é¢—ç²’Chipçš„ä½å®½æ˜¯8bitï¼Œåˆ™8ä¸ªchipç»„æˆäº†ä¸€ä¸ªRankã€‚</p>
</li>
<li><p>Chipï¼š1ä¸ªchipå¤§å¤šæ˜¯4bit/8bit/16bitç­‰ï¼Œå¤šä¸ªchipç»„æˆä¸€ä¸ªrankï¼Œé…åˆå®Œæˆä¸€æ¬¡è®¿é—®çš„ä½å®½è¦æ±‚ã€‚è¿™å°±æ˜¯é¢—ç²’ã€‚å†…å­˜é¢—ç²’å…±äº«åœ°å€å’Œå‘½ä»¤æ€»çº¿ï¼Œå„è‡ªæœ‰è‡ªå·±çš„æ•°æ®æ€»çº¿</p>
</li>
<li><p>Bankï¼šä¹Ÿç§°Logic Banké€»è¾‘Bankï¼Œä¸ç‰©ç†bankçš„æ¦‚å¿µç›¸å¯¹åº”ã€‚ç”±äºæˆæœ¬ã€æŠ€æœ¯ä»¥åŠSDRAMå·¥ä½œåŸç†çš„é™åˆ¶ï¼Œåšä¸€ä¸ªå…¨å®¹é‡çš„Bankä¸å¤ªç°å®ï¼ˆå¯»å€å†²çªï¼‰ï¼Œæ‰€ä»¥åœ¨å¯»å€æ—¶éœ€è¦å…ˆé€‰ä¸­Bankï¼Œåœ¨æ ¹æ®è¡Œåˆ—é€‰ä¸­æ•°æ®ã€‚DDR2ã€DDR3å·²ç»æœ‰8ä¸ªBank </p>
</li>
<li><p>row/columnï¼šè¡Œåˆ—ï¼Œå­˜å‚¨çš„æœ€å°å•å…ƒï¼Œæ¯ä¸€ä¸ªè¡Œåˆ—äº¤å‰ç‚¹å­˜å‚¨äº†1bitçš„æ•°æ®ã€‚</p>
</li>
</ul>
<p>ç¬¼ç»Ÿä¸Šè®²ä»å¤§åˆ°å°ä¸ºï¼š<strong>channel ï¼ DIMM ï¼ rank ï¼ chip ï¼ bank ï¼ row/column</strong>ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/images/computerSystem/storage/ddr-1.png" alt="image"></p>
<h2 id="å†…å­˜å¤§å°"><a href="#å†…å­˜å¤§å°" class="headerlink" title="å†…å­˜å¤§å°"></a>å†…å­˜å¤§å°</h2><p>SDRAMæ€»å­˜å‚¨å®¹é‡ = è¡Œæ•° x åˆ—æ•° x L-Bankæ•°é‡  = å­˜å‚¨å•å…ƒä¸ªæ•° x å­˜å‚¨å•å…ƒå®¹é‡ï¼ˆ4bit/8bit/16bitï¼‰</p>
<h1 id="åŸºæœ¬ç»“æ„"><a href="#åŸºæœ¬ç»“æ„" class="headerlink" title="åŸºæœ¬ç»“æ„"></a>åŸºæœ¬ç»“æ„</h1><blockquote>
<p>Tipsï¼šåˆ¤æ–­MOSç®¡æ˜¯Næ²Ÿé“è¿˜æ˜¯Pæ²Ÿé“ï¼Œé‡ŒNå¤–Pï¼Œå³ç®­å¤´æŒ‡å‘Gæ˜¯NMOSï¼Œåä¹‹æ˜¯PMOS</p>
</blockquote>
<p>åˆ©ç”¨äº†ç”µå®¹èƒ½å¤Ÿä¿æŒç”µè·åŠå…¶å……æ”¾ç”µçš„ç‰¹æ€§ã€‚ç›®å‰å¸‚åœºæœ€å¸¸ç”¨çš„å­˜å‚¨1bitæ•°æ®çš„SDRAMçš„ç»“æ„æ˜¯ç”±ä¸€ä¸ªMOSç®¡ã€ä¸€ä¸ªç”µå®¹å’Œä¸¤æ ¹å¯¼çº¿ç»„æˆçš„ã€‚ç”µå®¹ä¸€æ®µè¿æ¥æ™¶ä½“ç®¡ä¸€ç«¯å¦ä¸€ç«¯æ¥åœ°ã€å­—çº¿è¿æ¥MOSç®¡çš„æ …æï¼Œä½çº¿è¿æ¥åˆ°æ™¶ä½“ç®¡é€šé“çš„å¦ä¸€ç«¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/images/computerSystem/storage/ddr-2.png" alt="image"></p>
<ul>
<li><p>å†™</p>
<p>å½“å­—çº¿ï¼ˆWLï¼‰ç”µå‹ä¸ºé€»è¾‘1æ—¶å¼€å…³æ‰“å¼€ï¼Œå­˜å‚¨å•å…ƒé€‰é€šï¼Œå¦‚æœæ­¤æ—¶ä½çº¿ï¼ˆBLï¼‰ä¸ºé«˜ç”µå‹ï¼Œåˆ™å‘ç”µå®¹ä¸­å……ç”µï¼Œåˆ™å°±æ˜¯å‘å­˜å‚¨å•å…ƒä¸­å†™1ï¼›ç›¸åå¦‚æœWL=1ï¼ŒBL=0ç”µå®¹æ”¾ç”µï¼Œè¿™å°±æ˜¯å‘å­˜å‚¨å•å…ƒä¸­å†™0</p>
</li>
<li><p>è¯»</p>
<p>å½“å­—çº¿ï¼ˆWLï¼‰ç”µå‹ä¸ºé€»è¾‘1æ—¶å¼€å…³æ‰“å¼€ï¼Œæ­¤æ—¶åœ¨ä½çº¿ä¸Šè¿æ¥ç”µé‡è®¡å°±å¯ä»¥æµ‹é‡ç”µå®¹ä¸­å­˜å‚¨çš„çš„å€¼ã€‚å¦‚æœç”µå®¹æ”¾ç”µï¼Œé‚£ä¹ˆå°±è¡¨ç¤ºè¿™ä¸ªå•å…ƒé‡ŒåŸæ¥å­˜çš„å€¼æ˜¯ 1ï¼Œå¦‚æœç”µå®¹ä¸æ”¾ç”µï¼Œåˆ™è¡¨ç¤ºåŸæ¥çš„å€¼æ˜¯ 0ã€‚å¯è§å½“DRAMè¿›è¡Œæ•°æ®è¯»å–çš„æ—¶å€™ä¼šä½¿å­˜å‚¨å•å…ƒä¸­çš„1å˜æˆ0ï¼Œæ˜¯æœ‰ç ´åæ€§çš„ï¼Œè€Œå®é™…ä¸­æˆ‘ä»¬éœ€è¦è¯»å‡ºç»§ç»­ä¿æŒæ•°æ®æˆ–ç”µè·ï¼Œåé¢æœ‰å¯¹æ­¤çš„è§£å†³åŠæ³•ï¼ˆæ„Ÿåº”æ”¾å¤§å™¨ï¼‰</p>
</li>
</ul>
<p>å½“å­—çº¿å…³é—­çš„æ—¶å€™å°±ä¸è¿›è¡Œä»»ä½•è¯»å†™æ“ä½œäº†ï¼Œæ™¶ä½“ç®¡ä¹Ÿç´§è·Ÿç€è¢«å…³é—­ï¼Œç”µå®¹å™¨ä¸ä½çº¿éš”ç¦»ä»è€Œä¿å­˜äº†ä¹‹å‰å†™å…¥çš„æ•°æ®æˆ–ç”µè·ã€‚ä½†æ˜¯ç”±äºæ™¶ä½“ç®¡ååˆ†å°ï¼Œå­˜å‚¨åœ¨ç”µå®¹å™¨ä¸­çš„ç”µè·ä¼šåœ¨é€šé“ä¸Šæ…¢æ…¢æ³„éœ²ï¼Œå› æ­¤åˆéœ€è¦å¦å¤–çš„æŠ€æœ¯æ¥å¯¹æ­¤è¿›è¡Œä¿®å¤ï¼ˆRechargeï¼‰</p>
<h1 id="å·¥ä½œåŸç†"><a href="#å·¥ä½œåŸç†" class="headerlink" title="å·¥ä½œåŸç†"></a>å·¥ä½œåŸç†</h1><p>ä¸‹å›¾æ˜¯å¯¹ä¸€ä¸ªbankçš„ä¸€éƒ¨åˆ†ä½œå›¾è¿›è¡Œè¯´æ˜ã€‚è¡Œè¯‘ç å™¨ã€åˆ—é€‰æ‹©å¤ç”¨å™¨ä¹‹æ‰€ä»¥è¿™æ ·è®¾è®¡æ˜¯å› ä¸ºï¼šå½“æ•°æ®è¿›è¡Œè¯»å†™çš„æ—¶å€™ï¼Œåªéœ€è¦æ‰“å¼€æŸä¸€ä¸ªå›ºå®šè¡Œï¼ˆå…¶å®ƒè¡Œå…³é—­ï¼‰å³å¯ï¼Œè¿™æ ·å­è¯¥è¡Œæ‰€åœ¨çš„ç”µå®¹å°†è¿æ¥åˆ°ä½çº¿ä¸Šï¼Œè€Œåœ¨è¿›è¡Œåˆ—é€‰æ‹©çš„æ—¶å€™ï¼Œç”±äºæ˜¯è¿›è¡Œå¤šæ¯”ç‰¹çš„é€‰æ‹©ï¼ˆ4bit/8bitï¼‰æ‰€ä»¥è¦è¿™é‡Œçš„åˆ—å¤šè·¯å¤ç”¨å™¨ç›¸å½“äºåˆ—ä¸­çš„ç¬¬å‡ ç»„ï¼ˆç»„æ•°*ä½å®½ï¼‰</p>
<p><img src="/images/computerSystem/storage/ddr-3.png" alt="image"></p>
<h2 id="è¯»-x2F-å†™"><a href="#è¯»-x2F-å†™" class="headerlink" title="è¯»/å†™"></a>è¯»/å†™</h2><h3 id="é€šç”¨æµç¨‹"><a href="#é€šç”¨æµç¨‹" class="headerlink" title="é€šç”¨æµç¨‹"></a>é€šç”¨æµç¨‹</h3><blockquote>
<p>é¢„å……ç”µç”µå‹æ ¹æ®DDRæ¯ä¸€ä»£æ˜¯æœ‰æ‰€ä¸åŒçš„ï¼Œä½†ä¸€å®šæ˜¯å……ç”µç”µå‹çš„ä¸€åŠ</p>
</blockquote>
<ol>
<li>é€‰æ‹©bankï¼›</li>
<li>å…³é—­æ‰€æœ‰è¡Œï¼›å…³é—­æ‰€æœ‰å­—çº¿ï¼Œéš”ç¦»æ‰€æœ‰ç”µå®¹</li>
<li>é¢„å……ç”µï¼›å°†æ‰€æœ‰ä½çº¿çš„ç”µå‹å‡å€¼ä¾›ç”µç”µå‹ä¸€åŠï¼ˆDDR5ï¼š0.55Vï¼›DDR4ï¼š0.6Vï¼›DDR3ï¼š0.75Vï¼‰</li>
<li>è¡Œé€‰æ‹©ï¼›å­—çº¿ä¸Šç”µæ‰“å¼€MOSç®¡å½¢æˆçš„å¼€å…³ï¼Œç”µå®¹è¿æ¥åˆ°å¯¹åº”çš„ä½çº¿</li>
<li>åˆ—é€‰æ‹©ï¼›ä½çº¿é€šè¿‡å¤šè·¯å¤ç”¨é€‰æ‹©å™¨è¿æ¥åˆ°æ•°æ®çº¿ä¸Š</li>
</ol>
<h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><ul>
<li><p>è¯»ï¼ˆä¿è¯æ•°æ®ä¸ä¸¢å¤±ï¼‰</p>
<p>è¡Œé€‰æ‹©æ—¶ï¼Œå½“å­—çº¿é€‰ä¸­åï¼Œè¯¥è¡Œæ‰€åœ¨çš„ç”µå®¹è¢«è¿æ¥åˆ°å¯¹åº”çš„ä½çº¿ã€‚å¦‚æœç”µå®¹å­˜å‚¨çš„æ•°æ®æ˜¯1ï¼ˆç”µå®¹å‹å·®æ˜¯ä¾›ç”µç”µå‹1.1 / 1.2 / 1.4ï¼‰ï¼Œç”±äºä½çº¿é¢„å……ç”µåç”µå‹è‡³ä¾›ç”µç”µå‹çš„ä¸€åŠï¼Œæ‰€ä»¥ç”µè·å°†ä»ç”µå®¹æµå‘ä½çº¿ï¼Œè¿›è€Œä½çº¿ç”µå‹å¢åŠ ï¼Œè¿™æ—¶ä½çº¿ä¸‹é¢æ‰€è¿æ¥çš„æ„Ÿåº”æ”¾å¤§å™¨èƒ½æ„Ÿå—åˆ°è¿™ç§è½»å¾®çš„å˜åŒ–æˆ–æ‰°åŠ¨ï¼Œå¹¶æ”¾å¤§è¿™ä¸€å˜åŒ–ï¼Œå°†ä½çº¿ç”µå‹å†å¢åŠ åˆ°ä¾›ç”µç”µå‹ï¼ˆ1.1 / 1.2 / 1.4ï¼‰ï¼›ç›¸åï¼Œå¦‚æœå­˜å‚¨çš„æ˜¯0ï¼Œç”µè·å°†ä»ä½çº¿æµå‘ç”µå®¹ï¼Œä½çº¿ç”µå‹é™ä½ï¼Œæ„Ÿåº”æ”¾å¤§å™¨æ”¾å¤§è¿™ä¸€å˜åŒ–ï¼Œå°†ä½çº¿ç”µå‹é™ä½è‡³0Vã€‚è¿™æ ·å°±ä¿è¯äº†æ—¢èƒ½å¤Ÿé€šè¿‡ä½çº¿è¯»å–æ•°æ®åˆä¿è¯ç”µå®¹æ•°æ®ä¸ä¸¢å¤±</p>
</li>
<li><p>å†™</p>
<p>å†™æµç¨‹ä¸è¯»ç±»ä¼¼ï¼Œä½†å½“è¦å†™å…¥çš„æ•°æ®â€“&gt;æ•°æ®æ€»çº¿â€“&gt;å†™é©±åŠ¨å™¨å™¨â€“&gt;å¤šè·¯é€‰æ‹©å¤ç”¨å™¨â€“&gt;æ„Ÿåº”æ”¾å¤§å™¨â€”&gt;ä½çº¿ è¿™æ ·æµç¨‹ä¸‹æ¥çš„æ—¶å€™ï¼Œç”±äºå†™é©±åŠ¨å™¨çš„å­˜åœ¨ï¼Œå®ƒæ¯”æ„Ÿåº”æ”¾å¤§å™¨å¼ºå¤§çš„å¤šï¼Œè¿™å°†ä¼šå¯¼è‡´å†™é©±åŠ¨å™¨å‡ºæ¥çš„æ•°æ®ç›´æ¥è¦†ç›–æ‰ä½çº¿ä¸ŠåŸæœ‰çš„æ•°æ®</p>
</li>
</ul>
<h3 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><p>å‡è®¾32ä½åœ°å€æ€»çº¿ï¼Œ32ä¸ªbankï¼Œ65536ï¼ˆ2^16^ï¼‰è¡Œï¼Œ8192ï¼ˆ2^13^ï¼‰åˆ—ï¼Œ8bitddré¢—ç²’</p>
<ul>
<li>0-4ï¼Œ5ä½åœ°å€å°†é€‰æ‹©æŸä¸ªbank</li>
<li>è¡Œå…³é—­ + é¢„å……ç”µ</li>
<li>5-21ï¼Œ16ä½é€‰æ‹©æŸä¸ªè¡Œ</li>
<li>22-31ï¼Œ10bité€‰æ‹©æŸä¸ªç»„ï¼ˆæ¯ä¸€ç»„8åˆ—ï¼Œè¿™ä¸ªç”±L-bankä½å®½å†³å®šï¼‰</li>
</ul>
<h2 id="åˆ·æ–°Refresh"><a href="#åˆ·æ–°Refresh" class="headerlink" title="åˆ·æ–°Refresh"></a>åˆ·æ–°Refresh</h2><p>refreshæ¯ä¸€è¡Œçš„åˆ·æ–°æ—¶é—´æ˜¯50nsã€‚è€Œæ•´ä¸ªbankåˆ·æ–°çš„æ—¶é—´é—´éš”æ˜¯64ms/æ¬¡ï¼ˆå°äºç”µè·æ³„éœ²1-&gt;0çš„æœ€çŸ­æ—¶é—´ï¼‰</p>
<h3 id="ç›®çš„"><a href="#ç›®çš„" class="headerlink" title="ç›®çš„"></a>ç›®çš„</h3><p>ç”±äºSDRAMæœ€å°å­˜å‚¨å•å…ƒç”µè·¯å½¢å¼æ˜¯ç”µå®¹ï¼Œç”µå®¹æ˜¯æœ‰è‡ªæ”¾ç”µçš„ç‰¹æ€§ã€‚é•¿æ—¶é—´å­˜å‚¨ç”µå®¹ç”µè·ä¼šæ¼ç”µï¼Œæ•…éœ€è¦åˆ·æ–°å’Œé¢„å……ç”µè¿›è¡Œè¡¥å……ã€‚</p>
<h3 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h3><ul>
<li>è‡ªåŠ¨åˆ·æ–°ï¼ˆAuto Refreshï¼Œç®€ç§°AR/REFï¼Œéœ€è¦CKï¼ŒCKEé«˜ï¼‰</li>
<li>è‡ªåˆ·æ–°ï¼ˆSelf Refreshï¼Œç®€ç§°SR/SRE-SRFï¼ŒSDRAMå†…éƒ¨äº§ç”Ÿï¼Œä¸ä¾èµ–CKï¼ŒCKEä½ï¼Œç”¨äºä¼‘çœ æ¨¡å¼æˆ–ä½åŠŸè€—ï¼‰</li>
</ul>
<h3 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h3><ol>
<li>å…³é—­æ‰€æœ‰è¡Œ</li>
<li>é¢„å……ç”µ</li>
<li>æ‰“å¼€è¡Œï¼Œæ„Ÿåº”æ”¾å¤§å¹¶å¡«å……ç”µè·</li>
<li>ä»ç¬¬ä¸€è¡Œåˆ°æœ€åä¸€è¡Œé‡å¤ç¬¬3æ­¥éª¤</li>
</ol>
<h1 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h1><ul>
<li>CASï¼šColumn Address Selectï¼Œåˆ—åœ°å€é€‰æ‹©</li>
<li>RASï¼šRow Address Selectï¼Œè¡Œåœ°å€é€‰æ‹©</li>
<li>CAS Latencyï¼š(CLï¼‰CASå»¶è¿Ÿã€‚æŒ‡çš„æ˜¯ä»è¡Œæ‰“å¼€åˆ°åˆ°æ¥æ”¶åˆ°å­˜å‚¨åœ¨åˆ—ä¸­çš„æ•°æ®çš„æ—¶é—´</li>
<li>tRCDï¼šRAS to CAS Delay RAS-CASå»¶è¿Ÿï¼Œæ¿€æ´»æ—¶é—´ã€‚æŒ‡çš„æ˜¯åœ¨å­—çº¿å…¨éƒ¨å…³é—­ï¼Œä½çº¿è¢«é¢„å……ç”µçš„æƒ…å†µä¸‹ï¼Œæ‰“å¼€ä¸€è¡Œæ‰€éœ€è¦çš„æ—¶é—´</li>
<li>tRPï¼šRAS Precharge Time ï¼Œè¡Œé¢„å……ç”µæ—¶é—´ã€‚æŒ‡çš„æ˜¯å†æ‰“å¼€ä¸€è¡Œä¹‹å‰å¯¹ä½çº¿è¿›è¡Œé¢„å……ç”µçš„æ—¶é—´</li>
<li>tRASï¼šæ¿€æ´»ä¸€è¡Œå’Œæ¥ä¸‹æ¥é¢„å……ç”µä¹‹é—´çš„æ—¶é—´</li>
</ul>
<p><img src="/images/computerSystem/storage/ddr-4.png" alt="image"></p>
<h1 id="ä¼˜åŒ–-x2F-è®¿å­˜åŠ é€Ÿ"><a href="#ä¼˜åŒ–-x2F-è®¿å­˜åŠ é€Ÿ" class="headerlink" title="ä¼˜åŒ–/è®¿å­˜åŠ é€Ÿ"></a>ä¼˜åŒ–/è®¿å­˜åŠ é€Ÿ</h1><h2 id="è¡Œå‘½ä¸­"><a href="#è¡Œå‘½ä¸­" class="headerlink" title="è¡Œå‘½ä¸­"></a>è¡Œå‘½ä¸­</h2><p>åœ¨DRAMçš„è¯»å†™è¿‡ç¨‹ä¸­ï¼Œå…¶ä¸­æ¯”è¾ƒè€—æ—¶çš„æ­¥éª¤åº”è¯¥å°±æ˜¯è¡Œæ‰“å¼€ã€‚</p>
<p>å¯ä»¥è€ƒè™‘è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼šCPUç¬¬ä¸€æ¬¡è®¿å­˜æ˜¯åœ¨249è¡Œï¼Œç¬¬äºŒæ¬¡æ‰€éœ€è¦çš„æ•°æ®å¤§æ¦‚ç‡ä¹Ÿå¯èƒ½åœ¨249è¡Œï¼Œå› æ­¤åœ¨ç¬¬ä¸€æ¬¡å’Œç¬¬äºŒæ¬¡è®¿å­˜ä¸­é—´æˆ‘ä»¬å°±å¯ä»¥ä¸å…³é—­è¡Œäº†ï¼Œè€Œæ˜¯ç­‰åˆ°æ–°çš„è¡Œè®¿å­˜å†è¿›è¡Œæ•´ä¸ªè¯»å†™æ­¥éª¤ã€‚è¿›è€Œå°†ä¸€ä¸ªbankå†…çš„æƒ…å†µæ¨å¹¿åˆ°æ•´ä¸ªå†…å­˜é¢—ç²’ï¼Œæ¯ä¸€ä¸ªbankä¸Šéƒ½å­˜åœ¨ä¸€è¡Œæœªå…³é—­ï¼ˆå³ä¸Šæ¬¡è®¿å­˜æ•°æ®æ‰€åœ¨çš„è¡Œï¼‰ï¼Œè€Œå½“ä¸‹æ¬¡è®¿å­˜æ‰€åœ¨çš„è¡Œå¦‚æœæ‰“å¼€åˆ™æˆä¸ºRow Hitè¡Œå‘½ä¸­ï¼Œå¦‚æœæ²¡æœ‰ç§°ä¸ºRow Missï¼ˆå‚è€ƒã€5å‚æ•°ã€‘ç« èŠ‚çš„å›¾ç‰‡ï¼‰</p>
<h2 id="Burst-Buffer"><a href="#Burst-Buffer" class="headerlink" title="Burst Buffer"></a>Burst Buffer</h2><p>Burstï¼šçªå‘ï¼Œæ˜¯æŒ‡åœ¨åŒä¸€è¡Œä¸­ç›¸é‚»çš„å­˜å‚¨å•å…ƒè¿ç»­è¿›è¡Œæ•°æ®ä¼ è¾“çš„æ–¹å¼ï¼Œè¿ç»­ä¼ è¾“æ‰€æ¶‰åŠåˆ°å­˜å‚¨å•å…ƒï¼ˆåˆ—ï¼‰çš„æ•°é‡å°±æ˜¯çªå‘é•¿åº¦ï¼ˆBurst Lengthsï¼Œç®€ç§° BLï¼‰ã€‚ </p>
<p>å¦‚æœæ‰€ç¤ºå°±æ˜¯ä¸¤ä¸ª128bitçš„burst bufferï¼Œä¸Šç«¯è¿æ¥åˆ—é€‰æ‹©å³æ•°æ®æ®µï¼Œä¸‹é¢è¿æ¥è¯»å†™é©±åŠ¨å™¨ã€‚äººä»¬åªè¦æŒ‡å®šèµ·å§‹åˆ—åœ°å€ä¸çªå‘é•¿åº¦ï¼Œå†…å­˜å°±ä¼šä¾æ¬¡åœ°è‡ªåŠ¨å¯¹åé¢ ç›¸åº”æ•°é‡çš„å­˜å‚¨å•å…ƒè¿›è¡Œè¯»/å†™æ“ä½œè€Œä¸å†éœ€è¦æ§åˆ¶å™¨è¿ç»­åœ°æä¾›åˆ—åœ°å€ã€‚è¿™æ ·ï¼Œé™¤äº†ç¬¬ä¸€ç¬”æ•°æ®çš„ä¼ è¾“éœ€è¦è‹¥å¹²ä¸ªå‘¨æœŸï¼ˆä¸»è¦æ˜¯ä¹‹å‰çš„å»¶è¿Ÿï¼Œä¸€èˆ¬çš„æ˜¯ tRCD+CLï¼‰å¤–ï¼Œå…¶åæ¯ä¸ªæ•°æ®åªéœ€ä¸€ä¸ªå‘¨æœŸçš„å³å¯è·å¾—ã€‚</p>
<p>è‡³äº BL çš„æ•°å€¼ï¼Œä¹Ÿæ˜¯ä¸èƒ½éšä¾¿è®¾æˆ–åœ¨æ•°æ®è¿›è¡Œä¼ è¾“å‰ä¸´æ—¶å†³å®šã€‚ä¸€å®šè¦å‚è€ƒç›¸åº”çš„æ•°æ®æ‰‹å†Œè¿›è¡Œè®¾ç½®ï¼Œæ¯”è¾ƒå¸¸è§çš„è®¾å®šæ˜¯ 4 å’Œ 8ã€‚</p>
<p><img src="/images/computerSystem/storage/ddr-5.png" alt="image"></p>
<h2 id="æ„Ÿåº”æ”¾å¤§å™¨"><a href="#æ„Ÿåº”æ”¾å¤§å™¨" class="headerlink" title="æ„Ÿåº”æ”¾å¤§å™¨"></a>æ„Ÿåº”æ”¾å¤§å™¨</h2><ul>
<li><p>ä¼˜åŒ–æ–¹å¼</p>
<p>è®©æ¯ä¸€ä¸ªæ„Ÿåº”æ”¾å¤§å™¨ä¸Šç”±ä¸¤ä¸ªä½çº¿è¿æ¥åˆ°å…¶ä¸Šï¼Œè®©äº¤æ›¿æ’åˆ—çš„å­˜å‚¨å•å…ƒåˆ†åˆ«è¿æ¥åœ¨å·¦ä¾§å’Œå³ä¾§çš„ä½çº¿ã€‚äº¤å‰è€¦åˆåç›¸å™¨çš„å­˜åœ¨ä½¿å¾—ä¸€åŠçš„ä½çº¿å¤„äº1ï¼Œå¦ä¸€åŠå¤„äº0ï¼Œè¿™è¢«ç§°ä¸ºå·®åˆ†å¯¹</p>
</li>
<li><p>å¥½å¤„ï¼š</p>
<ol>
<li>é¢„å……ç”µæ—¶ï¼Œç”±äºå·®åˆ†å¯¹ä¸¤ä¾§ä¸€è¾¹æ˜¯0ï¼Œä¸€è¾¹æ˜¯1ï¼Œæ‰€ä»¥æ–­å¼€ä¸¤ä¸ªåç›¸å™¨ç„¶åé€šè¿‡ä¸‰æç®¡å°†ä¸¤ä¸ªä½çº¿è¿æ¥ï¼Œç”µå‹å°†é™ä½åˆ°ä¸­å€¼</li>
<li>æŠ—å™ªéŸ³</li>
<li>å‡å°‘ä½çº¿å¯„ç”Ÿç”µå®¹</li>
</ol>
</li>
</ul>
<p><img src="/images/computerSystem/storage/ddr-6.png" alt="image"></p>
<h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><blockquote>
<p>1ã€2é“¾æ¥ä¸ºåŒä¸€è§†é¢‘ï¼ŒåŒºåˆ«åœ¨äº1æ˜¯Youtubeè‹±æ–‡ç‰ˆï¼Œ2æ˜¯Bç«™ä¸­æ–‡è¯‘ç‰ˆ</p>
</blockquote>
<ol>
<li><a href="https://www.youtube.com/watch?v=7J7X7aZvMXQ&amp;t=831s">How does Computer Memory Work?</a></li>
<li><a href="https://www.bilibili.com/video/BV1vP411c7pt/?s">è®¡ç®—æœºå¦‚ä½•å·¥ä½œï¼Ÿ</a></li>
<li><a href="https://www.bilibili.com/video/BV1ZZ4y1M79G/">SDRAMä¸DDR2å­˜å‚¨å™¨åŸç†è¯¦è§£ã€FPGAåº”ç”¨åœºæ™¯ã€‘</a></li>
<li><a href="http://www.bdtic.com/datasheet/Micron/64Mb_x4_x8_x16SDRAM.pdf">ç¾å…‰SDRAM MT48LC2M32B2TG-7 æ•°æ®æ‰‹å†Œ</a></li>
</ol>
]]></content>
      <categories>
        <category>Computure System</category>
        <category>Storage</category>
        <category>DDR</category>
      </categories>
      <tags>
        <tag>storage system</tag>
        <tag>DDR</tag>
      </tags>
  </entry>
  <entry>
    <title>MESIåè®®çš„ä¼˜åŒ–ä¸å†…å­˜å±éšœ</title>
    <url>/2023/03/06/computerSystem/storage/MESI%E5%8D%8F%E8%AE%AE%E7%9A%84%E4%BC%98%E5%8C%96/</url>
    <content><![CDATA[<p>æ— è®ºæ˜¯è®¡ç®—æœºç¡¬ä»¶è¿˜æ˜¯è½¯ä»¶ï¼Œæ–°çš„æŠ€æœ¯çš„å‡ºç°çš„åˆè¡·ä¸€å®šæ˜¯ä¸ºäº†è§£å†³æŸé¡¹éœ€æ±‚ï¼Œè€Œéšä¹‹è€Œæ¥çš„å¯èƒ½ä¼šå¸¦æ¥æ–°çš„é—®é¢˜ï¼Œæ— æ‰€è°“è§£å†³å°±æ˜¯äº†ï¼</p>
<h1 id="MESIå¸¦æ¥çš„æ€§èƒ½é—®é¢˜"><a href="#MESIå¸¦æ¥çš„æ€§èƒ½é—®é¢˜" class="headerlink" title="MESIå¸¦æ¥çš„æ€§èƒ½é—®é¢˜"></a>MESIå¸¦æ¥çš„æ€§èƒ½é—®é¢˜</h1><p>ä»æœ¬è´¨ä¸Šæ¥è®²MESIåè®®è§£å†³çš„æ˜¯æ•°æ®çš„æ ¸é—´åŒæ­¥é—®é¢˜ï¼Œä½†æ˜¯ä¸¥æ ¼éµå®ˆMESIåè®®ä¸€å®šåˆä¼šå¸¦æ¥æ–°çš„é—®é¢˜ã€‚ä»¥ä¸‹ä¸¤ç§æƒ…å†µä¼šå†æ¬¡å¸¦æ¥æ€§èƒ½é—®é¢˜ï¼š</p>
<ol>
<li>æ›´æ–°SharedçŠ¶æ€çš„Cacheã€‚å½“æŸä¸ªç¼“å­˜è¡Œçš„çŠ¶æ€æ˜¯Sharedæ—¶ï¼ŒCPUæƒ³è¦ä¿®æ”¹è¯¥ç¼“å­˜è¡Œçš„æ•°æ®ï¼Œä¸€å®šä¼šäº§ç”Ÿæ€»çº¿äº‹ä»¶é€šçŸ¥å…¶å®ƒCPUå°†è¯¥ç¼“å­˜è¡Œå‰¯æœ¬çŠ¶æ€ç½®Invalidï¼Œå½“æ‹¥æœ‰è¯¥ç¼“å­˜è¡Œå‰¯æœ¬çš„CPUç¡®è®¤å¹¶å›å¤å®ƒâ€œInvalid acknowledgementâ€ä»¥åï¼Œå®ƒæ‰èƒ½è¿›è¡Œæ•°æ®æ›´æ–°ã€‚</li>
<li>æ›´æ–°InvalidçŠ¶æ€çš„Cacheã€‚å½“æŸä¸ªç¼“å­˜è¡Œçš„çŠ¶æ€æ˜¯Invalidæ—¶ï¼ŒCPUæƒ³è¦ä¿®æ”¹è¯¥ç¼“å­˜è¡Œçš„æ•°æ®ï¼Œä¸€å®šä¼šäº§ç”Ÿæ€»çº¿äº‹ä»¶ä»å…¶å®ƒCPUç”šè‡³æ˜¯ä¸»å­˜ä¸­åŠ è½½è¿›æœ€æ–°æ•°æ®ï¼Œè¿›è€ŒåŸºäºæœ€æ–°æ•°æ®è¿›è¡Œæ›´æ–°ã€‚</li>
</ol>
<h1 id="MESIåè®®ä¼˜åŒ–"><a href="#MESIåè®®ä¼˜åŒ–" class="headerlink" title="MESIåè®®ä¼˜åŒ–"></a>MESIåè®®ä¼˜åŒ–</h1><p>MESIåè®®ä»¥ä¸Šä¸¤ä¸ªç—›ç‚¹å¯ä»¥å‘ç°æ˜¯ç”±äºäº‹åŠ¡ä¸²è¡ŒåŒ–æ‰€å¸¦æ¥çš„è´Ÿé¢å½±å“ã€‚æ‰€ä»¥è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜çš„å…³é”®å°±æ˜¯ä½¿MESIåè®®çš„è¯·æ±‚å¼‚æ­¥åŒ–ï¼Œé‡Šæ”¾æ€»çº¿æé«˜å¹¶è¡Œåº¦ã€‚å› è€Œå°±æœ‰äº†åœ¨ç¡¬ä»¶ä¸Šå¢åŠ å†™ç¼“å­˜åŒºå’Œå¤±æ•ˆé˜Ÿåˆ—ä¸¤ç§æ–¹æ³•ã€‚</p>
<h2 id="å†™ç¼“å†²-Store-Buffer"><a href="#å†™ç¼“å†²-Store-Buffer" class="headerlink" title="å†™ç¼“å†² Store Buffer"></a>å†™ç¼“å†² Store Buffer</h2><p><img src="/images/computerSystem/storage/cache-9.png" alt="image"></p>
<p>åŸºäºä¹‹å‰çš„ç¼“å­˜ç»“æ„ï¼Œå¢åŠ å®ŒStore Bufferä¹‹åçš„ç»“æœå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚</p>
<p>æ•´ä¸ªåŒæ­¥è¿‡ç¨‹ï¼šCPUæƒ³è¦ä¿®æ”¹æŸä¸ªç¼“å­˜æ•°æ®ï¼Œé¦–å…ˆé€šè¿‡æ€»çº¿å¹¿æ’­è·å¾—æ€»çº¿æ‰€æœ‰æƒï¼Œå‘å‡ºä¿¡å·é€šçŸ¥å…¶å®ƒCPUéœ€è¦å°†è¯¥ç¼“å­˜å—æ•°æ®ç½®æ— æ•ˆï¼Œç„¶åå°†éœ€è¦æ›´æ–°çš„æ•°æ®æ”¾å…¥åˆ°Store Bufferã€‚è€Œæ­¤æ—¶å°±å¯ä»¥é‡Šæ”¾æ€»çº¿æ‰€æœ‰æƒå»åšå…¶å®ƒçš„äº‹æƒ…ä¸ç”¨ç­‰å¾…æ”¶åˆ°ACKï¼ˆæ•ˆç‡æé«˜åœ¨æ­¤ï¼‰ï¼Œç­‰å…¶å®ƒcpuéƒ½æ”¶åˆ°å†ç”±Store Bufferæ…¢æ…¢åšæ ¸é—´åŒæ­¥ï¼Œåˆ·å…¥Cacheçš„å€¼å³å¯</p>
<p>å½“CPUè¯»æ•°æ®æ—¶ï¼Œé¦–å…ˆä¼šå…ˆåœ¨Store Bufferä¸­æŸ¥è¯¢è®°å½•æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™ä¼šä»å†™ç¼“å†²åŒºä¸­ç›´æ¥è·å–ï¼Œè¿™ä¸€æœºåˆ¶å³æ˜¯ Store Fowardingã€‚</p>
<h2 id="å¤±æ•ˆé˜Ÿåˆ—-Invalid-Queue"><a href="#å¤±æ•ˆé˜Ÿåˆ—-Invalid-Queue" class="headerlink" title="å¤±æ•ˆé˜Ÿåˆ— Invalid Queue"></a>å¤±æ•ˆé˜Ÿåˆ— Invalid Queue</h2><p><img src="/images/computerSystem/storage/cache-10.png" alt="image"></p>
<p>åœ¨Store BufferåŸºç¡€ä¹‹ä¸Šï¼Œå¢åŠ å®ŒInvalid Queueä¹‹åçš„ç»“æ„å¦‚ä¸Šå›¾æ‰€ç¤º</p>
<p>å¤±æ•ˆé˜Ÿåˆ—çš„å­˜åœ¨å¯ä»¥è¯´æ˜¯æ›´å¥½çš„ä½¿Store Bufferå·¥ä½œã€‚å½“CPUæ”¶åˆ°ä½¿æŸä¸ªç¼“å­˜è¡Œå¤±æ•ˆçš„è¯·æ±‚æ—¶ï¼Œå¦‚æœè¿Ÿè¿Ÿä¸å›å¤ACKåˆ™å¯èƒ½å¯¼è‡´Store Bufferé‡Œæ•°æ®è¶Šæ¥è¶Šå¤šæœ€ç»ˆæº¢å‡ºï¼Œå› æ­¤Invalid Queueçš„å­˜åœ¨å¯ä»¥è¯´æ˜¯ä¸ºäº†å¹³è¡¡Store Bufferå†™å…¥é€Ÿåº¦å’Œæ”¶åˆ°ACKé€Ÿåº¦</p>
<p>è¿‡ç¨‹ï¼šå½“CPU Coreæ”¶åˆ°ä½¿æŸä¸ªcacheå¤±æ•ˆçš„æ¶ˆæ¯æ—¶ï¼Œå…ˆå›å¤ç¡®è®¤æ”¶åˆ°çš„æ¶ˆæ¯ï¼Œç„¶åå°†å¤±æ•ˆçš„æ•°æ®åŠ å…¥åˆ°Invalidate Queueä¸­ã€‚è€Œé˜Ÿåˆ—çš„å®å¤±æ•ˆçš„æ“ä½œç­‰å¾…ç©ºé—²æ—¶å€™åœ¨è¿›è¡Œå¤„ç†ã€‚</p>
<h1 id="å†…å­˜å±éšœ"><a href="#å†…å­˜å±éšœ" class="headerlink" title="å†…å­˜å±éšœ"></a>å†…å­˜å±éšœ</h1><h2 id="MESIä¼˜åŒ–ä¹‹åå¸¦æ¥çš„é—®é¢˜"><a href="#MESIä¼˜åŒ–ä¹‹åå¸¦æ¥çš„é—®é¢˜" class="headerlink" title="MESIä¼˜åŒ–ä¹‹åå¸¦æ¥çš„é—®é¢˜"></a>MESIä¼˜åŒ–ä¹‹åå¸¦æ¥çš„é—®é¢˜</h2><p>MESIåè®®æœ¬èº«å±äºå¼ºä¸€è‡´æ€§åè®®ï¼Œä½†æ˜¯ç»è¿‡æ€§èƒ½çš„ä¼˜åŒ–å˜æˆäº†å¼±ä¸€è‡´æ€§åè®®ï¼Œè¿™å°±å¯¼è‡´åœ¨æŸäº›ä¸­é—´çŠ¶æ€ä¸‹å¤šæ ¸CPUçš„æ•°æ®å¯èƒ½å¹¶ä¸ä¸€è‡´ã€‚</p>
<h3 id="Store-Buffer"><a href="#Store-Buffer" class="headerlink" title="Store Buffer"></a>Store Buffer</h3><p>ç”±äºStore Bufferçš„å¼•å…¥å°†éƒ¨åˆ†äº‹åŠ¡å˜æˆå¹¶è¡Œï¼Œè¿™å°±å°†å¯¼è‡´æ•°æ®çš„æ›´æ–°é¡ºåºå°†ä¸ä¼šä¸¥æ ¼æŒ‰ç…§ä»£ç é¡ºåºæ‰§è¡Œï¼Œè¿›è€Œå¯¼è‡´å…¶å®ƒCPUæ‹¿åˆ°æ­£ç¡®æ•°æ®çš„æ—¶æœºå»¶åã€‚ä¾‹å¦‚ï¼šCPUéœ€è¦é¡ºåºæ‰§è¡ŒAã€Bä¸¤æ¡å†™æŒ‡ä»¤ï¼ŒAåœ¨CPU0çš„ç¼“å­˜è¡ŒçŠ¶æ€æ˜¯Sï¼ŒBåœ¨CPU0çš„ç¼“å­˜è¡ŒçŠ¶æ€æ˜¯Eï¼Œæœ€ç»ˆçš„cacheå¯¹äºä¸¤æ¡æŒ‡ä»¤æ‰€å¯¹åº”çš„ä¸¤ä¸ªæ•°æ®çš„æ›´æ–°çš„é¡ºåºå¯èƒ½ä¸æ˜¯æˆ‘ä»¬æ‰€æœŸæœ›çš„</p>
<h3 id="Invalid-Queue"><a href="#Invalid-Queue" class="headerlink" title="Invalid Queue"></a>Invalid Queue</h3><p>CPU1åœ¨å›å¤ACKä¹‹åå®é™…å¹¶æ²¡æœ‰å¯¹æ•°æ®æ‰€åœ¨çš„ç¼“å­˜è¡Œç½®Invalidï¼Œè€Œæ˜¯æ”¾å…¥åˆ°é˜Ÿåˆ—ä¸­ã€‚å‡å¦‚æ­¤åˆ»CPU0æ›´æ–°äº†ç¼“å­˜è¡Œè¿™å°†å¯¼è‡´è¯¥æ•°æ®åœ¨ä¸¤ä¸ªæ ¸çš„cacheä¸Šè¡¨ç°ä¸ä¸€è‡´</p>
<h3 id="Reorder"><a href="#Reorder" class="headerlink" title="Reorder"></a>Reorder</h3><p>æŒ‡ä»¤é‡æ’åºä»æºå¤´ä¸Šå°±é€ æˆäº†æŒ‡ä»¤å®é™…æ‰§è¡Œçš„é¡ºåºä¸æˆ‘ä»¬ä»£ç æ‰€æœŸæœ›æ‰§è¡Œçš„é¡ºåºå­˜åœ¨å·®åˆ«ã€‚è€ŒReorderè®¾è®¡çš„æœ¬è´¨å®é™…ä¸Šæ˜¯ä¸ºäº†å¯¹æˆ‘ä»¬çš„ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œæé«˜cacheå‘½ä»¤ç‡ä»è€Œæé«˜æ‰§è¡Œæ•ˆç‡</p>
<ul>
<li>ç¼–è¯‘å™¨é‡æ’åº</li>
<li>CPUä¹±åºæ‰§è¡Œ</li>
</ul>
<h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>å…¶å®å¯¹äºä»¥ä¸ŠMESIä¼˜åŒ–å¸¦æ¥çš„é—®é¢˜å½’æ ¹ç»“åº•æ˜¯åœ¨å¤šæ ¸CPUä¸Šå¯¼è‡´æœ€ç»ˆç»“æœçš„åå·®ã€‚è¿›ä¸€æ­¥æ€è€ƒæ˜¯å¤šæ ¸CPUåŒæ—¶ä¿®æ”¹åŒä¸€ä¸ªå˜é‡æ—¶è€Œå¼•å‘çš„é—®é¢˜ï¼Œè€Œåœ¨å®é™…è¿‡ç¨‹ä¸­è¿™ç§æƒ…å†µæ˜¯æ¯”è¾ƒå°‘çš„ã€‚åœ¨æ•ˆç‡å’Œæå°‘æ•°æ•°æ®ä¸æ­£ç¡®ä¸¤è€…çš„è€ƒé‡ä¸‹ï¼Œç»§ç»­åŸºäºæ­¤è¿›è¡Œä¼˜åŒ–ï¼Œä½†æ˜¯ä¸æ˜¯ç¡¬ä»¶ä¼˜åŒ–è€Œæ˜¯é€šè¿‡è½¯ä»¶ç”±ç¨‹åºå‘˜ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚å› æ­¤åœ¨éœ€è¦æ ¸é—´çš„åŒæ­¥çš„æƒ…å†µä¸‹ï¼Œå¤šçº¿ç¨‹å¯¹äºæ•°æ®çš„ä¿®æ”¹å’Œå¯¹äºæ•°æ®çš„ä½¿ç”¨éœ€è¦å¼•èµ·æ³¨æ„ï¼Œåœ¨é€‚å½“çš„åœ°æ–¹æ·»åŠ å†…å­˜å±éšœ</p>
<p>å†…å­˜å±éšœï¼ˆMemory Barriersï¼‰å…¶å®å¯ä»¥ç†è§£ä¸ºä¸€é“å¢™ï¼Œå‰é¢çš„è¯»å†™æ“ä½œæ²¡æœ‰å®Œæˆåé¢çš„è¯»å†™æ“ä½œä¸èƒ½å‘ç”Ÿ</p>
<h2 id="è¯»å±éšœ"><a href="#è¯»å±éšœ" class="headerlink" title="è¯»å±éšœ"></a>è¯»å±éšœ</h2><p>æœ¬è´¨ï¼šè¯»å±éšœå‰åæŒ‡ä»¤çš„è¯»æ“ä½œä¸èƒ½ç¿»è¶Šå±éšœï¼å¼ºåˆ¶CPUåœ¨å±éšœå‰çš„è¯»æ“ä½œå¤„ç†åˆ°æ‰€æœ‰Invalid Queueä¸­çš„æ•°æ®ï¼Œè·å–åˆ°æœ€æ–°çš„æ•°æ®ã€‚</p>
<h2 id="å†™å±éšœ"><a href="#å†™å±éšœ" class="headerlink" title="å†™å±éšœ"></a>å†™å±éšœ</h2><p>æœ¬è´¨ï¼šå†™å±éšœå‰åæŒ‡ä»¤çš„å†™æ“ä½œä¸èƒ½ç¿»é˜…å±éšœï¼å¼ºåˆ¶CPUåœ¨å±éšœå‰çš„å†™æ“ä½œæ¸…ç©ºStore Bufferå†…å®¹ï¼Œå°†æ•°æ®æ›´æ–°è‡³cacheç”šè‡³ä¸»å­˜</p>
<h2 id="è¯»å†™å±éšœ"><a href="#è¯»å†™å±éšœ" class="headerlink" title="è¯»å†™å±éšœ"></a>è¯»å†™å±éšœ</h2><p>ä»¥ä¸Šä¸¤ç§å±éšœåªæœ‰åœ¨åŒºåˆ†è¯»å†™å±éšœçš„ä½“ç³»ç»“æ„é‡Œæ‰ä¼šæœ‰ä½œç”¨ï¼Œæ¯”å¦‚ alpha ç»“æ„ã€‚è€Œåœ¨ X86 å’Œ Arm ä¸­æ˜¯æ²¡æœ‰ä½œç”¨çš„ï¼Œè¿™æ˜¯å› ä¸º X86 é‡‡ç”¨çš„ TSO æ¨¡å‹ä¸å­˜åœ¨ç¼“å­˜ä¸€è‡´æ€§çš„é—®é¢˜ï¼Œè€Œ Arm åˆ™æ˜¯é‡‡ç”¨äº†å¦ä¸€ç§ç§°ä¸ºå•å‘å±éšœçš„åˆ†ç±»æ–¹å¼ã€‚</p>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ul>
<li><a href="https://zhuanlan.zhihu.com/p/375706879">ç¼“å­˜ä¸€è‡´æ€§ç¡¬æ ¸è®²è§£</a></li>
<li>ç¼–ç¨‹é«˜å¿…å­¦çš„å†…å­˜çŸ¥è¯†ï¼ˆæå®¢æ—¶é—´ æµ·çº³ï¼‰</li>
</ul>
]]></content>
      <categories>
        <category>Computure System</category>
        <category>Storage</category>
        <category>Cache</category>
      </categories>
      <tags>
        <tag>storage system</tag>
        <tag>Cache</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¼“å­˜ä¸€è‡´æ€§åè®®</title>
    <url>/2023/03/06/computerSystem/storage/%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7%E5%8D%8F%E8%AE%AE/</url>
    <content><![CDATA[<h1 id="å¯¼è¯­-cacheã€ä¸»å­˜ä¸CPUçš„é€šä¿¡"><a href="#å¯¼è¯­-cacheã€ä¸»å­˜ä¸CPUçš„é€šä¿¡" class="headerlink" title="å¯¼è¯­ - cacheã€ä¸»å­˜ä¸CPUçš„é€šä¿¡"></a>å¯¼è¯­ - cacheã€ä¸»å­˜ä¸CPUçš„é€šä¿¡</h1><p><img src="/images/computerSystem/storage/cache-6.png" alt="image"></p>
<p>å¦‚å›¾æ‰€ç¤ºï¼Œç§æœ‰Cacheæ˜¯æ¯ä¸ªå¤„ç†å™¨æ ¸å¿ƒæ‰€ç‰¹æœ‰çš„æ¯”å¦‚L1ã€L2ï¼Œå…±äº« Cacheæ˜¯æ‰€æœ‰å¤„ç†å™¨æ ¸å¿ƒçš„å…±äº«ç¼“å­˜æ¯”å¦‚L3ï¼Œè€Œæ•´ä½“Cacheä¸ä¸»å­˜çš„æ•°æ®äº¤äº’æ˜¯è¦é€šè¿‡æ€»çº¿è¿›è¡Œçš„ã€‚å½“ä¸¤ä¸ªæ ¸åŠ è½½äº†ä¸»å­˜çš„åŒä¸€å—ç¼“å­˜å‰¯æœ¬ï¼Œå…¶ä¸­ä¸€ä¸ªæ ¸è¿›è¡Œäº†æ•°æ®çš„æ›´æ”¹ï¼Œæ˜¯å¦è¦å†™å…¥ä¸»å­˜ï¼Ÿæ˜¯å¦è¦é€šçŸ¥ç»™å…¶å®ƒCPUæ ¸å¿ƒè¿›è¡Œä¿®æ”¹ï¼Ÿå› æ­¤å¯¹äºå¤šæ ¸CPUæ¥è®²ï¼Œç¼“å­˜åœ¨æé«˜æ•ˆç‡çš„åŒæ—¶ä¹Ÿå¸¦æ¥äº†ç¼“å­˜ä¸€è‡´æ€§çš„é—®é¢˜ï¼Œè€Œè¿™ä¸ªé—®é¢˜æ˜¯éœ€è¦è¿›è¡Œè§£å†³çš„</p>
<h1 id="æ ¸å¿ƒéœ€æ±‚"><a href="#æ ¸å¿ƒéœ€æ±‚" class="headerlink" title="æ ¸å¿ƒéœ€æ±‚"></a>æ ¸å¿ƒéœ€æ±‚</h1><p>ç¼“å­˜ä¸€è‡´æ€§æ ¸å¿ƒæ ¸å¿ƒéœ€è¦è§£å†³çš„é—®é¢˜å°±æ˜¯ï¼š<strong>å°†æœ¬CPUæ›´æ–°çš„æ•°æ®æœ‰æ•ˆçš„ä¼ æ’­åˆ°å…¶å®ƒCPUæœ¬åœ°ç¼“å­˜ä¸­</strong></p>
<p>è¿›ä¸€æ­¥å¯ä»¥æ€»ç»“æˆéœ€è¦éµä»ä¸¤ä¸ªç‰¹æ€§</p>
<ol>
<li>å†™ä¼ æ’­ï¼šCPU Coreçš„å¯¹å†…å­˜çš„å†™æ“ä½œï¼Œå…¶å®ƒCPU Coreå¯è§</li>
<li>äº‹åŠ¡ä¸²è¡ŒåŒ–ï¼šå…¶å®ƒCPU Coreçœ‹åˆ°çš„å†…å­˜çš„å†™æ“ä½œçš„é¡ºåºæ˜¯ä¸€è‡´çš„</li>
</ol>
<p>å†™ä¼ æ’­å¯ä»¥ä¿è¯ä¿®æ”¹çš„æ•°æ®èƒ½å¤Ÿä¼ æ’­ç»™å…¶å®ƒCPUï¼Œè€Œäº‹ç‰©ä¸²è¡ŒåŒ–åˆ™ä¿è¯æ•°æ®åœ¨å…¶å®ƒCPUå†…çš„æ­£ç¡®æ€§ã€‚æ¯”å¦‚CPUæœ‰3ä¸ªCoreï¼ŒCore1å°†xä¿®æ”¹ä¸º3ï¼ŒCore2å°†æ•°æ®ä¿®æ”¹ä¸º5ï¼Œä¸¤ä¸ªäº‹åŠ¡éœ€è¦åŒæ­¥åˆ°Core3åŒæ—¶Core1 Core2äº’ç›¸åŒæ­¥ï¼Œå¦‚æœä¸ä¿è¯ä¸²è¡Œï¼Œæœ€ç»ˆçš„æ•°æ®å¾ˆå¤§æ¦‚ç‡æ˜¯é”™è¯¯çš„</p>
<h1 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h1><h2 id="æ€»çº¿å—…æ¢"><a href="#æ€»çº¿å—…æ¢" class="headerlink" title="æ€»çº¿å—…æ¢"></a>æ€»çº¿å—…æ¢</h2><p><a href="https://www.inf.ed.ac.uk/teaching/courses/pa/Notes/lecture05-snooping.pdf">å—…æ¢ä¸€è‡´æ€§åè®®</a></p>
<p> æ€»çº¿é™¤äº†èƒ½åœ¨ä¸€ä¸ªä¸»æ¨¡å—å’Œä¸€ä¸ªä»æ¨¡å—ä¹‹é—´ä¼ è¾“æ•°æ®ï¼Œè¿˜æ”¯æŒä¸€ä¸ªä¸»æ¨¡å—å¯¹å¤šä¸ªä»æ¨¡å—å†™å…¥æ•°æ®ï¼Œè¿™ç§æ“ä½œå°±æ˜¯å¹¿æ’­ã€‚</p>
<p>å†™ä¼ æ’­çš„åŸåˆ™å°±æ˜¯å½“æŸä¸ª CPU æ ¸å¿ƒæ›´æ–°äº† Cache ä¸­çš„æ•°æ®ï¼Œè¦æŠŠè¯¥äº‹ä»¶å¹¿æ’­é€šçŸ¥åˆ°å…¶ä»–æ ¸å¿ƒï¼Œæœ€å¸¸â»…å®ç°çš„æ–¹å¼æ˜¯æ€»çº¿å—…æ¢(<strong>Bus Snooping</strong>)ã€‚å½“æŸä¸ªCPU Coreçš„ç¼“å­˜è¡Œæœ‰æ›´æ–°æ—¶ï¼Œéœ€è¦å°†æ‰€æœ‰çš„è¯»å†™æ“ä½œå¹¿æ’­åˆ°æ‰€æœ‰ CPU Coreï¼Œè€Œè™½ç„¶æ€»çº¿ä¸Šå…¶å®ƒCPU Coreçš„ç§æœ‰ç¼“å­˜ä¸ä¸€å®šæœ‰å¯¹åº”çš„ç¼“å­˜è¡Œï¼Œä½†ä¹Ÿè¦æ—¶åˆ»ç›‘è§†æˆ–ä¾¦å¬æ€»çº¿ï¼Œä»¥éªŒè¯å®ƒæ˜¯å¦å…·æœ‰æ‰€è¯·æ±‚æ•°æ®å—çš„å‰¯æœ¬ï¼Œå¦‚æœå­˜åœ¨ä½¿å¯¹åº”çš„ç¼“å­˜å‰¯æœ¬å¤±æ•ˆæˆ–æ›´æ–°ã€‚ä½¿ç”¨å¹¿æ’­çš„æ–¹å¼çœ‹ä¼¼ä¸€è§†åŒä»ï¼Œå®é™…è¿™æ ·åšå¤§å¤§å¢åŠ äº†æ€»çº¿çš„è´Ÿæ‹…ã€‚</p>
<h2 id="Directory-based-æœºåˆ¶"><a href="#Directory-based-æœºåˆ¶" class="headerlink" title="Directory-based æœºåˆ¶"></a>Directory-based æœºåˆ¶</h2><p><a href="https://courses.cs.washington.edu/courses/cse471/00au/Lectures/luke_directories.pdf">åŸºäºç›®å½•çš„ç¼“å­˜ä¸€è‡´æ€§åè®®</a></p>
<p>é’ˆå¯¹æ€»çº¿å—…æ¢çš„ç¼ºç‚¹ï¼Œ<strong>Directory-based æœºåˆ¶</strong>é‡‡ç‚¹å¯¹ç‚¹çš„ä¼ æ’­ï¼ŒåŸºäºç›®å½•æœºåˆ¶æ€»çº¿äº‹ä»¶åªä¼šä¼ ç»™è‡ªå·±æ„Ÿå…´è¶£çš„CPUã€‚è¿™æ˜¯å› ä¸ºæ‰€æœ‰ç¼“å­˜è¡Œçš„ä¿¡æ¯ï¼Œéƒ½è¢«è®°å½•åœ¨ directory ä¸­ã€‚æ¯”å¦‚ä¼šè®°å½•æ¯ä¸ªç¼“å­˜è¡Œå½“å‰éƒ½åœ¨é‚£äº›æ ¸çš„ç¼“å­˜ä¸­ï¼Œç›´æ¥å°†ç¼“å­˜è¡Œä¿®æ”¹çš„æ¶ˆæ¯å‘é€åˆ°é‚£äº›æ ¸ã€‚è¿™ä¹ˆåšçš„ä¹Ÿæœ‰ä¸ªç¼ºç‚¹æ˜¯æ¯æ¬¡æ€»çº¿çš„ä¼ è¾“éƒ½åˆ° directory åšä¸€æ¬¡æ£€æŸ¥ï¼Œäº§ç”Ÿè€—æ—¶ã€‚</p>
<h2 id="æ€»çº¿ä»²è£"><a href="#æ€»çº¿ä»²è£" class="headerlink" title="æ€»çº¿ä»²è£"></a>æ€»çº¿ä»²è£</h2><p>æ€»çº¿çš„ç‹¬å æ€§è¦æ±‚åŒä¸€æ—¶åˆ»æœ€å¤šåªæœ‰ä¸€ä¸ªä¸»æ¨¡å—å ç”¨æ€»çº¿ï¼Œå¤©ç„¶åœ°ä¼šå°†æ‰€æœ‰æ ¸å¿ƒå¯¹å†…å­˜çš„è¯»å†™æ“ä½œä¸²è¡ŒåŒ–ã€‚å¦‚æœå¤šä¸ªæ ¸å¿ƒåŒæ—¶å‘èµ·æ€»çº¿äº‹åŠ¡ï¼Œæ­¤æ—¶æ€»çº¿ä»²è£å•å…ƒä¼šå¯¹ç«äº‰åšå‡ºä»²è£ï¼Œæœªè·èƒœçš„äº‹åŠ¡åªèƒ½ç­‰å¾…è·èƒœçš„äº‹åŠ¡å¤„ç†å®Œæˆåæ‰èƒ½æ‰§è¡Œã€‚å¯¹äºå†™ç¼“å­˜æ¥è®²ï¼Œå¤šæ ¸å¹¶å‘çš„å†™äº‹ä»¶ä¼šé€šè¿‡<strong>æ€»çº¿ä»²è£æœºåˆ¶</strong>è½¬æ¢æˆä¸²è¡ŒåŒ–çš„å†™äº‹ä»¶åºåˆ—</p>
<h2 id="ç¼“å­˜å†™ç­–ç•¥"><a href="#ç¼“å­˜å†™ç­–ç•¥" class="headerlink" title="ç¼“å­˜å†™ç­–ç•¥"></a>ç¼“å­˜å†™ç­–ç•¥</h2><ul>
<li>å†™åˆ†é… Write Allocateï¼šè¦å†™å…¥çš„æ•°æ®ä¸åœ¨ç¼“å­˜ä¸­ï¼Œéœ€è¦å°†è¯¥æ•°æ®å¯¹åº”çš„å†…å­˜å—è¯»å…¥ç¼“å­˜ï¼›</li>
<li>å†™ä¸åˆ†é… Write Not Allocateï¼šè¦å†™å…¥çš„æ•°æ®ä¸åœ¨ç¼“å­˜ä¸­ï¼Œæ— éœ€å°†è¯¥æ•°æ®å¯¹åº”çš„å†…å­˜å—è¯»å…¥ç¼“å­˜ï¼Œè€Œæ˜¯ç›´æ¥å†™å…¥ä¸»å­˜ï¼›</li>
<li>å†™ç©¿ Write Throughï¼šå†™å…¥ç¼“å­˜åˆ°çš„æ•°æ®ç«‹é©¬ä¼ æ’­åˆ°ä¸»å­˜ï¼›</li>
<li>å†™å› Write Backï¼šå†™å…¥ç¼“å­˜çš„æ•°æ®ä¸ä¼šç«‹é©¬ä¼ æ’­åˆ°ä¸»å­˜ï¼Œè€Œæ˜¯è¯¥ç¼“å­˜å—è¢«æ›¿æ¢æ—¶æ‰æ›´æ–°ï¼›</li>
<li>å†™æ›´æ–° Write Updateï¼šæ¯æ¬¡ç¼“å­˜å†™å…¥æ–°å€¼ï¼Œå‘èµ·ä¸€æ¬¡æ€»çº¿è¯·æ±‚ï¼Œé€šçŸ¥å…¶å®ƒCPUå¦‚æœæ‹¥æœ‰è¯¥ç¼“å­˜å—çš„å‰¯æœ¬å°±æ›´æ–°ä¸ºæ–°çš„å€¼ï¼ˆéœ€è¦ä¼ æ–°çš„å€¼ï¼‰</li>
<li>å†™æ— æ•ˆ Write Invalidï¼šæ¯æ¬¡ç¼“å­˜å†™å…¥æ–°å€¼ï¼Œå‘èµ·ä¸€æ¬¡æ€»çº¿è¯·æ±‚ï¼Œé€šçŸ¥å…¶å®ƒCPUå¦‚æœæ‹¥æœ‰è¯¥ç¼“å­˜å—å‰¯æœ¬ç½®ä¸ºæ— æ•ˆçŠ¶æ€ï¼Œå¦‚æœæœªæ¥éœ€è¦åœ¨æ¥è¦æ–°çš„å€¼ï¼ˆä¸éœ€è¦ä¼ æ–°çš„å€¼ï¼‰</li>
</ul>
<h1 id="ç¼“å­˜ä¸€è‡´æ€§åè®®ç§ç±»"><a href="#ç¼“å­˜ä¸€è‡´æ€§åè®®ç§ç±»" class="headerlink" title="ç¼“å­˜ä¸€è‡´æ€§åè®®ç§ç±»"></a>ç¼“å­˜ä¸€è‡´æ€§åè®®ç§ç±»</h1><blockquote>
<p> è¯¥è¡¨æ ¼ç¿»è¯‘è‡ª <a href="https://people.eecs.berkeley.edu/~pattrsn/252F96/Lecture18.pdf">Snooping vs. Directory Based Coherency</a></p>
</blockquote>
<table>
<thead>
<tr>
<th>åå­—</th>
<th>åè®®ç±»å‹</th>
<th>å†…å­˜å†™ç­–ç•¥</th>
<th>åº”ç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>Write Once</td>
<td>å†™æ— æ•ˆ</td>
<td>ç¬¬ä¸€æ¬¡å†™ä¹‹åå†™å›</td>
<td>First snoopy protocol</td>
</tr>
<tr>
<td>Synapse N+1</td>
<td>å†™æ— æ•ˆ</td>
<td>å†™å›</td>
<td>1st cache-coherent MPs</td>
</tr>
<tr>
<td>Berkeley</td>
<td>å†™æ— æ•ˆ</td>
<td>å†™å›</td>
<td>ä¼¯å…‹åˆ© SPUR</td>
</tr>
<tr>
<td>Illinois</td>
<td>å†™æ— æ•ˆ</td>
<td>å†™å›</td>
<td>SGI Power and Challenge</td>
</tr>
<tr>
<td>â€œFireflyâ€</td>
<td>å†™å¹¿æ’­ï¼ˆå†™æ›´æ–°)</td>
<td>å†™å›ç§æœ‰ï¼Œå†™ç©¿å…±äº«</td>
<td>SPARCCenter 2000</td>
</tr>
<tr>
<td>MESI</td>
<td>å†™æ— æ•ˆ</td>
<td>å†™å›</td>
<td>å¥”è…¾ï¼ŒPowerPC</td>
</tr>
</tbody></table>
<h1 id="MESIåè®®"><a href="#MESIåè®®" class="headerlink" title="MESIåè®®"></a>MESIåè®®</h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>é€šè¿‡ç¼“å­˜ä¸€è‡´æ€§åè®®çš„ç§ç±»æ ¸åº”ç”¨åœºæ™¯æ¥çœ‹ï¼ŒMESIåº”ç”¨åœ¨Intelå¥”è…¾å¤„ç†å™¨å’ŒPowerPCä¸Šï¼Œå¯ä»¥è¯´æœ‰ç€å¾ˆå¹¿æ³›çš„åº”ç”¨äº†ã€‚</p>
<p>MESIæ˜¯å››ä¸ªå•è¯çš„é¦–å­—æ¯ç¼©å†™ï¼ˆModifiedï¼ŒExclusiveï¼ŒSharedï¼Œ Invalidï¼‰ï¼Œè¿™å››ä¸ªå•è¯ä»£è¡¨äº†å››ç§çŠ¶æ€ã€‚å› æ­¤å¯ä»¥ç¼“å­˜è¡Œå¯ä»¥ç”¨2bitæ¥å”¯ä¸€è¡¨å¾è¿™å››ç§çŠ¶æ€çš„æŸä¸€ç§çŠ¶æ€ã€‚</p>
<ul>
<li>Mï¼šModifiedï¼Œè¢«ä¿®æ”¹çš„ï¼ˆä¹Ÿå¯ä»¥ç§°ä¸ºDirty è„çš„ï¼‰ã€‚å½“å‰CPUå¯¹åº”çš„è¯¥ç¼“å­˜è¡Œæ•°æ®è¢«ä¿®æ”¹ï¼Œæ‹¥æœ‰æœ€æ–°æ•°æ®ï¼ˆprivate, != Memoryï¼‰</li>
<li>Eï¼šExclusiveï¼Œç‹¬äº«çš„ã€‚è¯¥ç¼“å­˜è¡Œåªå­˜åœ¨äºå½“å‰CPUä¸­ï¼Œå¹¶ä¸”æ•°æ®æœ‰æ•ˆï¼ˆå¹²å‡€ï¼‰(private, =Memory))</li>
<li>Sï¼šSharedï¼Œå…±äº«çš„ã€‚è¯¥ç¼“å­˜è¡Œä¹Ÿå­˜åœ¨äºå…¶å®ƒCPUä¸­ï¼Œå¹¶ä¸”æ•°æ®æœ‰æ•ˆï¼ˆå¹²å‡€ï¼‰(shared, =Memory)</li>
<li>Iï¼šInvalidï¼Œæ— æ•ˆçš„ã€‚å½“å‰CPUå†…çš„è¯¥ç¼“å­˜è¡Œæ•°æ®å¤±æ•ˆ(NULL)</li>
</ul>
<h2 id="çŠ¶æ€æœº"><a href="#çŠ¶æ€æœº" class="headerlink" title="çŠ¶æ€æœº"></a>çŠ¶æ€æœº</h2><blockquote>
<p>æœ¬éƒ¨åˆ†åŸºäºè¿›è¡Œé‡æ–°æ¢³ç†</p>
</blockquote>
<h3 id="æ¥è‡ªå¤„ç†å™¨çš„è¯·æ±‚"><a href="#æ¥è‡ªå¤„ç†å™¨çš„è¯·æ±‚" class="headerlink" title="æ¥è‡ªå¤„ç†å™¨çš„è¯·æ±‚"></a>æ¥è‡ªå¤„ç†å™¨çš„è¯·æ±‚</h3><ul>
<li>PrRdï¼šå¤„ç†å™¨è¯·æ±‚è¯»ä¸€ä¸ªç¼“å­˜å—</li>
<li>PrWt ï¼šå¤„ç†å™¨è¯·æ±‚å†™ä¸€ä¸ªç¼“å­˜å—</li>
</ul>
<p><img src="/images/computerSystem/storage/cache-7.png" alt="image"></p>
<ul>
<li><p>Mï¼šå”¯ä¸€ä¸”æ•°æ®ï¼=memoryï¼ˆæœ€æ–°æ•°æ®ï¼‰ã€‚è¯»å†™ä¾ç„¶æ˜¯æœ€æ–°æ•°æ®ï¼ˆï¼= memoryï¼‰</p>
</li>
<li><p>Eï¼šå”¯ä¸€ä¸”æ•°æ®=memoryã€‚è¯»ä¸å½±å“çŠ¶æ€ï¼Œå†™åˆ™ä¸ä¸»å­˜æ•°æ®ä¸ä¸€è‡´ç½®M</p>
</li>
<li><p>Sï¼šå…±äº«ä¸”æ•°æ®=memoryã€‚è¯»ä¸å½±å“çŠ¶æ€ï¼Œå†™åˆ™å°†æ‹¥æœ‰æœ€æ–°æ•°æ®ç½®Mï¼ŒåŒæ—¶äº§ç”Ÿæ€»çº¿äº‹åŠ¡é€šçŸ¥å…¶å®ƒå¤„ç†å™¨è¦å†™è¯¥ç¼“å­˜</p>
</li>
<li><p>Iï¼šæ— æ•ˆçš„ï¼Œä¸€å®šCache Missã€‚è¯»é¦–å…ˆå°†æ•°æ®åŠ è½½è¿›ç¼“å­˜ï¼Œäº§ç”ŸBusRdçš„æ€»çº¿äº‹åŠ¡ï¼Œå†…å­˜æ§åˆ¶å™¨å“åº”è¯·æ±‚ï¼ŒåŒæ—¶å¦‚æœå‘ç°å…¶å®ƒå¤„ç†å™¨ä¹Ÿæ‹¥æœ‰è¯¥ç¼“å­˜å—å‰¯æœ¬åˆ™ç½®Sï¼Œå¦‚æœæ²¡æœ‰ç½®Eï¼›å†™åˆ™äº§ç”ŸBusRdxçš„æ€»çº¿äº‹åŠ¡ï¼Œç”±äºæ‹¥æœ‰æœ€æ–°æ•°æ®çŠ¶æ€ç½®M</p>
</li>
</ul>
<h3 id="æ¥è‡ªæ€»çº¿ï¼ˆå…¶å®ƒå¤„ç†å™¨ï¼‰çš„è¯·æ±‚"><a href="#æ¥è‡ªæ€»çº¿ï¼ˆå…¶å®ƒå¤„ç†å™¨ï¼‰çš„è¯·æ±‚" class="headerlink" title="æ¥è‡ªæ€»çº¿ï¼ˆå…¶å®ƒå¤„ç†å™¨ï¼‰çš„è¯·æ±‚"></a>æ¥è‡ªæ€»çº¿ï¼ˆå…¶å®ƒå¤„ç†å™¨ï¼‰çš„è¯·æ±‚</h3><ul>
<li><p>BusRdï¼šæ€»çº¿ä¾¦å¬åˆ°å…¶å®ƒå¤„ç†å™¨è¯·æ±‚è¯»ä¸€ä¸ªç¼“å­˜å—</p>
</li>
<li><p>BusRdXï¼šæ€»çº¿ä¾¦å¬åˆ°å…¶å®ƒå¤„ç†å™¨è¯·æ±‚å†™ä¸€ä¸ªè‡ªå·±æ²¡æœ‰ç¼“å­˜å‰¯æœ¬çš„ç¼“å­˜å—</p>
</li>
<li><p>BusUpgrï¼šæ€»çº¿ä¾¦å¬åˆ°å…¶å®ƒå¤„ç†å™¨è¯·æ±‚å†™æœ¬åœ°ç¼“å­˜ï¼ˆè¯¥å¤„ç†å™¨æ‹¥æœ‰çš„ç¼“å­˜å—ï¼‰</p>
</li>
<li><p>Flushï¼šæ€»çº¿ä¾¦å¬åˆ°å…¶å®ƒå¤„ç†å™¨è¯·æ±‚å†™å›ä¸€ä¸ªç¼“å­˜å—åˆ°ä¸»å­˜ï¼ˆcache to memoryï¼‰</p>
</li>
<li><p>FlushOptï¼šæ€»çº¿ä¾¦å¬åˆ°å…¶å®ƒå¤„ç†å™¨è¯·æ±‚å°†ä¸€ä¸ªç¼“å­˜å—é€šè¿‡æ€»çº¿çš„æ–¹å¼å‘é€å¦å¤–ä¸€ä¸ªå¤„ç†å™¨ï¼ˆcache to cacheï¼‰</p>
<p><img src="/images/computerSystem/storage/cache-8.png" alt="image"></p>
</li>
<li><p>Mï¼šå”¯ä¸€ä¸”æ•°æ®ï¼=memoryï¼ˆæœ€æ–°æ•°æ®ï¼‰ã€‚ BusRdè¯´æ˜å…¶å®ƒå¤„ç†å™¨è¦è¯»ï¼Œåˆ™éœ€è¦å†™ä¼ æ’­å°†æ•°æ®å†™åˆ°ä¸»å­˜ï¼Œå› ä¸ºå…¶å®ƒå¤„ç†å™¨è¯»æ‰€ä»¥æ•°æ®=memoryä¸”å…±äº«ç½®çŠ¶æ€Sï¼›å½“BusRdxæˆ–BusUpgrè¯´æ˜å…¶å®ƒå¤„ç†å™¨è¦å†™ï¼Œè¿™ä¸¤ç§æƒ…å†µæ— è®ºå‘èµ·è¯·æ±‚çš„å¤„ç†å™¨æœ‰æ²¡æœ‰ç¼“å­˜ä¸€å®šä¸æ˜¯æœ€æ–°çš„æ‰€ä»¥ä¸€å®šäº§ç”ŸFlushçš„æ€»çº¿äº‹åŠ¡ï¼Œå¹¶ä¸”å…¶å®ƒå¤„ç†å™¨å†™å®Œå°±ä¸æ˜¯æœ€æ–°çš„äº†ç½®I</p>
</li>
<li><p>Eï¼šå”¯ä¸€ä¸”æ•°æ®=memoryã€‚BusRdè¯´æ˜å…¶å®ƒå¤„ç†å™¨è¦è¯»ï¼Œæˆ‘çš„æ•°æ®å·²ç»æ˜¯æœ€æ–°çš„äº†æ‰€ä»¥äº§ç”ŸFlushOptæ€»çº¿äº‹åŠ¡ï¼Œå°†è¯¥ç¼“å­˜å—ä¼ èµ°å¹¶ç½®çŠ¶æ€Sï¼›å…¶å®ƒå¤„ç†å™¨å†™æœ€ç»ˆç»“æœä¸€å®šæ˜¯æˆ‘çš„ç§æœ‰ç¼“å­˜æ— æ•ˆç½®Iï¼Œä½†æ˜¯å¦‚æœå‘èµ·æ€»çº¿äº‹åŠ¡çš„å¤„ç†å™¨æ²¡æœ‰è¯¥ç¼“å­˜æˆ‘éœ€è¦äº§ç”ŸFlushOptçš„æ€»çº¿äº‹åŠ¡å°†æ•°æ®ä¼ è¾“ï¼Œå¦åˆ™ä¸äº§ç”Ÿæ€»çº¿äº‹åŠ¡</p>
</li>
<li><p>Sï¼šå…±äº«ä¸”æ•°æ®=memoryã€‚BusRdè¯´æ˜å…¶å®ƒå¤„ç†å™¨è¦è¯»ï¼Œæˆ‘çš„æ•°æ®æ˜¯æœ€æ–°çš„äº†æ‰€ä»¥äº§ç”ŸFlushOptæ€»çº¿äº‹åŠ¡ï¼Œå°†è¯¥ç¼“å­˜å—ä¼ èµ°ä¿æŒSçŠ¶æ€ï¼›å…¶å®ƒå¤„ç†å™¨å†™æœ€ç»ˆç»“æœä¸€å®šæ˜¯æˆ‘çš„ç§æœ‰ç¼“å­˜æ— æ•ˆç½®Iï¼Œä½†æ˜¯å¦‚æœå‘èµ·æ€»çº¿äº‹åŠ¡çš„å¤„ç†å™¨æ²¡æœ‰è¯¥ç¼“å­˜æˆ‘éœ€è¦äº§ç”ŸFlushOptçš„æ€»çº¿äº‹åŠ¡å°†æ•°æ®ä¼ è¾“ï¼Œå¦åˆ™ä¸äº§ç”Ÿæ€»çº¿äº‹åŠ¡</p>
</li>
<li><p>Iï¼šæ— æ•ˆçš„ã€‚å„ç§è¯»å†™æƒ…å†µéƒ½ä¸ä¼šå½±å“ï¼Œç»§ç»­ä¿æŒçŠ¶æ€</p>
</li>
</ul>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ul>
<li>ã€Šç¼–ç¨‹é«˜æ‰‹å¿…å­¦çš„å†…å­˜çŸ¥è¯†ã€‹æå®¢æ—¶é—´æµ·çº³</li>
<li><a href="https://juejin.cn/post/6844903965696458765">cacheä¸€è‡´æ€§é‡Œçš„MESIåè®®</a></li>
<li><a href="https://www.scss.tcd.ie/Jeremy.Jones/VivioJS/caches/MESIHelp.htm">MESIåŠ¨ç”»</a></li>
</ul>
]]></content>
      <categories>
        <category>Computure System</category>
        <category>Storage</category>
        <category>Cache</category>
      </categories>
      <tags>
        <tag>storage system</tag>
        <tag>Cache</tag>
      </tags>
  </entry>
  <entry>
    <title>CacheåŸç†</title>
    <url>/2023/02/15/computerSystem/storage/%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86/</url>
    <content><![CDATA[<h1 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h1><h2 id="å±€éƒ¨æ€§åŸç†"><a href="#å±€éƒ¨æ€§åŸç†" class="headerlink" title="å±€éƒ¨æ€§åŸç†"></a>å±€éƒ¨æ€§åŸç†</h2><p>åœ¨å¤§å¤šæ•°ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼ŒCPUå¯¹äºå†…å­˜çš„è®¿é—®ä¼šè¡¨ç°å‡ºæ˜æ˜¾çš„å€¾å‘æ€§ï¼Œå…·ä½“ä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li>æ—¶é—´å±€éƒ¨æ€§ï¼šæ—¶é—´ç»´åº¦çœ‹ï¼Œè¢«å¼•ç”¨è¿‡çš„å†…å­˜ä½ç½®ï¼Œä¸è¿œçš„å°†æ¥å°†å¤§æ¦‚ç‡å†æ¬¡è¢«è®¿é—®</li>
<li>ç©ºé—´å±€éƒ¨æ€§ï¼šç©ºé—´ç»´åº¦çœ‹ï¼Œè¢«å¼•ç”¨è¿‡çš„å†…å­˜ä½ç½®ï¼Œä¸è¿œçš„å°†æ¥å®ƒé™„è¿‘çš„å†…å­˜ä½ç½®å°†å¤§æ¦‚ç‡è¢«è®¿é—®</li>
</ul>
<h2 id="ç¼“å­˜å—"><a href="#ç¼“å­˜å—" class="headerlink" title="ç¼“å­˜å—"></a>ç¼“å­˜å—</h2><blockquote>
<p>linuxæŸ¥çœ‹ç¼“å­˜ä¿¡æ¯å‘½ä»¤ï¼šgetconf -a | grep CACHE</p>
</blockquote>
<h3 id="æ¦‚å¿µ-1"><a href="#æ¦‚å¿µ-1" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><p>æ ¹æ®cacheçš„ä½œç”¨å¯çŸ¥cacheå½“ä¸­å­˜å‚¨çš„æ˜¯ä¸»å­˜çš„å‰¯æœ¬ï¼Œå…¶å¿…é¡»æ˜¯è¦å’Œä¸»å­˜è¿›è¡Œæ•°æ®äº¤æ¢çš„ã€‚åŸºäºæ•ˆç‡è§’åº¦è€ƒé‡ï¼Œæ ¹æ®ç¨‹åºå±€éƒ¨æ€§åŸç†ï¼ŒCPUæ˜¯ä¸ä¼šæŒ‰ç…§ä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªå­—èŠ‚è¿›è¡Œæ•°æ®çš„åŠ è½½è‡³ç¼“å­˜ä¸­ï¼Œè€Œæ˜¯æŒ‰å—è¿›è¡ŒåŠ è½½ï¼Œè€Œè¿™æ¯ä¸€å—å°±å«åšcache lineï¼Œä¹Ÿç§°ç¼“å­˜å—</p>
<ul>
<li>ç¼“å­˜å—ï¼ˆcache lineï¼‰ï¼Œç®¡ç†ç¼“å­˜ç»“æ„çš„æœ€å°å­˜å‚¨å•å…ƒï¼Œç›®å‰å¸¸ç”¨çš„æ˜¯64Bytesï¼ˆå†…å­˜ç³»ç»Ÿæ”¯æŒBurstè¯»/å†™æ•ˆç‡æ›´é«˜ï¼‰</li>
</ul>
<h3 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><img src="/images/computerSystem/storage/cache-3.png" alt="image"></p>
<ul>
<li>æ ‡è¯†ä½Vï¼šè¡¨ç¤ºè¯¥ç¼“å­˜å—æ˜¯å¦æœ‰æ•ˆ</li>
<li>æ ‡è¯†ä½Mï¼šè¡¨ç¤ºè¿™ä¸ªç¼“å­˜å—æ˜¯å¦è¢«ä¿®æ”¹ï¼Œä¹Ÿå°±æ˜¯è„ä½</li>
<li>Tagï¼šå’Œå†…å­˜å—åŒ¹é…çš„æ ‡è¯†</li>
<li>Dataï¼šç¼“å­˜æ•°æ®å†…å®¹</li>
</ul>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ Vã€Mã€Tagè¿™å‡ ä½æ˜¯ç”±ç¡¬ä»¶é—¨ç”µè·¯å®ç°çš„ï¼Œå¹¶ä¸å ç¼“å­˜ç©ºé—´ã€‚è€ŒDataæ‰æ˜¯çœŸæ­£çš„æ•°æ®éƒ¨åˆ†</p>
<h2 id="ç¼“å­˜å‘½ä¸­-x2F-ç¼ºå¤±"><a href="#ç¼“å­˜å‘½ä¸­-x2F-ç¼ºå¤±" class="headerlink" title="ç¼“å­˜å‘½ä¸­/ç¼ºå¤±"></a>ç¼“å­˜å‘½ä¸­/ç¼ºå¤±</h2><ul>
<li>Cache Hitï¼šè®¿å­˜æ—¶ï¼Œå¦‚æœæ‰€éœ€è¦çš„æ•°æ®åœ¨cacheä¸­åˆ™æˆä¸ºç¼“å­˜å‘½ä¸­</li>
<li>Cache Missï¼šè®¿å­˜æ—¶ï¼Œå¦‚æœæ‰€éœ€è¦çš„æ•°æ®ä¸åœ¨cacheä¸­åˆ™æˆä¸ºç¼“å­˜ç¼ºå¤±</li>
</ul>
<h1 id="ç¼“å­˜æ˜ å°„æ–¹å¼"><a href="#ç¼“å­˜æ˜ å°„æ–¹å¼" class="headerlink" title="ç¼“å­˜æ˜ å°„æ–¹å¼"></a>ç¼“å­˜æ˜ å°„æ–¹å¼</h1><blockquote>
<p>è§†é¢‘é“¾æ¥ï¼š<a href="https://www.bilibili.com/video/BV1Qd4y1J7XA">click here</a></p>
</blockquote>
<p>ä»æ¦‚å¿µä¸Šè®²ï¼Œé«˜é€Ÿç¼“å­˜æ˜¯ä¸€ä¸ªç›¸è”å­˜å‚¨å™¨ï¼ˆAssociative Memoryï¼‰ã€‚ç¡¬ä»¶ç”µè·¯å®ç°æ–¹å¼åŠæ˜ å°„ç­–ç•¥çš„ä¸åŒï¼Œç¼“å­˜çš„æ˜ å°„æ–¹å¼åˆ†ä¸ºä¸‰ç§ï¼š</p>
<ul>
<li>å…¨ç›¸è¿æ˜ å°„ï¼šä¸»å­˜å—å¯ä»¥æ˜ å°„åˆ°ä»»ä¸€ç¼“å­˜è¡Œï¼ˆç¼“å­˜åªæœ‰ä¸€ä¸ªç»„ï¼Œæ‰€æœ‰çš„å†…å­˜å—éƒ½æ”¾åœ¨è¿™ä¸€ä¸ªç»„çš„ä¸åŒè·¯ä¸Š)</li>
<li>ç›´æ¥ç›¸è¿æ˜ å°„ï¼šä¸»å­˜å—åªèƒ½æ˜ å°„åˆ°å›ºå®šçš„ç¼“å­˜è¡Œï¼ˆç¼“å­˜åªæœ‰ä¸€ä¸ªè·¯ï¼Œä¸€ä¸ªå†…å­˜å—åªèƒ½æ”¾ç½®åœ¨ç‰¹å®šçš„ç»„ä¸Šï¼‰</li>
<li>ç»„ç»„ç›¸è¿æ˜ å°„ï¼šä¸»å­˜å—åªèƒ½æ˜ å°„åˆ°å›ºå®šçš„ç¼“å­˜ç»„ï¼Œç»„å†…ä»»ä¸€ç¼“å­˜è¡Œï¼ˆç¼“å­˜åŒæ—¶ç”±å¤šä¸ªç»„å’Œå¤šä¸ªè·¯ï¼‰</li>
</ul>
<p>ç‰‡å¤–çš„é«˜é€Ÿç¼“å­˜é€šå¸¸æ˜¯ç›´æ¥æ˜ å°„çš„ï¼Œå› ä¸ºç»„ç›¸è”éœ€è¦æ›´å®½çš„æ¥å£ï¼Œå¯ä»¥å–å¾—å¤šä¸ªæ ‡ç­¾ï¼Œå¹¶å‘åŒ¹é…</p>
<h2 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h2><table>
<thead>
<tr>
<th>ç»„ç»‡æ–¹å¼</th>
<th>ç‰¹ç‚¹</th>
<th>åº”ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td>å…¨ç›¸è”æ˜ å°„</td>
<td>cacheåˆ©ç”¨ç‡é«˜<br>å—å†²çªä½<br>æ·˜æ±°ç®—æ³•å¤æ‚</td>
<td>å°å®¹é‡cache</td>
</tr>
<tr>
<td>ç›´æ¥ç›¸è¿æ˜ å°„</td>
<td>cacheåˆ©ç”¨ç‡ä½<br>å—å†²çªé«˜<br>æ·˜æ±°ç®—æ³•ç®€å•</td>
<td>å¤§å®¹é‡cache</td>
</tr>
<tr>
<td>ç»„ç›¸è”æ˜ å°„</td>
<td>cacheåˆ©ç”¨ç‡è¾ƒé«˜<br>å—å†²çªç‡è¾ƒä½<br>ç¡¬ä»¶å®ç°å¤æ‚</td>
<td>ä¸­ç­‰å®¹é‡cache</td>
</tr>
</tbody></table>
<h2 id="æ˜ å°„ç®—æ³•"><a href="#æ˜ å°„ç®—æ³•" class="headerlink" title="æ˜ å°„ç®—æ³•"></a>æ˜ å°„ç®—æ³•</h2><ul>
<li>å…¨ç›¸è”ï¼šcacheè¡Œå· = random</li>
<li>ç›´æ¥ç›¸è”ï¼šcacheè¡Œå· = å†…å­˜å—å· % cacheè¡Œæ•°</li>
<li>ç»„ç›¸è”ï¼šä¸»å­˜çš„æ•°æ®å—æ˜ å°„åˆ°Cacheç‰¹å®šç»„çš„ä»»æ„è¡Œï¼Œcacheç»„å·=ä¸»å­˜å—å· % cacheç»„æ•°</li>
</ul>
<h1 id="ç¼“å­˜å—æ›¿æ¢ç­–ç•¥"><a href="#ç¼“å­˜å—æ›¿æ¢ç­–ç•¥" class="headerlink" title="ç¼“å­˜å—æ›¿æ¢ç­–ç•¥"></a>ç¼“å­˜å—æ›¿æ¢ç­–ç•¥</h1><ul>
<li><p>éšæœºæ³•ï¼ˆRANDï¼‰</p>
<p>æ–¹æ³•ç®€å•ã€æ˜“äºå®ç°ï¼Œä½†å‘½ä¸­ç‡æ¯”è¾ƒä½ã€‚</p>
</li>
<li><p>å…ˆè¿›å…ˆå‡ºç®—æ³•ï¼ˆFIFOï¼‰</p>
<p>å…ˆè¿›å…ˆå‡ºæ–¹æ³•æ˜“äºå®ç°ï¼Œå‘½ä¸­ç‡æ¯”éšæœºæ³•å¥½äº›ã€‚</p>
</li>
<li><p>æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ç®—æ³•ï¼ˆLRUï¼ŒLeast Recently Usedï¼‰</p>
<p>å¯ä»¥æ¯”è¾ƒå¥½åœ°éµå¾ªç¨‹åºå±€éƒ¨æ€§åŸç†</p>
</li>
</ul>
<h1 id="ç¼“å­˜å†™ç­–ç•¥"><a href="#ç¼“å­˜å†™ç­–ç•¥" class="headerlink" title="ç¼“å­˜å†™ç­–ç•¥"></a>ç¼“å­˜å†™ç­–ç•¥</h1><h2 id="write-back-å†™å›"><a href="#write-back-å†™å›" class="headerlink" title="write back å†™å›"></a>write back å†™å›</h2><p>å°†è¦å†™å…¥çš„æ•°æ®ä¿ç•™åœ¨é«˜é€Ÿç¼“å­˜ä¸­ï¼Œå¹¶è¿›è¡Œæ ‡è®°ï¼ˆDirty / Modifiedï¼‰ã€‚åªæœ‰ç¼“å­˜å—è¢«æ›¿æ¢çš„æ—¶å€™æ‰ä¼šå°†æ•°æ®å†™å…¥ä¸»å­˜</p>
<p><img src="/images/computerSystem/storage/cache-4.png" alt="image"></p>
<h2 id="write-through-å†™é€-x2F-å†™ç©¿-x2F-å†™ç›´è¾¾"><a href="#write-through-å†™é€-x2F-å†™ç©¿-x2F-å†™ç›´è¾¾" class="headerlink" title="write through å†™é€/å†™ç©¿/å†™ç›´è¾¾"></a>write through å†™é€/å†™ç©¿/å†™ç›´è¾¾</h2><p>CPUæ€»æ˜¯å°†æ•°æ®ç›´æ¥å†™åˆ°ä¸»å†…å­˜ä¸­</p>
<blockquote>
<p>noteï¼šå¦‚æœç­‰å¾…å†™å†…å­˜å®Œæˆå¤„ç†å™¨çš„æ€§èƒ½ä¼šæ€¥å‰§ä¸‹é™ï¼Œé€šè¿‡å†™ç¼“å†²ï¼ˆWrite Bufferï¼‰ç¡¬ä»¶å¯ä»¥å¼¥è¡¥è¿™ä¸€é—®é¢˜ã€‚å°†éœ€è¦å†™å…¥çš„æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªFIFOé˜Ÿåˆ—ä¸­ï¼ˆWrite Bufferï¼‰ï¼Œç”±å†…å­˜æ§åˆ¶å™¨è¿›è¡Œå†™å…¥æ“ä½œ</p>
</blockquote>
<p><img src="/images/computerSystem/storage/cache-5.png" alt="image"></p>
<h2 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h2><blockquote>
<p>ç”±äºæ•ˆç‡åŸå› ï¼Œå†™æ›´æ–°å’Œå†™ä¸åˆ†é…è¿™ä¸¤ç§ç­–ç•¥åœ¨ç°å®ä¸­æ¯”è¾ƒå°‘å‡ºç°</p>
</blockquote>
<ol>
<li><p>CPU ä¹‹é—´çš„æ›´æ–°ç­–ç•¥</p>
<p>å½“æŸä¸ª CPU çš„ç¼“å­˜ä¸­æ‰§è¡Œå†™æ“ä½œï¼Œä¿®æ”¹å…¶ä¸­çš„æŸä¸ªå€¼æ—¶ï¼Œå…¶ä»– CPU çš„ç¼“å­˜æ‰€ä¿æœ‰è¯¥æ•°æ®å‰¯æœ¬çš„æ›´æ–°ç­–ç•¥åˆ†ä¸ºï¼šå†™æ›´æ–°ï¼ˆWrite Updateï¼‰å’Œå†™æ— æ•ˆï¼ˆWrite Invalidateï¼‰ã€‚</p>
</li>
<li><p>å†™ç¼“å­˜æ—¶æ•°æ®æ˜¯å¦è¢«åŠ è½½</p>
<p>å½“å‰è¦å†™å…¥çš„æ•°æ®ä¸åœ¨ç¼“å­˜ä¸­æ—¶ï¼Œæ ¹æ®æ˜¯å¦è¦å…ˆå°†æ•°æ®åŠ è½½åˆ°ç¼“å­˜ä¸­ï¼Œå†™ç­–ç•¥åˆ†ä¸ºï¼šå†™åˆ†é…ï¼ˆWrite Allocateï¼‰å’Œå†™ä¸åˆ†é…ï¼ˆNot Write Allocateï¼‰ã€‚</p>
</li>
</ol>
<h1 id="ç¼“å­˜æ•ˆç‡"><a href="#ç¼“å­˜æ•ˆç‡" class="headerlink" title="ç¼“å­˜æ•ˆç‡"></a>ç¼“å­˜æ•ˆç‡</h1><h2 id="è¡¡é‡æ ‡å‡†"><a href="#è¡¡é‡æ ‡å‡†" class="headerlink" title="è¡¡é‡æ ‡å‡†"></a>è¡¡é‡æ ‡å‡†</h2><p>ä¸¤ä¸ªå‚æ•°çš„ä¹˜ç§¯ï¼š</p>
<ol>
<li><strong>é«˜é€Ÿç¼“å­˜ç¼ºå¤±ç‡</strong>ï¼šcache miss / è¢«æ‰§è¡Œçš„æŒ‡ä»¤æ¬¡æ•°</li>
<li><strong>é«˜é€Ÿç¼“å­˜ç¼ºå¤±é‡å¡«çš„å¼€é”€</strong>ï¼šcpuæµæ°´çº¿é‡æ–°è®¡ç®—ä»ä¸»å­˜å–æ•°åˆ°ç¼“å­˜ä¸­çš„æ—¶é—´</li>
</ol>
<h2 id="cache-missçš„åŸå› ï¼Ÿ"><a href="#cache-missçš„åŸå› ï¼Ÿ" class="headerlink" title="cache missçš„åŸå› ï¼Ÿ"></a>cache missçš„åŸå› ï¼Ÿ</h2><blockquote>
<p>ã€Šsee mips runã€‹å¯¹äºä»¥ä¸‹ç¼ºå¤±ç±»å‹åˆ†åˆ«ç§°ä¸ºï¼šç¬¬ä¸€æ¬¡è®¿é—®ï¼›æŠ–åŠ¨ï¼›æ›¿æ¢</p>
</blockquote>
<ol>
<li>å¼ºåˆ¶ç¼ºå¤±ã€‚ç¬¬ä¸€æ¬¡å°†æ•°æ®å—è¯»å…¥åˆ°ç¼“å­˜æ‰€äº§ç”Ÿçš„ç¼ºå¤±ï¼Œä¹Ÿè¢«ç§°ä¸ºå†·ç¼ºå¤±ï¼ˆcold missï¼‰ï¼Œå› ä¸ºå½“å‘ç”Ÿç¼“å­˜ç¼ºå¤±æ—¶ï¼Œç¼“å­˜æ˜¯ç©ºçš„ï¼ˆå†·çš„ï¼‰ï¼›</li>
<li>å†²çªç¼ºå¤±ã€‚ç”±äºç¼“å­˜çš„ç›¸è¿åº¦æœ‰é™å¯¼è‡´çš„ç¼ºå¤±ï¼ˆæŒ‡åœ¨åŒä¸€ç»„å†…çš„ç¼ºå¤±ï¼‰ï¼›</li>
<li>å®¹é‡ç¼ºå¤±ã€‚ç”±äºç¼“å­˜å¤§å°æœ‰é™å¯¼è‡´çš„ç¼ºå¤±ï¼ˆæè¿°èŒƒå›´æ˜¯æ•´ä¸ªç¼“å­˜ï¼‰</li>
</ol>
<h2 id="å¦‚ä½•æé«˜åˆ©ç”¨ç‡ï¼Ÿ"><a href="#å¦‚ä½•æé«˜åˆ©ç”¨ç‡ï¼Ÿ" class="headerlink" title="å¦‚ä½•æé«˜åˆ©ç”¨ç‡ï¼Ÿ"></a>å¦‚ä½•æé«˜åˆ©ç”¨ç‡ï¼Ÿ</h2><ul>
<li>è½¯ä»¶<ol>
<li>ç¨‹åºæ›´å°ï¼›</li>
<li>è®©ç¨‹åºç»å¸¸æ‰§è¡Œçš„éƒ¨åˆ†æ›´å°ã€‚å¯¹äºä¸€ä¸ªç¨‹åºé”™è¯¯å¤„ç†/åˆå§‹åŒ–ä»£ç ç­‰éƒ¨åˆ†ä»£ç å‰¥ç¦»å‡ºæ¥ï¼Œæé«˜å‰©ä½™ç¨‹åºçš„ç¼“å­˜å‘½ä¸­ç‡ï¼›</li>
<li>å®‰æ’ç¨‹åºå°½é‡ä¸å‘ç”Ÿå†²çªç¼ºå¤±ï¼ˆæŠ–åŠ¨ï¼‰</li>
<li>ç›´åˆ°å¿…é¡»ç”¨åˆ°æ•°æ®æ—¶æ‰åœæ­¢CPUã€‚éé˜»å¡è¯»ã€‚å–æ•°æ“ä½œæ‰§è¡Œå®Œï¼Œç»§ç»­æ‰§è¡Œä¸ä¾èµ–è¯¥æ•°æ®çš„ä»£ç ï¼ˆæµæ°´çº¿ä¹±åº/åˆ†æ”¯æŒ‡ä»¤ç­‰ç­‰ï¼‰</li>
<li>å¤šçº¿ç¨‹CPU</li>
</ol>
</li>
<li>ç¡¬ä»¶<ol>
<li>ï¼ˆ1ï¼‰è®©é«˜é€Ÿç¼“å­˜å˜çš„æ›´å¤§ï¼ˆä»£ä»·ï¼‰</li>
<li>ï¼ˆ1ï¼‰å¢åŠ ç¼“å­˜ç›¸è¿åº¦ï¼ˆ4è·¯ä»¥ä¸Šæ•ˆæœå°±ä¸æ˜æ˜¾äº†ï¼Œæ›´é«˜è·¯ç›¸è¿ç¼“å­˜è®¾è®¡ç›®çš„åœ¨äºå…¶å®ƒåŸå› ï¼ˆé™ä½åŠŸè€—ï¼Œä¸ä½¿ç”¨æ—¶å…³æ‰æ•´è·¯ï¼‰ï¼‰</li>
<li>ï¼ˆ1ï¼‰å¢åŠ é¢å¤–å±‚æ¬¡çš„é«˜é€Ÿç¼“å­˜ï¼ˆL2 L3 cacheï¼‰</li>
<li>ï¼ˆ2ï¼‰å¢åŠ å¸¦å®½ï¼Œcpuä¸ä¸»å­˜ç‰©ç†ä½ç½®æ›´è¿‘ï¼ˆä»£ä»·ï¼‰</li>
<li>ï¼ˆ2ï¼‰å¢åŠ å†…å­˜burstå¸¦å®½ï¼ˆç°åœ¨å¾ˆå°‘ä½¿ç”¨ï¼‰</li>
<li>ï¼ˆ2ï¼‰å°½æ—©åœ°é‡å¯CPU</li>
<li>ï¼ˆ2ï¼‰<a href="https://oscpu.github.io/NutShell-doc/%E5%8A%9F%E8%83%BD%E9%83%A8%E4%BB%B6/cache.html">å…³é”®å­—ä¼˜å…ˆ</a></li>
</ol>
</li>
</ul>
<h1 id="ç®¡ç†ç¼“å­˜"><a href="#ç®¡ç†ç¼“å­˜" class="headerlink" title="ç®¡ç†ç¼“å­˜"></a>ç®¡ç†ç¼“å­˜</h1><blockquote>
<p>å¯¹äºMIPS CPUï¼ŒsynciæŒ‡ä»¤åšäº†ä»¥ä¸‹æ‰€æœ‰å·¥ä½œï¼ˆç”¨æˆ·ç‰¹æƒçº§ï¼‰</p>
</blockquote>
<p>ä¸Šç”µä¹‹åCPUçš„é«˜é€Ÿç¼“å­˜é˜µåˆ—å†…å®¹é€šå¸¸æ˜¯éšæœºçš„ã€‚å¼•å¯¼è½¯ä»¶è´Ÿè´£åˆå§‹åŒ–é«˜é€Ÿç¼“å­˜ï¼Œç³»ç»Ÿå¯åŠ¨å¹¶æ­£å¸¸è¿è¡Œåï¼Œåªæœ‰ä¸‰ç§æƒ…å†µCPUå¿…é¡»è¿›è¡Œå¹²é¢„ï¼š</p>
<ol>
<li><strong>DMAè®¾å¤‡ä»å†…å­˜å–æ•°æ®ä¹‹å‰</strong>ã€‚å¦‚æœæ˜¯Write Backå¼å†™ç­–ç•¥ï¼Œéœ€è¦å°†åœ¨é«˜é€Ÿç¼“å­˜ä¸­æœªå†™å…¥åˆ°ä¸»å­˜çš„æ•°æ®å†™å…¥å¾—åˆ°æ­£ç¡®æ•°æ®</li>
<li><strong>DMAè®¾å¤‡å†™æ•°æ®åˆ°å†…å­˜ä¹‹å‰</strong>ã€‚éœ€è¦å°†é«˜é€Ÿç¼“å­˜ä¸­å¯¹åº”çš„ç¼“å­˜è¡Œçš„æ ‡å¿—ä½ç½®Invalidï¼ˆæ— æ•ˆçš„ï¼‰</li>
<li><strong>å†™æŒ‡ä»¤</strong>ã€‚å½“cpuè‡ªèº«å†™ä¸€éƒ¨åˆ†æŒ‡ä»¤åˆ°å†…å­˜ç”¨äºç¨åæ‰§è¡Œæ—¶ï¼Œé¦–å…ˆéœ€è¦ä¿è¯æŒ‡ä»¤å†™å…¥åˆ°å†…å­˜ä¸­ï¼Œå…¶æ¬¡ä¿è¯ I-Cache ä¸­å¯¹åº”çš„æŒ‡ä»¤æ— æ•ˆ</li>
</ol>
<blockquote>
<p>è§†é¢‘æ¨èï¼š</p>
<p><a href="https://www.bilibili.com/video/BV1QA411t7Uv">Cacheåœ°å€æ˜ å°„ä¸å˜æ¢æ–¹æ³•</a></p>
<p><a href="https://www.bilibili.com/video/BV1h3411h7kV">ä¸€å¼ å›¾è§£å†³ä¸»å­˜å’Œcacheçš„æ˜ å°„é—®é¢˜</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Computure System</category>
        <category>Storage</category>
        <category>Cache</category>
      </categories>
      <tags>
        <tag>storage system</tag>
        <tag>Cache</tag>
      </tags>
  </entry>
  <entry>
    <title>Cacheç®€ä»‹</title>
    <url>/2023/02/15/computerSystem/storage/%E7%BC%93%E5%AD%98%E7%AE%80%E4%BB%8B/</url>
    <content><![CDATA[<p>éšç€æŠ€æœ¯çš„ä¸æ–­è¿›æ­¥ï¼ŒèŠ¯ç‰‡åˆ¶ç¨‹å’Œå·¥è‰ºæœ‰äº†æå¤§çš„å‘å±•ï¼Œç›¸åº”çš„CPUçš„è®¡ç®—èƒ½åŠ›è¶Šæ¥è¶Šå¼ºã€‚ä½œä¸ºç¨‹åºå‘˜ï¼Œæˆ‘ä»¬å¸Œæœ›æœ‰æ— çº¿èµ„æºçš„å¿«é€Ÿå­˜å‚¨å™¨å¯ä»¥ä½¿ç”¨ï¼Œä½†æ˜¯å¿«é€Ÿå­˜å‚¨å™¨çš„æˆæœ¬éå¸¸é«˜æ˜‚ï¼Œå› æ­¤è®¿å­˜å˜æˆäº†è®¡ç®—æœºç³»ç»Ÿçš„æ€§èƒ½ç“¶é¢ˆã€‚ä¸ºäº†å¹³è¡¡cpuè¿è¡Œé€Ÿåº¦ä¸è®¿å­˜é€Ÿåº¦ä¹‹é—´çš„å·®å¼‚ç¼“å­˜è¢«è®¾è®¡å‡ºæ¥ï¼</p>
<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>ç¼“å†²å­˜å‚¨å™¨ï¼Œç®€ç§°ç¼“å­˜(cache)ï¼Œç”¨äºå­˜å‚¨å¯èƒ½é¢‘ç¹è®¿é—®çš„æ•°æ®ã€‚</p>
<p>ç¼“å­˜ç»“åˆäº†å¯„å­˜å™¨é€Ÿåº¦å¿«å’Œå†…å­˜é€ ä»·ä½çš„ä¼˜ç‚¹ï¼Œå› æ­¤é€šè¿‡ç¼“å­˜çš„è®¾è®¡ä½¿æ•´ä¸ªå­˜å‚¨ç³»ç»Ÿçš„æ€§èƒ½æ¥è¿‘å¯„å­˜å™¨ï¼Œå¹¶ä¸”æ¯å­—èŠ‚çš„æˆæœ¬éƒ½æ¥è¿‘å†…å­˜ï¼Œç”šè‡³æ˜¯ç£ç›˜ã€‚</p>
<p>é«˜é€Ÿç¼“å­˜çš„å·¥ä½œå°±æ˜¯å°†å†…å­˜ä¸­æœ€è¿‘è¯»å†™è¿‡çš„æ•°æ®åœ¨é«˜é€Ÿç¼“å­˜ä¸­ä¿ç•™ä¸€ä¸ª<strong>å¤‡ä»½</strong>ï¼Œä½¿è¿™äº›æ•°æ®èƒ½å¤Ÿå¿«é€Ÿåœ°è¿”å›ç»™CPU</p>
<h1 id="ç¡¬ä»¶å®ç°"><a href="#ç¡¬ä»¶å®ç°" class="headerlink" title="ç¡¬ä»¶å®ç°"></a>ç¡¬ä»¶å®ç°</h1><blockquote>
<p>æœ¬èŠ‚å†…å®¹å¤§å¤šå–è‡ªæå®¢æ—¶é—´ï¼Œã€Šç¼–ç¨‹é«˜æ‰‹å¿…å­¦çš„å†…å­˜çŸ¥è¯†ã€‹æµ·çº³</p>
</blockquote>
<p>ç¼“å­˜çš„ç»„æˆå•å…ƒæ˜¯SRAMï¼Œè€Œç›®å‰SRAMé€šå¸¸é‡‡ç”¨äº†6ç®¡å¼çš„å­˜å‚¨ç”µè·¯</p>
<p>ç®€å•æ¥è®²ï¼ŒSRAM å­˜å‚¨å•å…ƒçš„ç‰¹ç‚¹æ˜¯ä½¿ç”¨ 6 ä¸ªæ™¶ä½“ç®¡æ¥å®ç°ã€‚å…¶ä¸­ä¸¤ä¸ª P å‹ MOS ç®¡å’Œä¸¤ä¸ª N å‹ MOS ç®¡ç»„æˆä¸¤ä¸ªåç›¸å™¨ç”¨äºå­˜å‚¨ä¿¡æ¯ã€‚è¿˜æœ‰ä¸¤ä¸ªç”¨äºæ§åˆ¶å­˜å‚¨å•å…ƒæ˜¯å¦é€‰é€šã€‚6 ç®¡ SRAM çš„ç»“æ„æ¯”è§¦å‘å™¨ç®€å•ï¼Œé€Ÿåº¦ä¹Ÿæ¯”è¾ƒå¿«</p>
<h2 id="è¿æ¥å›¾"><a href="#è¿æ¥å›¾" class="headerlink" title="è¿æ¥å›¾"></a>è¿æ¥å›¾</h2><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒM1 å’Œ M3 ä¸¤ä¸ª MOS ç®¡ï¼Œæ˜¯ N æ²Ÿé“åœºæ•ˆåº”ç®¡ï¼Œåœ¨é«˜ç”µå‹æ—¶å¯¼é€šï¼›è€Œ M2 å’Œ M4 è¿™ä¸¤ä¸ª MOSï¼Œåˆ™æ˜¯ P æ²Ÿé“åœºæ•ˆåº”ç®¡ï¼Œåœ¨ä½ç”µå‹æ—¶å¯¼é€šã€‚æœ¬è´¨ä¸Šï¼ŒM1 å’Œ M2 ä¸€èµ·ç»„æˆäº†ä¸€ä¸ªéé—¨ï¼ŒM3 å’Œ M4 ä¸€èµ·ç»„æˆäº†å¦ä¸€ä¸ªéé—¨ï¼Œè¿™ä¸¤ä¸ªéé—¨çš„è¾“å‡ºäº’ä¸ºå¯¹æ–¹çš„è¾“å…¥ï¼Œè¿™æ ·ï¼Œä¸¤ä¸ªéé—¨å°±ç»„æˆäº†ä¸€ç§å¯ä»¥å­˜å‚¨æ¯”ç‰¹å€¼çš„ç”µè·¯ã€‚</p>
<p><img src="/images/computerSystem/storage/cache-0.png" alt="image"></p>
<h2 id="ç­‰æ•ˆå›¾"><a href="#ç­‰æ•ˆå›¾" class="headerlink" title="ç­‰æ•ˆå›¾"></a>ç­‰æ•ˆå›¾</h2><p><img src="/images/computerSystem/storage/cache-1.png" alt="image"></p>
<h2 id="è¯»å†™åŸç†"><a href="#è¯»å†™åŸç†" class="headerlink" title="è¯»å†™åŸç†"></a>è¯»å†™åŸç†</h2><p>å½“è¦è¯»å…¥SRAMæ•°æ®æ—¶ï¼Œå­—çº¿ (Word Line, WL) åŠ é«˜ç”µå¹³ï¼Œä½¿å¾—æ¯ä¸ªåŸºæœ¬å•å…ƒçš„ä¸¤ä¸ªæ§åˆ¶å¼€å…³M5ã€M6å¯¼é€šï¼Œå­˜å‚¨å•å…ƒä¸ä½çº¿ (Bit Line, BL) è¿é€šã€‚ä½çº¿ç”¨äºè¯»å–æˆ–å†™å…¥åŸºæœ¬å•å…ƒçš„ä¿å­˜çŠ¶æ€ã€‚</p>
<p>æˆ‘ä»¬å‡å®šå‚¨å­˜çš„å†…å®¹ä¸º 1ï¼Œå³åœ¨ Q å¤„çš„ç”µå¹³ä¸ºé«˜ã€‚è¯»å–å‘¨æœŸå¼€å§‹æ—¶ï¼Œä¸¤æ¡ä½çº¿é¢„å…ˆè®¾æˆé«˜ç”µå¹³ï¼Œéšåå­—çº¿ WL å˜æˆé«˜ç”µå¹³ï¼Œä½¿å¾—ä¸¤ä¸ªè®¿é—®æ§åˆ¶æ™¶ä½“ç®¡ M5 ä¸ M6 å¯¼é€šã€‚Q çš„é«˜ç”µå¹³ä½¿å¾—æ™¶ä½“ç®¡ M1 å¯¼é€šï¼Œè€Œ Q åä¸ BL åçš„é¢„å……å€¼ä¸åŒï¼Œä½¿å¾— BL åç»ç”± M1 ä¸ M5 æ”¾ç”µè€Œå˜æˆé€»è¾‘ 0ã€‚åœ¨ä½çº¿ BL ä¸€ä¾§ï¼ŒQ åçš„ä½ç”µå¹³ä½¿å¾— M4 å¯¼é€šï¼Œå†åŠ ä¸Š M6 é€šè·¯ï¼Œä½çº¿å°±è¿æ¥åˆ° VDD çš„é«˜ç”µå‹ã€‚</p>
<p>å¦‚æœå‚¨å­˜çš„å†…å®¹ä¸º 0ï¼Œç›¸åçš„ç”µè·¯çŠ¶æ€å°†ä¼šä½¿ BL åä¸º 1ï¼Œè€Œ BL ä¸º 0ã€‚è¿™æ—¶ï¼Œåªéœ€è¦ BL ä¸ BL åæœ‰ä¸€ä¸ªå¾ˆå°çš„ç”µä½å·®ï¼Œè¯»å–çš„æ”¾å¤§ç”µè·¯å°±ä¼šè¾¨è¯†å‡ºå“ªæ¡ä½çº¿æ˜¯ 1ï¼Œå“ªæ¡æ˜¯ 0ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æ•æ„Ÿåº¦è¶Šé«˜æ—¶ï¼Œè¯»å–çš„é€Ÿåº¦å°±è¶Šå¿«ã€‚</p>
<p>åœ¨å†™å…¥å‘¨æœŸå¼€å§‹æ—¶ï¼ŒæŠŠè¦å†™å…¥çš„çŠ¶æ€åŠ è½½åˆ°ä½çº¿ã€‚å¦‚æœè¦å†™å…¥ 0ï¼Œåˆ™è®¾ç½® BL åä¸º 1 ä¸” BL ä¸º 0ã€‚éšåå­—çº¿ WL åŠ è½½ä¸ºé«˜ç”µå¹³ï¼Œä½çº¿çš„çŠ¶æ€è¢«åŠ è½½è¿› SRAM çš„åŸºæœ¬å•å…ƒã€‚</p>
<h1 id="ç¼“å­˜åŸºç¡€"><a href="#ç¼“å­˜åŸºç¡€" class="headerlink" title="ç¼“å­˜åŸºç¡€"></a>ç¼“å­˜åŸºç¡€</h1><h2 id="é›†æˆæ–¹å¼"><a href="#é›†æˆæ–¹å¼" class="headerlink" title="é›†æˆæ–¹å¼"></a>é›†æˆæ–¹å¼</h2><ul>
<li>åˆ†å¸ƒå¼ç¼“å­˜ï¼šä¸€ä¸ªå¤„ç†å™¨å¯¹åº”ä¸€ä¸ªç¼“å­˜ï¼›</li>
<li>é›†ä¸­å¼ç¼“å­˜ï¼šå¤šä¸ªå¤„ç†å™¨ï¼ˆæ ¸ï¼‰å…±äº«ä¸€ä¸ªå†…å­˜ï¼›</li>
<li>æ··åˆå¼ç¼“å­˜ï¼šåœ¨ L3 é‡‡ç”¨é›†ä¸­å¼ç¼“å­˜ï¼Œåœ¨ L1 å’Œ L2 é‡‡ç”¨åˆ†å¸ƒå¼ç¼“å­˜ã€‚</li>
</ul>
<p><img src="/images/computerSystem/storage/cache-2.png" alt="image"></p>
<h2 id="ç¼“å­˜ç»“æ„"><a href="#ç¼“å­˜ç»“æ„" class="headerlink" title="ç¼“å­˜ç»“æ„"></a>ç¼“å­˜ç»“æ„</h2><blockquote>
<p>å†¯è¯ºä¾æ›¼æ¶æ„ï¼šæŒ‡ä»¤å’Œæ•°æ®æ··åˆå­˜å‚¨åœ¨åŒä¸€å­˜å‚¨å™¨</p>
<p>å“ˆå¼—æ¶æ„ï¼šæŒ‡ä»¤å’Œæ•°æ®ç‹¬ç«‹å­˜å‚¨ï¼Œåˆ†åˆ«æ”¾åœ¨ç¨‹åºå­˜å‚¨å™¨å’Œæ•°æ®å­˜å‚¨å™¨</p>
</blockquote>
<p>åœ¨cacheè®¾è®¡ä¹‹åˆï¼Œcpuä¸å†…å­˜ä¹‹é—´åªæœ‰ä¸€ä¸ªcacheã€‚éšç€èŠ¯ç‰‡å·¥è‰ºçš„æé«˜ï¼Œç°ä»£CPUé€šå¸¸é‡‡ç”¨äºŒçº§/ä¸‰çº§å¤šçº§ç¼“å­˜ç»“æ„ã€‚</p>
<ul>
<li>ä¸€çº§ç¼“å­˜ï¼ˆL1 Cacheï¼‰ï¼šåœ¨Coreå†…éƒ¨ï¼Œåˆ†ä¸ºæŒ‡ä»¤ç¼“å­˜ï¼ˆI-cacheï¼‰å’Œæ•°æ®ç¼“å­˜ï¼ˆD-cacheï¼‰ï¼ˆå†¯è¯ºä¾æ›¼æ¶æ„ï¼‰ã€‚å®¹é‡é€šå¸¸åœ¨32~256KBï¼Œé€Ÿåº¦3 cycles</li>
<li>äºŒçº§ç¼“å­˜ï¼ˆL2 Cacheï¼‰ï¼šå…·ä½“èŠ¯ç‰‡Coreå†…å¤–ä¸åŒã€‚å®¹é‡256KB~3MBä¸ç­‰ï¼Œé€Ÿåº¦11cyclesï¼ˆå“ˆå¼—æ¶æ„ï¼‰</li>
<li>ä¸‰çº§ç¼“å­˜ï¼ˆL3 Cacheï¼‰ï¼šåœ¨Coreå¤–éƒ¨ï¼Œæ‰€æœ‰CPUæ ¸å¿ƒå…±äº«ã€‚å®¹é‡æ›´å¤§ï¼Œé€Ÿåº¦25cyclesï¼ˆå“ˆå¼—æ¶æ„ï¼‰</li>
</ul>
<h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><blockquote>
<p><strong>ç»Ÿä¸€ç¼“å­˜ï¼š</strong> æŒ‡ä»¤å’Œæ•°æ®ç»Ÿä¸€å­˜æ”¾åœ¨ä¸€ä¸ªç¼“å­˜ä¸­</p>
<p><strong>åˆ†ç¦»ç¼“å­˜ï¼š</strong> æŒ‡ä»¤å’Œæ•°æ®åˆ†åˆ«å­˜æ”¾åœ¨ä¸åŒç¼“å­˜ä¸­</p>
</blockquote>
<h3 id="L1-é‡‡ç”¨åˆ†ç¦»ç¼“å­˜çš„åŸå› ï¼Ÿ"><a href="#L1-é‡‡ç”¨åˆ†ç¦»ç¼“å­˜çš„åŸå› ï¼Ÿ" class="headerlink" title="L1 é‡‡ç”¨åˆ†ç¦»ç¼“å­˜çš„åŸå› ï¼Ÿ"></a>L1 é‡‡ç”¨åˆ†ç¦»ç¼“å­˜çš„åŸå› ï¼Ÿ</h3><ol>
<li>æµæ°´çº¿è§’åº¦ã€‚å¯é¿å…å–æŒ‡å’Œæ‰§è¡Œæ—¶æœŸçš„è®¿å­˜å†²çªã€‚ åœ¨ CPU å†…æ ¸ä¸­ï¼Œå–æŒ‡å’Œè®¿å­˜æ˜¯ç”±ä¸¤ä¸ªä¸åŒçš„ç¡¬ä»¶å•å…ƒå®Œæˆçš„ã€‚å¦‚æœä½¿ç”¨ç»Ÿä¸€ç¼“å­˜ï¼Œå½“ CPU ä½¿ç”¨è¶…å‰æ§åˆ¶æˆ–æµæ°´çº¿æ§åˆ¶ï¼ˆå¹¶è¡Œæ‰§è¡Œï¼‰çš„æ§åˆ¶æ–¹å¼æ—¶ï¼Œä¼šå­˜åœ¨å–æŒ‡ä½œå’Œè®¿å­˜åŒæ—¶äº‰ç”¨åŒä¸€ä¸ªç¼“å­˜çš„æƒ…å†µï¼Œé™ä½ CPU è¿è¡Œæ•ˆç‡</li>
<li>cacheè¡Œä¸ºè§’åº¦ã€‚I-cacheå¤§å¤šæ˜¯é¡ºåºå–æŒ‡ï¼ŒæŒ‡ä»¤åªæœ‰è¯»æ²¡æœ‰å†™ï¼›D-cacheæ˜¯å–æ•°æ®å˜åŒ–è¾ƒå¤§ï¼Œæ•°æ®å¯è¯»å¯å†™ï¼Œæœ€é‡è¦çš„æ˜¯å†¯è¯ºä¾æ›¼çš„ç»“æ„æ˜¯æŒ‡ä»¤å’Œæ•°æ®åˆ†ç¦»ï¼ŒIå’ŒDåœ¨ä¸€èµ·åªæœ‰ç›¸äº’å¹²æ‰°</li>
<li>ç‰©ç†è®¾è®¡è§’åº¦ã€‚ä¸€å—cacheï¼ŒåŒæ—¶éœ€è¦æ•°æ®å’ŒæŒ‡ä»¤çš„è®¿é—®ï¼Œç«¯å£ä¸Šæ˜¯å¾ˆéš¾å®ç°çš„</li>
</ol>
<h3 id="L1åˆ†ç¦»ç¼“å­˜ã€L2ç»Ÿä¸€ç¼“å­˜ï¼Ÿ"><a href="#L1åˆ†ç¦»ç¼“å­˜ã€L2ç»Ÿä¸€ç¼“å­˜ï¼Ÿ" class="headerlink" title="L1åˆ†ç¦»ç¼“å­˜ã€L2ç»Ÿä¸€ç¼“å­˜ï¼Ÿ"></a>L1åˆ†ç¦»ç¼“å­˜ã€L2ç»Ÿä¸€ç¼“å­˜ï¼Ÿ</h3><ol>
<li>æˆæœ¬è§’åº¦ã€‚L1 cache miss æ€§èƒ½æŸå¤±ä¸å¢åŠ L2åˆ†ç¦»ç¼“å­˜çš„æˆæœ¬çš„å¹³è¡¡</li>
<li>ç‰©ç†è®¾è®¡è§’åº¦ã€‚åˆ†ç¦»å¼è®¾è®¡ä¼šå ç”¨é€»è¾‘ç”µè·¯çš„é¢ç§¯ä¸è®¾è®¡éš¾åº¦ï¼Œå¯¹äºL1è¿™ç§sizeæ¯”è¾ƒå°çš„é‡‡ç”¨åˆ†ç¦»å¼è®¾è®¡å¯ä»¥æ‰¿å—ï¼Œä½†æ˜¯å¯¹äºæ›´å¤§çš„Cacheå…¨é‡‡ç”¨åˆ†ç¦»è®¾è®¡ï¼Œæ— ç–‘è®¾è®¡éš¾åº¦å’Œé¢ç§¯éƒ½ä¼šåŠ å¤§</li>
<li>æ•ˆç‡è§’åº¦ã€‚åˆ†ç¦»ç¼“å­˜ä¸é€‚ç”¨æ‰€æœ‰æƒ…å†µï¼Œå¯¹äºæŒ‡ä»¤å’Œæ•°æ®å­˜æ”¾å¤§å°çš„éœ€æ±‚ä¸åŒï¼Œæ— æ³•åšåˆ°åŠ¨æ€è°ƒèŠ‚cacheçš„å¤§å°ï¼Œå¯èƒ½ä¼šæœ‰æµªè´¹</li>
</ol>
<h3 id="cacheæ”¾åœ¨ç‰‡å†…çš„ä¼˜åŠ¿ï¼Ÿ"><a href="#cacheæ”¾åœ¨ç‰‡å†…çš„ä¼˜åŠ¿ï¼Ÿ" class="headerlink" title="cacheæ”¾åœ¨ç‰‡å†…çš„ä¼˜åŠ¿ï¼Ÿ"></a>cacheæ”¾åœ¨ç‰‡å†…çš„ä¼˜åŠ¿ï¼Ÿ</h3><ol>
<li>ç‰‡å†…ç¼“å­˜ç‰©ç†è·ç¦»æ›´çŸ­ï¼Œç‰‡å†…ç¼“å­˜ä¸å–æŒ‡ä»¤å•å…ƒå’Œå–æ•°æ®å•å…ƒçš„ç‰©ç†è·ç¦»æ›´çŸ­ï¼Œé€Ÿåº¦æ›´å¿«ï¼›</li>
<li>ç‰‡å†…ç¼“å­˜ä¸å ç”¨ç³»ç»Ÿæ€»çº¿ï¼Œ ç‰‡å†…ç¼“å­˜ä½¿ç”¨ç‹¬ç«‹çš„ CPU ç‰‡å†…æ€»çº¿ï¼Œå¯ä»¥å‡è½»ç³»ç»Ÿæ€»çº¿çš„è´Ÿæ‹…ã€‚</li>
</ol>
<h3 id="ä¸éœ€è¦cacheçš„åœºæ™¯ï¼Ÿ"><a href="#ä¸éœ€è¦cacheçš„åœºæ™¯ï¼Ÿ" class="headerlink" title="ä¸éœ€è¦cacheçš„åœºæ™¯ï¼Ÿ"></a>ä¸éœ€è¦cacheçš„åœºæ™¯ï¼Ÿ</h3><p>51å•ç‰‡æœºã€cortex-M0ï¼ˆâ€“M4ï¼‰ç³»åˆ—ARMå¤„ç†å™¨éƒ½æ²¡æœ‰cache</p>
<ol>
<li>ä½åŠŸè€—ã€ä½æˆæœ¬å¤„ç†å™¨å¹¶ä¸”å·¥ä½œé¢‘ç‡ä¸é«˜ï¼ˆå‡ åå…†åˆ°å‡ ç™¾å…†ï¼‰çš„å¤„ç†å™¨ä¸éœ€è¦ï¼Œå¯èƒ½ç”šè‡³ä¸éœ€è¦SRAM</li>
<li>cacheæ— æ³•ä¿è¯å®æ—¶æ€§ï¼Œç¼“å­˜ç¼ºå¤±æ—¶å‘RAMåŠ è½½æ•°æ®çš„æ—¶é—´æ˜¯ä¸ç­‰çš„</li>
</ol>
]]></content>
      <categories>
        <category>Computure System</category>
        <category>Storage</category>
        <category>Cache</category>
      </categories>
      <tags>
        <tag>storage system</tag>
        <tag>Cache</tag>
      </tags>
  </entry>
</search>
